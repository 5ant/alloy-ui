AUI.add("aui-dialog-iframe",function(D){var H=D.Lang,E=D.ClassNameManager.getClassName,G="iframe",J=E("dialog",G,"node"),F=[J],I="<div></div>",C='<iframe class="{cssClass}" frameborder="0" id="{id}" name="{id}" src="{uri}"></iframe>';var B=D.Component.create({ATTRS:{closeOnEscape:{value:true},iframeCssClass:{setter:"_setIframeCssClass"},iframeId:{valueFn:function(){return D.guid();}},uri:{}},EXTENDS:D.Plugin.Base,NAME:G,NS:G,prototype:{initializer:function(K){var A=this;A._host=A.get("host");A.publish("load",{defaultFn:A._defaultLoadIframeFn});A.afterHostMethod("renderUI",A.renderUI);A.afterHostMethod("bindUI",A.bindUI);A.afterHostMethod("render",A._afterRender);},renderUI:function(){var A=this;A._previousBodyContent=A._host.get("bodyContent");var M=D.Node.create(I);var K=H.sub(C,{cssClass:A.get("iframeCssClass"),id:A.get("iframeId"),uri:A.get("uri")});var L=D.Node.create(K);M.append(L);A._host.set("bodyContent",M);A._bodyNode=A._host.bodyNode;A.node=L;},bindUI:function(){var A=this;A.afterHostEvent("heightChange",A._updateIframeSize,A);A.afterHostEvent("widthChange",A._updateIframeSize,A);A.after("uriChange",A._afterUriChange);A.node.on("load",D.bind(A.fire,A,"load"));},destructor:function(){var A=this;A._host.set("bodyContent",A._previousBodyContent);A.node.remove(true);},_adjustSize:D.cached(function(A){return((parseInt(A,10)||0)-5);}),_afterRender:function(){var A=this;A._bodyNode.plug(D.LoadingMask).loadingmask.show();},_afterUriChange:function(K){var A=this;A._uiSetUri(K.newVal);},_defaultLoadIframeFn:function(M){var A=this;var L=A.node;try{var O=L.get("contentWindow.document");O.get("documentElement").setStyle("overflow","visible");var K=O.get("body");K.addClass("controlPanel-popup");L.set("height",K.get("scrollHeight"));if(A.get("closeOnEscape")){D.on("key",function(P){A._host.close();},[O],"down:27");}}catch(N){}A._bodyNode.loadingmask.hide();},_setIframeCssClass:function(A){F[1]=A;return F.join(" ");},_uiSetUri:function(K){var A=this;A.node.attr("src",K);},_updateIframeSize:function(N){var A=this;var L=A._adjustSize;var K=A._bodyNode;var M=A.node;var O=A._updateIframeSizeUI;if(!O){O=function(){var P=K.getStyle("height");M.setStyle("height",L(P));K.loadingmask.refreshMask();};A._updateIframeSizeUI=O;}setTimeout(O,50);}}});D.Plugin.DialogIframe=B;},"@VERSION@",{skinnable:true,requires:["aui-base","aui-loading-mask","plugin"]});