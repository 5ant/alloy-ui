AUI.add("aui-paginator",function(ah){var X=ah.Lang,f=X.isArray,ax=X.isBoolean,av=X.isFunction,O=X.isNumber,G=X.isObject,aE=X.isString,B=X.toInt,C="alwaysVisible",o="boundingBox",D="circular",c="container",J="containers",ac="content",aq="current",W=".",x="first",aj="firstPageLink",aK="firstPageLinkLabel",g="last",M="lastPageLink",aH="lastPageLinkLabel",ad="link",am="maxPageLinks",m="next",au="nextPageLink",ag="nextPageLinkLabel",aA="option",p="page",w="pageContainerTemplate",K="pageLinkContent",I="pageLinkTemplate",e="pageReportEl",u="pageReportLabelTemplate",al="paginator",aw="per",ay="prev",j="prevPageLink",b="prevPageLinkLabel",aa="report",k="rows",ak="rowsPerPage",aG="rowsPerPageEl",t="rowsPerPageOptions",N="select",aB="selected",r=" ",T="state",at="template",af="total",P="totalEl",V="totalLabel",ae="totalPages",aF=function(){return Array.prototype.slice.call(arguments).join(r);},aI=function(A){return(A instanceof ah.NodeList);},F=ah.ClassNameManager.getClassName,y=F(al),s=F(al,c),an=F(al,ac),z=F(al,aq,p),aJ=F(al,x,ad),l=F(al,g,ad),aC=F(al,ad),d=F(al,m,ad),a=F(al,p,c),ap=F(al,p,ad),v=F(al,aq,p,aa),ao=F(al,ay,ad),q=F(al,k,aw,p),i=F(al,af),U="(Total {total})",R="({page} of {totalPages})",Z="{FirstPageLink} {PrevPageLink} {PageLinks} {NextPageLink} {LastPageLink} {CurrentPageReport} {Total} {RowsPerPageSelect}",ar="&gt;",Q="&lt;",h='<a href="#" class="'+aF(aC,aJ)+'"></a>',ab='<a href="#" class="'+aF(aC,l)+'"></a>',H='<a href="#" class="'+aF(aC,d)+'"></a>',aD="<span></span>",Y='<a href="#"></a>',n='<span class="'+aF(v)+'"></span>',az='<a href="#" class="'+aF(aC,ao)+'"></a>',ai='<select class="'+q+'"></select>',S='<span class="'+aF(i)+'"></span>';var E=ah.Component.create({NAME:al,ATTRS:{alwaysVisible:{value:true,validator:ax},circular:{value:false,validator:ax},containers:{writeOnce:true,setter:function(L){var A=this;if(aI(L)){return L;}else{if(aE(L)){return ah.all(L);}}return new ah.NodeList([L]);}},firstPageLink:{setter:ah.one,valueFn:function(){var A=this.get(aK);return ah.Node.create(h).html(A);}},firstPageLinkLabel:{value:x,validator:aE},lastPageLink:{setter:ah.one,valueFn:function(){var A=this.get(aH);return ah.Node.create(ab).html(A);}},lastPageLinkLabel:{value:g,validator:aE},maxPageLinks:{value:10,getter:function(A){var L=this.get(ae);return Math.min(L,A);},validator:O},nextPageLink:{setter:ah.one,valueFn:function(){var A=this.get(ag);return ah.Node.create(H).html(A);}},nextPageLinkLabel:{value:aF(m,ar),validator:aE},page:{setter:B,value:1},pageContainerTemplate:{getter:function(A){return ah.Node.create(A).addClass(a);},value:aD,validator:aE},pageLinkContent:{value:function(aL,A,L){aL.html(A);},validator:av},pageLinkTemplate:{getter:function(A){var L=ah.Node.create(A);return L.addClass(aF(aC,ap));},value:Y,validator:aE},pageReportEl:{setter:ah.one,valueFn:function(){var A=this.get(u);return ah.Node.create(n).html(A);}},pageReportLabelTemplate:{getter:function(){var A=this;return X.sub(R,{page:A.get(p),totalPages:A.get(ae)});},validator:aE},prevPageLink:{setter:ah.one,valueFn:function(){var A=this.get(b);return ah.Node.create(az).html(A);}},prevPageLinkLabel:{value:aF(Q,ay),validator:aE},rowsPerPageOptions:{value:{},validator:f},rowsPerPage:{setter:B,value:1},rowsPerPageEl:{setter:ah.one,getter:function(aM){var A=this;var L=aM.all(aA);L.removeAttribute(aB);var aL=L.filter("[value="+A.get(ak)+"]");if(aL){aL.setAttribute(aB,aB);}return aM;},valueFn:function(){return ah.Node.create(ai);}},state:{setter:"_setState",getter:"_getState",value:{},validator:G},template:{getter:"_getTemplate",writeOnce:true,value:Z,validator:aE},total:{setter:"_setTotal",value:0,validator:O},totalEl:{setter:ah.one,getter:function(){var A=this.get(V);return ah.Node.create(S).html(A);}},totalLabel:{getter:function(){var A=this;return X.sub(U,{total:A.get(af)});},validator:aE},totalPages:{readOnly:true,getter:function(A){return Math.ceil(this.get(af)/this.get(ak));}}},prototype:{lastState:null,templatesCache:null,renderUI:function(){var A=this;var L=A.get(J);L.unselectable();A._renderRowsPerPageOptions();A._renderTemplateUI();L.addClass(s);},bindUI:function(){var A=this;A._delegateDOM();A.publish("changeRequest");A.after("stateChange",ah.bind(A._afterSetState,A));A.before("stateChange",ah.bind(A._beforeSetState,A));A.after("maxPageLinksChange",ah.bind(A._renderTemplateUI,A));A.after("rowsPerPageChange",ah.bind(A._renderTemplateUI,A));A.after("totalChange",ah.bind(A._renderTemplateUI,A));},syncUI:function(){var A=this;A.changeRequest();},destructor:function(){var A=this;A.get(J).remove(true);},_syncPageLinksUI:function(){var A=this;var aM=A.get(J);var aL=A.get(p);var L=A.calculateRange(aL);aM.each(function(aP){var aO=0;var aN=L.start;var aR=aP.all(W+ap);if(aR.size()){aR.removeClass(z);while(aN<=L.end){var aQ=aR.item(aO);A.get(K).apply(A,[aQ,aN,aO]);aQ.setAttribute(p,aN);if(aN==aL){aQ.addClass(z);}aO++;aN++;}}});},_syncPageReportUI:function(L){var A=this;var aL=A.get(J);aL.each(function(aM){var aN=aM.one(W+v);if(aN){aN.html(A.get(u));}});},calculateRange:function(aM){var A=this;var aL=A.get(ae);var aP=A.get(am);var aN=Math.ceil(aP/2);var aO=Math.min(Math.max(aM-aN,1),(aL-aP+1));var L=Math.min(aO+aP-1,aL);return{start:aO,end:L};},changeRequest:function(){var A=this;var aM=A.get(T);if(A.get(D)){var aL=aM.page;var L=aM.totalPages;if(aM.before&&(aM.before.page==aL)){if(aL<=1){aM.page=L;}else{if(aL>=L){aM.page=1;}}A.set(T,aM);}}A.fire("changeRequest",{state:aM});},eachContainer:function(L){var A=this;A.get(J).each(function(aL){if(aL){L.apply(A,arguments);}});},hasNextPage:function(){var A=this;return A.hasPage(A.get(p)+1);},hasPage:function(aL){var A=this;var L=A.get(ae);return((aL>0)&&(aL<=L));},hasPrevPage:function(){var A=this;return A.hasPage(A.get(p)-1);},_renderRowsPerPageOptions:function(){var A=this;var aL=0;var L=A.get(aG);var aM=A.get(t);ah.each(aM,function(aN){L.getDOM().options[aL++]=new Option(aN,aN);});},_renderTemplateUI:function(){var A=this;var L=A.get(J);A.templatesCache=null;L.html(A.get(at));A._syncPageLinksUI();
A._syncPageReportUI();A._bindDOMEvents();},setState:function(L){var A=this;A.set(T,L);},_getState:function(L){var A=this;return{before:A.lastState,paginator:A,page:A.get(p),total:A.get(af),totalPages:A.get(ae),rowsPerPage:A.get(ak)};},_getTemplate:function(L){var A=this;var aL=function(aQ){return A.get(aQ).outerHTML();};if(!A.templatesCache){var aO=0;var aN=A.get(ae);var aP=A.get(am);var aM=A.get(w);while(aO++<aP){aM.append(A.get(I));}A.templatesCache=X.sub(L,{CurrentPageReport:aL(e),FirstPageLink:aL(aj),LastPageLink:aL(M),NextPageLink:aL(au),PageLinks:aM.outerHTML(),PrevPageLink:aL(j),RowsPerPageSelect:aL(aG),Total:aL(P)});}return A.templatesCache;},_setState:function(L){var A=this;ah.each(L,function(aM,aL){A.set(aL,aM);});return L;},_setTotal:function(aL){var A=this;var L=A.get(C);var aM=A.get(J);var aN=(L||(aL!==0&&aL>A.get(ak)));aM.toggle(aN);return aL;},_afterSetState:function(L){var A=this;A._syncPageLinksUI();A._syncPageReportUI();},_beforeSetState:function(L){var A=this;A.lastState=L.prevVal;},_onClickFirstLinkEl:function(L){var A=this;A.set(p,1);A.changeRequest();L.halt();},_onClickPrevLinkEl:function(L){var A=this;var aL=A.get(p);A.set(p,(A.hasPrevPage()?aL-1:aL));A.changeRequest();L.halt();},_onClickPageLinkEl:function(aL){var A=this;var L=aL.currentTarget.attr(p);A.set(p,L);A.changeRequest();aL.halt();},_onClickNextLinkEl:function(L){var A=this;var aL=A.get(p);A.set(p,(A.hasNextPage()?aL+1:aL));A.changeRequest();L.halt();},_onClickLastLinkEl:function(aL){var A=this;var L=A.get(ae);A.set(p,L);A.changeRequest();aL.halt();},_bindDOMEvents:function(){var A=this;A.eachContainer(function(aL){var L=aL.one(W+q);if(L){L.val(A.get(ak));L.detach("change");L.on("change",function(aN){var aM=A.get(ak);try{aM=aN.target.val();}catch(aO){}A.set(p,1);A.set(ak,aM);A.changeRequest();});}});},_delegateDOM:function(){var A=this;A.eachContainer(function(aL,L){aL.delegate("click",ah.bind(A._onClickFirstLinkEl,A),W+aJ);aL.delegate("click",ah.bind(A._onClickPrevLinkEl,A),W+ao);aL.delegate("click",ah.bind(A._onClickPageLinkEl,A),W+ap);aL.delegate("click",ah.bind(A._onClickNextLinkEl,A),W+d);aL.delegate("click",ah.bind(A._onClickLastLinkEl,A),W+l);});}}});ah.Paginator=E;},"@VERSION@",{requires:["aui-base"],skinnable:true});