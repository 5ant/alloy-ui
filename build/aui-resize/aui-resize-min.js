AUI.add("aui-resize",function(Aa){var AK=Aa.Lang,F=AK.isArray,As=AK.isBoolean,x=AK.isNumber,Aw=AK.isString,Ao=AK.trim,U=Aa.Array.indexOf,AT=".",f=",",d=" ",c="active",w="activeHandle",AD="activeHandleEl",j="all",A6="auto",Ad="autoHide",Aj="bottom",Ae="className",t="constrain2node",y="constrain2region",AE="constrain2view",Ah="cursor",S="diagonal",Ai="dotted",AU="dragCursor",D="grip",AM="gripsmall",l="handle",v="handles",AR="hidden",C="horizontal",AP="icon",i="inner",E="left",u="margin",Z="maxHeight",Ax="maxWidth",V="minHeight",AA="minWidth",b="node",n="nodeName",AI="none",q="offsetHeight",Av="offsetWidth",H="parentNode",X="position",W="preserveRatio",Am="proxy",k="proxyEl",AL="px",J="region",P="relative",Ab="resize",a="resizing",M="right",A1="static",An="tickX",Ak="tickY",O="top",AY="vertical",Af="wrap",Az="wrapper",AX="wrapTypes",r="resize:mouseUp",g="resize:resize",s="resize:end",AF="resize:start",AN="t",A0="tr",AO="r",Aq="br",AZ="b",At="bl",AS="l",A2="tl",AB=function(A){return(A instanceof Aa.Node);},A3=function(A){return l+A.toUpperCase();},Ay=function(){return Array.prototype.slice.call(arguments).join(d);},AC=Aa.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);}),m=Aa.ClassNameManager.getClassName,Q=m(AP),Ar=m(AP,AM,S,Aq),AW=m(AP,D,Ai,C),AH=m(AP,D,Ai,AY),Ap=m(Ab),Ag=m(Ab,l),AQ=m(Ab,l,c),I=m(Ab,l,i),o=m(Ab,l,i,"{handle}"),A4=m(Ab,l,"{handle}"),G=m(Ab,AR,v),h=m(Ab,Am),Au=m(Ab,Az),AV=Ay(Q,Ar),Al=Ay(Q,AW),Y=Ay(Q,AH),K=/^(t|b)$/i,AG=/^(tl|l|bl)$/i,z=/^(tl|t|tr)$/i,p=/^(bl|br|l|r|tl|tr)$/i,Ac='<div class="'+Ay(Ag,A4)+'">'+'<div class="'+Ay(I,o)+'"></div>'+"</div>",AJ='<div class="'+h+'"></div>',A5='<div class="'+Au+'"></div>',e=[AN,A0,AO,Aq,AZ,At,AS,A2];var N=Aa.Component.create({NAME:Ab,ATTRS:{activeHandle:{value:null,validator:Aw},activeHandleEl:{value:null,validator:AB},autoHide:{value:false,validator:As},constrain2node:{setter:Aa.one,value:null},constrain2region:{value:null},constrain2view:{value:false},handles:{setter:function(L){var A=this;var B=[];if(F(L)){B=L;}else{if(Aw(L)){if(L.toLowerCase()==j){B=e;}else{Aa.each(L.split(f),function(T,R){var A7=Ao(T);if(U(e,A7)>-1){B.push(A7);}});}}}return B;},value:j},minHeight:{value:15,validator:x},minWidth:{value:15,validator:x},maxHeight:{value:Infinity,validator:x},maxWidth:{value:Infinity,validator:x},node:{setter:Aa.one},preserveRatio:{value:false,validator:As},proxy:{value:false,validator:As},proxyEl:{setter:Aa.one,valueFn:function(){return Aa.Node.create(AJ);}},resizing:{value:false,validator:As},tickX:{value:false},tickY:{value:false},wrap:{setter:function(R){var A=this;var L=A.get(b);var T=L.get(n);var B=A.get(AX);if(B.test(T)){R=true;}return R;},value:false,validator:As},wrapTypes:{readOnly:true,value:/canvas|textarea|input|select|button|img/i},wrapper:{setter:function(){var A=this;var B=A.get(b);var L=B;if(A.get(Af)){L=Aa.Node.create(A5);B.placeBefore(L);L.append(B);A._copyStyles(B,L);B.setStyles({position:A1,left:0,top:0});}return L;},value:null,writeOnce:true}},EXTENDS:Aa.Base,prototype:{CSS_INNER_HANDLE_MAP:{r:Y,l:Y,t:Al,b:Al,br:AV},changeHeightHandles:false,changeLeftHandles:false,changeTopHandles:false,changeWidthHandles:false,info:null,originalInfo:null,initializer:function(){var A=this;A.info={};A.originalInfo={};A.get(b).addClass(Ap);A.renderer();},renderUI:function(){var A=this;A._renderHandles();A._renderProxy();},bindUI:function(){var A=this;A._createEvents();A._bindResize();A._bindDD();A._bindHandle();},syncUI:function(){var A=this;A._setHideHandlesUI(A.get(Ad));},destructor:function(){var A=this;var B=A.get(b);var L=A.get(Az);Aa.Event.purgeElement(L,true);A.eachHandle(function(T){var R=T.dd;if(R){R.destroy();}T.remove();});if(A.get(Af)){B.setStyles({margin:L.getStyle(u),position:L.getStyle(X)});L.placeBefore(B);L.remove();}B.removeClass(Ap);B.removeClass(G);},renderer:function(){this.renderUI();this.bindUI();this.syncUI();},_bindDD:function(){var A=this;A.on("drag:drag",A._handleResizeEvent);A.on("drag:dropmiss",A._handleMouseUpEvent);A.on("drag:end",A._handleResizeEndEvent);A.on("drag:start",A._handleResizeStartEvent);},_bindHandle:function(){var A=this;var B=A.get(Az);B.on("mouseenter",Aa.bind(A._onWrapperMouseEnter,A));B.on("mouseleave",Aa.bind(A._onWrapperMouseLeave,A));B.delegate("mouseenter",Aa.bind(A._onHandleMouseOver,A),AT+Ag);B.delegate("mouseleave",Aa.bind(A._onHandleMouseOut,A),AT+Ag);},_bindResize:function(){var A=this;A.after(g,A._afterResize);},_createEvents:function(){var A=this;var B=function(L,R){A.publish(L,{defaultFn:R,queuable:false,emitFacade:true,bubbles:true,prefix:Ab});};B(AF,this._defResizeStartFn);B(g,this._defResizeFn);B(s,this._defResizeEndFn);B(r,this._defMouseUpFn);},_renderHandles:function(){var A=this;var B=A.get(Az);A.eachHandle(function(L){B.append(L);});},_renderProxy:function(){var B=this;var A=B.get(k);B.get(Az).get(H).append(A.hide());},eachHandle:function(B){var A=this;Aa.each(A.get(v),function(T,L){var R=A.get(A3(T));B.apply(A,[R,T,L]);});},_buildHandle:function(L){var A=this;var B=Aa.Node.create(Aa.substitute(Ac,{handle:L}));B.one(AT+I).addClass(A.CSS_INNER_HANDLE_MAP[L]);A._setupHandleDD(L,B);return B;},_checkConstrain:function(B,BC,L){var BA=this;var A=BA.info;var A7=BA.get(t);if(A7){var A8=A7.get(J);var A9=A[B]+A[L];var R=A8[BC];if(A9>=R){A[L]-=(A9-R);}var T=A[B];var BB=A8[B];if(T<=BB){A[B]+=(BB-T);A[L]-=(BB-T);}}},_checkHeight:function(){var B=this;var A7=B.info;var T=B.originalInfo;var L=B.get(Z);var R=B.get(V);B._checkConstrain(O,Aj,q);var A8=(A7.offsetHeight>L);var A=(A7.offsetHeight<R);if(A8){A7.offsetHeight=L;if(B.changeTopHandles){A7.top=T.top+T.offsetHeight-L;}}if(A){A7.offsetHeight=R;if(B.changeTopHandles){A7.top=T.top+T.offsetHeight-R;}}},_checkRatio:function(){var A7=this;var B=A7.info;var R=A7.originalInfo;var A9=R.offsetWidth;var A=R.offsetHeight;var T=R.top;var BA=R.left;var A8=function(){return(B.offsetWidth/A9);};var L=function(){return(B.offsetHeight/A);};if(A7.changeHeightHandles){B.offsetWidth=A9*L();A7._checkWidth();B.offsetHeight=A*A8();
}else{if(A7.changeWidthHandles){B.offsetHeight=A*A8();A7._checkHeight();B.offsetWidth=A9*L();}}if(A7.changeTopHandles){B.top=T+(A-B.offsetHeight);}if(A7.changeLeftHandles){B.left=BA+(A9-B.offsetWidth);}},_checkRegion:function(){var A=this;var B=A.get(t).get(J);return Aa.DOM.inRegion(null,B,true,A.info);},_checkWidth:function(){var A=this;var A8=A.info;var A7=A.originalInfo;var T=A.get(Ax);var R=A.get(AA);A._checkConstrain(E,M,Av);var L=(A8.offsetWidth>T);var B=(A8.offsetWidth<R);if(L){A8.offsetWidth=T;if(A.changeLeftHandles){A8.left=A7.left+A7.offsetWidth-T;}}if(B){A8.offsetWidth=R;if(A.changeLeftHandles){A8.left=A7.left+A7.offsetWidth-R;}}},_copyStyles:function(T,A7){var B=this;var A=T.getStyle(X).toLowerCase();if(A==A1){A=P;}var R={position:A};var L={};Aa.each([O,M,Aj,E],function(A9){var A8=u+AC(A9);L[A8]=A7.getStyle(A8);R[A8]=T.getStyle(A8);});A7.setStyles(R);T.setStyles(L);T.setStyles({margin:0});A7.set(q,T.get(q));A7.set(Av,T.get(Av));},_extractHandleName:Aa.cached(function(L){var B=L.get(Ae);var A=B.match(new RegExp(m(Ab,l,"(\\w{1,2})\\b")));return A?A[1]:null;}),_getInfo:function(T,A){var BB=this,A7;var A9=A.dragEvent.target;if(A){A7=(A9.actXY.length?A9.actXY:A9.lastXY);}var A8=T.getXY();var R=A8[0];var L=A8[1];var B=T.get(q);var BA=T.get(Av);return{actXY:A7,bottom:(L+B),left:R,offsetHeight:B,offsetWidth:BA,right:(R+BA),top:L};},_recalculateXY:function(){var A=this;var L=A.info;var B=A.originalInfo;L.left=B.left+(L.left-B.left);L.top=B.top+(L.top-B.top);},_resize:function(){var A=this;var R=A.get(w);var A7=A.info;var T=A.originalInfo;var L=A7.actXY[0]-T.actXY[0];var B=A7.actXY[1]-T.actXY[1];var A8={t:function(){A7.top=T.top+B;A7.offsetHeight=T.offsetHeight-B;},r:function(){A7.offsetWidth=T.offsetWidth+L;},l:function(){A7.left=T.left+L;A7.offsetWidth=T.offsetWidth-L;},b:function(){A7.offsetHeight=T.offsetHeight+B;},tr:function(){this.t();this.r();},br:function(){this.b();this.r();},tl:function(){this.t();this.l();},bl:function(){this.b();this.l();}};A8[R](L,B);},_setupHandleDD:function(R,L){var B=this;var A=new Aa.DD.Drag({bubbleTargets:B,clickPixelThresh:0,clickTimeThresh:0,data:{handle:R,node:L},node:L,useShim:true,move:false});A.plug(Aa.Plugin.DDConstrained,{stickX:(R==AO||R==AS),stickY:(R==AN||R==AZ),tickX:B.get(An),tickY:B.get(Ak)});},_setOffset:function(L,B,A){L.set(Av,B);L.set(q,A);},_syncUI:function(){var A=this;var L=A.info;var R=A.get(Az);var B=A.get(b);A._setOffset(R,L.offsetWidth,L.offsetHeight);if(A.changeLeftHandles||A.changeTopHandles){R.setXY([L.left,L.top]);}if(!R.compareTo(B)){A._setOffset(B,L.offsetWidth,L.offsetHeight);}if(Aa.UA.webkit){B.setStyle(Ab,AI);}},_syncProxyUI:function(){var B=this;var R=B.info;var L=B.get(AD);var A=B.get(k);var T=L.getStyle(Ah);A.show().setStyles({cursor:T,height:R.offsetHeight+AL,width:R.offsetWidth+AL});L.dd.set(AU,T);A.setXY([R.left,R.top]);},_updateChangeHandleInfo:function(B){var A=this;A.changeHeightHandles=K.test(B);A.changeLeftHandles=AG.test(B);A.changeTopHandles=z.test(B);A.changeWidthHandles=p.test(B);},_updateInfo:function(B){var A=this;A.info=A._getInfo(A.get(Az),B);},_setActiveHandlesUI:function(L){var A=this;var B=A.get(AD);if(B){if(L){A.eachHandle(function(R){R.removeClass(AQ);});B.addClass(AQ);}else{B.removeClass(AQ);}}},_setHideHandlesUI:function(B){var A=this;var L=A.get(Az);if(!A.get(a)){if(B){L.addClass(G);}else{L.removeClass(G);}}},_defMouseUpFn:function(B){var A=this;A.set(a,false);},_defResizeFn:function(L){var A=this;var B=A.info;A._updateInfo(L);A._resize();A._checkHeight();A._checkWidth();if(A.get(W)){A._checkRatio();}A._recalculateXY();if(A.get(t)&&!A._checkRegion()){A.info=B;}},_defResizeEndFn:function(L){var A=this;var B=L.dragEvent.target;B.actXY=[];if(A.get(Am)){A._syncProxyUI();A.get(k).hide();}A._syncUI();A.set(w,null);A.set(AD,null);A._setActiveHandlesUI(false);},_defResizeStartFn:function(B){var A=this;A.set(a,true);A.originalInfo=A._getInfo(A.get(Az),B);A._updateInfo(B);},_afterResize:function(B){var A=this;if(A.get(Am)){A._syncProxyUI();}else{A._syncUI();}},_handleMouseUpEvent:function(A){this.fire(r,{dragEvent:A,info:this.info});},_handleResizeEvent:function(A){this.fire(g,{dragEvent:A,info:this.info});},_handleResizeEndEvent:function(A){this.fire(s,{dragEvent:A,info:this.info});},_handleResizeStartEvent:function(A){this.fire(AF,{dragEvent:A,info:this.info});},_onWrapperMouseEnter:function(B){var A=this;if(A.get(Ad)){A._setHideHandlesUI(false);}},_onWrapperMouseLeave:function(B){var A=this;if(A.get(Ad)){A._setHideHandlesUI(true);}},_onHandleMouseOver:function(L){var A=this;var B=L.currentTarget;var R=A._extractHandleName(B);if(!A.get(a)){A.set(w,R);A.set(AD,B);A._setActiveHandlesUI(true);A._updateChangeHandleInfo(R);}},_onHandleMouseOut:function(B){var A=this;if(!A.get(a)){A._setActiveHandlesUI(false);}}}});Aa.each(e,function(B,A){N.ATTRS[A3(B)]={setter:function(){return this._buildHandle(B);},value:null,writeOnce:true};});Aa.Resize=N;},"@VERSION@",{skinnable:true,requires:["aui-base","dd-constrain","dd-drag","dd-drop","substitute"]});