AUI.add("aui-resize",function(Ad){var AO=Ad.Lang,F=AO.isArray,Av=AO.isBoolean,AC=AO.isNumber,Az=AO.isString,Ar=AO.trim,V=Ad.Array.indexOf,AW=".",g=",",e=" ",d="active",AA="activeHandle",AI="activeHandleEl",k="all",Ag="autoHide",Am="bottom",Ah="className",o="constrain",Ak="cursor",U="diagonal",Al="dotted",AX="dragCursor",D="grip",AP="gripsmall",m="handle",z="handles",AU="hidden",C="horizontal",AS="icon",j="inner",E="left",y="margin",a="maxHeight",A0="maxWidth",W="minHeight",AE="minWidth",c="node",s="nodeName",AM="none",v="offsetHeight",Ay="offsetWidth",I="parentNode",Y="position",X="preserveRatio",Ap="proxy",l="proxyEl",K="region",Q="relative",Ae="resize",b="resizing",N="right",A4="static",Aq="tickX",An="tickY",P="top",Ab="vertical",r="view",AH="viewportRegion",Ai="wrap",A2="wrapper",Aa="wrapTypes",H="borderBottomWidth",AB="borderLeftWidth",n="borderRightWidth",p="borderTopWidth",w="resize:mouseUp",h="resize:resize",x="resize:end",AJ="resize:start",AQ="t",A3="tr",AR="r",At="br",Ac="b",Aw="bl",AV="l",A5="tl",AF=function(A){return(A instanceof Ad.Node);},A6=function(A){return m+A.toUpperCase();},A1=function(){return Array.prototype.slice.call(arguments).join(e);},AG=Ad.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);}),q=Ad.ClassNameManager.getClassName,S=q(AS),Au=q(AS,AP,U,At),AZ=q(AS,D,Al,C),AL=q(AS,D,Al,Ab),As=q(Ae),Aj=q(Ae,m),AT=q(Ae,m,d),J=q(Ae,m,j),t=q(Ae,m,j,"{handle}"),A7=q(Ae,m,"{handle}"),G=q(Ae,AU,z),i=q(Ae,Ap),Ax=q(Ae,A2),AY=A1(S,Au),Ao=A1(S,AZ),Z=A1(S,AL),M=/^(t|b)$/i,AK=/^(tl|l|bl)$/i,AD=/^(tl|t|tr)$/i,u=/^(bl|br|l|r|tl|tr)$/i,Af='<div class="'+A1(Aj,A7)+'">'+'<div class="'+A1(J,t)+'"></div>'+"</div>",AN='<div class="'+i+'"></div>',A8='<div class="'+Ax+'"></div>',f=[AQ,A3,AR,At,Ac,Aw,AV,A5];var O=Ad.Component.create({NAME:Ae,ATTRS:{activeHandle:{value:null,validator:Az},activeHandleEl:{value:null,validator:AF},autoHide:{value:false,validator:Av},constrain:{setter:function(A){if(A&&(AF(A)||Az(A)||A.nodeType)){A=Ad.one(A);}return A;}},handles:{setter:function(L){var A=this;var B=[];if(F(L)){B=L;}else{if(Az(L)){if(L.toLowerCase()==k){B=f;}else{Ad.each(L.split(g),function(T,R){var A9=Ar(T);if(V(f,A9)>-1){B.push(A9);}});}}}return B;},value:k},minHeight:{value:15,validator:AC},minWidth:{value:15,validator:AC},maxHeight:{value:Infinity,validator:AC},maxWidth:{value:Infinity,validator:AC},node:{setter:Ad.one},preserveRatio:{value:false,validator:Av},proxy:{value:false,validator:Av},proxyEl:{setter:Ad.one,valueFn:function(){return Ad.Node.create(AN);}},resizing:{value:false,validator:Av},tickX:{value:false},tickY:{value:false},wrap:{setter:function(R){var A=this;var L=A.get(c);var T=L.get(s);var B=A.get(Aa);if(B.test(T)){R=true;}return R;},value:false,validator:Av},wrapTypes:{readOnly:true,value:/canvas|textarea|input|select|button|img/i},wrapper:{setter:function(){var A=this;var B=A.get(c);var L=B;if(A.get(Ai)){L=Ad.Node.create(A8);B.placeBefore(L);L.append(B);A._copyStyles(B,L);B.setStyles({position:A4,left:0,top:0});}return L;},value:null,writeOnce:true}},EXTENDS:Ad.Base,prototype:{CSS_INNER_HANDLE_MAP:{r:Z,l:Z,t:Ao,b:Ao,br:AY},changeHeightHandles:false,changeLeftHandles:false,changeTopHandles:false,changeWidthHandles:false,constrainBorderInfo:null,delegate:null,info:null,originalInfo:null,initializer:function(){var A=this;A.info={};A.originalInfo={};A.constrainBorderInfo={bottom:0,left:0,right:0,top:0};A.get(c).addClass(As);A.renderer();},renderUI:function(){var A=this;A._renderHandles();A._renderProxy();},bindUI:function(){var A=this;A._createEvents();A._bindResize();A._bindDD();A._bindHandle();},syncUI:function(){var A=this;A._setHideHandlesUI(A.get(Ag));},destructor:function(){var A=this;var B=A.get(c);var L=A.get(A2);Ad.Event.purgeElement(L,true);A.eachHandle(function(R){A.delegate.dd.destroy();R.remove(true);});if(A.get(Ai)){B.setStyles({margin:L.getStyle(y),position:L.getStyle(Y)});L.placeBefore(B);L.remove(true);}B.removeClass(As);B.removeClass(G);},renderer:function(){this.renderUI();this.bindUI();this.syncUI();},_bindDD:function(){var A=this;A.delegate=new Ad.DD.Delegate({bubbleTargets:A,container:A.get(A2),dragConfig:{clickPixelThresh:0,clickTimeThresh:0,useShim:true,move:false},nodes:AW+Aj,target:false});A.delegate.dd.plug(Ad.Plugin.DDConstrained,{tickX:A.get(Aq),tickY:A.get(An)});A.on("drag:drag",A._handleResizeEvent);A.on("drag:dropmiss",A._handleMouseUpEvent);A.on("drag:end",A._handleResizeEndEvent);A.on("drag:start",A._handleResizeStartEvent);},_bindHandle:function(){var A=this;var B=A.get(A2);B.on("mouseenter",Ad.bind(A._onWrapperMouseEnter,A));B.on("mouseleave",Ad.bind(A._onWrapperMouseLeave,A));B.delegate("mouseenter",Ad.bind(A._onHandleMouseEnter,A),AW+Aj);B.delegate("mouseleave",Ad.bind(A._onHandleMouseLeave,A),AW+Aj);},_bindResize:function(){var A=this;A.after(h,A._afterResize);},_createEvents:function(){var A=this;var B=function(L,R){A.publish(L,{defaultFn:R,queuable:false,emitFacade:true,bubbles:true,prefix:Ae});};B(AJ,this._defResizeStartFn);B(h,this._defResizeFn);B(x,this._defResizeEndFn);B(w,this._defMouseUpFn);},_renderHandles:function(){var A=this;var B=A.get(A2);A.eachHandle(function(L){B.append(L);});},_renderProxy:function(){var B=this;var A=B.get(l);B.get(A2).get(I).append(A.hide());},eachHandle:function(B){var A=this;Ad.each(A.get(z),function(T,L){var R=A.get(A6(T));B.apply(A,[R,T,L]);});},_buildHandle:function(L){var A=this;var B=Ad.Node.create(Ad.substitute(Af,{handle:L}));B.one(AW+J).addClass(A.CSS_INNER_HANDLE_MAP[L]);return B;},_checkConstrain:function(B,BD,L){var BB=this;var A=BB.info;var A9=BB._getConstrainRegion();if(A9){var BA=A[B]+A[L];var R=A9[BD]-BB.constrainBorderInfo[BD];if(BA>=R){A[L]-=(BA-R);}var T=A[B];var BC=A9[B]+BB.constrainBorderInfo[B];if(T<=BC){A[B]+=(BC-T);A[L]-=(BC-T);}}},_checkHeight:function(){var B=this;var A9=B.info;var T=B.originalInfo;var L=B.get(a);var R=B.get(W);B._checkConstrain(P,Am,v);var BA=(A9.offsetHeight>L);var A=(A9.offsetHeight<R);if(BA){A9.offsetHeight=L;if(B.changeTopHandles){A9.top=T.top+T.offsetHeight-L;
}}if(A){A9.offsetHeight=R;if(B.changeTopHandles){A9.top=T.top+T.offsetHeight-R;}}},_checkRatio:function(){var A9=this;var B=A9.info;var R=A9.originalInfo;var BB=R.offsetWidth;var A=R.offsetHeight;var T=R.top;var BC=R.left;var BA=function(){return(B.offsetWidth/BB);};var L=function(){return(B.offsetHeight/A);};if(A9.changeHeightHandles){B.offsetWidth=BB*L();A9._checkWidth();B.offsetHeight=A*BA();}else{if(A9.changeWidthHandles){B.offsetHeight=A*BA();A9._checkHeight();B.offsetWidth=BB*L();}}if(A9.changeTopHandles){B.top=T+(A-B.offsetHeight);}if(A9.changeLeftHandles){B.left=BC+(BB-B.offsetWidth);}},_checkRegion:function(){var A=this;var B=A._getConstrainRegion();return Ad.DOM.inRegion(null,B,true,A.info);},_checkWidth:function(){var A=this;var BA=A.info;var A9=A.originalInfo;var T=A.get(A0);var R=A.get(AE);A._checkConstrain(E,N,Ay);var L=(BA.offsetWidth>T);var B=(BA.offsetWidth<R);if(L){BA.offsetWidth=T;if(A.changeLeftHandles){BA.left=A9.left+A9.offsetWidth-T;}}if(B){BA.offsetWidth=R;if(A.changeLeftHandles){BA.left=A9.left+A9.offsetWidth-R;}}},_copyStyles:function(T,A9){var B=this;var A=T.getStyle(Y).toLowerCase();if(A==A4){A=Q;}var R={position:A};var L={};Ad.each([P,N,Am,E],function(BB){var BA=y+AG(BB);L[BA]=A9.getStyle(BA);R[BA]=T.getStyle(BA);});A9.setStyles(R);T.setStyles(L);T.setStyles({margin:0});A9.set(v,T.get(v));A9.set(Ay,T.get(Ay));},_extractHandleName:Ad.cached(function(L){var B=L.get(Ah);var A=B.match(new RegExp(q(Ae,m,"(\\w{1,2})\\b")));return A?A[1]:null;}),_getConstrainRegion:function(){var A=this;var B=A.get(c);var R=A.get(o);var L=null;if(R){if(R==r){L=B.get(AH);}else{if(AF(R)){L=R.get(K);}else{L=R;}}}return L;},_getInfo:function(T,A){var BD=this,A9;var BB=A.dragEvent.target;if(A){A9=(BB.actXY.length?BB.actXY:BB.lastXY);}var BA=T.getXY();var R=BA[0];var L=BA[1];var B=T.get(v);var BC=T.get(Ay);return{actXY:A9,bottom:(L+B),left:R,offsetHeight:B,offsetWidth:BC,right:(R+BC),top:L};},_recalculateXY:function(){var A=this;var L=A.info;var B=A.originalInfo;L.left=B.left+(L.left-B.left);L.top=B.top+(L.top-B.top);},_resize:function(){var A=this;var R=A.get(AA);var A9=A.info;var T=A.originalInfo;var L=A9.actXY[0]-T.actXY[0];var B=A9.actXY[1]-T.actXY[1];var BA={t:function(){A9.top=T.top+B;A9.offsetHeight=T.offsetHeight-B;},r:function(){A9.offsetWidth=T.offsetWidth+L;},l:function(){A9.left=T.left+L;A9.offsetWidth=T.offsetWidth-L;},b:function(){A9.offsetHeight=T.offsetHeight+B;},tr:function(){this.t();this.r();},br:function(){this.b();this.r();},tl:function(){this.t();this.l();},bl:function(){this.b();this.l();}};BA[R](L,B);},_setOffset:function(L,B,A){L.set(Ay,B);L.set(v,A);},_syncUI:function(){var A=this;var L=A.info;var R=A.get(A2);var B=A.get(c);A._setOffset(R,L.offsetWidth,L.offsetHeight);if(A.changeLeftHandles||A.changeTopHandles){R.setXY([L.left,L.top]);}if(!R.compareTo(B)){A._setOffset(B,L.offsetWidth,L.offsetHeight);}if(Ad.UA.webkit){B.setStyle(Ae,AM);}},_syncProxyUI:function(){var B=this;var R=B.info;var L=B.get(AI);var A=B.get(l);var T=L.getStyle(Ak);A.show().setStyle(Ak,T);B.delegate.dd.set(AX,T);B._setOffset(A,R.offsetWidth,R.offsetHeight);A.setXY([R.left,R.top]);},_updateChangeHandleInfo:function(B){var A=this;A.changeHeightHandles=M.test(B);A.changeLeftHandles=AK.test(B);A.changeTopHandles=AD.test(B);A.changeWidthHandles=u.test(B);},_updateConstrainBorderInfo:function(){var B=this;var L=B.get(o);if(AF(L)){var A=function(R){return parseFloat(L.getStyle(R))||0;};B.constrainBorderInfo.bottom=A(H);B.constrainBorderInfo.left=A(AB);B.constrainBorderInfo.right=A(n);B.constrainBorderInfo.top=A(p);}},_updateInfo:function(B){var A=this;A.info=A._getInfo(A.get(A2),B);},_setActiveHandlesUI:function(L){var A=this;var B=A.get(AI);if(B){if(L){A.eachHandle(function(R){R.removeClass(AT);});B.addClass(AT);}else{B.removeClass(AT);}}},_setHideHandlesUI:function(B){var A=this;var L=A.get(A2);if(!A.get(b)){if(B){L.addClass(G);}else{L.removeClass(G);}}},_defMouseUpFn:function(B){var A=this;A.set(b,false);},_defResizeFn:function(L){var A=this;var B=A.info;A._updateInfo(L);A._resize();A._checkHeight();A._checkWidth();if(A.get(X)){A._checkRatio();}A._recalculateXY();if(A.get(o)&&!A._checkRegion()){A.info=B;}},_defResizeEndFn:function(L){var A=this;var B=L.dragEvent.target;B.actXY=[];if(A.get(Ap)){A._syncProxyUI();A.get(l).hide();}A._syncUI();A.set(AA,null);A.set(AI,null);A._setActiveHandlesUI(false);},_defResizeStartFn:function(B){var A=this;A.set(b,true);A.originalInfo=A._getInfo(A.get(A2),B);A._updateInfo(B);A._updateConstrainBorderInfo();},_afterResize:function(B){var A=this;if(A.get(Ap)){A._syncProxyUI();}else{A._syncUI();}},_handleMouseUpEvent:function(A){this.fire(w,{dragEvent:A,info:this.info});},_handleResizeEvent:function(A){this.fire(h,{dragEvent:A,info:this.info});},_handleResizeEndEvent:function(A){this.fire(x,{dragEvent:A,info:this.info});},_handleResizeStartEvent:function(A){this.fire(AJ,{dragEvent:A,info:this.info});},_onWrapperMouseEnter:function(B){var A=this;if(A.get(Ag)){A._setHideHandlesUI(false);}},_onWrapperMouseLeave:function(B){var A=this;if(A.get(Ag)){A._setHideHandlesUI(true);}},_onHandleMouseEnter:function(L){var A=this;var B=L.currentTarget;var R=A._extractHandleName(B);if(!A.get(b)){A.set(AA,R);A.set(AI,B);A._setActiveHandlesUI(true);A._updateChangeHandleInfo(R);}},_onHandleMouseLeave:function(B){var A=this;if(!A.get(b)){A._setActiveHandlesUI(false);}}}});Ad.each(f,function(B,A){O.ATTRS[A6(B)]={setter:function(){return this._buildHandle(B);},value:null,writeOnce:true};});Ad.Resize=O;},"@VERSION@",{requires:["aui-base","dd-constrain","dd-drag","dd-delegate","dd-drop","substitute"],skinnable:true});