AUI.add("aui-resize",function(Aa){var AK=Aa.Lang,F=AK.isArray,At=AK.isBoolean,z=AK.isNumber,Ax=AK.isString,Ap=AK.trim,U=Aa.Array.indexOf,AT=".",g=",",d=" ",c="active",y="activeHandle",AE="activeHandleEl",m="all",A7="auto",Ad="autoHide",Ak="bottom",Ae="className",v="constrain2node",AA="constrain2region",AF="constrain2view",Ai="cursor",S="diagonal",Aj="dotted",AU="dragCursor",D="grip",AM="gripsmall",o="handle",x="handles",AR="hidden",C="horizontal",AP="icon",l="inner",E="left",w="margin",Z="maxHeight",Ay="maxWidth",V="minHeight",AB="minWidth",b="node",q="nodeName",AI="none",s="offsetHeight",Aw="offsetWidth",H="parentNode",X="position",W="preserveRatio",An="proxy",n="proxyEl",AL="px",K="region",P="relative",Ab="resize",a="resizing",M="right",A2="static",Ao="tickX",Al="tickY",O="top",AY="vertical",Af="wrap",A0="wrapper",AX="wrapTypes",t="resize:mouseUp",h="resize:resize",u="resize:end",AG="resize:start",AN="t",A1="tr",AO="r",Ar="br",AZ="b",Au="bl",AS="l",A3="tl",AC=function(A){return(A instanceof Aa.Node);},A4=function(A){return o+A.toUpperCase();},Az=function(){return Array.prototype.slice.call(arguments).join(d);},f=function(A){return Aa.one(A);},AD=Aa.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);}),j=/^(t|b)$/i,Ah=/^(tl|l|bl)$/i,J=/^(tl|t|tr)$/i,i=/^(bl|br|l|r|tl|tr)$/i,p=Aa.ClassNameManager.getClassName,Q=p(AP),As=p(AP,AM,S,Ar),AW=p(AP,D,Aj,C),AH=p(AP,D,Aj,AY),Aq=p(Ab),Ag=p(Ab,o),AQ=p(Ab,o,c),I=p(Ab,o,l),r=p(Ab,o,l,"{handle}"),A5=p(Ab,o,"{handle}"),G=p(Ab,AR,x),k=p(Ab,An),Av=p(Ab,A0),AV=Az(Q,As),Am=Az(Q,AW),Y=Az(Q,AH),Ac='<div class="'+Az(Ag,A5)+'">'+'<div class="'+Az(I,r)+'"></div>'+"</div>",AJ='<div class="'+k+'"></div>',A6='<div class="'+Av+'"></div>',e=[AN,A1,AO,Ar,AZ,Au,AS,A3];var N=Aa.Component.create({NAME:Ab,ATTRS:{activeHandle:{value:null,validator:Ax},activeHandleEl:{value:null,validator:AC},autoHide:{value:false,validator:At},constrain2node:{setter:Aa.one,value:null},constrain2region:{value:null},constrain2view:{value:false},handles:{setter:function(L){var A=this;var B=[];if(F(L)){B=L;}else{if(Ax(L)){if(L.toLowerCase()==m){B=e;}else{Aa.each(L.split(g),function(T,R){var A8=Ap(T);if(U(e,A8)>-1){B.push(A8);}});}}}return B;},value:m},minHeight:{value:15,validator:z},minWidth:{value:15,validator:z},maxHeight:{value:Infinity,validator:z},maxWidth:{value:Infinity,validator:z},node:{setter:f},preserveRatio:{value:false,validator:At},proxy:{value:false,validator:At},proxyEl:{setter:f,valueFn:function(){return Aa.Node.create(AJ);}},resizing:{value:false,validator:At},tickX:{value:false},tickY:{value:false},wrap:{setter:function(R){var A=this;var L=A.get(b);var T=L.get(q);var B=A.get(AX);if(B.test(T)){R=true;}return R;},value:false,validator:At},wrapTypes:{readOnly:true,value:/canvas|textarea|input|select|button|img/i},wrapper:{setter:function(){var A=this;var B=A.get(b);var L=B;if(A.get(Af)){L=Aa.Node.create(A6);B.placeBefore(L);L.append(B);A._copyStyles(B,L);B.setStyles({position:A2,left:0,top:0});}return L;},value:null,writeOnce:true}},EXTENDS:Aa.Base,prototype:{CSS_INNER_HANDLE_MAP:{r:Y,l:Y,t:Am,b:Am,br:AV},changeHeightHandles:false,changeLeftHandles:false,changeTopHandles:false,changeWidthHandles:false,info:null,originalInfo:null,initializer:function(){var A=this;A.info={};A.originalInfo={};A.get(b).addClass(Aq);A.renderer();},renderUI:function(){var A=this;A._renderHandles();A._renderProxy();},bindUI:function(){var A=this;A._createEvents();A._bindResize();A._bindDD();A._bindHandle();},syncUI:function(){var A=this;A._setHideHandlesUI(A.get(Ad));},destructor:function(){var A=this;var B=A.get(b);var L=A.get(A0);Aa.Event.purgeElement(L,true);A.eachHandle(function(T){var R=T.dd;if(R){R.destroy();}T.remove();});if(A.get(Af)){B.setStyles({margin:L.getStyle(w),position:L.getStyle(X)});L.placeBefore(B);L.remove();}B.removeClass(Aq);B.removeClass(G);},renderer:function(){this.renderUI();this.bindUI();this.syncUI();},_bindDD:function(){var A=this;A.on("drag:drag",A._handleResizeEvent);A.on("drag:dropmiss",A._handleMouseUpEvent);A.on("drag:end",A._handleResizeEndEvent);A.on("drag:start",A._handleResizeStartEvent);},_bindHandle:function(){var A=this;var B=A.get(A0);B.on("mouseenter",Aa.bind(A._onWrapperMouseEnter,A));B.on("mouseleave",Aa.bind(A._onWrapperMouseLeave,A));B.delegate("mouseenter",Aa.bind(A._onHandleMouseOver,A),AT+Ag);B.delegate("mouseleave",Aa.bind(A._onHandleMouseOut,A),AT+Ag);},_bindResize:function(){var A=this;A.after(h,A._afterResize);},_createEvents:function(){var A=this;var B=function(L,R){A.publish(L,{defaultFn:R,queuable:false,emitFacade:true,bubbles:true,prefix:Ab});};B(AG,this._defResizeStartFn);B(h,this._defResizeFn);B(u,this._defResizeEndFn);B(t,this._defMouseUpFn);},_renderHandles:function(){var A=this;var B=A.get(A0);A.eachHandle(function(L){B.append(L);});},_renderProxy:function(){var B=this;var A=B.get(n);B.get(A0).get(H).append(A.hide());},eachHandle:function(B){var A=this;Aa.each(A.get(x),function(T,L){var R=A.get(A4(T));B.apply(A,[R,T,L]);});},_buildHandle:function(L){var A=this;var B=Aa.Node.create(Aa.substitute(Ac,{handle:L}));B.one(AT+I).addClass(A.CSS_INNER_HANDLE_MAP[L]);A._setupHandleDD(L,B);return B;},_checkConstrain:function(L,BD,R){var BB=this;var B=BB.info;var T=BB.get(v);if(T){var A8=T.get(K);var BC=B[L]+B[R];var A9=A8[BD];if(BC>=A9){B[R]-=(BC-A9);}var BA=B[L];var A=A8[L];if(BA<=A){B[L]+=(A-BA);B[R]-=(A-BA);}}},_checkHeight:function(){var B=this;var A8=B.info;var T=B.originalInfo;var L=B.get(Z);var R=B.get(V);B._checkConstrain(O,Ak,s);var A9=(A8.offsetHeight>L);var A=(A8.offsetHeight<R);if(A9){A8.offsetHeight=L;if(B.changeTopHandles){A8.top=T.top+T.offsetHeight-L;}}if(A){A8.offsetHeight=R;if(B.changeTopHandles){A8.top=T.top+T.offsetHeight-R;}}},_checkRatio:function(){var A8=this;var B=A8.info;var R=A8.originalInfo;var BA=R.offsetWidth;var A=R.offsetHeight;var T=R.top;var BB=R.left;var A9=function(){return(B.offsetWidth/BA);};var L=function(){return(B.offsetHeight/A);};if(A8.changeHeightHandles){B.offsetWidth=BA*L();A8._checkWidth();
B.offsetHeight=A*A9();}else{if(A8.changeWidthHandles){B.offsetHeight=A*A9();A8._checkHeight();B.offsetWidth=BA*L();}}if(A8.changeTopHandles){B.top=T+(A-B.offsetHeight);}if(A8.changeLeftHandles){B.left=BB+(BA-B.offsetWidth);}},_checkRegion:function(){var A=this;var B=A.get(v).get(K);return Aa.DOM.inRegion(null,B,true,A.info);},_checkWidth:function(){var A=this;var A9=A.info;var A8=A.originalInfo;var T=A.get(Ay);var R=A.get(AB);A._checkConstrain(E,M,Aw);var L=(A9.offsetWidth>T);var B=(A9.offsetWidth<R);if(L){A9.offsetWidth=T;if(A.changeLeftHandles){A9.left=A8.left+A8.offsetWidth-T;}}if(B){A9.offsetWidth=R;if(A.changeLeftHandles){A9.left=A8.left+A8.offsetWidth-R;}}},_copyStyles:function(T,A8){var B=this;var A=T.getStyle(X).toLowerCase();if(A==A2){A=P;}var R={position:A};var L={};Aa.each([O,M,Ak,E],function(BA){var A9=w+AD(BA);L[A9]=A8.getStyle(A9);R[A9]=T.getStyle(A9);});A8.setStyles(R);T.setStyles(L);T.setStyles({margin:0});A8.set(s,T.get(s));A8.set(Aw,T.get(Aw));},_extractHandleName:Aa.cached(function(L){var B=L.get(Ae);var A=B.match(new RegExp(p(Ab,o,"(\\w{1,2})\\b")));return A?A[1]:null;}),_getInfo:function(T,A){var BC=this,A8;var BA=A.dragEvent.target;if(A){A8=(BA.actXY.length?BA.actXY:BA.lastXY);}var A9=T.getXY();var R=A9[0];var L=A9[1];var B=T.get(s);var BB=T.get(Aw);return{bottom:(L+B),actXY:A8,left:R,top:L,offsetHeight:B,offsetWidth:BB,right:(R+BB)};},_recalculateXY:function(){var A=this;var L=A.info;var B=A.originalInfo;L.left=B.left+(L.left-B.left);L.top=B.top+(L.top-B.top);},_resize:function(){var A=this;var R=A.get(y);var A8=A.info;var T=A.originalInfo;var L=A8.actXY[0]-T.actXY[0];var B=A8.actXY[1]-T.actXY[1];var A9={t:function(){A8.top=T.top+B;A8.offsetHeight=T.offsetHeight-B;},r:function(){A8.offsetWidth=T.offsetWidth+L;},l:function(){A8.left=T.left+L;A8.offsetWidth=T.offsetWidth-L;},b:function(){A8.offsetHeight=T.offsetHeight+B;},tr:function(){this.t();this.r();},br:function(){this.b();this.r();},tl:function(){this.t();this.l();},bl:function(){this.b();this.l();}};A9[R](L,B);},_setupHandleDD:function(R,L){var B=this;var A=new Aa.DD.Drag({bubbleTargets:B,clickPixelThresh:0,clickTimeThresh:0,data:{handle:R,node:L},node:L,useShim:true,move:false});A.plug(Aa.Plugin.DDConstrained,{stickX:(R==AO||R==AS),stickY:(R==AN||R==AZ),tickX:B.get(Ao),tickY:B.get(Al)});},_setOffset:function(L,B,A){L.set(Aw,B);L.set(s,A);},_syncUI:function(){var A=this;var L=A.info;var R=A.get(A0);var B=A.get(b);A._setOffset(R,L.offsetWidth,L.offsetHeight);R.setXY([L.left,L.top]);if(!R.compareTo(B)){A._setOffset(B,L.offsetWidth,L.offsetHeight);}if(Aa.UA.webkit){B.setStyle(Ab,AI);}},_syncProxyUI:function(){var B=this;var R=B.info;var L=B.get(AE);var A=B.get(n);var T=L.getStyle(Ai);A.show().setStyles({cursor:T,height:R.offsetHeight+AL,width:R.offsetWidth+AL});L.dd.set(AU,T);A.setXY([R.left,R.top]);},_updateChangeHandleInfo:function(B){var A=this;A.changeHeightHandles=j.test(B);A.changeLeftHandles=Ah.test(B);A.changeTopHandles=J.test(B);A.changeWidthHandles=i.test(B);},_updateInfo:function(B){var A=this;A.info=A._getInfo(A.get(A0),B);},_setActiveHandlesUI:function(L){var A=this;var B=A.get(AE);if(B){if(L){A.eachHandle(function(R){R.removeClass(AQ);});B.addClass(AQ);}else{B.removeClass(AQ);}}},_setHideHandlesUI:function(B){var A=this;var L=A.get(A0);if(!A.get(a)){if(B){L.addClass(G);}else{L.removeClass(G);}}},_defMouseUpFn:function(B){var A=this;A.set(a,false);},_defResizeFn:function(L){var A=this;var B=A.info;A._updateInfo(L);A._resize();A._checkHeight();A._checkWidth();if(A.get(W)){A._checkRatio();}A._recalculateXY();if(A.get(v)&&!A._checkRegion()){A.info=B;}},_defResizeEndFn:function(L){var A=this;var B=L.dragEvent.target;B.actXY=[];if(A.get(An)){A._syncProxyUI();A.get(n).hide();}A._syncUI();A.set(y,null);A.set(AE,null);A._setActiveHandlesUI(false);},_defResizeStartFn:function(B){var A=this;A.set(a,true);A.originalInfo=A._getInfo(A.get(A0),B);A._updateInfo(B);},_afterResize:function(B){var A=this;if(A.get(An)){A._syncProxyUI();}else{A._syncUI();}},_handleMouseUpEvent:function(A){this.fire(t,{dragEvent:A,info:this.info});},_handleResizeEvent:function(A){this.fire(h,{dragEvent:A,info:this.info});},_handleResizeEndEvent:function(A){this.fire(u,{dragEvent:A,info:this.info});},_handleResizeStartEvent:function(A){this.fire(AG,{dragEvent:A,info:this.info});},_onWrapperMouseEnter:function(B){var A=this;if(A.get(Ad)){A._setHideHandlesUI(false);}},_onWrapperMouseLeave:function(B){var A=this;if(A.get(Ad)){A._setHideHandlesUI(true);}},_onHandleMouseOver:function(L){var A=this;var B=L.currentTarget;var R=A._extractHandleName(B);if(!A.get(a)){A.set(y,R);A.set(AE,B);A._setActiveHandlesUI(true);A._updateChangeHandleInfo(R);}},_onHandleMouseOut:function(B){var A=this;if(!A.get(a)){A._setActiveHandlesUI(false);}}}});Aa.each(e,function(B,A){N.ATTRS[A4(B)]={setter:function(){return this._buildHandle(B);},value:null,writeOnce:true};});Aa.Resize=N;},"@VERSION@",{requires:["aui-base","dd","substitute"],skinnable:true});