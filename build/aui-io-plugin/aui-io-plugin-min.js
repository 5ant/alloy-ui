AUI.add("aui-io-plugin",function(S){var O=S.Lang,P=O.isBoolean,Q=O.isString,T=function(A){return(A instanceof S.Node);},U=S.WidgetStdMod,C="Node",M="Widget",D="failure",G="failureMessage",W="host",H="icon",I="io",E="IOPlugin",V="loading",F="loadingMask",c="node",Z="parseContent",K="queue",N="section",b="showLoading",Y="success",R="type",B="where",X=S.ClassNameManager.getClassName,J=X(H,V);function a(A){a.superclass.constructor.apply(this,arguments);}S.mix(a,{NAME:E,NS:I,ATTRS:{node:{value:null,setter:function(e){var A=this;if(!e){var d=A.get(W);var L=A.get(R);if(L==C){e=d;}else{if(L==M){e=d.getStdModNode(A.get(N));}}}return S.one(e);},validator:T},failureMessage:{value:"Failed to retrieve content",validator:Q},loadingMask:{value:{}},parseContent:{value:true,validator:P},showLoading:{value:true,validator:P},section:{value:U.BODY,validator:function(A){return(!A||A==U.BODY||A==U.HEADER||A==U.FOOTER);}},type:{readOnly:true,valueFn:function(){var A=this;var L=C;if(A.get(W) instanceof S.Widget){L=M;}return L;},validator:Q},where:{value:U.REPLACE,validator:function(A){return(!A||A==U.AFTER||A==U.BEFORE||A==U.REPLACE);}}}});S.extend(a,S.IORequest,{initializer:function(){var A=this;A.bindUI();},bindUI:function(){var A=this;A.on("activeChange",A._onActiveChange);A.on(Y,A._successHandler);A.on(D,A._failureHandler);if(A.get(R)==M&&A.get(b)){var L=A.get(W);L.after("heightChange",A._syncLoadingMaskUI,A);L.after("widthChange",A._syncLoadingMaskUI,A);}},_afterInit:function(){var A=this;A._bindPlugins();a.superclass._afterInit.apply(this,arguments);},_bindPlugins:function(){var L=this;var e=L.get(c);if(e&&L.get(Z)){e.plug(S.Plugin.ParseContent);if(L.get(R)==M){var d=L.get(W);var A=e.ParseContent.get(K);if(A){d.on("close",function(f){if(A.isRunning()){f.halt();}});d.after("close",function(f){A.stop();});}}}},hideLoading:function(){var A=this;var L=A.get(c);if(L.loadingmask){L.loadingmask.hide();}},setContent:function(d){var A=this;var L=A.get(c);if(A._maskNode){A._maskNode.remove();}A._getContentSetterByType().apply(A,[d]);},showLoading:function(){var A=this;var L=A.get(c);if(!L.loadingmask){L.plug(S.LoadingMask,A.get(F));A._maskNode=L.loadingmask._mask.get("boundingBox");}else{if(A._maskNode){L.appendChild(A._maskNode);}}L.loadingmask.show();},_getContentSetterByType:function(){var A=this;var L={Node:function(f){var d=this;var e=d.get(c);e.setContent.apply(e,[f]);},Widget:function(f){var d=this;var e=d.get(W);e.setStdModContent.apply(e,[d.get(N),f,d.get(B)]);}};return L[this.get(R)];},_syncLoadingMaskUI:function(){var A=this;A.get(c).loadingmask.refreshMask();},_successHandler:function(L,e,d){var A=this;A.setContent(d.responseText);},_failureHandler:function(L,e,d){var A=this;A.setContent(A.get(G));},_onActiveChange:function(d){var A=this;var L=A.get(b);if(d.newVal){if(L){A.showLoading();}}else{if(L){A.hideLoading();}}}});S.namespace("Plugin").IO=a;},"@VERSION@",{requires:["aui-component-overlay","aui-parse-content","aui-io-request","aui-loading-mask"],skinnable:false});