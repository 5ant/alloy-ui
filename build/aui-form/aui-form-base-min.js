AUI.add("aui-form-base",function(a){var g=a.Lang,f=a.getClassName,i="form",h=f(i),c=f("field","labels"),b=f("field","labels","inline"),e={left:[c,"left"].join("-"),right:[c,"right"].join("-"),top:[c,"top"].join("-")};var d=a.Component.create({NAME:i,ATTRS:{action:{value:location.href,getter:"_attributeGetter",setter:"_attributeSetter"},id:{},method:{value:"POST",getter:"_attributeGetter",setter:"_attributeSetter"},monitorChanges:{value:false},nativeSubmit:{value:false},values:{getter:function(l){var j=this;var k=a.io._serialize(j.get("contentBox").getDOM());return a.QueryString.parse(k);},setter:function(m){var j=this;var k=j._setFieldsObject;var l=j.get("monitorChanges");if(g.isArray(m)){k=j._setFieldsArray;}a.each(m,a.rbind(k,j,l));return a.Attribute.INVALID_VALUE;}},fieldValues:{getter:function(k){var j=this;var l={};j.fields.each(function(n,m,o){l[n.get("name")]=n.get("value");});return l;}},labelAlign:{value:""}},HTML_PARSER:{action:function(k){var j=this;return j._attributeGetter(null,"action");},method:function(k){var j=this;return j._attributeGetter(null,"method");}},prototype:{CONTENT_TEMPLATE:"<form></form>",initializer:function(){var j=this;j.fields=new a.DataSet({getKey:j._getNodeId});},renderUI:function(){var j=this;j._renderForm();},bindUI:function(){var j=this;var k=j.get("nativeSubmit");if(!k){j.get("contentBox").on("submit",j._onSubmit);}j.after("disabledChange",j._afterDisabledChange);j.after("labelAlignChange",j._afterLabelAlignChange);j.after("nativeSubmitChange",j._afterNativeSubmitChange);},syncUI:function(){var j=this;var k=j.get("contentBox");j.set("id",k.guid());j._uiSetLabelAlign(j.get("labelAlign"));},add:function(j,n){var s=this;var p=a.Array(j);var m=p.length;var q;var j=s.fields;var o=s.get("contentBox");for(var l=0;l<p.length;l++){q=p[l];q=a.Field.getField(q);if(q&&j.indexOf(q)==-1){j.add(q);if(n&&!q.get("rendered")){var k=q.get("node");var r=null;if(!k.inDoc()){r=o;}q.render(r);}}}},clearInvalid:function(){var j=this;j.fields.each(function(l,k,m){l.clearInvalid();});},getField:function(m){var j=this;var l;if(m){var k=j.fields;l=k.item(m);if(!g.isObject(l)){k.each(function(o,n,p){if(o.get("id")==m||o.get("name")==m){l=o;return false;}});}}return l;},invoke:function(l,k){var j=this;return j.fields.invoke(l,k);},isDirty:function(){var j=this;var k=false;j.fields.each(function(m,l,n){if(m.isDirty()){k=true;return false;}});return k;},isValid:function(){var j=this;var k=true;j.fields.each(function(m,l,n){if(!m.isValid()){k=false;return false;}});return k;},markInvalid:function(l){var j=this;var k=j._markInvalidObject;if(g.isArray(l)){k=j._markInvalidArray;}a.each(l,k,j);return j;},remove:function(l,k){var j=this;j.fields.remove(l);if(k){l=j.getField(l);if(l){l.destroy();}}return j;},resetValues:function(){var j=this;j.fields.each(function(l,k,m){l.resetValue();});},submit:function(k){var j=this;var l=j.isValid();if(l){if(j.get("nativeSubmit")){j.get("contentBox").submit();}else{k=k||{};a.mix(k,{id:j.get("id")});a.io(j.get("action"),{form:k,method:j.get("method"),on:{complete:a.bind(j._onSubmitComplete,j),end:a.bind(j._onSubmitEnd,j),failure:a.bind(j._onSubmitFailure,j),start:a.bind(j._onSubmitStart,j),success:a.bind(j._onSubmitSuccess,j)}});}}return l;},_afterDisabledChange:function(l){var k=this;var j="disable";if(l.newVal){j="enable";}k.fields.each(function(n,m,o){n[j];});},_afterLabelAlignChange:function(k){var j=this;j._uiSetLabelAlign(k.newVal,k.prevVal);},_afterNativeSubmitChange:function(m){var k=this;var l=k.get("contentBox");var j="on";if(m.newVal){j="detach";}l[j]("submit",k._onSubmit);},_attributeGetter:function(l,k){var j=this;return j.get("contentBox").attr(k);},_attributeSetter:function(l,k){var j=this;j.get("contentBox").attr(k,l);return l;},_getNodeId:function(l){var k;if(l instanceof a.Field){k=l.get("node");}else{k=a.one(l);}var j=k&&k.guid();return j;},_onSubmit:function(j){j.halt();},_onSubmitComplete:function(k){var j=this;j.fire("complete",{ioEvent:k});},_onSubmitEnd:function(k){var j=this;j.fire("end",{ioEvent:k});},_onSubmitFailure:function(k){var j=this;j.fire("failure",{ioEvent:k});},_onSubmitStart:function(k){var j=this;j.fire("start",{ioEvent:k});},_onSubmitSuccess:function(k){var j=this;j.fire("success",{ioEvent:k});},_renderForm:function(){var j=this;j.get("contentBox").removeClass(h);},_markInvalidArray:function(l,k,n){var j=this;var m=j.getField(l.id);if(m){m.markInvalid(l.message);}},_markInvalidObject:function(l,k,n){var j=this;var m=(!g.isFunction(l))&&j.getField(k);if(m){m.markInvalid(l);}},_setFieldsArray:function(m,k,o,l){var j=this;var n=j.getField(m.id);if(n){n.set("value",m.value);if(l){n.set("prevVal",n.get("value"));}}},_setFieldsObject:function(m,k,o,l){var j=this;var n=(!g.isFunction(m))&&j.getField(k);if(n){n.set("value",m);if(l){n.set("prevVal",n.get("value"));}}},_uiSetLabelAlign:function(m,n){var k=this;var l=k.get("contentBox");l.replaceClass(e[n],e[m]);var j="removeClass";if(/right|left/.test(m)){j="addClass";}l[j](b);}}});a.Form=d;},"@VERSION@",{requires:["aui-base","aui-data-set","aui-form-field","querystring-parse"]});