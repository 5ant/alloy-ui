AUI.add("aui-form-base",function(B){var H=B.Lang,G=B.ClassNameManager.getClassName,J="form",I=G(J),D=G("field","labels"),C=G("field","labels","inline"),F={left:[D,"left"].join("-"),right:[D,"right"].join("-"),top:[D,"top"].join("-")};var E=B.Component.create({NAME:J,ATTRS:{action:{value:location.href,getter:"_attributeGetter",setter:"_attributeSetter"},id:{},method:{value:"POST",getter:"_attributeGetter",setter:"_attributeSetter"},monitorChanges:{value:false},nativeSubmit:{value:false},values:{getter:function(L){var A=this;var K=B.io._serialize(A.get("contentBox").getDOM());return B.QueryString.parse(K);},setter:function(M){var A=this;var K=A._setFieldsObject;var L=A.get("monitorChanges");if(H.isArray(M)){K=A._setFieldsArray;}B.each(M,B.rbind(K,A,L));return B.Attribute.INVALID_VALUE;}},fieldValues:{getter:function(K){var A=this;var L={};A.fields.each(function(N,M,O){L[N.get("name")]=N.get("value");});return L;}},labelAlign:{value:""}},HTML_PARSER:{action:function(K){var A=this;return A._attributeGetter(null,"action");},method:function(K){var A=this;return A._attributeGetter(null,"method");}},prototype:{CONTENT_TEMPLATE:"<form></form>",initializer:function(){var A=this;A.fields=new B.DataSet({getKey:A._getNodeId});},renderUI:function(){var A=this;A._renderForm();},bindUI:function(){var A=this;var K=A.get("nativeSubmit");if(!K){A.get("contentBox").on("submit",A._onSubmit);}A.after("disabledChange",A._afterDisabledChange);A.after("labelAlignChange",A._afterLabelAlignChange);A.after("nativeSubmitChange",A._afterNativeSubmitChange);},syncUI:function(){var A=this;var K=A.get("contentBox");A.set("id",K.guid());A._uiSetLabelAlign(A.get("labelAlign"));},add:function(A,N){var S=this;var P=B.Array(A);var M=P.length;var Q;var A=S.fields;var O=S.get("contentBox");for(var L=0;L<P.length;L++){Q=P[L];Q=B.Field.getField(Q);if(Q&&A.indexOf(Q)==-1){A.add(Q);if(N&&!Q.get("rendered")){var K=Q.get("node");var R=null;if(!K.inDoc()){R=O;}Q.render(R);}}}},clearInvalid:function(){var A=this;A.fields.each(function(L,K,M){L.clearInvalid();});},getField:function(M){var A=this;var L;if(M){var K=A.fields;L=K.item(M);if(!H.isObject(L)){K.each(function(O,N,P){if(O.get("id")==M||O.get("name")==M){L=O;return false;}});}}return L;},invoke:function(L,K){var A=this;return A.fields.invoke(L,K);},isDirty:function(){var A=this;var K=false;A.fields.each(function(M,L,N){if(M.isDirty()){K=true;return false;}});return K;},isValid:function(){var A=this;var K=true;A.fields.each(function(M,L,N){if(!M.isValid()){K=false;return false;}});return K;},markInvalid:function(L){var A=this;var K=A._markInvalidObject;if(H.isArray(L)){K=A._markInvalidArray;}B.each(L,K,A);return A;},remove:function(L,K){var A=this;A.fields.remove(L);if(K){L=A.getField(L);if(L){L.destroy();}}return A;},resetValues:function(){var A=this;A.fields.each(function(L,K,M){L.resetValue();});},submit:function(K){var A=this;var L=A.isValid();if(L){if(A.get("nativeSubmit")){A.get("contentBox").submit();}else{K=K||{};B.mix(K,{id:A.get("id")});B.io(A.get("action"),{form:K,method:A.get("method"),on:{complete:B.bind(A._onSubmitComplete,A),end:B.bind(A._onSubmitEnd,A),failure:B.bind(A._onSubmitFailure,A),start:B.bind(A._onSubmitStart,A),success:B.bind(A._onSubmitSuccess,A)}});}}return L;},_afterDisabledChange:function(L){var K=this;var A="disable";if(L.newVal){A="enable";}K.fields.each(function(N,M,O){N[A];});},_afterLabelAlignChange:function(K){var A=this;A._uiSetLabelAlign(K.newVal,K.prevVal);},_afterNativeSubmitChange:function(M){var K=this;var L=K.get("contentBox");var A="on";if(M.newVal){A="detach";}L[A]("submit",K._onSubmit);},_attributeGetter:function(L,K){var A=this;return A.get("contentBox").attr(K);},_attributeSetter:function(L,K){var A=this;A.get("contentBox").attr(K,L);return L;},_getNodeId:function(L){var K;if(L instanceof B.Field){K=L.get("node");}else{K=B.one(L);}var A=K&&K.guid();return A;},_onSubmit:function(A){A.halt();},_onSubmitComplete:function(K){var A=this;A.fire("complete",{ioEvent:K});},_onSubmitEnd:function(K){var A=this;A.fire("end",{ioEvent:K});},_onSubmitFailure:function(K){var A=this;A.fire("failure",{ioEvent:K});},_onSubmitStart:function(K){var A=this;A.fire("start",{ioEvent:K});},_onSubmitSuccess:function(K){var A=this;A.fire("success",{ioEvent:K});},_renderForm:function(){var A=this;A.get("contentBox").removeClass(I);},_markInvalidArray:function(L,K,N){var A=this;var M=A.getField(L.id);if(M){M.markInvalid(L.message);}},_markInvalidObject:function(L,K,N){var A=this;var M=(!H.isFunction(L))&&A.getField(K);if(M){M.markInvalid(L);}},_setFieldsArray:function(M,K,O,L){var A=this;var N=A.getField(M.id);if(N){N.set("value",M.value);if(L){N.set("prevVal",N.get("value"));}}},_setFieldsObject:function(M,K,O,L){var A=this;var N=(!H.isFunction(M))&&A.getField(K);if(N){N.set("value",M);if(L){N.set("prevVal",N.get("value"));}}},_uiSetLabelAlign:function(M,N){var K=this;var L=K.get("contentBox");L.replaceClass(F[N],F[M]);var A="removeClass";if(/right|left/.test(M)){A="addClass";}L[A](C);}}});B.Form=E;},"@VERSION@",{requires:["aui-base","aui-data-set","aui-form-field","querystring-parse"]});