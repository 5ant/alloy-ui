AUI.add("aui-form-textarea",function(c){var f=c.Lang,e=c.getClassName,l="textarea",h=e(l),d=[e(l,"height","monitor"),e("field","text","input"),e("helper","hidden","accessible")].join(" "),i="&nbsp;&nbsp;",j="&nbsp;\n&nbsp;",a='<pre class="'+d+'">',k="</pre>",g='<textarea autocomplete="off" class="{cssClass}" name="{name}"></textarea>';var b=c.Component.create({NAME:l,ATTRS:{autoSize:{value:true},height:{value:"auto"},maxHeight:{value:1000,setter:"_setAutoDimension"},minHeight:{value:45,setter:"_setAutoDimension"},width:{value:"auto",setter:"_setAutoDimension"}},HTML_PARSER:{node:"textarea"},EXTENDS:c.Textfield,prototype:{FIELD_TEMPLATE:g,renderUI:function(){var m=this;b.superclass.renderUI.call(m);if(m.get("autoSize")){m._renderHeightMonitor();}},bindUI:function(){var m=this;b.superclass.bindUI.call(m);if(m.get("autoSize")){m.get("node").on("keyup",m._onKeyup,m);}m.after("adjustSize",m._uiAutoSize);m.after("heightChange",m._afterHeightChange);m.after("widthChange",m._afterWidthChange);},syncUI:function(){var m=this;b.superclass.syncUI.call(m);m._setAutoDimension(m.get("minHeight"),"minHeight");m._setAutoDimension(m.get("maxHeight"),"maxHeight");var n=m.get("width");var o=m.get("minHeight");m._setAutoDimension(n,"width");m._uiSetDim("height",o);m._uiSetDim("width",n);},_afterHeightChange:function(n){var m=this;m._uiSetDim("height",n.newVal,n.prevVal);},_afterWidthChange:function(n){var m=this;m._uiSetDim("width",n.newVal,n.prevVal);},_onKeyup:function(n){var m=this;m.fire("adjustSize");},_renderHeightMonitor:function(){var m=this;var o=c.Node.create(a+k);var q=m.get("node");c.getBody().append(o);m._heightMonitor=o;var s=q.getComputedStyle("fontFamily");var r=q.getComputedStyle("fontSize");var p=q.getComputedStyle("fontWeight");var n=q.getComputedStyle("fontSize");q.setStyle("height",m.get("minHeight")+"px");o.setStyles({fontFamily:s,fontSize:r,fontWeight:p});if("outerHTML" in o.getDOM()){m._updateContent=m._updateOuterContent;}else{m._updateContent=m._updateInnerContent;}},_setAutoDimension:function(o,n){var m=this;m["_"+n]=o;},_uiAutoSize:function(){var n=this;var r=n.get("node");var p=n._heightMonitor;var m=n._minHeight;var o=n._maxHeight;var q=r.val();var t=document.createTextNode(q);p.set("innerHTML","");p.appendChild(t);p.setStyle("width",r.getComputedStyle("width"));q=p.get("innerHTML");if(!q.length){q=i;}else{q+=j;}n._updateContent(q);var s=Math.max(p.get("offsetHeight"),m);s=Math.min(s,o);if(s!=n._lastHeight){n._lastHeight=s;n._uiSetDim("height",s);}},_uiSetDim:function(o,n){var m=this;var p=m.get("node");if(f.isNumber(n)){n+="px";}p.setStyle(o,n);},_updateInnerContent:function(n){var m=this;return m._heightMonitor.set("innerHTML",n);},_updateOuterContent:function(n){var m=this;n=n.replace(/\n/g,"<br />");return m._updateInnerContent(n);}}});c.Textarea=b;},"@VERSION@",{requires:["aui-form-textfield"],skinnable:true});