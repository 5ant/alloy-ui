AUI.add("aui-form-validator",function(a){var S=a.Lang,P=a.Object,c=S.isBoolean,k=S.isDate,f=P.isEmpty,b=S.isFunction,U=S.isObject,AG=S.isString,C=S.trim,o="-",j=".",X="",AA="form-validator",p="Invalid Date",r="|",K="blurHandlers",AK="checkbox",AP="container",J="containerErrorClass",Y="containerValidClass",n="contentBox",x="error",F="errorClass",G="extractCssPrefix",E="extractRules",Z="field",AM="fieldContainer",V="fieldStrings",H="inputHandlers",AF="message",B="messageContainer",y="name",AD="radio",W="rules",Q="selectText",AL="showAllMessages",q="showMessages",u="stack",T="stackErrorContainer",d="type",AJ="valid",i="validateOnBlur",AC="validateOnInput",AB="validClass",AE="blur",w="errorField",AH="input",m="reset",g="submit",l="submitError",AI="validateField",h="validField",N=a.ClassNameManager.getClassName,AO=N(AA,x),v=N(AA,x,AP),I=N(AA,AJ),M=N(AA,AJ,AP),s=N(Z),D=N(AA,AF),e=N(AA,u,x),AN='<div class="'+D+'"></div>',z='<label class="'+e+'"></label>',R=[E,i,AC];YUI.AUI.defaults.FormValidator={STRINGS:{DEFAULT:"Please fix this field.",acceptFiles:"Please enter a value with a valid extension ({0}).",alpha:"Please enter only apha characters.",alphanum:"Please enter only aphanumeric characters.",date:"Please enter a valid date.",digits:"Please enter only digits.",email:"Please enter a valid email address.",equalTo:"Please enter the same value again.",max:"Please enter a value less than or equal to {0}.",maxLength:"Please enter no more than {0} characters.",min:"Please enter a value greater than or equal to {0}.",minLength:"Please enter at least {0} characters.",number:"Please enter a valid number.",range:"Please enter a value between {0} and {1}.",rangeLength:"Please enter a value between {0} and {1} characters long.",required:"This field is required.",url:"Please enter a valid URL."},REGEX:{alpha:/^[a-z_]+$/i,alphanum:/^\w+$/,digits:/^\d+$/,number:/^[+\-]?(\d+([.,]\d+)?)+$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i},RULES:{acceptFiles:function(AR,O,AQ){var L=null;if(AG(AQ)){var A=AQ.split(/,\s*|\b\s*/).join(r);L=new RegExp("[.]("+A+")$","i");}return L&&L.test(AR);},date:function(AQ,L,O){var A=new Date(AQ);return(k(A)&&(A!=p)&&!isNaN(A));},equalTo:function(AQ,L,O){var A=a.one(O);return A&&(C(A.val())==AQ);},max:function(O,A,L){return(t.toNumber(O)<=L);},maxLength:function(O,A,L){return(O.length<=L);},min:function(O,A,L){return(t.toNumber(O)>=L);},minLength:function(O,A,L){return(O.length>=L);},range:function(AQ,L,O){var A=t.toNumber(AQ);return(A>=O[0])&&(A<=O[1]);},rangeLength:function(AQ,L,O){var A=AQ.length;return(A>=O[0])&&(A<=O[1]);},required:function(AS,AQ,AR){var L=this;if(a.FormValidator.isCheckable(AQ)){var O=AQ.get(y);var A=L.getElementsByName(O);return(A.filter(":checked").size()>0);}else{return !!AS;}}}};var t=a.Component.create({NAME:AA,ATTRS:{containerErrorClass:{value:v,validator:AG},containerValidClass:{value:M,validator:AG},errorClass:{value:AO,validator:AG},extractCssPrefix:{value:s+o,validator:AG},extractRules:{value:true,validator:c},fieldContainer:{value:j+s},fieldStrings:{value:{},validator:U},messageContainer:{getter:function(A){return a.Node.create(A).clone();},value:AN},render:{value:true},strings:{valueFn:function(){return YUI.AUI.defaults.FormValidator.STRINGS;}},rules:{validator:U,value:{}},selectText:{value:true,validator:c},showMessages:{value:true,validator:c},showAllMessages:{value:false,validator:c},stackErrorContainer:{getter:function(A){return a.Node.create(A).clone();},value:z},validateOnBlur:{value:true,validator:c},validateOnInput:{value:false,validator:c},validClass:{value:I,validator:AG}},isCheckable:function(L){var A=L.get(d).toLowerCase();return(A==AK||A==AD);},toNumber:function(A){return parseFloat(A)||0;},EXTENDS:a.Widget,UI_ATTRS:R,prototype:{CONTENT_TEMPLATE:null,UI_EVENTS:{},initializer:function(){var A=this;A.blurHandlers=[];A.errors={};A.inputHandlers=[];A.stackErrorContainers={};},bindUI:function(){var A=this;A._createEvents();
A._bindValidation();},addFieldError:function(AR,O){var A=this;var AQ=A.errors;var L=AR.get(y);if(!AQ[L]){AQ[L]=[];}AQ[L].push(O);},clearFieldError:function(L){var A=this;delete A.errors[L.get(y)];},eachRule:function(L){var A=this;a.each(A.get(W),function(O,AQ){if(b(L)){L.apply(A,[O,AQ]);}});},findFieldContainer:function(L){var A=this;var O=A.get(AM);if(O){return L.ancestor(O);}},focusInvalidField:function(){var A=this;var L=A.get(n);var O=L.one(j+AO);if(O){if(A.get(Q)){O.selectText();}O.focus();}},getElementsByName:function(L){var A=this;return A.get(n).all('[name="'+L+'"]');},getField:function(L){var A=this;if(AG(L)){L=A.getElementsByName(L).item(0);}return L;},getFieldError:function(L){var A=this;return A.errors[L.get(y)];},getFieldStackErrorContainer:function(AQ){var A=this;var O=AQ.get(y);var L=A.stackErrorContainers;if(!L[O]){L[O]=A.get(T);}return L[O];},getFieldErrorMessage:function(AS,AR){var AT=this;var AV=AS.get(y);var O=AT.get(V)[AV]||{};var AQ=AT.get(W)[AV];var AU=AT.getStrings();var A={};if(AR in AQ){var L=a.Array(AQ[AR]);a.each(L,function(AY,AX){A[AX]=[AY].join(X);});}var AW=(O[AR]||AU[AR]||AU.DEFAULT);return a.substitute(AW,A);},hasErrors:function(){var A=this;return !f(A.errors);},highlight:function(O,L){var A=this;var AQ=A.findFieldContainer(O);A._highlightHelper(O,A.get(F),A.get(AB),L);A._highlightHelper(AQ,A.get(J),A.get(Y),L);},unhighlight:function(L){var A=this;A.highlight(L,true);},printStackError:function(AQ,L,O){var A=this;if(!A.get(AL)){O=O.slice(0,1);}L.empty();a.each(O,function(AS,AR){var AT=A.getFieldErrorMessage(AQ,AS);var AU=A.get(B).addClass(AS);L.append(AU.html(AT));});},resetAllFields:function(){var A=this;A.eachRule(function(O,AQ){var L=A.getField(AQ);A.resetField(L);});},resetField:function(O){var A=this;var L=A.getFieldStackErrorContainer(O);L.remove();A.resetFieldCss(O);A.clearFieldError(O);},resetFieldCss:function(O){var L=this;var AQ=L.findFieldContainer(O);var A=function(AS,AR){if(AS){a.each(AR,function(AT){AS.removeClass(L.get(AT));});}};A(O,[AB,F]);A(AQ,[Y,J]);},validatable:function(O){var A=this;var AR=A.get(W)[O.get(y)];var AQ=AR.required;var L=YUI.AUI.defaults.FormValidator.RULES.required.apply(A,[O.val(),O]);return(AQ||(!AQ&&L));},validate:function(){var A=this;A.eachRule(function(L,O){A.validateField(O);});A.focusInvalidField();},validateField:function(AQ){var A=this;var L=A.getField(AQ);if(L){var O=A.validatable(L);A.resetField(L);if(O){A.fire(AI,{validator:{field:L}});}}},_bindValidation:function(){var A=this;var L=A.get(n);L.on(m,a.bind(A._onFormReset,A));L.on(g,a.bind(A._onFormSubmit,A));},_createEvents:function(){var A=this;var L=function(O,AQ){A.publish(O,{defaultFn:AQ});};L(w,A._defErrorFieldFn);L(h,A._defValidFieldFn);L(AI,A._defValidateFieldFn);},_defErrorFieldFn:function(AQ){var A=this;var O=AQ.validator;var AR=O.field;A.highlight(AR);if(A.get(q)){var L=A.getFieldStackErrorContainer(AR);AR.placeBefore(L);A.printStackError(AR,L,O.errors);}},_defValidFieldFn:function(L){var A=this;var O=L.validator.field;A.unhighlight(O);},_defValidateFieldFn:function(L){var A=this;var AQ=L.validator.field;var AR=A.get(W)[AQ.get(y)];a.each(AR,function(AV,AT){var AU=YUI.AUI.defaults.FormValidator.RULES[AT];var AS=C(AQ.val());if(b(AU)&&!AU.apply(A,[AS,AQ,AV])){A.addFieldError(AQ,AT);}});var O=A.getFieldError(AQ);if(O){A.fire(w,{validator:{field:AQ,errors:O}});}else{A.fire(h,{validator:{field:AQ}});}},_highlightHelper:function(AQ,A,L,O){if(AQ){if(O){AQ.removeClass(A).addClass(L);}else{AQ.removeClass(L).addClass(A);}}},_onBlurField:function(L){var A=this;var O=L.currentTarget.get(y);A.validateField(O);},_onFieldInputChange:function(L){var A=this;A.validateField(L.currentTarget);},_onFormSubmit:function(L){var A=this;var O={validator:{formEvent:L}};A.validate();if(A.hasErrors()){O.validator.errors=A.errors;A.fire(l,O);L.halt();}else{A.fire(g,O);}},_onFormReset:function(L){var A=this;A.resetAllFields();},_bindValidateHelper:function(AR,L,AQ,O){var A=this;A._unbindHandlers(O);if(AR){A.eachRule(function(AT,AU){var AS=A.getElementsByName(AU);A[O].push(AS.on(L,a.bind(AQ,A)));});}},_uiSetExtractRules:function(AR){var A=this;if(AR){var L=A.get(n);var AQ=A.get(W);var O=A.get(G);a.each(YUI.AUI.defaults.FormValidator.RULES,function(AU,AT){var AS=[j,O,AT].join(X);L.all(AS).each(function(AV){if(AV.get(d)){var AW=AV.get(y);if(!AQ[AW]){AQ[AW]={};}if(!(AT in AQ[AW])){AQ[AW][AT]=true;}}});});}},_uiSetValidateOnInput:function(L){var A=this;A._bindValidateHelper(L,AH,A._onFieldInputChange,H);},_uiSetValidateOnBlur:function(L){var A=this;A._bindValidateHelper(L,AE,A._onBlurField,K);},_unbindHandlers:function(L){var A=this;a.each(A[L],function(O){O.detach();});A[L]=[];}}});a.each(YUI.AUI.defaults.FormValidator.REGEX,function(L,A){YUI.AUI.defaults.FormValidator.RULES[A]=function(AR,O,AQ){return YUI.AUI.defaults.FormValidator.REGEX[A].test(AR);};});a.FormValidator=t;},"@VERSION@",{requires:["aui-base","aui-event-input","selector-css3","substitute"]});