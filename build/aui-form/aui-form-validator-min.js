AUI.add("aui-form-validator",function(V){var N=V.Lang,K=V.Object,q=N.isBoolean,j=N.isDate,a=K.isEmpty,X=N.isFunction,x=N.isObject,Q=N.isString,B=N.trim,i=".",S="",R="form-validator",e="Invalid Date",l="|",AD="blurHandlers",AF="boundingBox",G="checkbox",D="container",s="error",AG="errorClass",p="errorContainer",AE="extractCssPrefix",AI="extractRules",U="field",E="inputHandlers",w="message",b="messages",C="messageContainer",r="name",v="radio",T="rules",y="selectText",AC="showAllMessages",c="showMessages",Y="type",AB="valid",g="validateOnBlur",u="validateOnInput",t="validClass",P="blur",o="errorField",z="input",k="reset",d="submit",h="submitError",J="validateField",f="validField",I=V.ClassNameManager.getClassName,AH=I(R,s),m=I(U,S),F=I(R,AB),Z=I(R,s,D),H=I(R,w,D),W='<label class="'+Z+'"></label>',AA='<div class="'+H+'"></div>',M=[AI,g,u];var n=V.Component.create({NAME:R,ATTRS:{errorContainer:{getter:function(A){return V.Node.create(A).cloneNode(true);},value:W},errorClass:{value:AH,validator:Q},extractCssPrefix:{value:m,validator:Q},extractRules:{value:true,validator:q},messages:{value:{},validator:x},messageContainer:{getter:function(A){return V.Node.create(A).cloneNode(true);},value:AA},render:{value:true},rules:{validator:x,value:{}},selectText:{value:true,validator:q},showMessages:{value:true,validator:q},showAllMessages:{value:false,validator:q},validateOnBlur:{value:true,validator:q},validateOnInput:{value:false,validator:q},validClass:{value:F,validator:Q}},MESSAGES:{DEFAULT:"Please fix this field.",acceptFiles:"Please enter a value with a valid extension ({0}).",alpha:"Please enter only apha characters.",alphanum:"Please enter only aphanumeric characters.",date:"Please enter a valid date.",digits:"Please enter only digits.",email:"Please enter a valid email address.",equalTo:"Please enter the same value again.",max:"Please enter a value less than or equal to {0}.",maxLength:"Please enter no more than {0} characters.",min:"Please enter a value greater than or equal to {0}.",minLength:"Please enter at least {0} characters.",number:"Please enter a valid number.",range:"Please enter a value between {0} and {1}.",rangeLength:"Please enter a value between {0} and {1} characters long.",required:"This field is required.",url:"Please enter a valid URL."},REGEX:{alpha:/^[a-z_]+$/i,alphanum:/^\w+$/,digits:/^\d+$/,number:/^[+\-]?(\d+([.,]\d+)?)+$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i},RULES:{acceptFiles:function(AJ,O,AK){var L=null;if(Q(AK)){var A=AK.split(/,\s*|\b\s*/).join(l);L=new RegExp("[.]("+A+")$","i");}return L&&L.test(AJ);},date:function(O,L,AJ){var A=new Date(O);return(j(A)&&(A!=e)&&!isNaN(A));},equalTo:function(O,L,AJ){var A=V.one(AJ);return A&&(B(A.val())==O);},max:function(L,A,O){return(n.toNumber(L)<=O);},maxLength:function(L,A,O){return(L.length<=O);},min:function(L,A,O){return(n.toNumber(L)>=O);},minLength:function(L,A,O){return(L.length>=O);},range:function(O,L,AJ){var A=n.toNumber(O);return(A>=AJ[0])&&(A<=AJ[1]);},rangeLength:function(O,L,AJ){var A=O.length;return(A>=AJ[0])&&(A<=AJ[1]);},required:function(AK,O,AL){var A=this;if(V.FormValidator.isCheckable(O)){var L=O.get(r);var AJ=A.getElementsByName(L);return(AJ.filter(":checked").size()>0);}else{return !!AK;}}},isCheckable:function(L){var A=L.get(Y).toLowerCase();return(A==G||A==v);},toNumber:function(A){return parseFloat(A)||0;},EXTENDS:V.Widget,UI_ATTRS:M,prototype:{CONTENT_TEMPLATE:null,UI_EVENTS:{},blurHandlers:[],errorContainers:{},errors:{},inputHandlers:[],bindUI:function(){var A=this;A._createEvents();A._bindValidation();},addFieldError:function(AJ,O){var A=this;var AK=A.errors;var L=AJ.get(r);if(!AK[L]){AK[L]=[];}AK[L].push(O);},clearFieldError:function(L){var A=this;delete A.errors[L.get(r)];},eachRule:function(L){var A=this;V.each(A.get(T),function(O,AJ){if(X(L)){L.apply(A,[O,AJ]);}});},focusInvalidField:function(){var A=this;var L=A.get(AF);var O=L.one(i+AH);if(O){if(A.get(y)){O.selectText();
}O.focus();}},getElementsByName:function(L){var A=this;return A.get(AF).all('[name="'+L+'"]');},getField:function(L){var A=this;if(Q(L)){L=A.getElementsByName(L).item(0);}return L;},getFieldError:function(L){var A=this;return A.errors[L.get(r)];},getFieldErrorContainer:function(AJ){var A=this;var L=AJ.get(r);var O=A.errorContainers;if(!O[L]){O[L]=A.get(p);}return O[L];},getFieldErrorMessage:function(AM,AL){var AN=this;var AO=AM.get(r);var O=AN.get(b)[AO]||{};var A=AN.get(T)[AO];var L=n.MESSAGES;var AK={};if(AL in A){var AJ=V.Array(A[AL]);V.each(AJ,function(AR,AQ){AK[AQ]=[AR].join(S);});}var AP=(O[AL]||L[AL]||L.DEFAULT);return V.substitute(AP,AK);},hasErrors:function(){var A=this;return !a(A.errors);},highlight:function(AJ){var L=this;var A=L.get(AG);var O=L.get(t);AJ.removeClass(O).addClass(A);},unhighlight:function(AJ){var L=this;var A=L.get(AG);var O=L.get(t);AJ.removeClass(A).addClass(O);},printStackError:function(O,L,AJ){var A=this;if(!A.get(AC)){AJ=AJ.slice(0,1);}L.empty();V.each(AJ,function(AL,AK){var AM=A.getFieldErrorMessage(O,AL);var AN=A.get(C).addClass(AL);L.append(AN.html(AM));});},resetAllFields:function(){var A=this;A.eachRule(function(O,AJ){var L=A.getField(AJ);A.resetField(L);});},resetField:function(AK){var L=this;var A=L.get(AG);var AJ=L.get(t);var O=L.getFieldErrorContainer(AK);O.remove();L.clearFieldError(AK);AK.removeClass(AJ).removeClass(A);},validatable:function(O){var A=this;var AK=A.get(T)[O.get(r)];var AJ=AK.required;var L=n.RULES.required.apply(A,[O.val(),O]);return(AJ||(!AJ&&L));},validate:function(){var A=this;A.eachRule(function(L,O){A.validateField(O);});A.focusInvalidField();},validateField:function(AJ){var A=this;var O=A.getField(AJ);var L=A.validatable(O);A.resetField(O);if(L){A.fire(J,{validator:{field:O}});}},_bindValidation:function(){var A=this;var L=A.get(AF);L.on(k,V.bind(A._onFormReset,A));L.on(d,V.bind(A._onFormSubmit,A));},_createEvents:function(){var A=this;var L=function(O,AJ){A.publish(O,{defaultFn:AJ});};L(o,A._defErrorFieldFn);L(f,A._defValidFieldFn);L(J,A._defValidateFieldFn);},_defErrorFieldFn:function(AJ){var A=this;var O=AJ.validator;var AK=O.field;A.highlight(AK);if(A.get(c)){var L=A.getFieldErrorContainer(AK);AK.placeBefore(L);A.printStackError(AK,L,O.errors);}},_defValidFieldFn:function(L){var A=this;var O=L.validator.field;A.unhighlight(O);},_defValidateFieldFn:function(O){var L=this;var AJ=O.validator.field;var AK=L.get(T)[AJ.get(r)];V.each(AK,function(AO,AM){var AN=n.RULES[AM];var AL=B(AJ.val());if(X(AN)&&!AN.apply(L,[AL,AJ,AO])){L.addFieldError(AJ,AM);}});var A=L.getFieldError(AJ);if(A){L.fire(o,{validator:{field:AJ,errors:A}});}else{L.fire(f,{validator:{field:AJ}});}},_onBlurField:function(L){var A=this;var O=L.currentTarget.get(r);A.validateField(O);},_onFieldInputChange:function(L){var A=this;A.validateField(L.currentTarget);},_onFormSubmit:function(L){var A=this;var O={validator:{formEvent:L}};A.validate();if(A.hasErrors()){O.validator.errors=A.errors;A.fire(h,O);L.halt();}else{A.fire(d,O);}},_onFormReset:function(L){var A=this;A.resetAllFields();},_bindValidateHelper:function(AK,AJ,O,L){var A=this;A._unbindHandlers(L);if(AK){A.eachRule(function(AM,AN){var AL=A.getElementsByName(AN);A[L].push(AL.on(AJ,V.bind(O,A)));});}},_uiSetExtractRules:function(AK){var A=this;if(AK){var L=A.get(AF);var AJ=A.get(T);var O=A.get(AE);V.each(n.RULES,function(AN,AM){var AL=[i,O,AM].join(S);L.all(AL).each(function(AO){if(AO.get(Y)){var AP=AO.get(r);if(!AJ[AP]){AJ[AP]={};}if(!(AM in AJ[AP])){AJ[AP][AM]=true;}}});});}},_uiSetValidateOnInput:function(L){var A=this;A._bindValidateHelper(L,z,A._onFieldInputChange,E);},_uiSetValidateOnBlur:function(L){var A=this;A._bindValidateHelper(L,P,A._onBlurField,AD);},_unbindHandlers:function(L){var A=this;V.each(A[L],function(O){O.detach();});A[L]=[];}}});V.each(n.REGEX,function(L,A){n.RULES[A]=function(AJ,O,AK){return n.REGEX[A].test(AJ);};});V.FormValidator=n;},"@VERSION@",{requires:["aui-base","aui-event-input","selector-css3","substitute"]});