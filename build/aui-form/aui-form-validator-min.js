AUI.add("aui-form-validator",function(X){var P=X.Lang,M=X.Object,s=P.isBoolean,k=P.isDate,c=M.isEmpty,Y=P.isFunction,AC=P.isObject,S=P.isString,C=P.trim,m="-",j=".",U="",T="form-validator",f="Invalid Date",n="|",AK="blurHandlers",AN="boundingBox",I="checkbox",F="container",AL="containerErrorClass",w="containerValidClass",u="error",AO="errorClass",AM="extractCssPrefix",AQ="extractRules",W="field",AI="fieldContainer",AA="fieldStrings",G="inputHandlers",AB="message",D="messageContainer",t="name",z="radio",V="rules",AD="selectText",AH="showAllMessages",d="showMessages",q="stack",Q="stackErrorContainer",B="strings",Z="type",AG="valid",h="validateOnBlur",y="validateOnInput",x="validClass",R="blur",r="errorField",AE="input",l="reset",e="submit",i="submitError",K="validateField",g="validField",J=X.ClassNameManager.getClassName,AP=J(T,u),b=J(T,u,F),H=J(T,AG),AF=J(T,AG,F),o=J(W),E=J(T,AB),a=J(T,q,u),AJ='<div class="'+E+'"></div>',v='<label class="'+a+'"></label>',N=[AQ,h,y];AUI.defaults.FormValidator={STRINGS:{DEFAULT:"Please fix this field.",acceptFiles:"Please enter a value with a valid extension ({0}).",alpha:"Please enter only apha characters.",alphanum:"Please enter only aphanumeric characters.",date:"Please enter a valid date.",digits:"Please enter only digits.",email:"Please enter a valid email address.",equalTo:"Please enter the same value again.",max:"Please enter a value less than or equal to {0}.",maxLength:"Please enter no more than {0} characters.",min:"Please enter a value greater than or equal to {0}.",minLength:"Please enter at least {0} characters.",number:"Please enter a valid number.",range:"Please enter a value between {0} and {1}.",rangeLength:"Please enter a value between {0} and {1} characters long.",required:"This field is required.",url:"Please enter a valid URL."},REGEX:{alpha:/^[a-z_]+$/i,alphanum:/^\w+$/,digits:/^\d+$/,number:/^[+\-]?(\d+([.,]\d+)?)+$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i},RULES:{acceptFiles:function(AR,O,AS){var L=null;if(S(AS)){var A=AS.split(/,\s*|\b\s*/).join(n);L=new RegExp("[.]("+A+")$","i");}return L&&L.test(AR);},date:function(O,L,AR){var A=new Date(O);return(k(A)&&(A!=f)&&!isNaN(A));},equalTo:function(O,L,AR){var A=X.one(AR);return A&&(C(A.val())==O);},max:function(L,A,O){return(p.toNumber(L)<=O);},maxLength:function(L,A,O){return(L.length<=O);},min:function(L,A,O){return(p.toNumber(L)>=O);},minLength:function(L,A,O){return(L.length>=O);},range:function(O,L,AR){var A=p.toNumber(O);return(A>=AR[0])&&(A<=AR[1]);},rangeLength:function(O,L,AR){var A=O.length;return(A>=AR[0])&&(A<=AR[1]);},required:function(AS,O,AT){var A=this;if(X.FormValidator.isCheckable(O)){var L=O.get(t);var AR=A.getElementsByName(L);return(AR.filter(":checked").size()>0);}else{return !!AS;}}}};var p=X.Component.create({NAME:T,ATTRS:{containerErrorClass:{value:b,validator:S},containerValidClass:{value:AF,validator:S},errorClass:{value:AP,validator:S},extractCssPrefix:{value:o+m,validator:S},extractRules:{value:true,validator:s},fieldContainer:{value:j+o},fieldStrings:{value:{},validator:AC},messageContainer:{getter:function(A){return X.Node.create(A).cloneNode(true);},value:AJ},render:{value:true},strings:{valueFn:function(){return AUI.defaults.FormValidator.STRINGS;}},rules:{validator:AC,value:{}},selectText:{value:true,validator:s},showMessages:{value:true,validator:s},showAllMessages:{value:false,validator:s},stackErrorContainer:{getter:function(A){return X.Node.create(A).cloneNode(true);},value:v},validateOnBlur:{value:true,validator:s},validateOnInput:{value:false,validator:s},validClass:{value:H,validator:S}},isCheckable:function(L){var A=L.get(Z).toLowerCase();return(A==I||A==z);},toNumber:function(A){return parseFloat(A)||0;},EXTENDS:X.Widget,UI_ATTRS:N,prototype:{CONTENT_TEMPLATE:null,UI_EVENTS:{},blurHandlers:[],errors:{},inputHandlers:[],stackErrorContainers:{},bindUI:function(){var A=this;A._createEvents();A._bindValidation();},addFieldError:function(AR,O){var A=this;
var AS=A.errors;var L=AR.get(t);if(!AS[L]){AS[L]=[];}AS[L].push(O);},clearFieldError:function(L){var A=this;delete A.errors[L.get(t)];},eachRule:function(L){var A=this;X.each(A.get(V),function(O,AR){if(Y(L)){L.apply(A,[O,AR]);}});},findFieldContainer:function(L){var A=this;var O=A.get(AI);if(O){return L.ancestor(O);}},focusInvalidField:function(){var A=this;var L=A.get(AN);var O=L.one(j+AP);if(O){if(A.get(AD)){O.selectText();}O.focus();}},getElementsByName:function(L){var A=this;return A.get(AN).all('[name="'+L+'"]');},getField:function(L){var A=this;if(S(L)){L=A.getElementsByName(L).item(0);}return L;},getFieldError:function(L){var A=this;return A.errors[L.get(t)];},getFieldStackErrorContainer:function(AR){var A=this;var L=AR.get(t);var O=A.stackErrorContainers;if(!O[L]){O[L]=A.get(Q);}return O[L];},getFieldErrorMessage:function(AT,AS){var AU=this;var AW=AT.get(t);var L=AU.get(AA)[AW]||{};var A=AU.get(V)[AW];var AV=AU.getStrings();var AR={};if(AS in A){var O=X.Array(A[AS]);X.each(O,function(AZ,AY){AR[AY]=[AZ].join(U);});}var AX=(L[AS]||AV[AS]||AV.DEFAULT);return X.substitute(AX,AR);},hasErrors:function(){var A=this;return !c(A.errors);},highlight:function(O,L){var A=this;var AR=A.findFieldContainer(O);A._highlightHelper(O,A.get(AO),A.get(x),L);A._highlightHelper(AR,A.get(AL),A.get(w),L);},unhighlight:function(L){var A=this;A.highlight(L,true);},printStackError:function(O,L,AR){var A=this;if(!A.get(AH)){AR=AR.slice(0,1);}L.empty();X.each(AR,function(AT,AS){var AU=A.getFieldErrorMessage(O,AT);var AV=A.get(D).addClass(AT);L.append(AV.html(AU));});},resetAllFields:function(){var A=this;A.eachRule(function(O,AR){var L=A.getField(AR);A.resetField(L);});},resetField:function(O){var A=this;var L=A.getFieldStackErrorContainer(O);L.remove();A.resetFieldCss(O);A.clearFieldError(O);},resetFieldCss:function(O){var L=this;var AR=L.findFieldContainer(O);var A=function(AT,AS){if(AT){X.each(AS,function(AU){AT.removeClass(L.get(AU));});}};A(O,[x,AO]);A(AR,[w,AL]);},validatable:function(O){var A=this;var AS=A.get(V)[O.get(t)];var AR=AS.required;var L=AUI.defaults.FormValidator.RULES.required.apply(A,[O.val(),O]);return(AR||(!AR&&L));},validate:function(){var A=this;A.eachRule(function(L,O){A.validateField(O);});A.focusInvalidField();},validateField:function(AR){var A=this;var O=A.getField(AR);if(O){var L=A.validatable(O);A.resetField(O);if(L){A.fire(K,{validator:{field:O}});}}},_bindValidation:function(){var A=this;var L=A.get(AN);L.on(l,X.bind(A._onFormReset,A));L.on(e,X.bind(A._onFormSubmit,A));},_createEvents:function(){var A=this;var L=function(O,AR){A.publish(O,{defaultFn:AR});};L(r,A._defErrorFieldFn);L(g,A._defValidFieldFn);L(K,A._defValidateFieldFn);},_defErrorFieldFn:function(AR){var A=this;var L=AR.validator;var AS=L.field;A.highlight(AS);if(A.get(d)){var O=A.getFieldStackErrorContainer(AS);AS.placeBefore(O);A.printStackError(AS,O,L.errors);}},_defValidFieldFn:function(L){var A=this;var O=L.validator.field;A.unhighlight(O);},_defValidateFieldFn:function(O){var L=this;var AR=O.validator.field;var AS=L.get(V)[AR.get(t)];X.each(AS,function(AW,AU){var AV=AUI.defaults.FormValidator.RULES[AU];var AT=C(AR.val());if(Y(AV)&&!AV.apply(L,[AT,AR,AW])){L.addFieldError(AR,AU);}});var A=L.getFieldError(AR);if(A){L.fire(r,{validator:{field:AR,errors:A}});}else{L.fire(g,{validator:{field:AR}});}},_highlightHelper:function(AS,L,O,AR){var A=this;if(AS){if(AR){AS.removeClass(L).addClass(O);}else{AS.removeClass(O).addClass(L);}}},_onBlurField:function(L){var A=this;var O=L.currentTarget.get(t);A.validateField(O);},_onFieldInputChange:function(L){var A=this;A.validateField(L.currentTarget);},_onFormSubmit:function(L){var A=this;var O={validator:{formEvent:L}};A.validate();if(A.hasErrors()){O.validator.errors=A.errors;A.fire(i,O);L.halt();}else{A.fire(e,O);}},_onFormReset:function(L){var A=this;A.resetAllFields();},_bindValidateHelper:function(AS,AR,O,L){var A=this;A._unbindHandlers(L);if(AS){A.eachRule(function(AU,AV){var AT=A.getElementsByName(AV);A[L].push(AT.on(AR,X.bind(O,A)));});}},_uiSetExtractRules:function(AS){var A=this;if(AS){var L=A.get(AN);var AR=A.get(V);var O=A.get(AM);X.each(AUI.defaults.FormValidator.RULES,function(AV,AU){var AT=[j,O,AU].join(U);L.all(AT).each(function(AW){if(AW.get(Z)){var AX=AW.get(t);if(!AR[AX]){AR[AX]={};}if(!(AU in AR[AX])){AR[AX][AU]=true;}}});});}},_uiSetValidateOnInput:function(L){var A=this;A._bindValidateHelper(L,AE,A._onFieldInputChange,G);},_uiSetValidateOnBlur:function(L){var A=this;A._bindValidateHelper(L,R,A._onBlurField,AK);},_unbindHandlers:function(L){var A=this;X.each(A[L],function(O){O.detach();});A[L]=[];}}});X.each(AUI.defaults.FormValidator.REGEX,function(L,A){AUI.defaults.FormValidator.RULES[A]=function(AR,O,AS){return AUI.defaults.FormValidator.REGEX[A].test(AR);};});X.FormValidator=p;},"@VERSION@",{requires:["aui-base","aui-event-input","selector-css3","substitute"]});