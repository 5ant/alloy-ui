AUI.add("aui-context-panel",function(M){var H=M.Lang,d=H.isBoolean,I=H.isString,g=H.isObject,s="align",C="anim",f="arrow",J="backgroundColor",O="",o="boundingBox",h="click",X="contentBox",t="contextpanel",j="default",S=".",l="end",m="hidden",c="inner",P="opacity",p="pointer",D="showArrow",E="state",q="style",r="visible",i="bc",e="bl",a="br",Q="cc",U="lb",T="lc",N="lt",Y="rb",W="rc",R="rl",F=M.ClassNameManager.getClassName,K=F(t),k=F(t,f,O),n=F(t,m),Z=F(t,p),G=F(t,p,c),V=F(E,j),B='<div class="'+[V,Z].join(" ")+'"></div>',b='<div class="'+G+'"></div>';function u(A){u.superclass.constructor.apply(this,arguments);}M.mix(u,{NAME:t,ATTRS:{anim:{lazyAdd:false,value:{show:false},setter:function(A){return this._setAnim(A);}},arrow:{value:null,validator:I},hideOn:{value:h},showOn:{value:h},showArrow:{lazyAdd:false,value:true,validator:d},stack:{lazyAdd:false,value:true,setter:function(A){return this._setStack(A);},validator:d}}});M.extend(u,M.ContextOverlay,{bindUI:function(){var A=this;A.after("showArrowChange",A._afterShowArrowChange);A.before("show",A._beforeShow);u.superclass.bindUI.apply(A,arguments);},renderUI:function(){var A=this;A._renderElements();},syncUI:function(){var A=this;A._syncElements();},align:function(v,L){var A=this;u.superclass.align.apply(this,arguments);A._syncElements();},fixPointerColor:function(){var L=this;var v=L.get(X);var AA=v.query(S+G);AA.removeAttribute(q);var A=v.getStyle(J);var x="borderBottomColor";var y=[S+k+Y,S+k+W,S+k+R].join(",");var w=[S+k+a,S+k+i,S+k+e].join(",");var z=[S+k+U,S+k+T,S+k+N].join(",");if(v.test(y)){x="borderLeftColor";}else{if(v.test(w)){x="borderTopColor";}else{if(v.test(z)){x="borderRightColor";}}}AA.setStyle(x,A);},getAlignPoint:function(){var A=this;var L=A.get(s).points[0];if(L==Q){L=i;}return A.get(f)||L;},hide:function(v){var A=this;var L=A.get(o);if(A._hideAnim){var w=A.get(r);if(w){A._hideAnim.run();A._hideAnim.on(l,function(){u.superclass.hide.apply(A,arguments);});}}else{u.superclass.hide.apply(A,arguments);}},_renderElements:function(){var A=this;var L=A.get(X);var w=A.get(s);var v=w.points[0];L.addClass(V);A._pointerNode=M.Node.create(B).append(b);L.append(A._pointerNode);},_syncElements:function(){var A=this;var v=A.get(X);var L=A._pointerNode;var w=A.getAlignPoint();if(A.get(D)){L.removeClass(n);v.removeClass(k+A._lastOverlayPoint);v.addClass(k+w);A.fixPointerColor();}else{L.addClass(n);}A._lastOverlayPoint=w;},_setStack:function(L){var A=this;if(L){M.ContextPanelManager.register(A);}else{M.ContextPanelManager.remove(A);}return L;},_setAnim:function(x){var A=this;var L=A.get(o);if(x){var y={node:L,duration:0.1};var v=M.merge(y,{from:{opacity:0},to:{opacity:1}});var w=M.merge(y,{from:{opacity:1},to:{opacity:0}});if(g(x)){v=M.merge(v,x.show);w=M.merge(w,x.hide);}A._showAnim=new M.Anim(v);A._hideAnim=new M.Anim(w);if(g(x)){if(x.show===false){A._showAnim=null;}if(x.hide===false){A._hideAnim=null;}}}return x;},_beforeShow:function(v){var A=this;var L=A.get(o);var w=A.get(r);if(!w&&A._showAnim){L.setStyle(P,0);A._showAnim.run();}else{L.setStyle(P,1);}},_afterShowArrowChange:function(){var A=this;A._syncElements();}});M.ContextPanel=u;M.ContextPanelManager=new M.OverlayManager({zIndexBase:1000});},"@VERSION@",{requires:["aui-context-overlay","anim"],skinnable:true});