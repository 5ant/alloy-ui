AUI.add("aui-tabs-menu-plugin",function(L){var G=L.Lang,J=L.ClassNameManager.getClassName,E="tab",U="tabview",H="tabviewmenu",D="TabViewMenuPlugin",T="host",C="contentNode",B="rendered",P=J(E),I=J(U,"list"),Q=J(U,"list","content"),S=J(U,"wrapper"),M=J(H,"list"),N=J(H,"item"),O=J(H,"item","label"),K=J(H,"trigger"),W=J("helper-hidden"),R="<ul></ul>",X='<li class="'+N+'"><a href="javascript:;" class="'+O+'">{0}</a></li>',F="<div></div>";var V=L.Component.create({NAME:D,NS:H,EXTENDS:L.Plugin.Base,prototype:{initializer:function(){var A=this;A.afterHostMethod("bindUI",A.bindUI);A.afterHostMethod("renderUI",A.renderUI);A.afterHostMethod("addTab",A.addTab);A.afterHostMethod("removeTab",A.removeTab);A.afterHostMethod("selectTab",A.selectTab);A.afterHostMethod("_onActiveTabChange",A._onActiveTabChange);A.afterHostMethod("_renderTabs",A._renderTabs);},bindUI:function(){var A=this;var Y=A.get(T);L.on("windowresize",function(a){if(A._menuNode!=null){var Z=Y.get(C);A._contentWidth=Z.get("offsetWidth")-A._listNodePadding;A._updateMenu();}else{A._updateUI();}});},renderUI:function(){var A=this;var Z=A.get(T);var Y=Z.get("listNode");A._listNodePadding=parseFloat(Y.getComputedStyle("marginLeft"))+parseFloat(A._wrapper.getComputedStyle("borderLeftWidth"))+parseFloat(Y.getComputedStyle("paddingLeft"))+parseFloat(Y.getComputedStyle("paddingRight"))+parseFloat(A._wrapper.getComputedStyle("borderRightWidth"))+parseFloat(Y.getComputedStyle("marginRight"));A._updateUI();},addTab:function(Z,Y){var A=this;var a=A.get(T);if(a.get("rendered")){A._updateUI();}},removeTab:function(Y){var A=this;var Z=A.get(T);if(Z.get("rendered")){A._updateUI();}},selectTab:function(Y){var A=this;A._updateMenu();},_onActiveTabChange:function(Y){var A=this;A._updateMenu();},_renderTabs:function(){var Y=this;var c=Y.get(T);var A=c.get(C);var b=c.get("listNode");b.removeClass(I);b.addClass(Q);var Z=c._createDefaultContentContainer();Z.addClass(S);var a=c._createDefaultContentContainer();a.addClass(I);Z.append(a);A.insert(Z,b);a.append(b);Y._wrapper=Z;Y._content=a;},_updateMenu:function(){var Y=this;var c=Y.get(T);if(Y._menuNode!=null){var Z=true;if(Y._itemsWidth[Y._itemsWidth.length-1]>Y._contentWidth){var b=c.get("listNode");var a=b.all("."+P);var A=c.getTabIndex(c.get("activeTab"));var d=(A!=0?Y._itemsWidth[A]-Y._itemsWidth[A-1]:0);Y._menuNode.empty();a.each(function(g,f,e){if(f!=A&&Y._itemsWidth[f]+(f<A?d:0)>Y._contentWidth){g.addClass(W);Y._menuNode.insert(X.replace("{0}",g.get("text")));Y._menuNode.all("li a").last().on("click",function(h){return function(){c.selectTab(h);};}(f));Z=false;}else{g.removeClass(W);}});}if(Z){Y._removeMenu();}else{Y._triggerNode.setStyle("left",(Y._wrapper.get("offsetWidth")-Y._triggerNode.get("offsetWidth")-(parseFloat(Y._wrapper.getComputedStyle("borderLeftWidth"))+parseFloat(Y._wrapper.getComputedStyle("borderRightWidth"))))+"px");}}},_removeMenu:function(){var A=this;var Z=A.get(T);var Y=Z.get("listNode");Y.all("."+P).removeClass(W);if(A._triggerNode!=null){A._triggerNode.remove();A._triggerNode=null;}if(A._menuNode!=null){A._menuNode.remove();A._menuNode=null;}if(A._menuOverlay!=null){A._menuOverlay.destroy();A._menuOverlay=null;}},_updateUI:function(){var Y=this;var d=Y.get(T);Y._removeMenu();var A=d.get(C);var c=d.get("listNode");var a=c.all("."+P);Y._itemsWidth=[];Y._contentWidth=A.get("offsetWidth")-Y._listNodePadding;var e=parseFloat(c.getComputedStyle("paddingLeft"))+parseFloat(c.getComputedStyle("paddingRight"));a.each(function(h,g,f){var j=parseFloat(h.getComputedStyle("marginRight"))+parseFloat(h.getComputedStyle("marginLeft"));if(g>0){Y._itemsWidth[g-1]=e+j+h.get("offsetLeft");}if(g==f.size()-1){Y._itemsWidth[g]=Y._itemsWidth[g-1]+h.get("offsetWidth");}});if(Y._itemsWidth[Y._itemsWidth.length-1]>Y._contentWidth){var Z=L.Node.create(F);Z.addClass(K);Y._content.append(Z);Y._triggerNode=Z;var b=L.Node.create(R);b.addClass(M);b.appendTo(L.one("body"));Y._menuNode=b;Y._updateMenu();Y._menuOverlay=new L.OverlayContext({trigger:Y._triggerNode,boundingBox:Y._menuNode,showOn:"click",cancellableHide:false,hideOn:"mouseout",hideDelay:1000,showDelay:0,align:{node:Y._triggerNode,points:["tr","br"]}});Y._menuOverlay.render();}}}});L.namespace("Plugin").TabViewMenu=V;},"@VERSION@",{requires:["aui-component","aui-state-interaction","aui-tabs-base","aui-overlay-context","plugin"]});