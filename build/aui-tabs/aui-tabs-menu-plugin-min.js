AUI.add("aui-tabs-menu-plugin",function(M){var G=M.Lang,J=M.ClassNameManager.getClassName,E="tab",V="tabview",H="tabviewmenu",D="TabViewMenuPlugin",C="contentNode",U="host",K="listNode",B="rendered",X=J("helper-hidden"),Q=J(E),I=J(V,"list"),R=J(V,"list","content"),O=J(H,"item"),P=J(H,"item","label"),N=J(H,"list"),L=J(H,"trigger"),T=J(V,"wrapper"),S="<ul></ul>",Y='<li class="'+O+'"><a href="javascript:;" class="'+P+'">{0}</a></li>',F="<div></div>";var W=M.Component.create({NAME:D,NS:H,EXTENDS:M.Plugin.Base,prototype:{initializer:function(){var A=this;A.afterHostMethod("bindUI",A.bindUI);A.afterHostMethod("renderUI",A.renderUI);A.afterHostMethod("addTab",A.addTab);A.afterHostMethod("removeTab",A.removeTab);A.afterHostMethod("selectTab",A.selectTab);A.afterHostMethod("_onActiveTabChange",A._onActiveTabChange);A.afterHostMethod("_renderTabs",A._renderTabs);},bindUI:function(){var A=this;var Z=A.get(U);M.on("windowresize",function(b){if(A._menuNode!=null){var a=Z.get(C);A._contentWidth=a.get("offsetWidth")-A._listNodePadding;A._updateMenu();}else{A._updateUI();}});},renderUI:function(){var A=this;var a=A.get(U);var Z=a.get(K);A._listNodePadding=parseFloat(Z.getComputedStyle("marginLeft"))+parseFloat(A._wrapper.getComputedStyle("borderLeftWidth"))+parseFloat(Z.getComputedStyle("paddingLeft"))+parseFloat(Z.getComputedStyle("paddingRight"))+parseFloat(A._wrapper.getComputedStyle("borderRightWidth"))+parseFloat(Z.getComputedStyle("marginRight"));A._updateUI();},addTab:function(a,Z){var A=this;var b=A.get(U);if(b.get(B)){A._updateUI();}},removeTab:function(Z){var A=this;var a=A.get(U);if(a.get(B)){A._updateUI();}},selectTab:function(Z){var A=this;A._updateMenu();},_onActiveTabChange:function(Z){var A=this;A._updateMenu();},_removeMenu:function(){var A=this;var a=A.get(U);var Z=a.get(K);Z.all("."+Q).removeClass(X);if(A._triggerNode!=null){A._triggerNode.remove();A._triggerNode=null;}if(A._menuNode!=null){A._menuNode.remove();A._menuNode=null;}if(A._menuOverlay!=null){A._menuOverlay.destroy();A._menuOverlay=null;}},_renderTabs:function(){var Z=this;var d=Z.get(U);var A=d.get(C);var c=d.get(K);c.removeClass(I);c.addClass(R);var b=d._createDefaultContentContainer();b.addClass(I);var a=d._createDefaultContentContainer();a.addClass(T);a.append(b);A.insert(a,c);b.append(c);Z._wrapper=a;Z._content=b;},_updateMenu:function(){var f=this;var g=f.get(U);if(f._menuNode!=null){var Z=true;var b=f._wrapper.get("offsetWidth");if(f._itemsWidth[f._itemsWidth.length-1]>f._contentWidth){var d=g.get(K);var e=d.all("."+Q);var c=g.getTabIndex(g.get("activeTab"));var a=(c!=0?f._itemsWidth[c]-f._itemsWidth[c-1]:0);f._menuNode.empty();e.each(function(l,j,h){var n=(j<c?a:0);if(j!=c&&f._itemsWidth[j]+n>f._contentWidth){l.addClass(X);var m=G.sub(Y,[l.get("text")]);var k=M.Node.create(m);f._menuNode.insert(k);f._menuNode.all("li a").last().on("click",function(i){return function(){g.selectTab(i);};}(j));Z=false;}else{l.removeClass(X);}});}if(Z){f._removeMenu();}else{var A=parseFloat(f._wrapper.getComputedStyle("borderLeftWidth"))+parseFloat(f._wrapper.getComputedStyle("borderRightWidth"));f._triggerNode.setStyle("left",(b-f._triggerNode.get("offsetWidth")-A)+"px");}}},_updateUI:function(){var Z=this;var e=Z.get(U);Z._removeMenu();var A=e.get(C);var d=e.get(K);var b=d.all("."+Q);Z._contentWidth=A.get("offsetWidth")-Z._listNodePadding;Z._itemsWidth=[];var f=parseFloat(d.getComputedStyle("paddingLeft"))+parseFloat(d.getComputedStyle("paddingRight"));b.each(function(j,h,g){var k=parseFloat(j.getComputedStyle("marginRight"))+parseFloat(j.getComputedStyle("marginLeft"));if(h>0){Z._itemsWidth[h-1]=f+k+j.get("offsetLeft");}if(h==g.size()-1){Z._itemsWidth[h]=Z._itemsWidth[h-1]+j.get("offsetWidth");}});if(Z._itemsWidth[Z._itemsWidth.length-1]>Z._contentWidth){var a=M.Node.create(F);a.addClass(L);Z._content.append(a);Z._triggerNode=a;var c=M.Node.create(S);c.addClass(N);c.appendTo(M.one("body"));Z._menuNode=c;Z._updateMenu();Z._menuOverlay=new M.OverlayContext({trigger:Z._triggerNode,boundingBox:Z._menuNode,showOn:"click",cancellableHide:false,hideOn:"mouseout",hideDelay:1000,showDelay:0,align:{node:Z._triggerNode,points:["tr","br"]}});Z._menuOverlay.render();}}}});M.namespace("Plugin").TabViewMenu=W;},"@VERSION@",{requires:["aui-component","aui-state-interaction","aui-tabs-base","aui-overlay-context","plugin"]});