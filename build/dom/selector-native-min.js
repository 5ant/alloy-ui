/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.2.0
build: nightly
*/
YUI.add("selector-native",function(A){(function(D){D.namespace("Selector");var C="compareDocumentPosition",E="ownerDocument";var B={_foundCache:[],useNative:true,_compare:("sourceIndex" in D.config.doc.documentElement)?function(I,H){var G=I.sourceIndex,F=H.sourceIndex;if(G===F){return 0;}else{if(G>F){return 1;}}return -1;}:(D.config.doc.documentElement[C]?function(G,F){if(G[C](F)&4){return -1;}else{return 1;}}:function(J,I){var F,G,H;if(J&&I){F=J[E].createRange();F.setStart(J,0);G=I[E].createRange();G.setStart(I,0);H=F.compareBoundaryPoints(1,G);}return H;}),_sort:function(F){if(F){F=D.Array(F,0,true);if(F.sort){F.sort(B._compare);}}return F;},_deDupe:function(F){var G=[],H,I;for(H=0;(I=F[H++]);){if(!I._found){G[G.length]=I;I._found=true;}}for(H=0;(I=G[H++]);){I._found=null;I.removeAttribute("_found");}return G;},query:function(G,O,P,F){O=O||D.config.doc;var K=[],J=(D.Selector.useNative&&D.config.doc.querySelector&&!F),I=[[G,O]],L,N,H,M=(J)?D.Selector._nativeQuery:D.Selector._bruteQuery;if(G&&M){if(!F&&(!J||O.tagName)){I=B._splitQueries(G,O);}for(H=0;(L=I[H++]);){N=M(L[0],L[1],P);if(!P){N=D.Array(N,0,true);}if(N){K=K.concat(N);}}if(I.length>1){K=B._sort(B._deDupe(K));}}return(P)?(K[0]||null):K;},_splitQueries:function(H,K){var L=H.split(","),I=[],G="",J,F;if(K){if(K.tagName){K.id=K.id||D.guid();G='[id="'+K.id+'"] ';}for(J=0,F=L.length;J<F;++J){H=G+L[J];I.push([H,K]);}}return I;},_nativeQuery:function(F,G,H){if(D.UA.webkit&&F.indexOf(":checked")>-1&&(D.Selector.pseudos&&D.Selector.pseudos.checked)){return D.Selector.query(F,G,H,true);}try{return G["querySelector"+(H?"":"All")](F);}catch(I){return D.Selector.query(F,G,H,true);}},filter:function(G,F){var H=[],I,J;if(G&&F){for(I=0;(J=G[I++]);){if(D.Selector.test(J,F)){H[H.length]=J;}}}else{}return H;},test:function(F,G,N){var L=false,J=G.split(","),K=false,P,R,M,Q,I,H,O;if(F&&F.tagName){if(!N&&!D.DOM.inDoc(F)){P=F.parentNode;if(P){N=P;}else{Q=F[E].createDocumentFragment();Q.appendChild(F);N=Q;K=true;}}N=N||F[E];if(!F.id){F.id=D.guid();}for(I=0;(O=J[I++]);){O+='[id="'+F.id+'"]';M=D.Selector.query(O,N);for(H=0;R=M[H++];){if(R===F){L=true;break;}}if(L){break;}}if(K){Q.removeChild(F);}}return L;},ancestor:function(G,F,H){return D.DOM.ancestor(G,function(I){return D.Selector.test(I,F);},H);}};D.mix(D.Selector,B,true);})(A);},"3.2.0",{requires:["dom-base"]});