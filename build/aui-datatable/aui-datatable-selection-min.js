AUI.add("aui-datatable-selection",function(z){var i=z.Lang,r=i.isBoolean,u=i.isString,E=z.getClassName,h=z.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);}),n="cell",l="columnset",f="columnsetChange",t="columnKeydown",p="datatable",D="down",H="esc",F="host",o="id",w="left",q="mousedown",C="mouseEvent",v="multiple",G="recordset",e="recordsetChange",k="return",s="right",m="row",c="select",j="selected",x="selectRow",d="tab",y="tabindex",g="up",a=E(p,n,j),B=E(p,m,j);var b=z.Base.create("dataTableSelection",z.Plugin.Base,[],{selectedCellHash:null,selectedColumnHash:null,selectedRowHash:null,initializer:function(){var A=this;A.selectedCellHash={};A.selectedColumnHash={};A.selectedRowHash={};A.publish({select:{defaultFn:A._defSelectFn}});A.afterHostEvent(t,A._afterKeyEvent);A.afterHostEvent(A.get(C),A._afterMouseEvent);A.afterHostEvent(f,A._afterHostColumnsetChange);A.afterHostEvent(e,A._afterHostRecordsetChange);},isCellSelected:function(I){var A=this;return A.selectedCellHash[I.get(o)];},isColumnSelected:function(A){},isRowSelected:function(I){var A=this;return A.selectedRowHash[I.get(o)];},select:function(I,J){var A=this;if(I){A.selectCell(I);}if(A.get(x)&&J){A.selectRow(J);}},selectCell:function(I){var A=this;if(!A.get(v)){A.unselectAllCells();}A.selectedCellHash[I.get(o)]=I;I.setAttribute(y,0).focus();I.addClass(a);},selectColumn:function(A){},selectRow:function(I){var A=this;if(!A.get(v)){A.unselectAllRows();}A.selectedRowHash[I.get(o)]=I;I.addClass(B);},toggleCell:function(I,J){var A=this;if(J||!A.isCellSelected(I)){A.selectCell(I);}else{A.unselectCell(I);}},toggleColumn:function(A,I){},toggleRow:function(J,I){var A=this;if(I||!A.isRowSelected(J)){A.selectRow(J);}else{A.unselectRow(J);}},unselectCell:function(I){var A=this;delete A.selectedCellHash[I.get(o)];I.removeAttribute(y);I.removeClass(a);},unselectColumn:function(A){},unselectRow:function(I){var A=this;delete A.selectedRowHash[I.get(o)];I.removeClass(B);},unselectAllCells:function(){var A=this;z.each(A.selectedCellHash,z.bind(A.unselectCell,A));},unselectAllColumns:function(){},unselectAllRows:function(){var A=this;z.each(A.selectedRowHash,z.bind(A.unselectRow,A));},_afterHostColumnsetChange:function(I){var A=this;A._cleanUp();},_afterHostRecordsetChange:function(I){var A=this;A._cleanUp();},_afterMouseEvent:function(I){var A=this;A._handleSelectEvent(I);},_afterKeyEvent:function(J){var I=this;var A=J.originalEvent;if(A.isNavKey()){if(A.isKey(H)){I._onEscKey(J);}else{if(A.isKey(k)){I._onReturnKey(J);}else{I._navigate(J);}}A.halt();}},_cleanUp:function(){var A=this;A.selectedCellHash={};A.selectedColumnHash={};A.selectedRowHash={};},_defSelectFn:function(I){var A=this;A.select(I.cell,I.row);},_navigate:function(I){var A=this;A._updateNavKeyInfo(I);A._handleSelectEvent(I);},_onEscKey:function(K){var A=this;var J=A.get(F);var I=J.getCellEditor(K.record,K.column);if(I){I.hide();}},_onReturnKey:function(J){var A=this;var I=A.get(F);I._editCell(J);},_handleSelectEvent:function(I){var A=this;A.fire(c,{cell:I.cell,column:I.column,inHead:I.inHead,liner:I.liner,originalEvent:I.originalEvent,row:I.row,record:I.record});},_updateNavKeyInfo:function(A){var S=this;var T=S.get(F);var I=A.originalEvent;var K=T.get(l);var O=A.column.keyIndex;var Q=T.get(G);var M=Q.getRecordIndex(A.record);var J=I.ctrlKey||I.metaKey;var P=I.shiftKey;if(I.isKey(w)||(P&&I.isKey(d))){if(J){O=0;}else{O--;}}else{if(I.isKey(s)||(!P&&I.isKey(d))){if(J){O=K.getLength()-1;}else{O++;}}else{if(I.isKey(D)){if(J){M=Q.getLength()-1;}else{M++;}}else{if(I.isKey(g)){if(J){M=0;}else{M--;}}}}}O=Math.max(Math.min(O,K.getLength()-1),0);M=Math.max(Math.min(M,Q.getLength()-1),0);var L=K.getColumn(O);var N=Q.getRecord(M);var R=T.getCellNode(N,L);if(T.events){z.mix(A,T.events.getEvtPayload(R,A),true);}},_setMouseEvent:function(A){return n+h(A);}},{NS:"selection",NAME:"dataTableSelection",ATTRS:{selectRow:{value:false,validator:r},multiple:{value:false,validator:r},mouseEvent:{setter:"_setMouseEvent",value:q,validator:u}}});z.namespace("Plugin").DataTableSelection=b;},"@VERSION@",{requires:["aui-datatable-base"],skinnable:true});