AUI.add("aui-tree-data",function(m){var h=m.Lang,l=h.isArray,k=h.isObject,c=h.isUndefined,w="boundingBox",f="children",n="container",p=".",i="id",u="index",t="nextSibling",y="node",d="ownerTree",g="parentNode",r="prevSibling",o="previousSibling",s="tree",q="tree-node",b="tree-data",j=function(z){return(z instanceof m.TreeNode);},e=function(z){return(z instanceof m.TreeView);},v=m.ClassNameManager.getClassName,a=v(s,y);var x=function(){};x.ATTRS={container:{setter:m.one},children:{value:[],validator:l,setter:"_setChildren"},index:{value:{}}};m.mix(x.prototype,{initTreeData:function(){var z=this;z.publish("move");z.publish("append",{defaultFn:z._appendChild});z.publish("remove",{defaultFn:z._removeChild});},destructor:function(){var z=this;z.eachChildren(function(A){A.destroy();},true);},getNodeById:function(A){var z=this;return z.get(u)[A];},isRegistered:function(A){var z=this;return !!(z.get(u)[A.get(i)]);},updateReferences:function(C,D,G){var H=this;var F=C.get(g);var z=C.get(d);var E=F&&(F!==D);if(F){if(E){var A=F.get(f);m.Array.removeItem(A,H);F.set(f,A);}F.unregisterNode(C);}if(z){z.unregisterNode(C);}C.set(g,D);C.set(d,G);if(D){D.registerNode(C);}if(G){G.registerNode(C);}if(z!==G){C.eachChildren(function(I){H.updateReferences(I,I.get(g),G);});}if(E){var B=H.getEventOutputMap(C);if(!F.get("children").length){F.collapse();F.hideHitArea();}B.tree.oldParent=F;B.tree.oldOwnerTree=z;H.bubbleEvent("move",B);}},refreshIndex:function(){var z=this;z.updateIndex({});z.eachChildren(function(A){z.registerNode(A);},true);},registerNode:function(C){var z=this;var B=C.get(i);var A=z.get(u);if(B){A[B]=C;}if(e(z)){C.addTarget(z);}C._inheritOwnerTreeAttrs();z.updateIndex(A);},updateIndex:function(A){var z=this;if(A){z.set(u,A);}},unregisterNode:function(B){var z=this;var A=z.get(u);delete A[B.get(i)];if(e(z)){B.removeTarget(z);}z.updateIndex(A);},collapseAll:function(){var z=this;z.eachChildren(function(A){A.collapse();},true);z.fire("collapseAll",z.getEventOutputMap(z));},expandAll:function(){var z=this;z.eachChildren(function(A){A.expand();},true);z.fire("expandAll",z.getEventOutputMap(z));},selectAll:function(){var z=this;z.eachChildren(function(A){A.select();},true);},unselectAll:function(){var z=this;z.eachChildren(function(A){A.unselect();},true);},eachChildren:function(C,A){var z=this;var B=z.getChildren(A);m.Array.each(B,function(D){if(D){C.apply(z,arguments);}});},eachParent:function(B){var A=this;var z=A.get(g);while(z){if(z){B.apply(A,[z]);}z=z.get(g);}},bubbleEvent:function(D,C,E,B){var A=this;A.fire(D,C);if(!E){var z=A.get(g);C=C||{};if(c(B)){B=true;}C.stopActionPropagation=B;while(z){z.fire(D,C);z=z.get(g);}}},createNode:function(A){var z=this;var B=m.TreeNode.nodeTypes[k(A)?A.type:A]||m.TreeNode;return new B(k(A)?A:{});},appendChild:function(C,B){var z=this;var A=z.getEventOutputMap(C);z.bubbleEvent("append",A,B);},_appendChild:function(G){if(G.stopActionPropagation){return false;}var z=this;var F=G.tree.node;var A=z.get(d);var D=z.get(f);z.updateReferences(F,z,A);var E=D.push(F);z.set(f,D);var C=E-2;var B=z.item(C);F.set(t,null);F.set(r,B);F.render(z.get(n));},item:function(A){var z=this;return z.get(f)[A];},indexOf:function(A){var z=this;return m.Array.indexOf(z.get(f),A);},hasChildNodes:function(){return(this.get(f).length>0);},getChildren:function(A){var z=this;var C=[];var B=z.get(f);C=C.concat(B);if(A){z.eachChildren(function(D){C=C.concat(D.getChildren(A));});}return C;},getEventOutputMap:function(A){var z=this;return{tree:{instance:z,node:A||z}};},removeChild:function(B){var z=this;var A=z.getEventOutputMap(B);z.bubbleEvent("remove",A);},_removeChild:function(D){if(D.stopActionPropagation){return false;}var z=this;var C=D.tree.node;var A=z.get(d);if(z.isRegistered(C)){C.set(g,null);z.unregisterNode(C);C.set(d,null);if(A){A.unregisterNode(C);}C.get(w).remove();var B=z.get(f);m.Array.removeItem(B,C);z.set(f,B);}},empty:function(){var z=this;z.eachChildren(function(B){var A=B.get(g);if(A){A.removeChild(B);}});},insert:function(G,D,E){var K=this;D=D||this;if(D===G){return false;}var z=D.get(g);if(G&&z){var F=G.get(w);var L=D.get(w);var J=D.get(d);if(E==="before"){L.placeBefore(F);}else{if(E==="after"){L.placeAfter(F);}}var A=[];var I=z.get(w).all("> ul > li");I.each(function(M){A.push(M.getData(q));});var H=F.get(t);G.set(t,H&&H.getData(q));var C=F.get(o);G.set(r,C&&C.getData(q));D.updateReferences(G,z,J);z.set(f,A);}G.render();var B=D.getEventOutputMap(G);B.tree.refTreeNode=D;D.bubbleEvent("insert",B);},insertAfter:function(B,A){var z=this;z.insert(B,A,"after");},insertBefore:function(B,A){var z=this;z.insert(B,A,"before");},getNodeByChild:function(B){var z=this;var A=B.ancestor(p+a);if(A){return A.getData(q);}return null;},_inheritOwnerTreeAttrs:h.emptyFn,_setChildren:function(A){var z=this;var B=[];m.Array.each(A,function(C){if(C){if(!j(C)&&k(C)){C=z.createNode(C);}if(!j(z)){C.set(d,z);}else{C.set(d,z.get(d));}C._inheritOwnerTreeAttrs();C.render(z.get(n));if(m.Array.indexOf(B,C)===-1){B.push(C);}}});return B;}});m.TreeData=x;},"@VERSION@",{skinnable:false,requires:["aui-base"]});AUI.add("aui-tree-node",function(ac){var W=ac.Lang,aL=W.isString,aB=W.isBoolean,aT="alwaysShowHitArea",O="",r="boundingBox",g="children",aH="clearfix",w="collapsed",a="container",aa="content",u="contentBox",j="expanded",o="helper",T="hidden",f="hitAreaEl",G="hitarea",S="icon",aS="iconEl",ar="id",ai="label",U="labelEl",R="lastSelected",aG="leaf",p="node",ak="over",X="ownerTree",e="parentNode",ay="radio",aQ="rendered",aF="selected",s=" ",h="tree",H="tree-node",aO=function(){return Array.prototype.slice.call(arguments).join(s);},ao=function(A){return(A instanceof ac.TreeNode);},aN=function(A){return(A instanceof ac.TreeView);},E=ac.ClassNameManager.getClassName,af=E(o,aH),y=E(h,w),b=E(h,a),aA=E(h,u),aU=E(h,j),t=E(h,T),au=E(h,G),D=E(h,S),k=E(h,ai),aD=E(h,p),C=E(h,p,aa),av=E(h,p,T,G),i=E(h,p,aG),aK=E(h,p,ak),I=E(h,p,aF),ab='<div class="'+au+'"></div>',q='<div class="'+D+'"></div>',d='<div class="'+k+'"></div>',aR="<ul></ul>",v='<li class="'+aD+'"></li>',Y='<div class="'+aO(af,C)+'"></div>';
var M=ac.Component.create({NAME:H,ATTRS:{boundingBox:{valueFn:function(){return ac.Node.create(v);}},contentBox:{valueFn:function(){return ac.Node.create(Y);}},draggable:{value:true,validator:aB},ownerTree:{value:null},label:{value:O,validator:aL},expanded:{value:false,validator:aB},id:{validator:aL},leaf:{value:true,setter:function(A){if(A&&this.get(g).length){return false;}return A;},validator:aB},nextSibling:{value:null,validator:ao},prevSibling:{value:null,validator:ao},parentNode:{value:null,validator:function(A){return ao(A)||aN(A);}},labelEl:{setter:ac.one,valueFn:function(){var A=this.get(ai);return ac.Node.create(d).html(A).unselectable();}},hitAreaEl:{setter:ac.one,valueFn:function(){return ac.Node.create(ab);}},alwaysShowHitArea:{value:true,validator:aB},iconEl:{setter:ac.one,valueFn:function(){return ac.Node.create(q);}},tabIndex:{value:null},rendered:{validator:aB,value:false}},AUGMENTS:[ac.TreeData],EXTENDS:ac.Base,prototype:{BOUNDING_TEMPLATE:v,CONTENT_TEMPLATE:Y,initializer:function(){var A=this;var L=A.get(r);L.setData(H,A);A.on({expandedChange:function(aX){A.bubbleEvent(aX.newVal?"expand":"collapse",A.getEventOutputMap(A));}});A._syncTreeNodeBBId();A._uiSetExpanded(A.get(j));A.initTreeData();},bindUI:function(){var A=this;A.after("childrenChange",ac.bind(A._afterSetChildren,A));A.after("expandedChange",ac.bind(A._afterExpandedChange,A));A.after("idChange",A._afterSetId,A);},render:function(L){var A=this;if(!A.get(aQ)){A.renderUI();A.bindUI();A.syncUI();A.set(aQ,true);}if(L){A.get(r).appendTo(L);}},renderUI:function(){var A=this;A._renderBoundingBox();A._renderContentBox();},syncUI:function(){var A=this;A._syncHitArea(A.get(g));},_afterExpandedChange:function(L){var A=this;A._uiSetExpanded(L.newVal);},_renderContentBox:function(aY){var A=this;var L=A.get(u);if(A.isLeaf()){L.addClass(i);}else{var aX=A.get(j);L.addClass(aX?aU:y);if(aX){A.expand();}}return L;},_renderBoundingBox:function(){var A=this;var aX=A.get(r);var L=A.get(u);var aY=null;if(!A.isLeaf()){L.append(A.get(f));aY=A._createNodeContainer();}L.append(A.get(aS));L.append(A.get(U));aX.append(L);if(aY){if(!A.get(j)){aY.addClass(t);}aX.append(aY);}return aX;},_createNodeContainer:function(){var A=this;var L=A.get(a)||ac.Node.create(aR);L.addClass(b);A.set(a,L);A.eachChildren(function(aX){A.appendChild(aX);});return L;},_syncHitArea:function(L){var A=this;if(A.get(aT)||L.length){A.showHitArea();}else{A.hideHitArea();A.collapse();}},appendChild:function(){var A=this;if(!A.isLeaf()){ac.TreeNode.superclass.appendChild.apply(A,arguments);}},collapse:function(){var A=this;A.set(j,false);},collapseAll:function(){var A=this;ac.TreeNode.superclass.collapseAll.apply(A,arguments);A.collapse();},contains:function(A){return A.isAncestor(this);},expand:function(){var A=this;A.set(j,true);},expandAll:function(){var A=this;ac.TreeNode.superclass.expandAll.apply(A,arguments);A.expand();},getDepth:function(){var aX=0;var L=this;var A=L.get(e);while(A){++aX;A=A.get(e);}return aX;},hasChildNodes:function(){var A=this;return(!A.isLeaf()&&ac.TreeNode.superclass.hasChildNodes.apply(this,arguments));},isSelected:function(){return this.get(u).hasClass(I);},isLeaf:function(){var A=this;return A.get(aG);},isAncestor:function(aX){var L=this;var A=L.get(e);while(A){if(A===aX){return true;}A=A.get(e);}return false;},insertAfter:function(aX,L){var A=this;ac.TreeNode.superclass.insertAfter.apply(this,[aX,A]);},insertBefore:function(L){var A=this;ac.TreeNode.superclass.insertBefore.apply(this,[L,A]);},removeChild:function(L){var A=this;if(!A.isLeaf()){ac.TreeNode.superclass.removeChild.apply(A,arguments);}},toggle:function(){var A=this;if(A.get(j)){A.collapse();}else{A.expand();}},select:function(){var A=this;var L=A.get(X);if(L){L.set(R,A);}A.get(u).addClass(I);A.fire("select");},unselect:function(){var A=this;A.get(u).removeClass(I);A.fire("unselect");},over:function(){this.get(u).addClass(aK);},out:function(){this.get(u).removeClass(aK);},showHitArea:function(){var A=this;var L=A.get(f);L.removeClass(av);},hideHitArea:function(){var A=this;var L=A.get(f);L.addClass(av);},_syncTreeNodeBBId:function(L){var A=this;A.get(r).attr(ar,A.get(ar));},_afterSetChildren:function(L){var A=this;A._syncHitArea(L.newVal);},_uiSetExpanded:function(aY){var A=this;if(!A.isLeaf()){var aX=A.get(a);var L=A.get(u);if(aY){L.replaceClass(y,aU);if(aX){aX.removeClass(t);}}else{L.replaceClass(aU,y);if(aX){aX.addClass(t);}}}}}});ac.TreeNode=M;var ax=W.isFunction,F=W.isObject,ad=W.isValue,aM="cache",at="end",aj="io",aC="limit",aP="loaded",aV="loading",ah="paginator",am="start",aq="tree-node-io",c="paginatorClick",az=E(h,p,ah),x=E(h,p,aj,aV),aw='<a class="'+az+'" href="javascript:void(0);">Load more results</a>';var K=ac.Component.create({NAME:aq,ATTRS:{io:{lazyAdd:false,value:null,setter:function(A){return this._setIO(A);}},loading:{value:false,validator:aB},loaded:{value:false,validator:aB},cache:{value:true,validator:aB},leaf:{value:false,validator:aB},paginator:{setter:function(A){return ac.merge({alwaysVisible:false,autoFocus:true,element:ac.Node.create(aw),endParam:at,limitParam:aC,start:0,startParam:am},A);},validator:F}},EXTENDS:ac.TreeNode,UI_ATTRS:[j],prototype:{bindUI:function(){var A=this;ac.TreeNodeIO.superclass.bindUI.apply(this,arguments);A._bindPaginatorUI();A._createEvents();},syncUI:function(){var A=this;ac.TreeNodeIO.superclass.syncUI.apply(this,arguments);A._syncPaginatorUI();},_bindPaginatorUI:function(){var A=this;var aX=A.get(ah);if(aX){var L=ac.bind(A._handlePaginatorClickEvent,A);aX.element.on("click",L);}},createNodes:function(L){var A=this;ac.Array.each(ac.Array(L),function(aY){var aX=A.createNode.apply(A,[aY]);A.appendChild(aX);});A._syncPaginatorUI(L);},expand:function(){var A=this;var L=A.get(aM);var aZ=A.get(aj);var aX=A.get(aP);var aY=A.get(aV);if(!L){A.set(aP,false);}if(aZ&&!aX&&!aY&&!this.hasChildNodes()){if(!L){A.empty();}A.initIO();}else{ac.TreeNodeIO.superclass.expand.apply(this,arguments);}},initIO:function(){var L=this;var aX=L.get(aj);
if(ax(aX.cfg.data)){aX.cfg.data=aX.cfg.data.apply(L,[L]);}L._syncPaginatorIOData(aX);if(ax(aX.loader)){var A=ac.bind(aX.loader,L);A(aX.url,aX.cfg,L);}else{ac.io.request(aX.url,aX.cfg);}},ioStartHandler:function(){var A=this;var L=A.get(u);A.set(aV,true);L.addClass(x);},ioCompleteHandler:function(){var A=this;var L=A.get(u);A.set(aV,false);A.set(aP,true);L.removeClass(x);},ioSuccessHandler:function(){var A=this;var a2=A.get(aj);var aX=Array.prototype.slice.call(arguments);var aZ=aX.length;var L=aX[1];if(aZ>=3){var a1=aX[2];try{L=ac.JSON.parse(a1.responseText);}catch(a0){}}var aY=a2.formatter;if(aY){L=aY(L);}A.createNodes(L);A.expand();},ioFailureHandler:function(){var A=this;A.set(aV,false);A.set(aP,false);},_createEvents:function(){var A=this;A.publish(c,{defaultFn:A._defPaginatorClickFn,prefix:aq});},_defPaginatorClickFn:function(L){var A=this;var aX=A.get(ah);if(ad(aX.limit)){aX.start+=aX.limit;}if(A.get(aj)){A.initIO();}},_handlePaginatorClickEvent:function(aY){var A=this;var aX=A.get(X);var L=A.getEventOutputMap(A);A.fire(c,L);if(aX){aX.fire(c,L);}aY.halt();},_inheritOwnerTreeAttrs:function(){var L=this;var aX=L.get(X);if(aX){if(!L.get(aj)){L.set(aj,ac.clone(aX.get(aj)));}if(!L.get(ah)){var A=aX.get(ah);if(A&&A.element){A.element=A.element.clone();}L.set(ah,A);}}},_setIO:function(aX){var A=this;if(!aX){return null;}else{if(aL(aX)){aX={url:aX};}}aX=aX||{};aX.cfg=aX.cfg||{};aX.cfg.on=aX.cfg.on||{};var L={start:ac.bind(A.ioStartHandler,A),complete:ac.bind(A.ioCompleteHandler,A),success:ac.bind(A.ioSuccessHandler,A),failure:ac.bind(A.ioFailureHandler,A)};ac.each(L,function(a0,aY){var a1=aX.cfg.on[aY];if(ax(a1)){var aZ=function(){a0.apply(A,arguments);a1.apply(A,arguments);};aX.cfg.on[aY]=ac.bind(aZ,A);}else{aX.cfg.on[aY]=a0;}});return aX;},_syncPaginatorIOData:function(aY){var A=this;var aX=A.get(ah);if(aX&&ad(aX.limit)){var L=aY.cfg.data||{};L[aX.limitParam]=aX.limit;L[aX.startParam]=aX.start;L[aX.endParam]=(aX.start+aX.limit);aY.cfg.data=L;}},_syncPaginatorUI:function(aX){var a1=this;var L=a1.get(g);var a2=a1.get(ah);if(a2){var a0=true;if(aX){a0=(aX.length>0);}var A=a2.start;var aZ=a2.total||L.length;var a3=a0&&(aZ>L.length);if(a2.alwaysVisible||a3){a1.get(a).append(a2.element.show());if(a2.autoFocus){try{a2.element.focus();}catch(aY){}}}else{a2.element.hide();}}}}});ac.TreeNodeIO=K;var l="checkbox",n="checked",Z="checkContainerEl",aI="checkEl",N="checkName",V=".",m="name",z="tree-node-check",ag=E(h,p,l),an=E(h,p,l,a),ap=E(h,p,n),Q='<div class="'+an+'"></div>',al='<input class="'+ag+'" type="checkbox" />';var aE=ac.Component.create({NAME:z,ATTRS:{checked:{value:false,validator:aB},checkName:{value:z,validator:aL},checkContainerEl:{setter:ac.one,valueFn:function(){return ac.Node.create(Q);}},checkEl:{setter:ac.one,valueFn:function(){var A=this.get(N);return ac.Node.create(al).attr(m,A);}}},EXTENDS:ac.TreeNodeIO,prototype:{initializer:function(){var A=this;A._uiSetChecked(A.get(n));A.on({checkedChange:function(L){A.bubbleEvent(L.newVal?"check":"uncheck",A.getEventOutputMap(A));}});},renderUI:function(){var L=this;ac.TreeNodeCheck.superclass.renderUI.apply(L,arguments);var aX=L.get(U);var A=L.get(aI);var aY=L.get(Z);A.hide();aY.append(A);aX.placeBefore(aY);if(L.isChecked()){L.check();}},bindUI:function(){var A=this;var L=A.get(u);var aX=A.get(U);ac.TreeNodeCheck.superclass.bindUI.apply(A,arguments);A.after("checkedChange",ac.bind(A._afterCheckedChange,A));L.delegate("click",ac.bind(A.toggleCheck,A),V+an);L.delegate("click",ac.bind(A.toggleCheck,A),V+k);aX.swallowEvent("dblclick");},check:function(L){var A=this;A.set(n,true,{originalTarget:L});},uncheck:function(L){var A=this;A.set(n,false,{originalTarget:L});},toggleCheck:function(){var L=this;var A=L.get(aI);var aX=A.attr(n);if(!aX){L.check();}else{L.uncheck();}},isChecked:function(){var A=this;return A.get(n);},_afterCheckedChange:function(L){var A=this;A._uiSetChecked(L.newVal);},_uiSetChecked:function(L){var A=this;if(L){A.get(u).addClass(ap);A.get(aI).attr(n,n);}else{A.get(u).removeClass(ap);A.get(aI).attr(n,O);}}}});ac.TreeNodeCheck=aE;var B="child",P="tree-node-task",J="unchecked",aJ=function(A){return A instanceof ac.TreeNodeCheck;},ae=E(h,p,B,J);var aW=ac.Component.create({NAME:P,EXTENDS:ac.TreeNodeCheck,UI_ATTRS:[n,j],prototype:{check:function(aX){var A=this;var L=A.get(u);aX=aX||A;if(!A.isLeaf()){A.eachChildren(function(aY){if(aJ(aY)){aY.check(aX);}});}A.eachParent(function(aY){if(aJ(aY)&&!aY.isChecked()){aY.get(u).addClass(ae);}});L.removeClass(ae);ac.TreeNodeTask.superclass.check.call(this,aX);},uncheck:function(aX){var A=this;var L=A.get(u);aX=aX||A;if(!A.isLeaf()){A.eachChildren(function(aY){if(aY instanceof ac.TreeNodeCheck){aY.uncheck(aX);}});}A.eachParent(function(aY){if(aJ(aY)&&!aY.isChecked()){aY.get(u).removeClass(ae);}});L.removeClass(ae);ac.TreeNodeTask.superclass.uncheck.call(this,aX);}}});ac.TreeNodeTask=aW;ac.TreeNode.nodeTypes={task:ac.TreeNodeTask,check:ac.TreeNodeCheck,node:ac.TreeNode,io:ac.TreeNodeIO};},"@VERSION@",{skinnable:false,requires:["aui-tree-data","aui-io","json","querystring-stringify"]});AUI.add("aui-tree-view",function(y){var q=y.Lang,r=q.isString,ao="boundingBox",F="children",h="container",aa="content",S="contentBox",O=".",ad="file",al="hitarea",W="icon",aq="label",b="lastSelected",t="leaf",au="node",ai="ownerTree",am="root",a=" ",ab="tree",at="tree-node",H="tree-view",D="type",J="view",R=function(){return Array.prototype.slice.call(arguments).join(a);},X=function(A){return(A instanceof y.TreeNode);},o=y.ClassNameManager.getClassName,C=o(ab,al),s=o(ab,W),n=o(ab,aq),Q=o(ab,au,aa),G=o(ab,am,h),j=o(ab,J,aa);var v=y.Component.create({NAME:H,ATTRS:{type:{value:ad,validator:r},lastSelected:{value:null,validator:X},io:{value:null},paginator:{value:null}},AUGMENTS:[y.TreeData],prototype:{CONTENT_TEMPLATE:"<ul></ul>",initializer:function(){var A=this;var aw=A.get(ao);var L=A.get(S);A.set(h,L);aw.setData(H,A);A.initTreeData();},bindUI:function(){var A=this;A._delegateDOM();},renderUI:function(){var A=this;
A._renderElements();},syncUI:function(){var A=this;A.refreshIndex();},registerNode:function(L){var A=this;L.set(ai,A);y.TreeView.superclass.registerNode.apply(this,arguments);},_createFromHTMLMarkup:function(L){var A=this;L.all("> li").each(function(aA){var az=aA.one("> *").remove();var ay=az.outerHTML();var aB=new y.TreeNode({boundingBox:aA,label:ay});var ax=aA.one("> ul");if(ax){aB.set(t,false);aB.set(h,ax);aB.render();A._createFromHTMLMarkup(ax);}else{aB.render();}var aw=aA.get(u).get(u);var aC=aw.getData(at);if(!y.instanceOf(aC,y.TreeNode)){aC=aw.getData(H);}aC.appendChild(aB);});},_renderElements:function(){var A=this;var L=A.get(S);var aw=A.get(F);var ax=A.get(D);var ay=o(ab,ax);L.addClass(j);L.addClass(R(ay,G));if(!aw.length){A._createFromHTMLMarkup(L);}},_delegateDOM:function(){var A=this;var L=A.get(ao);L.delegate("click",y.bind(A._onClickHitArea,A),O+C);L.delegate("dblclick",y.bind(A._onClickHitArea,A),O+s);L.delegate("dblclick",y.bind(A._onClickHitArea,A),O+n);L.delegate("mouseenter",y.bind(A._onMouseEnterNodeEl,A),O+Q);L.delegate("mouseleave",y.bind(A._onMouseLeaveNodeEl,A),O+Q);L.delegate("click",y.bind(A._onClickNodeEl,A),O+Q);},_onClickNodeEl:function(L){var A=this;var ax=A.getNodeByChild(L.currentTarget);if(ax&&!ax.isSelected()){var aw=A.get(b);if(aw){aw.unselect();}ax.select();}},_onMouseEnterNodeEl:function(L){var A=this;var aw=A.getNodeByChild(L.currentTarget);if(aw){aw.over();}},_onMouseLeaveNodeEl:function(L){var A=this;var aw=A.getNodeByChild(L.currentTarget);if(aw){aw.out();}},_onClickHitArea:function(L){var A=this;var aw=A.getNodeByChild(L.currentTarget);if(aw){aw.toggle();}}}});y.TreeView=v;var av=q.isNumber,E="above",x="append",ae="below",B="block",aj="body",g="clearfix",ag="default",d="display",T="down",N="drag",w="draggable",ap="dragCursor",m="dragNode",c="expanded",ah="helper",af="insert",Z="offsetHeight",u="parentNode",V="scrollDelay",k="state",ac="tree-drag-drop",I="up",l=y.DD.DDM,p=o(ah,g),an=o(W),P=o(ab,N,ah),i=o(ab,N,ah,aa),z=o(ab,N,ah,aq),f=o(ab,N,af,E),ar=o(ab,N,af,x),M=o(ab,N,af,ae),Y=o(ab,N,k,x),K=o(ab,N,k,af,E),ak=o(ab,N,k,af,ae),e='<div class="'+P+'">'+'<div class="'+[i,p].join(a)+'">'+'<span class="'+an+'"></span>'+'<span class="'+z+'"></span>'+"</div>"+"</div>";var U=y.Component.create({NAME:ac,ATTRS:{helper:{value:null},scrollDelay:{value:100,validator:av}},EXTENDS:y.TreeView,prototype:{direction:ae,dropAction:null,lastY:0,node:null,nodeContent:null,destructor:function(){var A=this;var L=A.get(ah);if(L){L.remove(true);}A.eachChildren(function(ax){if(ax.get(w)){var aw=l.getDrag(ax.get(S));if(aw){aw.destroy();}}},true);},bindUI:function(){var A=this;y.TreeViewDD.superclass.bindUI.apply(this,arguments);A._bindDragDrop();},renderUI:function(){var A=this;y.TreeViewDD.superclass.renderUI.apply(this,arguments);var L=y.Node.create(e).hide();y.one(aj).append(L);A.set(ah,L);l.set(ap,ag);},_createDrag:function(ax){var L=this;if(!L.dragTimers){L.dragTimers=[];}if(!l.getDrag(ax)){var A=L.dragTimers;var aw=50*A.length;var ay=setTimeout(function(){if(!l.getDrag(ax)){var az=new y.DD.Drag({bubbleTargets:L,node:ax,target:true}).plug(y.Plugin.DDProxy,{moveOnEnd:false,positionProxy:false,borderStyle:null}).plug(y.Plugin.DDNodeScroll,{scrollDelay:L.get(V),node:L.get(ao)});az.removeInvalid("a");}y.Array.removeItem(A,ay);},aw);A.push(ay);}},_bindDragDrop:function(){var A=this;var L=A.get(ao);A._createDragInitHandler=y.bind(function(){A.eachChildren(function(aw){if(aw.get(w)){A._createDrag(aw.get(S));}},true);L.detach("mouseover",A._createDragInitHandler);},A);L.on("mouseover",A._createDragInitHandler);A.after("insert",y.bind(A._afterAppend,A));A.after("append",y.bind(A._afterAppend,A));A.on("drag:align",A._onDragAlign);A.on("drag:start",A._onDragStart);A.on("drop:exit",A._onDropExit);A.after("drop:hit",A._afterDropHit);A.on("drop:hit",A._onDropHit);A.on("drop:over",A._onDropOver);},_appendState:function(L){var A=this;A.dropAction=x;A.get(ah).addClass(Y);L.addClass(ar);},_goingDownState:function(L){var A=this;A.dropAction=ae;A.get(ah).addClass(ak);L.addClass(M);},_goingUpState:function(L){var A=this;A.dropAction=E;A.get(ah).addClass(K);L.addClass(f);},_resetState:function(L){var A=this;var aw=A.get(ah);aw.removeClass(Y);aw.removeClass(K);aw.removeClass(ak);if(L){L.removeClass(f);L.removeClass(ar);L.removeClass(M);}},_updateNodeState:function(A){var aF=this;var aB=A.drag;var ay=A.drop;var L=ay.get(au);var aE=L.get(u);var aA=aB.get(au).get(u);var ax=aE.getData(at);aF._resetState(aF.nodeContent);if(!aA.contains(aE)){var aG=L.get(Z)/3;var aw=L.getY();var aD=aw+aG;var aC=aw+aG*2;var az=aB.mouseXY[1];if((az>aw)&&(az<aD)){aF._goingUpState(L);}else{if(az>aC){aF._goingDownState(L);}else{if((az>aD)&&(az<aC)){if(ax&&!ax.isLeaf()){aF._appendState(L);}else{if(aF.direction===I){aF._goingUpState(L);}else{aF._goingDownState(L);}}}}}}aF.nodeContent=L;},_afterAppend:function(L){var A=this;var aw=L.tree.node;if(aw.get(w)){A._createDrag(aw.get(S));}},_afterDropHit:function(ay){var A=this;var aA=A.dropAction;var az=ay.drag.get(au).get(u);var aw=ay.drop.get(au).get(u);var aB=aw.getData(at);var ax=az.getData(at);var L=A.getEventOutputMap(A);L.tree.dropNode=aB;L.tree.dragNode=ax;if(aA===E){aB.insertBefore(ax);A.bubbleEvent("dropInsert",L);}else{if(aA===ae){aB.insertAfter(ax);A.bubbleEvent("dropInsert",L);}else{if(aA===x){if(aB&&!aB.isLeaf()){aB.appendChild(ax);if(!aB.get(c)){aB.expand();}A.bubbleEvent("dropAppend",L);}}}}A._resetState(A.nodeContent);A.bubbleEvent("drop",L);A.dropAction=null;},_onDragAlign:function(aw){var A=this;var L=A.lastY;var ax=aw.target.lastXY[1];if(ax!==L){A.direction=(ax<L)?I:T;}A.lastY=ax;},_onDragStart:function(az){var A=this;var ax=az.target;var aB=ax.get(au).get(u);var aw=aB.getData(at);var aA=A.get(b);if(aA){aA.unselect();}aw.select();var ay=A.get(ah);var L=ay.one(O+z);ay.setStyle(d,B).show();L.html(aw.get(aq));ax.set(m,ay);},_onDropOver:function(L){var A=this;A._updateNodeState(L);},_onDropHit:function(L){var A=L.drop.get(au).get(u);var aw=A.getData(at);if(!X(aw)){L.preventDefault();
}},_onDropExit:function(){var A=this;A.dropAction=null;A._resetState(A.nodeContent);}}});y.TreeViewDD=U;},"@VERSION@",{requires:["aui-tree-node","dd-drag","dd-drop","dd-proxy"],skinnable:true});AUI.add("aui-tree",function(a){},"@VERSION@",{use:["aui-tree-data","aui-tree-node","aui-tree-view"],skinnable:true});