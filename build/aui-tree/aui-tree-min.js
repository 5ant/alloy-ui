AUI.add("aui-tree-data",function(l){var g=l.Lang,k=g.isArray,j=g.isObject,c=g.isUndefined,u="boundingBox",e="children",m="container",o=".",h="id",s="index",r="nextSibling",w="node",d="ownerTree",f="parentNode",p="prevSibling",n="previousSibling",q="tree",b="tree-data",i=function(x){return(x instanceof l.TreeNode);},t=l.getClassName,a=t(q,w);var v=l.Component.create({NAME:b,ATTRS:{container:{setter:l.one},children:{value:[],validator:k,setter:"_setChildren"},index:{value:{}}},prototype:{initializer:function(){var x=this;x.publish("move");x.publish("collapseAll",{defaultFn:x._collapseAll});x.publish("expandAll",{defaultFn:x._expandAll});x.publish("append",{defaultFn:x._appendChild});x.publish("remove",{defaultFn:x._removeChild});},destructor:function(){var x=this;x.eachChildren(function(y){y.destroy();},true);},getNodeById:function(y){var x=this;return x.get(s)[y];},isRegistered:function(y){var x=this;return !!(x.get(s)[y.get(h)]);},updateReferences:function(A,B,E){var F=this;var D=A.get(f);var x=A.get(d);var C=D&&(D!==B);if(D){if(C){var y=D.get(e);l.Array.removeItem(y,F);D.set(e,y);}D.unregisterNode(A);}if(x){x.unregisterNode(A);}A.set(f,B);A.set(d,E);if(B){B.registerNode(A);}if(E){E.registerNode(A);}if(x!==E){A.eachChildren(function(G){F.updateReferences(G,G.get(f),E);});}if(C){var z=F.getEventOutputMap(A);if(!D.get("children").length){D.collapse();D.hideHitArea();}z.tree.oldParent=D;z.tree.oldOwnerTree=x;F.bubbleEvent("move",z);}},refreshIndex:function(){var x=this;x.updateIndex({});x.eachChildren(function(y){x.registerNode(y);},true);},registerNode:function(A){var x=this;var z=A.get(h);var y=x.get(s);if(z){y[z]=A;}x.updateIndex(y);},updateIndex:function(y){var x=this;if(y){x.set(s,y);}},unregisterNode:function(z){var x=this;var y=x.get(s);delete y[z.get(h)];x.updateIndex(y);},collapseAll:function(){var x=this;var y=x.getEventOutputMap(x);x.fire("collapseAll",y);},_collapseAll:function(y){var x=this;x.eachChildren(function(z){z.collapse();},true);},expandAll:function(){var x=this;var y=x.getEventOutputMap(x);x.fire("expandAll",y);},_expandAll:function(y){var x=this;x.eachChildren(function(z){z.expand();},true);},selectAll:function(){var x=this;x.eachChildren(function(y){y.select();},true);},unselectAll:function(){var x=this;x.eachChildren(function(y){y.unselect();},true);},eachChildren:function(A,y){var x=this;var z=x.getChildren(y);l.Array.each(z,function(B){if(B){A.apply(x,arguments);}});},eachParent:function(z){var y=this;var x=y.get(f);while(x){if(x){z.apply(y,[x]);}x=x.get(f);}},bubbleEvent:function(B,A,C,z){var y=this;y.fire(B,A);if(!C){var x=y.get(f);A=A||{};if(c(z)){z=true;}A.stopActionPropagation=z;while(x){x.fire(B,A);x=x.get(f);}}},createNode:function(y){var x=this;var z=l.TreeNode.nodeTypes[j(y)?y.type:y]||l.TreeNode;return new z(j(y)?y:{});},appendChild:function(A,z){var x=this;var y=x.getEventOutputMap(A);x.bubbleEvent("append",y,z);},_appendChild:function(E){if(E.stopActionPropagation){return false;}var x=this;var D=E.tree.node;var y=x.get(d);var B=x.get(e);x.updateReferences(D,x,y);var C=B.push(D);x.set(e,B);var A=C-2;var z=x.item(A);D.set(r,null);D.set(p,z);x.get(m).append(D.get(u));D.render();},item:function(y){var x=this;return x.get(e)[y];},indexOf:function(y){var x=this;return l.Array.indexOf(x.get(e),y);},hasChildNodes:function(){return(this.get(e).length>0);},getChildren:function(y){var x=this;var A=[];var z=x.get(e);A=A.concat(z);if(y){x.eachChildren(function(B){A=A.concat(B.getChildren(y));});}return A;},getEventOutputMap:function(y){var x=this;return{tree:{instance:x,node:y||x}};},removeChild:function(z){var x=this;var y=x.getEventOutputMap(z);x.bubbleEvent("remove",y);},_removeChild:function(B){if(B.stopActionPropagation){return false;}var x=this;var A=B.tree.node;var y=x.get(d);if(x.isRegistered(A)){A.set(f,null);x.unregisterNode(A);A.set(d,null);if(y){y.unregisterNode(A);}A.get(u).remove();var z=x.get(e);l.Array.removeItem(z,A);x.set(e,z);}},empty:function(){var x=this;x.eachChildren(function(z){var y=z.get(f);if(y){y.removeChild(z);}});},insert:function(E,B,C){var H=this;B=B||this;if(B===E){return false;}var x=B.get(f);if(E&&x){var D=E.get(u);var A=B.get(u);var G=B.get(d);if(C==="before"){A.placeBefore(D);}else{if(C==="after"){A.placeAfter(D);}}var y=[];var F=x.get(u).all("> ul > li");F.each(function(I){y.push(l.Widget.getByNode(I));});E.set(r,l.Widget.getByNode(D.get(r)));E.set(p,l.Widget.getByNode(D.get(n)));B.updateReferences(E,x,G);x.set(e,y);}E.render();var z=B.getEventOutputMap(E);z.tree.refTreeNode=B;B.bubbleEvent("insert",z);},insertAfter:function(y,x){x.insert(y,x,"after");},insertBefore:function(y,x){x.insert(y,x,"before");},getNodeByChild:function(z){var x=this;var y=z.ancestor(o+a);if(y){return x.getNodeById(y.attr(h));}return null;},_setChildren:function(y){var x=this;var z=[];l.Array.each(y,function(A){if(A){if(!i(A)&&j(A)){A=x.createNode(A);}if(!i(x)){A.set(d,x);}A.render();if(l.Array.indexOf(z,A)===-1){z.push(A);}}});return z;}}});l.TreeData=v;},"@VERSION@",{requires:["aui-base"],skinnable:false});AUI.add("aui-tree-node",function(ac){var W=ac.Lang,aI=W.isString,az=W.isBoolean,aP="alwaysShowHitArea",O="",r="boundingBox",g="children",aE="clearfix",w="collapsed",a="container",aa="content",u="contentBox",j="expanded",o="helper",T="hidden",G="hitarea",f="hitAreaEl",S="icon",aO="iconEl",ar="id",ai="label",U="labelEl",R="lastSelected",aD="leaf",p="node",ak="over",X="ownerTree",e="parentNode",aC="selected",s=" ",h="tree",H="tree-node",aL=function(){return Array.prototype.slice.call(arguments).join(s);},ao=function(A){return(A instanceof ac.TreeNode);},aK=function(A){return(A instanceof ac.TreeView);},E=ac.getClassName,af=E(o,aE),y=E(h,w),b=E(h,a),aQ=E(h,j),t=E(h,T),au=E(h,G),D=E(h,S),k=E(h,ai),C=E(h,p,aa),av=E(h,p,T,G),i=E(h,p,aD),aH=E(h,p,ak),I=E(h,p,aC),ab='<div class="'+au+'"></div>',q='<div class="'+D+'"></div>',d='<div class="'+k+'"></div>',aN="<ul></ul>",v="<li></li>",Y='<div class="'+aL(af,C)+'"></div>';var M=ac.Component.create({NAME:H,ATTRS:{draggable:{value:true,validator:az},ownerTree:{value:null},label:{value:O,validator:aI},expanded:{value:false,validator:az},id:{validator:aI},leaf:{value:true,setter:function(A){if(A&&this.get(g).length){return false;
}return A;},validator:az},nextSibling:{value:null,validator:ao},prevSibling:{value:null,validator:ao},parentNode:{value:null,validator:function(A){return ao(A)||aK(A);}},labelEl:{setter:ac.one,valueFn:function(){var A=this.get(ai);return ac.Node.create(d).html(A).unselectable();}},hitAreaEl:{setter:ac.one,valueFn:function(){return ac.Node.create(ab);}},alwaysShowHitArea:{value:true,validator:az},iconEl:{setter:ac.one,valueFn:function(){return ac.Node.create(q);}},tabIndex:{value:null}},EXTENDS:ac.TreeData,prototype:{BOUNDING_TEMPLATE:v,CONTENT_TEMPLATE:Y,initializer:function(){var A=this;A._syncTreeNodeBBId();},bindUI:function(){var A=this;A.publish("collapse",{defaultFn:A._collapse});A.publish("expand",{defaultFn:A._expand});A.after("childrenChange",ac.bind(A._afterSetChildren,A));A.after("idChange",A._afterSetId,A);},_renderUI:function(A){this._renderBoxClassNames();},renderUI:function(){var A=this;A._renderBoundingBox();A._renderContentBox();},syncUI:function(){var A=this;A._syncHitArea(A.get(g));},_renderContentBox:function(aU){var A=this;var L=A.get(u);if(A.isLeaf()){L.addClass(i);}else{var aT=A.get(j);L.addClass(aT?aQ:y);if(aT){A.expand();}}return L;},_renderBoundingBox:function(){var A=this;var aT=A.get(r);var L=A.get(u);var aU=null;if(!A.isLeaf()){L.append(A.get(f));aU=A._createNodeContainer();}L.append(A.get(aO));L.append(A.get(U));aT.append(L);if(aU){if(!A.get(j)){aU.addClass(t);}aT.append(aU);}return aT;},_createNodeContainer:function(){var A=this;var L=A.get(a)||ac.Node.create(aN);L.addClass(b);A.set(a,L);A.eachChildren(function(aT){A.appendChild(aT);});return L;},_syncHitArea:function(L){var A=this;if(A.get(aP)||L.length){A.showHitArea();}else{A.hideHitArea();A.collapse();}},appendChild:function(){var A=this;if(!A.isLeaf()){ac.TreeNode.superclass.appendChild.apply(A,arguments);}},collapse:function(){var A=this;if(A.get(j)){var L=A.getEventOutputMap(A);A.bubbleEvent("collapse",L);}},_collapse:function(aU){if(aU.stopActionPropagation){return false;}var A=this;if(!A.isLeaf()){var aT=A.get(a);var L=A.get(u);L.replaceClass(aQ,y);if(aT){aT.addClass(t);}A.set(j,false);}},collapseAll:function(){var A=this;ac.TreeNode.superclass.collapseAll.apply(A,arguments);A.collapse();},contains:function(A){return A.isAncestor(this);},expand:function(){var A=this;if(!A.get(j)){var L=A.getEventOutputMap(A);A.bubbleEvent("expand",L);}},_expand:function(aU){if(aU.stopActionPropagation){return false;}var A=this;if(!A.isLeaf()){var aT=A.get(a);var L=A.get(u);L.replaceClass(y,aQ);if(aT){aT.removeClass(t);}A.set(j,true);}},expandAll:function(){var A=this;ac.TreeNode.superclass.expandAll.apply(A,arguments);A.expand();},getDepth:function(){var aT=0;var L=this;var A=L.get(e);while(A){++aT;A=A.get(e);}return aT;},hasChildNodes:function(){var A=this;return(!A.isLeaf()&&ac.TreeNode.superclass.hasChildNodes.apply(this,arguments));},isSelected:function(){return this.get(u).hasClass(I);},isLeaf:function(){var A=this;return A.get(aD);},isAncestor:function(aT){var L=this;var A=L.get(e);while(A){if(A===aT){return true;}A=A.get(e);}return false;},insertAfter:function(aT,L){var A=this;ac.TreeNode.superclass.insertAfter.apply(this,[aT,A]);},insertBefore:function(L){var A=this;ac.TreeNode.superclass.insertBefore.apply(this,[L,A]);},removeChild:function(L){var A=this;if(!A.isLeaf()){ac.TreeNode.superclass.removeChild.apply(A,arguments);}},toggle:function(){var A=this;if(A.get(j)){A.collapse();}else{A.expand();}},select:function(){var A=this;var L=A.get(X);if(L){L.set(R,A);}A.get(u).addClass(I);A.fire("select");},unselect:function(){var A=this;A.get(u).removeClass(I);A.fire("unselect");},over:function(){this.get(u).addClass(aH);},out:function(){this.get(u).removeClass(aH);},showHitArea:function(){var A=this;var L=A.get(f);L.removeClass(av);},hideHitArea:function(){var A=this;var L=A.get(f);L.addClass(av);},_syncTreeNodeBBId:function(L){var A=this;A.get(r).attr(ar,A.get(ar));},_afterSetChildren:function(L){var A=this;A._syncHitArea(L.newVal);}}});ac.TreeNode=M;var ax=W.isFunction,F=W.isObject,ad=W.isValue,aJ="cache",at="end",aj="io",aA="limit",aM="loaded",aR="loading",ah="paginator",am="start",aq="tree-node-io",c="paginatorClick",ay=E(h,p,ah),x=E(h,p,aj,aR),aw='<a class="'+ay+'" href="javascript:void(0);">Load more results</a>';var K=ac.Component.create({NAME:aq,ATTRS:{io:{lazyAdd:false,value:null,setter:function(A){return this._setIO(A);}},loading:{value:false,validator:az},loaded:{value:false,validator:az},cache:{value:true,validator:az},leaf:{value:false,validator:az},paginator:{setter:function(A){return ac.merge({alwaysVisible:false,autoFocus:true,element:ac.Node.create(aw),endParam:at,limitParam:aA,start:0,startParam:am},A);},validator:F}},EXTENDS:ac.TreeNode,prototype:{renderUI:function(){var A=this;A._inheritOwnerTreeAttrs();ac.TreeNodeIO.superclass.renderUI.apply(this,arguments);},bindUI:function(){var A=this;ac.TreeNodeIO.superclass.bindUI.apply(this,arguments);A._bindPaginatorUI();A._createEvents();},_bindPaginatorUI:function(){var A=this;var aT=A.get(ah);if(aT){var L=ac.bind(A._handlePaginatorClickEvent,A);aT.element.on("click",L);}},createNodes:function(L){var A=this;ac.Array.each(ac.Array(L),function(aU){var aT=A.createNode.apply(A,[aU]);A.appendChild(aT);});A._syncPaginatorUI(L);},expand:function(){var A=this;var L=A.get(aJ);var aV=A.get(aj);var aT=A.get(aM);var aU=A.get(aR);if(!L){A.set(aM,false);}if(!aV||aT){ac.TreeNodeIO.superclass.expand.apply(this,arguments);}else{if(!aU){if(!L){A.empty();}A.initIO();}}},initIO:function(){var L=this;var aT=L.get(aj);if(ax(aT.cfg.data)){aT.cfg.data=aT.cfg.data.apply(L,[L]);}L._syncPaginatorIOData(aT);if(ax(aT.loader)){var A=ac.bind(aT.loader,L);A(aT.url,aT.cfg,L);}else{ac.io.request(aT.url,aT.cfg);}},ioStartHandler:function(){var A=this;var L=A.get(u);A.set(aR,true);L.addClass(x);},ioCompleteHandler:function(){var A=this;var L=A.get(u);A.set(aR,false);A.set(aM,true);L.removeClass(x);},ioSuccessHandler:function(){var A=this;var aY=A.get(aj);var aT=Array.prototype.slice.call(arguments);
var aV=aT.length;var L=aT[1];if(aV>=3){var aX=aT[2];try{L=ac.JSON.parse(aX.responseText);}catch(aW){}}var aU=aY.formatter;if(aU){L=aU(L);}A.createNodes(L);A.expand();},ioFailureHandler:function(){var A=this;A.set(aR,false);A.set(aM,false);},_createEvents:function(){var A=this;A.publish(c,{defaultFn:A._defPaginatorClickFn,prefix:aq});},_defPaginatorClickFn:function(L){var A=this;var aT=A.get(ah);if(ad(aT.limit)){aT.start+=aT.limit;}if(A.get(aj)){A.initIO();}},_handlePaginatorClickEvent:function(aU){var A=this;var aT=A.get(X);var L=A.getEventOutputMap(A);A.fire(c,L);if(aT){aT.fire(c,L);}aU.halt();},_inheritOwnerTreeAttrs:function(){var L=this;var aT=L.get(X);if(aT){if(!L.get(aj)){L.set(aj,ac.clone(aT.get(aj)));}if(!L.get(ah)){var A=aT.get(ah);if(A&&A.element){A.element=A.element.clone();}L.set(ah,A);}}},_setIO:function(aT){var A=this;if(!aT){return null;}else{if(aI(aT)){aT={url:aT};}}aT=aT||{};aT.cfg=aT.cfg||{};aT.cfg.on=aT.cfg.on||{};var L={start:ac.bind(A.ioStartHandler,A),complete:ac.bind(A.ioCompleteHandler,A),success:ac.bind(A.ioSuccessHandler,A),failure:ac.bind(A.ioFailureHandler,A)};ac.each(L,function(aW,aU){var aX=aT.cfg.on[aU];if(ax(aX)){var aV=function(){aW.apply(A,arguments);aX.apply(A,arguments);};aT.cfg.on[aU]=ac.bind(aV,A);}else{aT.cfg.on[aU]=aW;}});return aT;},_syncPaginatorIOData:function(aU){var A=this;var aT=A.get(ah);if(aT&&ad(aT.limit)){var L=aU.cfg.data||{};L[aT.limitParam]=aT.limit;L[aT.startParam]=aT.start;L[aT.endParam]=(aT.start+aT.limit);aU.cfg.data=L;}},_syncPaginatorUI:function(L){var A=this;var aT=A.get(g);var aX=A.get(ah);if(aX){var aW=(L&&L.length);var aU=aW&&(aT.length>=aX.limit);if(aX.alwaysVisible||aU){A.get(a).append(aX.element.show());if(aX.autoFocus){try{aX.element.focus();}catch(aV){}}}else{aX.element.hide();}}}}});ac.TreeNodeIO=K;var l="checkbox",n="checked",Z="checkContainerEl",aF="checkEl",N="checkName",V=".",m="name",z="tree-node-check",ag=E(h,p,l),an=E(h,p,l,a),ap=E(h,p,n),Q='<div class="'+an+'"></div>',al='<input class="'+ag+'" type="checkbox" />';var aB=ac.Component.create({NAME:z,ATTRS:{checked:{value:false,validator:az},checkName:{value:z,validator:aI},checkContainerEl:{setter:ac.one,valueFn:function(){return ac.Node.create(Q);}},checkEl:{setter:ac.one,valueFn:function(){var A=this.get(N);return ac.Node.create(al).attr(m,A);}}},EXTENDS:ac.TreeNodeIO,UI_ATTRS:[n],prototype:{renderUI:function(){var L=this;ac.TreeNodeCheck.superclass.renderUI.apply(L,arguments);var aT=L.get(U);var A=L.get(aF);var aU=L.get(Z);A.hide();aU.append(A);aT.placeBefore(aU);if(L.isChecked()){L.check();}},bindUI:function(){var A=this;var L=A.get(u);var aT=A.get(U);ac.TreeNodeCheck.superclass.bindUI.apply(A,arguments);L.delegate("click",ac.bind(A.toggleCheck,A),V+an);L.delegate("click",ac.bind(A.toggleCheck,A),V+k);aT.swallowEvent("dblclick");},check:function(){var A=this;A.set(n,true);},uncheck:function(){var A=this;A.set(n,false);},toggleCheck:function(){var L=this;var A=L.get(aF);var aT=A.attr(n);if(!aT){L.check();}else{L.uncheck();}},isChecked:function(){var A=this;return A.get(n);},_uiSetChecked:function(L){var A=this;if(L){A.get(u).addClass(ap);A.get(aF).attr(n,n);}else{A.get(u).removeClass(ap);A.get(aF).attr(n,O);}}}});ac.TreeNodeCheck=aB;var B="child",P="tree-node-task",J="unchecked",aG=function(A){return A instanceof ac.TreeNodeCheck;},ae=E(h,p,B,J);var aS=ac.Component.create({NAME:P,EXTENDS:ac.TreeNodeCheck,prototype:{check:function(){var A=this;var L=A.get(u);if(!A.isLeaf()){A.eachChildren(function(aT){if(aG(aT)){aT.check();}});}A.eachParent(function(aT){if(aG(aT)&&!aT.isChecked()){aT.get(u).addClass(ae);}});L.removeClass(ae);ac.TreeNodeTask.superclass.check.apply(this,arguments);},uncheck:function(){var A=this;var L=A.get(u);if(!A.isLeaf()){A.eachChildren(function(aT){if(aT instanceof ac.TreeNodeCheck){aT.uncheck();}});}A.eachParent(function(aT){if(aG(aT)&&!aT.isChecked()){aT.get(u).removeClass(ae);}});L.removeClass(ae);ac.TreeNodeTask.superclass.uncheck.apply(this,arguments);}}});ac.TreeNodeTask=aS;ac.TreeNode.nodeTypes={task:ac.TreeNodeTask,check:ac.TreeNodeCheck,node:ac.TreeNode,io:ac.TreeNodeIO};},"@VERSION@",{requires:["aui-tree-data","aui-io","json","querystring-stringify"],skinnable:false});AUI.add("aui-tree-view",function(y){var q=y.Lang,r=q.isString,ao="boundingBox",F="children",h="container",aa="content",S="contentBox",O=".",ad="file",al="hitarea",W="icon",aq="label",b="lastSelected",t="leaf",at="node",ai="ownerTree",am="root",a=" ",ab="tree",H="tree-view",D="type",J="view",R=function(){return Array.prototype.slice.call(arguments).join(a);},X=function(A){return(A instanceof y.TreeNode);},o=y.getClassName,C=o(ab,al),s=o(ab,W),n=o(ab,aq),Q=o(ab,at,aa),G=o(ab,am,h),j=o(ab,J,aa);var v=y.Component.create({NAME:H,ATTRS:{type:{value:ad,validator:r},lastSelected:{value:null,validator:X},io:{value:null},paginator:{value:null}},EXTENDS:y.TreeData,prototype:{CONTENT_TEMPLATE:"<ul></ul>",bindUI:function(){var A=this;A._delegateDOM();},renderUI:function(){var A=this;A._renderElements();},syncUI:function(){var A=this;A.refreshIndex();},registerNode:function(L){var A=this;L.set(ai,A);y.TreeView.superclass.registerNode.apply(this,arguments);},_createFromHTMLMarkup:function(L){var A=this;L.all("> li").each(function(aA){var ay=aA.one("> *").remove();var ax=ay.outerHTML();var aB=new y.TreeNode({boundingBox:aA,label:ax});var aw=aA.one("> ul");if(aw){aB.set(t,false);aB.set(h,aw);aB.render();A._createFromHTMLMarkup(aw);}else{aB.render();}var av=aA.get(u).get(u);var az=y.Widget.getByNode(av);az.appendChild(aB);});},_renderElements:function(){var A=this;var L=A.get(S);var av=A.get(F);var aw=A.get(D);var ax=o(ab,aw);L.addClass(j);A.set(h,L);L.addClass(R(ax,G));if(av.length){A.eachChildren(function(ay){A.appendChild(ay,true);});}else{A._createFromHTMLMarkup(L);}},_delegateDOM:function(){var A=this;var L=A.get(ao);L.delegate("click",y.bind(A._onClickHitArea,A),O+C);L.delegate("dblclick",y.bind(A._onClickHitArea,A),O+s);L.delegate("dblclick",y.bind(A._onClickHitArea,A),O+n);L.delegate("mouseenter",y.bind(A._onMouseEnterNodeEl,A),O+Q);
L.delegate("mouseleave",y.bind(A._onMouseLeaveNodeEl,A),O+Q);L.delegate("click",y.bind(A._onClickNodeEl,A),O+Q);},_onClickNodeEl:function(L){var A=this;var aw=A.getNodeByChild(L.currentTarget);if(aw&&!aw.isSelected()){var av=A.get(b);if(av){av.unselect();}aw.select();}},_onMouseEnterNodeEl:function(L){var A=this;var av=A.getNodeByChild(L.currentTarget);if(av){av.over();}},_onMouseLeaveNodeEl:function(L){var A=this;var av=A.getNodeByChild(L.currentTarget);if(av){av.out();}},_onClickHitArea:function(L){var A=this;var av=A.getNodeByChild(L.currentTarget);if(av){av.toggle();}}}});y.TreeView=v;var au=q.isNumber,E="above",x="append",ae="below",B="block",aj="body",g="clearfix",ag="default",d="display",T="down",N="drag",w="draggable",ap="dragCursor",m="dragNode",c="expanded",ah="helper",af="insert",Z="offsetHeight",u="parentNode",V="scrollDelay",k="state",ac="tree-drag-drop",I="up",l=y.DD.DDM,p=o(ah,g),an=o(W),P=o(ab,N,ah),i=o(ab,N,ah,aa),z=o(ab,N,ah,aq),f=o(ab,N,af,E),ar=o(ab,N,af,x),M=o(ab,N,af,ae),Y=o(ab,N,k,x),K=o(ab,N,k,af,E),ak=o(ab,N,k,af,ae),e='<div class="'+P+'">'+'<div class="'+[i,p].join(a)+'">'+'<span class="'+an+'"></span>'+'<span class="'+z+'"></span>'+"</div>"+"</div>";var U=y.Component.create({NAME:ac,ATTRS:{helper:{value:null},scrollDelay:{value:100,validator:au}},EXTENDS:y.TreeView,prototype:{direction:ae,dropAction:null,lastY:0,node:null,nodeContent:null,destructor:function(){var A=this;var L=A.get(ah);if(L){L.remove(true);}A.eachChildren(function(aw){if(aw.get(w)){var av=l.getDrag(aw.get(S));if(av){av.destroy();}}},true);},bindUI:function(){var A=this;y.TreeViewDD.superclass.bindUI.apply(this,arguments);A._bindDragDrop();},renderUI:function(){var A=this;y.TreeViewDD.superclass.renderUI.apply(this,arguments);var L=y.Node.create(e).hide();y.one(aj).append(L);A.set(ah,L);l.set(ap,ag);},_createDrag:function(aw){var L=this;if(!L.dragTimers){L.dragTimers=[];}if(!l.getDrag(aw)){var A=L.dragTimers;var av=50*A.length;var ax=setTimeout(function(){if(!l.getDrag(aw)){var ay=new y.DD.Drag({bubbleTargets:L,node:aw,target:true}).plug(y.Plugin.DDProxy,{moveOnEnd:false,positionProxy:false,borderStyle:null}).plug(y.Plugin.DDNodeScroll,{scrollDelay:L.get(V),node:L.get(ao)});ay.removeInvalid("a");}y.Array.removeItem(A,ax);},av);A.push(ax);}},_bindDragDrop:function(){var A=this;var L=A.get(ao);A._createDragInitHandler=y.bind(function(){A.eachChildren(function(av){if(av.get(w)){A._createDrag(av.get(S));}},true);L.detach("mouseover",A._createDragInitHandler);},A);L.on("mouseover",A._createDragInitHandler);A.after("insert",y.bind(A._afterAppend,A));A.after("append",y.bind(A._afterAppend,A));A.on("drag:align",A._onDragAlign);A.on("drag:start",A._onDragStart);A.on("drop:exit",A._onDropExit);A.after("drop:hit",A._afterDropHit);A.on("drop:hit",A._onDropHit);A.on("drop:over",A._onDropOver);},_appendState:function(L){var A=this;A.dropAction=x;A.get(ah).addClass(Y);L.addClass(ar);},_goingDownState:function(L){var A=this;A.dropAction=ae;A.get(ah).addClass(ak);L.addClass(M);},_goingUpState:function(L){var A=this;A.dropAction=E;A.get(ah).addClass(K);L.addClass(f);},_resetState:function(L){var A=this;var av=A.get(ah);av.removeClass(Y);av.removeClass(K);av.removeClass(ak);if(L){L.removeClass(f);L.removeClass(ar);L.removeClass(M);}},_updateNodeState:function(A){var aE=this;var aA=A.drag;var ax=A.drop;var L=ax.get(at);var aD=L.get(u);var az=aA.get(at).get(u);var aw=y.Widget.getByNode(aD);aE._resetState(aE.nodeContent);if(!az.contains(aD)){var aF=L.get(Z)/3;var av=L.getY();var aC=av+aF;var aB=av+aF*2;var ay=aA.mouseXY[1];if((ay>av)&&(ay<aC)){aE._goingUpState(L);}else{if(ay>aB){aE._goingDownState(L);}else{if((ay>aC)&&(ay<aB)){if(aw&&!aw.isLeaf()){aE._appendState(L);}else{if(aE.direction===I){aE._goingUpState(L);}else{aE._goingDownState(L);}}}}}}aE.nodeContent=L;},_afterAppend:function(L){var A=this;var av=L.tree.node;if(av.get(w)){A._createDrag(av.get(S));}},_afterDropHit:function(ax){var A=this;var az=A.dropAction;var ay=ax.drag.get(at).get(u);var av=ax.drop.get(at).get(u);var aA=y.Widget.getByNode(av);var aw=y.Widget.getByNode(ay);var L=A.getEventOutputMap(A);L.tree.dropNode=aA;L.tree.dragNode=aw;if(az===E){aA.insertBefore(aw);A.bubbleEvent("dropInsert",L);}else{if(az===ae){aA.insertAfter(aw);A.bubbleEvent("dropInsert",L);}else{if(az===x){if(aA&&!aA.isLeaf()){aA.appendChild(aw);if(!aA.get(c)){aA.expand();}A.bubbleEvent("dropAppend",L);}}}}A._resetState(A.nodeContent);A.bubbleEvent("drop",L);A.dropAction=null;},_onDragAlign:function(av){var A=this;var L=A.lastY;var aw=av.target.lastXY[1];if(aw!==L){A.direction=(aw<L)?I:T;}A.lastY=aw;},_onDragStart:function(ay){var A=this;var aw=ay.target;var aA=aw.get(at).get(u);var av=y.Widget.getByNode(aA);var az=A.get(b);if(az){az.unselect();}av.select();var ax=A.get(ah);var L=ax.one(O+z);ax.setStyle(d,B).show();L.html(av.get(aq));aw.set(m,ax);},_onDropOver:function(L){var A=this;A._updateNodeState(L);},_onDropHit:function(L){var A=L.drop.get(at).get(u);var av=y.Widget.getByNode(A);if(!X(av)){L.preventDefault();}},_onDropExit:function(){var A=this;A.dropAction=null;A._resetState(A.nodeContent);}}});y.TreeViewDD=U;},"@VERSION@",{requires:["aui-tree-node","dd-drag","dd-drop","dd-proxy"],skinnable:true});AUI.add("aui-tree",function(a){},"@VERSION@",{use:["aui-tree-data","aui-tree-node","aui-tree-view"],skinnable:true});