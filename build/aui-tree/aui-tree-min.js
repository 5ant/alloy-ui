AUI.add("aui-tree-data",function(m){var h=m.Lang,l=h.isArray,k=h.isObject,c=h.isUndefined,v="boundingBox",f="children",n="container",p=".",i="id",t="index",s="nextSibling",x="node",d="ownerTree",g="parentNode",q="prevSibling",o="previousSibling",r="tree",b="tree-data",j=function(y){return(y instanceof m.TreeNode);},e=function(y){return(y instanceof m.TreeView);},u=m.getClassName,a=u(r,x);var w=m.Component.create({NAME:b,ATTRS:{container:{setter:m.one},children:{value:[],validator:l,setter:"_setChildren"},index:{value:{}}},prototype:{initializer:function(){var y=this;y.publish("move");y.publish("append",{defaultFn:y._appendChild});y.publish("remove",{defaultFn:y._removeChild});},destructor:function(){var y=this;y.eachChildren(function(z){z.destroy();},true);},getNodeById:function(z){var y=this;return y.get(t)[z];},isRegistered:function(z){var y=this;return !!(y.get(t)[z.get(i)]);},updateReferences:function(B,C,F){var G=this;var E=B.get(g);var y=B.get(d);var D=E&&(E!==C);if(E){if(D){var z=E.get(f);m.Array.removeItem(z,G);E.set(f,z);}E.unregisterNode(B);}if(y){y.unregisterNode(B);}B.set(g,C);B.set(d,F);if(C){C.registerNode(B);}if(F){F.registerNode(B);}if(y!==F){B.eachChildren(function(H){G.updateReferences(H,H.get(g),F);});}if(D){var A=G.getEventOutputMap(B);if(!E.get("children").length){E.collapse();E.hideHitArea();}A.tree.oldParent=E;A.tree.oldOwnerTree=y;G.bubbleEvent("move",A);}},refreshIndex:function(){var y=this;y.updateIndex({});y.eachChildren(function(z){y.registerNode(z);},true);},registerNode:function(B){var y=this;var A=B.get(i);var z=y.get(t);if(A){z[A]=B;}if(e(y)){B.addTarget(y);}B._inheritOwnerTreeAttrs();y.updateIndex(z);},updateIndex:function(z){var y=this;if(z){y.set(t,z);}},unregisterNode:function(A){var y=this;var z=y.get(t);delete z[A.get(i)];if(e(y)){A.removeTarget(y);}y.updateIndex(z);},collapseAll:function(){var y=this;y.eachChildren(function(z){z.collapse();},true);},expandAll:function(){var y=this;y.eachChildren(function(z){z.expand();},true);},selectAll:function(){var y=this;y.eachChildren(function(z){z.select();},true);},unselectAll:function(){var y=this;y.eachChildren(function(z){z.unselect();},true);},eachChildren:function(B,z){var y=this;var A=y.getChildren(z);m.Array.each(A,function(C){if(C){B.apply(y,arguments);}});},eachParent:function(A){var z=this;var y=z.get(g);while(y){if(y){A.apply(z,[y]);}y=y.get(g);}},bubbleEvent:function(C,B,D,A){var z=this;z.fire(C,B);if(!D){var y=z.get(g);B=B||{};if(c(A)){A=true;}B.stopActionPropagation=A;while(y){y.fire(C,B);y=y.get(g);}}},createNode:function(z){var y=this;var A=m.TreeNode.nodeTypes[k(z)?z.type:z]||m.TreeNode;return new A(k(z)?z:{});},appendChild:function(B,A){var y=this;var z=y.getEventOutputMap(B);y.bubbleEvent("append",z,A);},_appendChild:function(F){if(F.stopActionPropagation){return false;}var y=this;var E=F.tree.node;var z=y.get(d);var C=y.get(f);y.updateReferences(E,y,z);var D=C.push(E);y.set(f,C);var B=D-2;var A=y.item(B);E.set(s,null);E.set(q,A);y.get(n).append(E.get(v));E.render();},item:function(z){var y=this;return y.get(f)[z];},indexOf:function(z){var y=this;return m.Array.indexOf(y.get(f),z);},hasChildNodes:function(){return(this.get(f).length>0);},getChildren:function(z){var y=this;var B=[];var A=y.get(f);B=B.concat(A);if(z){y.eachChildren(function(C){B=B.concat(C.getChildren(z));});}return B;},getEventOutputMap:function(z){var y=this;return{tree:{instance:y,node:z||y}};},removeChild:function(A){var y=this;var z=y.getEventOutputMap(A);y.bubbleEvent("remove",z);},_removeChild:function(C){if(C.stopActionPropagation){return false;}var y=this;var B=C.tree.node;var z=y.get(d);if(y.isRegistered(B)){B.set(g,null);y.unregisterNode(B);B.set(d,null);if(z){z.unregisterNode(B);}B.get(v).remove();var A=y.get(f);m.Array.removeItem(A,B);y.set(f,A);}},empty:function(){var y=this;y.eachChildren(function(A){var z=A.get(g);if(z){z.removeChild(A);}});},insert:function(F,C,D){var I=this;C=C||this;if(C===F){return false;}var y=C.get(g);if(F&&y){var E=F.get(v);var B=C.get(v);var H=C.get(d);if(D==="before"){B.placeBefore(E);}else{if(D==="after"){B.placeAfter(E);}}var z=[];var G=y.get(v).all("> ul > li");G.each(function(J){z.push(m.Widget.getByNode(J));});F.set(s,m.Widget.getByNode(E.get(s)));F.set(q,m.Widget.getByNode(E.get(o)));C.updateReferences(F,y,H);y.set(f,z);}F.render();var A=C.getEventOutputMap(F);A.tree.refTreeNode=C;C.bubbleEvent("insert",A);},insertAfter:function(z,y){y.insert(z,y,"after");},insertBefore:function(z,y){y.insert(z,y,"before");},getNodeByChild:function(A){var y=this;var z=A.ancestor(p+a);if(z){return y.getNodeById(z.attr(i));}return null;},_inheritOwnerTreeAttrs:h.emptyFn,_setChildren:function(z){var y=this;var A=[];m.Array.each(z,function(B){if(B){if(!j(B)&&k(B)){B=y.createNode(B);}if(!j(y)){B.set(d,y);}B._inheritOwnerTreeAttrs();B.render();if(m.Array.indexOf(A,B)===-1){A.push(B);}}});return A;}}});m.TreeData=w;},"@VERSION@",{skinnable:false,requires:["aui-base"]});AUI.add("aui-tree-node",function(ae){var Y=ae.Lang,aM=Y.isString,aD=Y.isBoolean,aU="alwaysShowHitArea",Q="",s="boundingBox",g="children",aI="clearfix",x="collapsed",a="container",ac="content",v="contentBox",j="expanded",p="helper",V="hidden",I="hitarea",f="hitAreaEl",U="icon",aT="iconEl",au="id",ak="label",W="labelEl",T="lastSelected",aH="leaf",q="node",am="over",Z="ownerTree",e="parentNode",aG="selected",t=" ",aB="radio",h="tree",J="tree-node",aQ=function(){return Array.prototype.slice.call(arguments).join(t);},aq=function(A){return(A instanceof ae.TreeNode);},aO=function(A){return(A instanceof ae.TreeView);},G=ae.getClassName,ah=G(p,aI),z=G(h,x),b=G(h,a),aW=G(h,j),u=G(h,V),aw=G(h,I),F=G(h,U),k=G(h,ak),E=G(h,q,ac),ay=G(h,q,V,I),i=G(h,q,aH),aL=G(h,q,am),K=G(h,q,aG),ad='<div class="'+aw+'"></div>',r='<div class="'+F+'"></div>',d='<div class="'+k+'"></div>',aS="<ul></ul>",w="<li></li>",aa='<div class="'+aQ(ah,E)+'"></div>';var O=ae.Component.create({NAME:J,ATTRS:{draggable:{value:true,validator:aD},ownerTree:{value:null},label:{value:Q,validator:aM},expanded:{value:false,validator:aD},id:{validator:aM},leaf:{value:true,setter:function(A){if(A&&this.get(g).length){return false;
}return A;},validator:aD},nextSibling:{value:null,validator:aq},prevSibling:{value:null,validator:aq},parentNode:{value:null,validator:function(A){return aq(A)||aO(A);}},labelEl:{setter:ae.one,valueFn:function(){var A=this.get(ak);return ae.Node.create(d).html(A).unselectable();}},hitAreaEl:{setter:ae.one,valueFn:function(){return ae.Node.create(ad);}},alwaysShowHitArea:{value:true,validator:aD},iconEl:{setter:ae.one,valueFn:function(){return ae.Node.create(r);}},tabIndex:{value:null}},EXTENDS:ae.TreeData,UI_ATTRS:[j],prototype:{BOUNDING_TEMPLATE:w,CONTENT_TEMPLATE:aa,initializer:function(){var A=this;A._syncTreeNodeBBId();},bindUI:function(){var A=this;A.after("childrenChange",ae.bind(A._afterSetChildren,A));A.after("idChange",A._afterSetId,A);},_renderUI:function(A){this._renderBoxClassNames();},renderUI:function(){var A=this;A._renderBoundingBox();A._renderContentBox();},syncUI:function(){var A=this;A._syncHitArea(A.get(g));},_renderContentBox:function(a0){var A=this;var L=A.get(v);if(A.isLeaf()){L.addClass(i);}else{var aZ=A.get(j);L.addClass(aZ?aW:z);if(aZ){A.expand();}}return L;},_renderBoundingBox:function(){var A=this;var aZ=A.get(s);var L=A.get(v);var a0=null;if(!A.isLeaf()){L.append(A.get(f));a0=A._createNodeContainer();}L.append(A.get(aT));L.append(A.get(W));aZ.append(L);if(a0){if(!A.get(j)){a0.addClass(u);}aZ.append(a0);}return aZ;},_createNodeContainer:function(){var A=this;var L=A.get(a)||ae.Node.create(aS);L.addClass(b);A.set(a,L);A.eachChildren(function(aZ){A.appendChild(aZ);});return L;},_syncHitArea:function(L){var A=this;if(A.get(aU)||L.length){A.showHitArea();}else{A.hideHitArea();A.collapse();}},appendChild:function(){var A=this;if(!A.isLeaf()){ae.TreeNode.superclass.appendChild.apply(A,arguments);}},collapse:function(){var A=this;A.set(j,false);},collapseAll:function(){var A=this;ae.TreeNode.superclass.collapseAll.apply(A,arguments);A.collapse();},contains:function(A){return A.isAncestor(this);},expand:function(){var A=this;A.set(j,true);},expandAll:function(){var A=this;ae.TreeNode.superclass.expandAll.apply(A,arguments);A.expand();},getDepth:function(){var aZ=0;var L=this;var A=L.get(e);while(A){++aZ;A=A.get(e);}return aZ;},hasChildNodes:function(){var A=this;return(!A.isLeaf()&&ae.TreeNode.superclass.hasChildNodes.apply(this,arguments));},isSelected:function(){return this.get(v).hasClass(K);},isLeaf:function(){var A=this;return A.get(aH);},isAncestor:function(aZ){var L=this;var A=L.get(e);while(A){if(A===aZ){return true;}A=A.get(e);}return false;},insertAfter:function(aZ,L){var A=this;ae.TreeNode.superclass.insertAfter.apply(this,[aZ,A]);},insertBefore:function(L){var A=this;ae.TreeNode.superclass.insertBefore.apply(this,[L,A]);},removeChild:function(L){var A=this;if(!A.isLeaf()){ae.TreeNode.superclass.removeChild.apply(A,arguments);}},toggle:function(){var A=this;if(A.get(j)){A.collapse();}else{A.expand();}},select:function(){var A=this;var L=A.get(Z);if(L){L.set(T,A);}A.get(v).addClass(K);A.fire("select");},unselect:function(){var A=this;A.get(v).removeClass(K);A.fire("unselect");},over:function(){this.get(v).addClass(aL);},out:function(){this.get(v).removeClass(aL);},showHitArea:function(){var A=this;var L=A.get(f);L.removeClass(ay);},hideHitArea:function(){var A=this;var L=A.get(f);L.addClass(ay);},_syncTreeNodeBBId:function(L){var A=this;A.get(s).attr(au,A.get(au));},_afterSetChildren:function(L){var A=this;A._syncHitArea(L.newVal);},_uiSetExpanded:function(a0){var A=this;if(!A.isLeaf()){var aZ=A.get(a);var L=A.get(v);if(a0){L.replaceClass(z,aW);if(aZ){aZ.removeClass(u);}}else{L.replaceClass(aW,z);if(aZ){aZ.addClass(u);}}}}}});ae.TreeNode=O;var aA=Y.isFunction,H=Y.isObject,af=Y.isValue,aN="cache",av="end",al="io",aE="limit",aR="loaded",aX="loading",aj="paginator",ao="start",at="tree-node-io",c="paginatorClick",aC=G(h,q,aj),y=G(h,q,al,aX),az='<a class="'+aC+'" href="javascript:void(0);">Load more results</a>';var N=ae.Component.create({NAME:at,ATTRS:{io:{lazyAdd:false,value:null,setter:function(A){return this._setIO(A);}},loading:{value:false,validator:aD},loaded:{value:false,validator:aD},cache:{value:true,validator:aD},leaf:{value:false,validator:aD},paginator:{setter:function(A){return ae.merge({alwaysVisible:false,autoFocus:true,element:ae.Node.create(az),endParam:av,limitParam:aE,start:0,startParam:ao},A);},validator:H}},EXTENDS:ae.TreeNode,prototype:{bindUI:function(){var A=this;ae.TreeNodeIO.superclass.bindUI.apply(this,arguments);A._bindPaginatorUI();A._createEvents();},syncUI:function(){var A=this;ae.TreeNodeIO.superclass.syncUI.apply(this,arguments);A._syncPaginatorUI();},_bindPaginatorUI:function(){var A=this;var aZ=A.get(aj);if(aZ){var L=ae.bind(A._handlePaginatorClickEvent,A);aZ.element.on("click",L);}},createNodes:function(L){var A=this;ae.Array.each(ae.Array(L),function(a0){var aZ=A.createNode.apply(A,[a0]);A.appendChild(aZ);});A._syncPaginatorUI(L);},expand:function(){var A=this;var L=A.get(aN);var a1=A.get(al);var aZ=A.get(aR);var a0=A.get(aX);if(!L){A.set(aR,false);}if(a1&&!aZ&&!a0&&!this.hasChildNodes()){if(!L){A.empty();}A.initIO();}else{ae.TreeNodeIO.superclass.expand.apply(this,arguments);}},initIO:function(){var L=this;var aZ=L.get(al);if(aA(aZ.cfg.data)){aZ.cfg.data=aZ.cfg.data.apply(L,[L]);}L._syncPaginatorIOData(aZ);if(aA(aZ.loader)){var A=ae.bind(aZ.loader,L);A(aZ.url,aZ.cfg,L);}else{ae.io.request(aZ.url,aZ.cfg);}},ioStartHandler:function(){var A=this;var L=A.get(v);A.set(aX,true);L.addClass(y);},ioCompleteHandler:function(){var A=this;var L=A.get(v);A.set(aX,false);A.set(aR,true);L.removeClass(y);},ioSuccessHandler:function(){var A=this;var a4=A.get(al);var aZ=Array.prototype.slice.call(arguments);var a1=aZ.length;var L=aZ[1];if(a1>=3){var a3=aZ[2];try{L=ae.JSON.parse(a3.responseText);}catch(a2){}}var a0=a4.formatter;if(a0){L=a0(L);}A.createNodes(L);A.expand();},ioFailureHandler:function(){var A=this;A.set(aX,false);A.set(aR,false);},_createEvents:function(){var A=this;A.publish(c,{defaultFn:A._defPaginatorClickFn,prefix:at});},_defPaginatorClickFn:function(L){var A=this;
var aZ=A.get(aj);if(af(aZ.limit)){aZ.start+=aZ.limit;}if(A.get(al)){A.initIO();}},_handlePaginatorClickEvent:function(a0){var A=this;var aZ=A.get(Z);var L=A.getEventOutputMap(A);A.fire(c,L);if(aZ){aZ.fire(c,L);}a0.halt();},_inheritOwnerTreeAttrs:function(){var L=this;var aZ=L.get(Z);if(aZ){if(!L.get(al)){L.set(al,ae.clone(aZ.get(al)));}if(!L.get(aj)){var A=aZ.get(aj);if(A&&A.element){A.element=A.element.clone();}L.set(aj,A);}}},_setIO:function(aZ){var A=this;if(!aZ){return null;}else{if(aM(aZ)){aZ={url:aZ};}}aZ=aZ||{};aZ.cfg=aZ.cfg||{};aZ.cfg.on=aZ.cfg.on||{};var L={start:ae.bind(A.ioStartHandler,A),complete:ae.bind(A.ioCompleteHandler,A),success:ae.bind(A.ioSuccessHandler,A),failure:ae.bind(A.ioFailureHandler,A)};ae.each(L,function(a2,a0){var a3=aZ.cfg.on[a0];if(aA(a3)){var a1=function(){a2.apply(A,arguments);a3.apply(A,arguments);};aZ.cfg.on[a0]=ae.bind(a1,A);}else{aZ.cfg.on[a0]=a2;}});return aZ;},_syncPaginatorIOData:function(a0){var A=this;var aZ=A.get(aj);if(aZ&&af(aZ.limit)){var L=a0.cfg.data||{};L[aZ.limitParam]=aZ.limit;L[aZ.startParam]=aZ.start;L[aZ.endParam]=(aZ.start+aZ.limit);a0.cfg.data=L;}},_syncPaginatorUI:function(L){var A=this;var aZ=A.get(g);var a3=A.get(aj);if(a3){var a2=true;if(L){a2=(L.length>0);}var a0=a2&&(aZ.length>=a3.limit);if(a3.alwaysVisible||a0){A.get(a).append(a3.element.show());if(a3.autoFocus){try{a3.element.focus();}catch(a1){}}}else{a3.element.hide();}}}}});ae.TreeNodeIO=N;var l="checkbox",o="checked",ab="checkContainerEl",aJ="checkEl",P="checkName",X=".",m="name",B="tree-node-check",ai=G(h,q,l),ap=G(h,q,l,a),ar=G(h,q,o),S='<div class="'+ap+'"></div>',an='<input class="'+ai+'" type="checkbox" />';var aF=ae.Component.create({NAME:B,ATTRS:{checked:{value:false,validator:aD},checkName:{value:B,validator:aM},checkContainerEl:{setter:ae.one,valueFn:function(){return ae.Node.create(S);}},checkEl:{setter:ae.one,valueFn:function(){var A=this.get(P);return ae.Node.create(an).attr(m,A);}}},EXTENDS:ae.TreeNodeIO,UI_ATTRS:[o],prototype:{renderUI:function(){var L=this;ae.TreeNodeCheck.superclass.renderUI.apply(L,arguments);var aZ=L.get(W);var A=L.get(aJ);var a0=L.get(ab);A.hide();a0.append(A);aZ.placeBefore(a0);if(L.isChecked()){L.check();}},bindUI:function(){var A=this;var L=A.get(v);var aZ=A.get(W);ae.TreeNodeCheck.superclass.bindUI.apply(A,arguments);L.delegate("click",ae.bind(A.toggleCheck,A),X+ap);L.delegate("click",ae.bind(A.toggleCheck,A),X+k);aZ.swallowEvent("dblclick");},check:function(){var A=this;A.set(o,true);},uncheck:function(){var A=this;A.set(o,false);},toggleCheck:function(){var L=this;var A=L.get(aJ);var aZ=A.attr(o);if(!aZ){L.check();}else{L.uncheck();}},isChecked:function(){var A=this;return A.get(o);},_uiSetChecked:function(L){var A=this;if(L){A.get(v).addClass(ar);A.get(aJ).attr(o,o);}else{A.get(v).removeClass(ar);A.get(aJ).attr(o,Q);}}}});ae.TreeNodeCheck=aF;var C="child",R="tree-node-task",M="unchecked",aK=function(A){return A instanceof ae.TreeNodeCheck;},ag=G(h,q,C,M);var aY=ae.Component.create({NAME:R,EXTENDS:ae.TreeNodeCheck,prototype:{check:function(){var A=this;var L=A.get(v);if(!A.isLeaf()){A.eachChildren(function(aZ){if(aK(aZ)){aZ.check();}});}A.eachParent(function(aZ){if(aK(aZ)&&!aZ.isChecked()){aZ.get(v).addClass(ag);}});L.removeClass(ag);ae.TreeNodeTask.superclass.check.apply(this,arguments);},uncheck:function(){var A=this;var L=A.get(v);if(!A.isLeaf()){A.eachChildren(function(aZ){if(aZ instanceof ae.TreeNodeCheck){aZ.uncheck();}});}A.eachParent(function(aZ){if(aK(aZ)&&!aZ.isChecked()){aZ.get(v).removeClass(ag);}});L.removeClass(ag);ae.TreeNodeTask.superclass.uncheck.apply(this,arguments);}}});ae.TreeNodeTask=aY;var D="tree-node-radio",n=function(A){return A instanceof ae.TreeNodeRadio;},aV=G(h,aB,q),ax=G(h,aB,q,o);var aP=ae.Component.create({NAME:D,EXTENDS:ae.TreeNodeTask,prototype:{renderUI:function(){var A=this;ae.TreeNodeRadio.superclass.renderUI.apply(A,arguments);A.get(v).addClass(aV);},check:function(){var A=this;A._uncheckRadioNodes();ae.TreeNodeRadio.superclass.check.apply(this,arguments);},_uiSetChecked:function(L){var A=this;if(L){A.get(v).addClass(ax);A.get(aJ).attr(o,o);}else{A.get(v).removeClass(ax);A.get(aJ).attr(o,Q);}},_uncheckRadioNodes:function(a0){var A=this;var aZ;if(a0){aZ=a0.get(g);}else{var L=A.get(Z);if(L){aZ=L.get(g);}else{return;}}ae.Array.each(aZ,function(a2,a1,a3){if(!a2.isLeaf()){A._uncheckRadioNodes(a2);}if(n(a2)){a2.uncheck();}});}}});ae.TreeNodeRadio=aP;ae.TreeNode.nodeTypes={radio:ae.TreeNodeRadio,task:ae.TreeNodeTask,check:ae.TreeNodeCheck,node:ae.TreeNode,io:ae.TreeNodeIO};},"@VERSION@",{skinnable:false,requires:["aui-tree-data","aui-io","json","querystring-stringify"]});AUI.add("aui-tree-view",function(y){var q=y.Lang,r=q.isString,ao="boundingBox",F="children",h="container",aa="content",S="contentBox",O=".",ad="file",al="hitarea",W="icon",aq="label",b="lastSelected",t="leaf",at="node",ai="ownerTree",am="root",a=" ",ab="tree",H="tree-view",D="type",J="view",R=function(){return Array.prototype.slice.call(arguments).join(a);},X=function(A){return(A instanceof y.TreeNode);},o=y.getClassName,C=o(ab,al),s=o(ab,W),n=o(ab,aq),Q=o(ab,at,aa),G=o(ab,am,h),j=o(ab,J,aa);var v=y.Component.create({NAME:H,ATTRS:{type:{value:ad,validator:r},lastSelected:{value:null,validator:X},io:{value:null},paginator:{value:null}},EXTENDS:y.TreeData,prototype:{CONTENT_TEMPLATE:"<ul></ul>",bindUI:function(){var A=this;A._delegateDOM();},renderUI:function(){var A=this;A._renderElements();},syncUI:function(){var A=this;A.refreshIndex();},registerNode:function(L){var A=this;L.set(ai,A);y.TreeView.superclass.registerNode.apply(this,arguments);},_createFromHTMLMarkup:function(L){var A=this;L.all("> li").each(function(aA){var ay=aA.one("> *").remove();var ax=ay.outerHTML();var aB=new y.TreeNode({boundingBox:aA,label:ax});var aw=aA.one("> ul");if(aw){aB.set(t,false);aB.set(h,aw);aB.render();A._createFromHTMLMarkup(aw);}else{aB.render();}var av=aA.get(u).get(u);var az=y.Widget.getByNode(av);az.appendChild(aB);});},_renderElements:function(){var A=this;
var L=A.get(S);var av=A.get(F);var aw=A.get(D);var ax=o(ab,aw);L.addClass(j);A.set(h,L);L.addClass(R(ax,G));if(av.length){A.eachChildren(function(ay){A.appendChild(ay,true);});}else{A._createFromHTMLMarkup(L);}},_delegateDOM:function(){var A=this;var L=A.get(ao);L.delegate("click",y.bind(A._onClickHitArea,A),O+C);L.delegate("dblclick",y.bind(A._onClickHitArea,A),O+s);L.delegate("dblclick",y.bind(A._onClickHitArea,A),O+n);L.delegate("mouseenter",y.bind(A._onMouseEnterNodeEl,A),O+Q);L.delegate("mouseleave",y.bind(A._onMouseLeaveNodeEl,A),O+Q);L.delegate("click",y.bind(A._onClickNodeEl,A),O+Q);},_onClickNodeEl:function(L){var A=this;var aw=A.getNodeByChild(L.currentTarget);if(aw&&!aw.isSelected()){var av=A.get(b);if(av){av.unselect();}aw.select();}},_onMouseEnterNodeEl:function(L){var A=this;var av=A.getNodeByChild(L.currentTarget);if(av){av.over();}},_onMouseLeaveNodeEl:function(L){var A=this;var av=A.getNodeByChild(L.currentTarget);if(av){av.out();}},_onClickHitArea:function(L){var A=this;var av=A.getNodeByChild(L.currentTarget);if(av){av.toggle();}}}});y.TreeView=v;var au=q.isNumber,E="above",x="append",ae="below",B="block",aj="body",g="clearfix",ag="default",d="display",T="down",N="drag",w="draggable",ap="dragCursor",m="dragNode",c="expanded",ah="helper",af="insert",Z="offsetHeight",u="parentNode",V="scrollDelay",k="state",ac="tree-drag-drop",I="up",l=y.DD.DDM,p=o(ah,g),an=o(W),P=o(ab,N,ah),i=o(ab,N,ah,aa),z=o(ab,N,ah,aq),f=o(ab,N,af,E),ar=o(ab,N,af,x),M=o(ab,N,af,ae),Y=o(ab,N,k,x),K=o(ab,N,k,af,E),ak=o(ab,N,k,af,ae),e='<div class="'+P+'">'+'<div class="'+[i,p].join(a)+'">'+'<span class="'+an+'"></span>'+'<span class="'+z+'"></span>'+"</div>"+"</div>";var U=y.Component.create({NAME:ac,ATTRS:{helper:{value:null},scrollDelay:{value:100,validator:au}},EXTENDS:y.TreeView,prototype:{direction:ae,dropAction:null,lastY:0,node:null,nodeContent:null,destructor:function(){var A=this;var L=A.get(ah);if(L){L.remove(true);}A.eachChildren(function(aw){if(aw.get(w)){var av=l.getDrag(aw.get(S));if(av){av.destroy();}}},true);},bindUI:function(){var A=this;y.TreeViewDD.superclass.bindUI.apply(this,arguments);A._bindDragDrop();},renderUI:function(){var A=this;y.TreeViewDD.superclass.renderUI.apply(this,arguments);var L=y.Node.create(e).hide();y.one(aj).append(L);A.set(ah,L);l.set(ap,ag);},_createDrag:function(aw){var L=this;if(!L.dragTimers){L.dragTimers=[];}if(!l.getDrag(aw)){var A=L.dragTimers;var av=50*A.length;var ax=setTimeout(function(){if(!l.getDrag(aw)){var ay=new y.DD.Drag({bubbleTargets:L,node:aw,target:true}).plug(y.Plugin.DDProxy,{moveOnEnd:false,positionProxy:false,borderStyle:null}).plug(y.Plugin.DDNodeScroll,{scrollDelay:L.get(V),node:L.get(ao)});ay.removeInvalid("a");}y.Array.removeItem(A,ax);},av);A.push(ax);}},_bindDragDrop:function(){var A=this;var L=A.get(ao);A._createDragInitHandler=y.bind(function(){A.eachChildren(function(av){if(av.get(w)){A._createDrag(av.get(S));}},true);L.detach("mouseover",A._createDragInitHandler);},A);L.on("mouseover",A._createDragInitHandler);A.after("insert",y.bind(A._afterAppend,A));A.after("append",y.bind(A._afterAppend,A));A.on("drag:align",A._onDragAlign);A.on("drag:start",A._onDragStart);A.on("drop:exit",A._onDropExit);A.after("drop:hit",A._afterDropHit);A.on("drop:hit",A._onDropHit);A.on("drop:over",A._onDropOver);},_appendState:function(L){var A=this;A.dropAction=x;A.get(ah).addClass(Y);L.addClass(ar);},_goingDownState:function(L){var A=this;A.dropAction=ae;A.get(ah).addClass(ak);L.addClass(M);},_goingUpState:function(L){var A=this;A.dropAction=E;A.get(ah).addClass(K);L.addClass(f);},_resetState:function(L){var A=this;var av=A.get(ah);av.removeClass(Y);av.removeClass(K);av.removeClass(ak);if(L){L.removeClass(f);L.removeClass(ar);L.removeClass(M);}},_updateNodeState:function(A){var aE=this;var aA=A.drag;var ax=A.drop;var L=ax.get(at);var aD=L.get(u);var az=aA.get(at).get(u);var aw=y.Widget.getByNode(aD);aE._resetState(aE.nodeContent);if(!az.contains(aD)){var aF=L.get(Z)/3;var av=L.getY();var aC=av+aF;var aB=av+aF*2;var ay=aA.mouseXY[1];if((ay>av)&&(ay<aC)){aE._goingUpState(L);}else{if(ay>aB){aE._goingDownState(L);}else{if((ay>aC)&&(ay<aB)){if(aw&&!aw.isLeaf()){aE._appendState(L);}else{if(aE.direction===I){aE._goingUpState(L);}else{aE._goingDownState(L);}}}}}}aE.nodeContent=L;},_afterAppend:function(L){var A=this;var av=L.tree.node;if(av.get(w)){A._createDrag(av.get(S));}},_afterDropHit:function(ax){var A=this;var az=A.dropAction;var ay=ax.drag.get(at).get(u);var av=ax.drop.get(at).get(u);var aA=y.Widget.getByNode(av);var aw=y.Widget.getByNode(ay);var L=A.getEventOutputMap(A);L.tree.dropNode=aA;L.tree.dragNode=aw;if(az===E){aA.insertBefore(aw);A.bubbleEvent("dropInsert",L);}else{if(az===ae){aA.insertAfter(aw);A.bubbleEvent("dropInsert",L);}else{if(az===x){if(aA&&!aA.isLeaf()){aA.appendChild(aw);if(!aA.get(c)){aA.expand();}A.bubbleEvent("dropAppend",L);}}}}A._resetState(A.nodeContent);A.bubbleEvent("drop",L);A.dropAction=null;},_onDragAlign:function(av){var A=this;var L=A.lastY;var aw=av.target.lastXY[1];if(aw!==L){A.direction=(aw<L)?I:T;}A.lastY=aw;},_onDragStart:function(ay){var A=this;var aw=ay.target;var aA=aw.get(at).get(u);var av=y.Widget.getByNode(aA);var az=A.get(b);if(az){az.unselect();}av.select();var ax=A.get(ah);var L=ax.one(O+z);ax.setStyle(d,B).show();L.html(av.get(aq));aw.set(m,ax);},_onDropOver:function(L){var A=this;A._updateNodeState(L);},_onDropHit:function(L){var A=L.drop.get(at).get(u);var av=y.Widget.getByNode(A);if(!X(av)){L.preventDefault();}},_onDropExit:function(){var A=this;A.dropAction=null;A._resetState(A.nodeContent);}}});y.TreeViewDD=U;},"@VERSION@",{requires:["aui-tree-node","dd-drag","dd-drop","dd-proxy"],skinnable:true});AUI.add("aui-tree",function(a){},"@VERSION@",{use:["aui-tree-data","aui-tree-node","aui-tree-view"],skinnable:true});