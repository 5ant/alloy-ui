AUI.add("aui-form-builder-base",function(br){var bk=br.Lang,aA=bk.isArray,aC=bk.isBoolean,bh=bk.isString,bO=bk.isObject,ac=bk.isValue,bL=br.Array,bQ=br.AvailableField.getAvailableFieldById,e=function(A){return(A instanceof br.AvailableField);},aY=function(A){return(A instanceof br.Node);},aH=function(A){return(A instanceof br.NodeList);},bP=function(A){return(A instanceof br.FormBuilder);},bg=function(A){return(A instanceof br.FormBuilderField);},a0=br.DD.DDM,d="acceptChildren",bm="active",H="add",bI="append",o="autoSelectFields",bu="availableField",bN="availableFields",X="base",ax="boundingBox",by="builder",bD="button",z="buttons",s="buttonsNode",i="children",bj="click",al="cloneNode",az="component",at="container",ar="content",bK="contentBox",aZ="data",ad="dblclick",Y="dd",bC="default",ag="defaultMessage",B="defaultMessageNode",aB="delete",j="diagram",bb=".",aM="drag",am="dragContainer",r="dragContainerNode",bn="dragNodesList",bc="draggable",n="dragging",ai="drop",aS="dropContainer",aV="dropContainerNode",bt="dropNode",aF="dropZoneNode",ao="duplicate",C="edit",bF="editing",bd="emptySelection",a6="",bs="enableEditing",aW="field",c="fields",D="fieldsNestedListConfig",aj="first",m="firstChild",aJ="fixed",P="focused",k="form",aP="formBuilder",Q="form-layout",h="helper",aa="hidden",l="icon",bA="id",bJ="inactive",bx="index",aE="input",b="items",bR="key",R="label",bp="labelNode",av="last",aI="lastChild",af="list",aK="localizationMap",aX="message",be="mouseenter",w="mouseleave",ak="name",a3="nestedList",bS="node",N="options",aL="over",ah="parent",G="parentNode",S="placeAfter",y="placeBefore",bq="placeholder",au="predefinedValue",aO="prepend",bv="readOnlyAttributes",a8="records",bz="recordset",T="region",bM="remove",t="render",ay="rendered",W="required",ba="save",aQ="selected",aD="settings",aU="settingsButtonsNode",Z="settingsFormNode",I="showLabel",J=" ",aR="srcNode",a5="state",bl="strings",aN="tabs",U="tabsContentNode",a2="tabsListNode",a="tabsNode",bE="tabview",p="target",M="templateNode",a7="text",q="tip",K="type",an="unique",f="value",E="values",aT="widget",a1="width",bi="zone",g=",",bH="-",ab=".",x="",bo="#",aG="_",v=br.getClassName,bf=bN+aG+aW+aG,bw=c+aG+aW+aG,O=v(Y,n),bG=v(j,by,ai,at),bB=v(j,by,aW,bc),V=v(k,by,ai,bi),a9=v(k,by,aW),aq=v(k,by,aW,bF),u=v(k,by,bq),a4=v(k,by,an),ap=[bA,ak],ae='<div class="'+u+'"></div>';var F=br.Component.create({NAME:bu,ATTRS:{predefinedValue:{value:x,},readOnlyAttributes:{value:[],validator:aA},unique:{value:false,validator:aC}},EXTENDS:br.AvailableField});br.FormBuilderAvailableField=F;var aw=br.Component.create({NAME:aP,ATTRS:{autoSelectFields:{value:false},enableEditing:{value:true},fieldsNestedListConfig:{setter:"_setFieldsNestedListConfig",validator:bO,value:null},strings:{value:{addNode:"Add field",cancel:"Cancel",propertyName:"Property Name",save:"Save",settings:"Settings",value:"Value"}}},EXTENDS:br.DiagramBuilderBase,FIELDS_TAB:0,SETTINGS_TAB:1,prototype:{uniqueFields:new br.DataSet(),initializer:function(){var A=this;A.on({cancel:A._onCancel,"drag:end":A._onDragEnd,"drag:start":A._onDragStart,"drag:mouseDown":A._onDragMouseDown,save:A._onSave});A.uniqueFields.after(H,br.bind(A._afterUniqueFieldsAdd,A));A.uniqueFields.after(bM,br.bind(A._afterUniqueFieldsRemove,A));A.dropContainer.delegate(bj,br.bind(A._onClickField,A),ab+a9);A.dropContainer.delegate(ad,br.bind(A._onDblClickField,A),ab+a9);},syncUI:function(){var A=this;A._setupAvailableFieldsNestedList();A._setupFieldsNestedList();},closeEditProperties:function(){var A=this;var L=A.editingField;A.tabView.selectTab(br.FormBuilder.FIELDS_TAB);if(L&&L.get(ay)){L.get(ax).removeClass(aq);}A.editingField=null;},createField:function(L){var A=this;if(!bg(L)){L=new (A.getFieldClass(L.type||aW))(L);}L.set(by,A);L.set(ah,A);return L;},duplicateField:function(bT){var A=this;var L=A._getFieldNodeIndex(bT.get(ax));var bU=A._cloneField(bT,true);A.insertField(bU,++L,bT.get(ah));},editField:function(L){var A=this;if(bg(L)){A.closeEditProperties();A.tabView.selectTab(br.FormBuilder.SETTINGS_TAB);A.propertyList.set(bz,L.getProperties());L.get(ax).addClass(aq);A.editingField=A.selectedField=L;}},getFieldClass:function(bT){var A=this;var L=br.FormBuilder.types[bT];if(L){return L;}else{br.log("The field type: ["+bT+"] couldn't be found.");return null;}},insertField:function(bU,L,bT){var A=this;bT=bT||A;bU.get(ah).removeField(bU);bT.addField(bU,L);},plotField:function(bU,L){var A=this;var bT=bU.get(ax);if(!bU.get(ay)){bU.render(L);}else{L.append(bT);}A._syncUniqueField(bU);A.fieldsNestedList.add(bT);},plotFields:function(L,bT){var A=this;bT=bT||A.dropContainer;L=L||A.get(c);bT.setContent(a6);br.each(L,function(bU){A.plotField(bU,bT);});},select:function(L){var A=this;A.unselectFields();A.selectedField=L.set(aQ,true).focus();},unselectFields:function(){var A=this;var L=A.selectedField;if(L){L.set(aQ,false);}A.selectedField=null;},_afterUniqueFieldsAdd:function(bT){var A=this;var bU=bT.attrName;if(e(bU)){var L=bU.get(bS);bU.set(bc,false);L.unselectable();}},_afterUniqueFieldsRemove:function(bT){var A=this;var bU=bT.attrName;if(e(bU)){var L=bU.get(bS);bU.set(bc,true);L.selectable();}},_cloneField:function(bU,L){var A=this;var bT={};bL.each(bU.getProperties(),function(bW){var bV=bW.attributeName;if(bL.indexOf(ap,bV)===-1){bT[bV]=bW.value;}});if(L){bT[c]=[];br.each(bU.get(c),function(bW,bV){if(!bW.get(an)){bT[c][bV]=A._cloneField(bW,L);}});}return A.createField(bT);},_dropField:function(bV){var L=this;var bX=bV.getData(bu);var bW=br.Widget.getByNode(bV);var A=bV.get(G);if(e(bX)){var bY=bX.get(bA).replace(bf,x);bW=L.createField({fixed:bX.get(aJ),id:bY,label:bX.get(R),localizationMap:bX.get(aK),options:bX.get(N),predefinedValue:bX.get(au),readOnlyAttributes:bX.get(bv),required:bX.get(W),showLabel:bX.get(I),tip:bX.get(q),type:bX.get(K),unique:bX.get(an),width:bX.get(a1)});if(bX.get(an)){bW.set(ak,bX.get(ak));}L.select(bW);}if(bg(bW)){var bU=br.Widget.getByNode(A);if(!bg(bU)){bU=L;}var bT=L._getFieldNodeIndex(bV);L.insertField(bW,bT,bU);
}},_getFieldId:function(bT){var A=this;var bU=bT.get(bA);var L;if(e(bT)){L=bf;}else{L=bw;}return bU.replace(L,x);},_getFieldNodeIndex:function(L){var A=this;return L.get(G).all("> *:not("+ab+u+")").indexOf(L);},_onClickField:function(L){var A=this;var bT=br.Widget.getByNode(L.currentTarget);A.select(bT);L.stopPropagation();},_onDblClickField:function(L){var A=this;if(!L.target.ancestor(ab+a9,true)){return;}var bT=br.Widget.getByNode(L.currentTarget);if(bT){A.editField(bT);}L.stopPropagation();},_onDragEnd:function(bT){var A=this;var L=bT.target;var bU=L.get(bS);A._dropField(bU);if(!bg(br.Widget.getByNode(bU))){bU.remove();L.set(bS,A._originalDragNode);}},_onDragMouseDown:function(L){var A=this;var bT=L.target.get(bS);var bU=br.AvailableField.getAvailableFieldByNode(bT);if(e(bU)&&!bU.get(bc)){L.halt();}},_onDragStart:function(bU){var A=this;var bT=bU.target;var bW=bT.get(bS);if(bg(br.Widget.getByNode(bW))){return;}A._originalDragNode=bW;var bV=bW.clone();bW.placeBefore(bV);bT.set(bS,bV);var L=bW.getData(bu);bV.setData(bu,L);bV.attr(bA,a6);bV.hide();bW.removeClass(O);bW.show();A.fieldsNestedList.add(bV);},_onSave:function(bT){var A=this;var L=A.editingField;if(L){var bU=A.propertyList.get(bz);bL.each(bU.get(a8),function(bV){var bW=bV.get(aZ);L.set(bW.attributeName,bW.value);});A._syncUniqueField(L);}},_setAvailableFields:function(bT){var L=this;var A=[];bL.each(bT,function(bV,bU){A.push(e(bV)?bV:new br.FormBuilderAvailableField(bV));});return A;},_setFieldsNestedListConfig:function(bT){var A=this;var L=A.dropContainer;return br.merge({bubbleTargets:A,dd:{groups:[bN],plugins:[{cfg:{horizontal:false,scrollDelay:150},fn:br.Plugin.DDWinScroll}]},dropCondition:function(bV){var bU=bV.drop.get(bS);var bW=br.Widget.getByNode(bU);if(bg(bW)){return true;}return false;},placeholder:br.Node.create(ae),dropOn:ab+V,sortCondition:function(bV){var bU=bV.drop.get(bS);return(bU!==A.dropContainer&&L.contains(bU));}},bT||{});},_setupAvailableFieldsNestedList:function(){var A=this;if(!A.availableFieldsNestedList){var L=A.fieldsContainer.all(ab+bB);A.availableFieldsNestedList=new br.NestedList(br.merge(A.get(D),{nodes:L}));}},_setupFieldsNestedList:function(){var A=this;if(!A.fieldsNestedList){A.fieldsNestedList=new br.NestedList(A.get(D));}},_syncUniqueField:function(bT){var A=this;var L=A.uniqueFields;var bU=bQ(A._getFieldId(bT));if(e(bU)){if(bU.get(an)||bT.get(an)){bT.set(bv,bU.get(bv));bT.set(an,bU.get(an));bL.each(bT.getProperties(),function(bW){var bV=bW.attributeName;if(bV===bA){return;}bU.set(bV,bW.value);});bU.set(aK,bT.get(aK));L.add(bU,bT);}}}}});br.FormBuilder=aw;br.FormBuilder.types={};},"@VERSION@",{requires:["aui-base","aui-button-item","aui-data-set","aui-diagram-builder-base","aui-nested-list","aui-tabs"],skinnable:true});AUI.add("aui-form-builder-field",function(cl){var cc=cl.Lang,a9=cc.isArray,cN=cc.isObject,b7=cc.isString,cL=cl.Array,g="acceptChildren",aM="availableFieldId",d="bodyContent",a7="boolean",a0="boundingBox",cu="builder",cD="button",Q="buttons",C="buttonsNode",cP="cancel",aR="checkbox",R="checked",r="children",cz="clearfix",a3="close",a5="component",aV="container",cK="contentBox",cG="controls",b0="controlsToolbar",cO="dataType",cA="default",be="delete",h="deleteEvent",br="deleteFieldsMessage",b1="deleteMessage",F="description",bU="disabled",b2=".",bq="drag",aL="dragContainer",B="dragContainerNode",ce="dragNodesList",aH="drop",cn="dropNode",bG="dropZone",bj="dropZoneNode",aP="duplicate",D="duplicateEvent",bD="duplicateMessage",Y="edit",p="editEvent",ba="editMessage",bV="",bE="field",f="fields",bZ="for",u="form",bt="formBuilder",aQ="form-builder-field",b5="gear",w="help",q="helper",aA="hidden",v="icon",cy="id",ap="label",ch="labelNode",bR="lightbulb",bv="metadata",aK="name",j="newwin",bc="no",cQ="node",a="panel",aG="parent",cg="pencil",bo="portalLayout",aY="predefinedValue",bH="proxy",ct="readOnlyAttributes",a4="rendered",av="required",bm="requiredFlagNode",bC="select",bu="selected",bg="settings",ay="settingsFormNode",ac="showLabel",aC="size",ad=" ",bT="state",b6="string",cd="strings",aj="templateNode",bX="text",ax="textarea",y="tip",bK="tipIconNode",ae="type",aO="unique",bz="widget",cv="yes",b8="zone",o=",",cI="-",aB=".",P="",cf="#",bk="_",K=cl.getClassName,bB=K(a5),bw=K(u,cu,cD),aw=K(u,cu,cD,be),X=K(u,cu,cD,aP),aN=K(u,cu,cD,Y),n=K(u,cu,cD,cG),az=K(u,cu,aH,cQ),H=K(u,cu,aH,b8),cs=K(u,cu,bE),aq=K(u,cu,bE,Q),bd=K(u,cu,bE,bu),ca=K(u,cu,v),ak=K(u,cu,v,be),bx=K(u,cu,v,aP),Z=K(u,cu,v,Y),bF=K(u,cu,v,y),a1=K(u,cu,av),I=K(u,cu,aO),c=K(bE),aU=K(bE,ap),bI=K(bE,bX),t=K(q,cz),al=K(q,aA),b3=K(bT,cA),N=K(bz),cj='<div class="'+[N,bB,cs].join(ad)+'"></div>',ah='<div class="'+H+'"></div>',bl='<label class="'+aU+'" for="{id}">{label}</label>',aF='<span class="'+a1+'">*</span>',bA='<a href="javascript:;" class="'+bF+'"></a>';var am=cl.Component.create({NAME:aQ,AUGMENTS:[cl.FieldSupport]});var x=cl.Component.create({NAME:aQ,ATTRS:{acceptChildren:{value:true},controlsToolbar:{validator:cN,valueFn:"_valueControlsToolbar"},dataType:{value:b6},disabled:{value:false},id:{setter:"_setId"},label:{value:bV},localizationMap:{value:{}},name:{valueFn:function(){var A=this;var L=A.get(ae);return cl.FormBuilderField.buildFieldName(L);}},parent:{value:null},predefinedValue:{value:bV},readOnlyAttributes:{value:[],validator:a9},required:{setter:cl.DataType.Boolean.parse,value:false},selected:{setter:cl.DataType.Boolean.parse,value:false},showLabel:{setter:cl.DataType.Boolean.parse,value:true},strings:{value:{button:"Button",buttonType:"Button Type",deleteFieldsMessage:"Are you sure you want to delete the selected field(s)?",duplicateMessage:"Duplicate",editMessage:"Edit",label:"Label",large:"Large",medium:"Medium",multiple:"Multiple",name:"Name",no:"No",options:"Options",predefinedValue:"Predefined Value",required:"Required",reset:"Reset",showLabel:"Show Label",small:"Small",submit:"Submit",tip:"Tip",type:"Type",width:"Width",yes:"Yes"}},tabIndex:{value:1},template:{value:bV},tip:{value:bV},type:{value:bV},unique:{setter:cl.DataType.Boolean.parse,value:false},zIndex:{value:100},dropZoneNode:{valueFn:function(){return cl.Node.create(ah);
}},labelNode:{valueFn:function(){var A=this;return cl.Node.create(cc.sub(bl,{id:A.get(cy),label:A.get(ap)}));}},requiredFlagNode:{valueFn:function(){return cl.Node.create(aF);}},templateNode:{valueFn:"getNode"},tipIconNode:{valueFn:function(){return cl.Node.create(bA);}}},UI_ATTRS:[g,bU,f,ap,aK,aY,av,bu,ac,y,aO],EXTENDS:am,buildFieldId:function(A){return f+bk+bE+bk+A;},buildFieldName:function(A){return A+(++cl.Env._uidx);},HTML_PARSER:{dropZoneNode:b2+H,labelNode:ap+b2+aU,requiredFlagNode:b2+a1,tipIconNode:b2+bF},prototype:{BOUNDING_TEMPLATE:cj,CONTROLS_TEMPLATE:'<div class="'+n+'"></div>',initializer:function(){var A=this;A.toolTip=new cl.Tooltip({trigger:A.get(bK),hideDelay:100});},renderUI:function(){var A=this;var L=A.get(cK);var cT=A.get(ch);var cV=A.get(bm);var cU=A.get(aj);var cS=A.get(bK);L.addClass(t);L.append(cT);L.append(cV);L.append(cS);L.append(cU);A.toolTip.render();},destructor:function(){var A=this;A.get(f).each(function(cS){cS.destroy();});var L=A.get(cu);if(L.editingField===A){delete L.editingField;L.closeEditProperties();}if(L.selectedField===A){delete L.selectedField;}if(A.controlsToolbar){A.controlsToolbar.destroy();}A.get(a0).dd.destroy();A.toolTip.destroy();A.get(aG).removeField(A);L.uniqueFields.remove(A);},createField:function(cS){var A=this;var L=A.get(cu);cS=L.createField(cS);cS.set(aG,A);return cS;},getHTML:function(){return bV;},getNode:function(){var A=this;return cl.Node.create(A.getHTML());},getProperties:function(){var A=this;var cS=A.getPropertyModel();var L=A.get(ct);cL.each(cS,function(cW){var cU=cW.attributeName;var cV=A.get(cU),cT=cc.type(cV);if(cT===a7){cV=String(cV);}cW.value=cV;if(cL.indexOf(L,cU)>-1){cW.editor=false;}});return cS;},getPropertyModel:function(){var L=this;var A=L.getStrings();return[{attributeName:ae,editor:false,name:A[ae]},{attributeName:ap,editor:new cl.TextCellEditor(),name:A[ap]},{attributeName:ac,editor:new cl.RadioCellEditor({options:{"true":A[cv],"false":A[bc]}}),formatter:cl.bind(L._booleanFormatter,L),name:A[ac]},{attributeName:av,editor:new cl.RadioCellEditor({options:{"true":A[cv],"false":A[bc]}}),formatter:cl.bind(L._booleanFormatter,L),name:A[av]},{attributeName:aK,editor:new cl.TextCellEditor({validator:{rules:{value:{required:true}}}}),name:A[aK]},{attributeName:aY,editor:new cl.TextCellEditor(),name:A[aY]},{attributeName:y,editor:new cl.TextAreaCellEditor(),name:A[y]}];},_booleanFormatter:function(cT){var L=this;var A=L.getStrings();var cS=cl.DataType.Boolean.parse(cT.record.get(bL).value);return cS?A[cv]:A[bc];},_renderControlsToolbar:function(){var L=this;var cS=L.get(a0);if(!L.controlsNode){L.controlsNode=cl.Node.create(L.CONTROLS_TEMPLATE);L.controlsNode.appendTo(cS);}var A=L.controlsToolbar=new cl.Toolbar(L.get(b0)).render(L.controlsNode);A.get(a0).hide();L._uiSetRequired(L.get(av));},_setId:function(A){return cl.FormBuilderField.buildFieldId(A);},_uiSetAcceptChildren:function(cU){var A=this;var L=A.get(a0);var cT=A.get(bj);var cS=L.one(b2+H);if(cU&&!cS){L.append(cT);}else{if(!cU&&cS){cS.remove();}else{if(cU&&cS){A.set(bj,cS);}}}},_uiSetDisabled:function(cS){var A=this;var L=A.get(aj);if(cS){L.setAttribute(bU,cS);}else{L.removeAttribute(bU);}},_handleDuplicateEvent:function(L){var A=this;if(!A.get(aO)){A.get(cu).duplicateField(A);}},_handleEditEvent:function(L){var A=this;A.get(cu).editField(A);},_handleDeleteEvent:function(cS){var L=this;if(!L.get(av)){var A=L.getStrings();if(confirm(A[br])){L.destroy();}}},_uiSetFields:function(cS){var A=this;var L=A.get(cu);L.plotFields(cS,A.get(bj));},_uiSetLabel:function(cS){var A=this;var L=A.get(ch);L.setContent(cS);},_uiSetName:function(cS){var A=this;var L=A.get(aj);L.set(aK,cS);},_uiSetPredefinedValue:function(cS){var A=this;var L=A.get(aj);L.val(cS);},_uiSetRequired:function(cU){var cS=this;var cT=cS.get(bm);var L=cS.controlsToolbar;var A=cS.getStrings();if(L){if(cU){L.remove(h);}else{L.add({handler:cl.bind(cS._handleDeleteEvent,cS),icon:a3,id:h,title:A[b1]});}}cT.toggleClass(al,!cU);},_uiSetSelected:function(cS){var L=this;L.get(a0).toggleClass(bd,cS);if(!L.controlsToolbar){L._renderControlsToolbar();}var A=L.controlsToolbar.get(a0);if(cS){A.show();}else{A.hide();}},_uiSetShowLabel:function(cS){var A=this;var L=A.get(ch);L.toggleClass(al,!cS);},_uiSetTip:function(cS){var A=this;var L=A.get(bK);L.toggleClass(al,!cS);A.toolTip.set(d,cS);},_uiSetUnique:function(cU){var cS=this;var cT=cS.get(a0);var L=cS.controlsToolbar;var A=cS.getStrings();cT.toggleClass(I,cU);if(L){if(cU){L.remove(D);}else{L.add({handler:cl.bind(cS._handleDuplicateEvent,cS),icon:j,id:D,title:A[bD]});}}},_valueControlsToolbar:function(){var L=this;var A=L.getStrings();return{activeState:false,children:[{handler:cl.bind(L._handleEditEvent,L),icon:b5,id:p,title:A[ba]},{handler:cl.bind(L._handleDuplicateEvent,L),icon:j,id:D,title:A[bD]},{handler:cl.bind(L._handleDeleteEvent,L),icon:a3,id:h,title:A[b1]}]};}}});cl.FormBuilderField=x;cl.FormBuilder.types["field"]=cl.FormBuilderField;var cc=cl.Lang,a9=cc.isArray,aJ=cc.isNumber,b7=cc.isString,bn=cl.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);}),cD="button",cB="buttonType",b2=".",bV="",bE="field",f="fields",aQ="form-builder-field",b9="form-builder-button-field",bh="input",ap="label",aK="name",cQ="node",aa="option",ai="options",aY="predefinedValue",bH="proxy",b4="reset",bu="selected",aE="submit",ad=" ",cd="strings",aS="template",aj="templateNode",bX="text",ae="type",m="value",K=cl.getClassName,bJ=K(bE,bh),W=K(bE,bh,bX),bY=K(aQ),cp=K(aQ,cQ),b3=K(bT,cA),bW='<input id="{id}" class="'+[cp,bJ].join(ad)+'" name="{name}" type="{type}" value="{value}" />',cR=[aE,b4,cD];var co=cl.Component.create({NAME:b9,ATTRS:{acceptChildren:{value:false,readOnly:true},buttonType:{value:aE,validator:function(A){return cl.Array(cR).indexOf(A.toLowerCase())>-1;}},predefinedValue:{value:bn(aE)},showLabel:{value:false},template:{valueFn:function(){return bW;}}},UI_ATTRS:cl.FormBuilderField.UI_ATTRS.concat([cB]),CSS_PREFIX:bY,EXTENDS:cl.FormBuilderField,prototype:{getHTML:function(){var A=this;
return cc.sub(A.get(aS),{id:A.get(cy),label:A.get(ap),name:A.get(aK),type:A.get(cB),value:A.get(aY)});},getPropertyModel:function(){var L=this;var A=L.getStrings();var cS=cl.FormBuilderButtonField.superclass.getPropertyModel.apply(L,arguments);cS.push({attributeName:cB,editor:new cl.RadioCellEditor({options:{"button":A[cD],"reset":A[b4],"submit":A[aE]}}),name:A[cB]});return cS;},_uiSetButtonType:function(cS){var A=this;var L=A.get(aj);L.setAttribute(ae,cS);}}});cl.FormBuilderButtonField=co;cl.FormBuilder.types["button"]=cl.FormBuilderButtonField;var cc=cl.Lang,a9=cc.isArray,bf=cc.isBoolean,aJ=cc.isNumber,b7=cc.isString,a7="boolean",aR="checkbox",R="checked",b2=".",bV="",bE="field",cF="form-builder-checkbox-field",aQ="form-builder-field",ap="label",b="labels",aK="name",cQ="node",aY="predefinedValue",ad=" ",aS="template",aj="templateNode",m="value",K=cl.getClassName,c=K(bE),au=K(bE,aR),ci=K(bE,aD),bY=K(aQ),cH=K(aQ,aR),cp=K(aQ,cQ),a6='<input id="{id}" class="'+[cp,c,au,ci].join(ad)+'" name="{name}" type="checkbox" value="{value}" {checked} />';var ag=cl.Component.create({NAME:cF,ATTRS:{dataType:{value:a7},predefinedValue:{setter:cl.DataType.Boolean.parse,value:false},template:{valueFn:function(){return a6;}}},CSS_PREFIX:bY,EXTENDS:cl.FormBuilderField,prototype:{renderUI:function(){var A=this;var cS=A.get(aj);var L=A.get(ch);cl.FormBuilderCheckBoxField.superclass.renderUI.apply(A,arguments);L.insert(cS,L,"before");},getPropertyModel:function(){var L=this;var A=L.getStrings();var cS=cl.FormBuilderCheckBoxField.superclass.getPropertyModel.apply(L,arguments);cL.each(cS,function(cU,cT,cV){if(cU.attributeName===aY){cV[cT]={attributeName:aY,editor:new cl.RadioCellEditor({options:{"true":A[cv],"false":A[bc]}}),formatter:cl.bind(L._booleanFormatter,L),name:A[aY]};}});return cS;},getHTML:function(){var A=this;var L=A.get(R);return cc.sub(A.get(aS),{checked:L?'checked="checked"':bV,id:A.get(cy),label:A.get(ap),name:A.get(aK),value:A.get(aY)});},_uiSetPredefinedValue:function(cS){var A=this;var L=A.get(aj);if(cS){L.setAttribute(R,cS);}else{L.removeAttribute(R);}}}});cl.FormBuilderCheckBoxField=ag;cl.FormBuilder.types.checkbox=cl.FormBuilderCheckBoxField;var cc=cl.Lang,a0="boundingBox",cK="contentBox",aV="container",cO="dataType",b2=".",aH="drop",bV="",ac="showLabel",bE="field",f="fields",bj="dropZoneNode",aQ="form-builder-field",M="form-builder-fieldset-field",cy="id",v="icon",ap="label",aK="name",cQ="node",aY="predefinedValue",ad=" ",cd="strings",aS="template",aj="templateNode",bX="text",ae="type",m="value",b8="zone",K=cl.getClassName,bY=K(aQ),cp=K(aQ,cQ),at=K(u,cu,aH,b8),aX='<fieldset id="{id}" class="'+[cp].join(ad)+'"></fieldset>',k='<legend class="'+aU+'"></legend>';var E=cl.Component.create({NAME:M,ATTRS:{acceptChildren:{value:true,readOnly:true},dataType:{value:undefined},labelNode:{valueFn:function(){return cl.Node.create(k);}},template:{valueFn:function(){return aX;}}},UI_ATTRS:[g,ap,ac],CSS_PREFIX:bY,EXTENDS:cl.FormBuilderField,prototype:{CONTENT_TEMPLATE:aX,getHTML:function(){var A=this;return cc.sub(A.get(aS),{id:A.get(cy)});},getPropertyModel:function(){var L=this;var A=L.getStrings();return[{attributeName:ae,editor:false,name:A[ae]},{attributeName:ap,editor:new cl.TextCellEditor(),name:A[ap]},{attributeName:ac,editor:new cl.RadioCellEditor({options:{"true":A[cv],"false":A[bc]}}),formatter:cl.bind(L._booleanFormatter,L),name:A[ac]}];},_uiSetAcceptChildren:function(cU){var A=this;var L=A.get(cK);var cT=A.get(bj);var cS=L.one(b2+at);if(cU&&!cS){L.append(cT);}else{if(!cU&&cS){cS.remove();}else{if(cU&&cS){A.set(bj,cS);}}}A.get(aj).hide();}}});cl.FormBuilderFieldsetField=E;cl.FormBuilder.types["fieldset"]=cl.FormBuilderFieldsetField;var cc=cl.Lang,b2=".",bV="",bE="field",f="fields",aQ="form-builder-field",cJ="form-builder-file-upload-field",v="icon",cy="id",ap="label",aK="name",cQ="node",aY="predefinedValue",ad=" ",cd="strings",aS="template",aj="templateNode",bX="text",ae="type",m="value",K=cl.getClassName,bY=K(aQ),cp=K(aQ,cQ),b3=K(bT,cA),bQ='<input id="{id}" class="'+[cp].join(ad)+'" name="{name}" type="file" value="{value}" />';var S=cl.Component.create({NAME:cJ,ATTRS:{template:{valueFn:function(){return bQ;}}},CSS_PREFIX:bY,EXTENDS:cl.FormBuilderField,prototype:{getHTML:function(){var A=this;return cc.sub(A.get(aS),{id:A.get(cy),label:A.get(ap),name:A.get(aK),value:A.get(aY)});}}});cl.FormBuilderFileUploadField=S;cl.FormBuilder.types["fileupload"]=cl.FormBuilderFileUploadField;var cx=cl.Lang,cL=cl.Array,b7=cx.isString,J="addOption",bL="data",bq="drag",aH="drop",l="editOptions",bb="editable",s="editor",bE="field",f="fields",bt="form-builder",T="form-builder-multiple-choice-field",V="form-builder-options-editor",aA="hidden",v="icon",cy="id",bh="input",ao="item",ap="label",cC="multiple",aK="name",cQ="node",aa="option",bO="optionTemplate",ai="options",aY="predefinedValue",G="render",ad=" ",aS="template",aj="templateNode",bX="text",ae="type",m="value",o=",",P="",bP=" ",K=cl.getClassName,z=function(L){var A={};cL.each(L,function(cT,cS,cU){A[cT.value]=cT.label;});return A;},bJ=K(bE,bh),W=K(bE,bh,bX),bY=K(bt,bE),cp=K(aQ,cQ),cw=K(bt,ai,s,aA);var bs=cl.Component.create({NAME:V,ATTRS:{editable:{value:false}},EXTENDS:cl.RadioCellEditor,prototype:{ELEMENT_TEMPLATE:'<div class="'+cw+'"></div>',initializer:function(){var A=this;A.after(G,function(){A._onEditEvent();});},_onSubmit:function(L){var A=this;A.saveOptions();bs.superclass._onSubmit.apply(this,arguments);}}});var e=cl.Component.create({NAME:T,ATTRS:{acceptChildren:{value:false,readOnly:true},options:{value:[{label:"option 1",value:"value 1"},{label:"option 2",value:"value 2"},{label:"option 3",value:"value 3"}]},optionTemplate:{value:'<option {selected} value="{value}">{label}</option>'}},UI_ATTRS:[g,aY,ap,aK,ai,ac],CSS_PREFIX:bY,EXTENDS:cl.FormBuilderField,prototype:{initializer:function(){var A=this;var L=A.get(ai);A.predefinedValueEditor=new cl.RadioCellEditor({options:z(L)});},getPropertyModel:function(){var L=this;var cT=L.get(ai);var A=L.getStrings();
var cS=cl.FormBuilderMultipleChoiceField.superclass.getPropertyModel.apply(L,arguments);cL.each(cS,function(cV,cU,cW){if(cV.attributeName===aY){cW[cU]=cl.merge(cV,{editor:L.predefinedValueEditor,formatter:function(cY){var cZ=L.predefinedValueEditor.get(ai);var cX=cZ[cY.record.get(bL).value];if(!b7(cX)){cX=P;}return cX;}});}});cS.push({attributeName:ai,editor:new bs({editable:true,on:{optionsChange:function(cU){L.predefinedValueEditor.set(ai,cU.newVal);}},options:z(cT),inputFormatter:function(){var cU=[];cl.each(this.get(ai),function(cX,cV,cY){var cW={label:cX,value:cV};cL.each(cT,function(cZ){if(cZ.value===cV){cW=cl.merge(cZ,cW);}});cU.push(cW);});return cU;}}),formatter:function(cV){var cU=[];cl.each(cV.record.get(bL).value,function(cX,cW,cY){cU.push(cX.label);});return cU.join(o+bP);},name:A[ai]});return cS;},_uiSetOptions:function(cT){var A=this;var cS=A.get(aY);var L=[];cl.each(cT,function(cV,cU,cW){L.push(cx.sub(A.get(bO),{label:cV.label,selected:cV.value===cS?'selected="selected"':P,value:cV.value}));});A.get(aj).setContent(L.join(P));}}});cl.FormBuilderMultipleChoiceField=e;cl.FormBuilder.types["multiple-choice"]=cl.FormBuilderMultipleChoiceField;var cc=cl.Lang,R="checked",aD="choice",aV="container",cK="contentBox",b2=".",bV="",bE="field",f="fields",aQ="form-builder-field",bp="form-builder-radio-field",v="icon",cy="id",by="inline",ap="label",b="labels",a2="left",aK="name",cQ="node",O="optionsContainerNode",aY="predefinedValue",ab="radio",ad=" ",aS="template",aj="templateNode",m="value",K=cl.getClassName,c=K(bE),ci=K(bE,aD),aI=K(bE,ab),bY=K(aQ),cp=K(aQ,cQ),cr=K(aQ,ai,aV),aZ=K(aQ,ab),b3=K(bT,cA),af='<div class="'+cr+'"></div>',a8='<div><input id="{id}" class="'+[c,ci,aI,cp].join(ad)+'" name="{name}" type="radio" value="{value}" {checked} {disabled} /><label class="aui-field-label" for="{id}">{label}</label></div>';var i=cl.Component.create({NAME:bp,ATTRS:{name:{value:ab},template:{valueFn:function(){return a8;}}},CSS_PREFIX:bY,EXTENDS:cl.FormBuilderMultipleChoiceField,prototype:{getHTML:function(){return af;},_uiSetDisabled:function(cS){var A=this;var L=A.get(aj);L.all(bh).each(function(cT){if(cS){cT.setAttribute(bU,cS);}else{cT.removeAttribute(bU);}});},_uiSetOptions:function(cT){var A=this;var L=0;var cS=A.get(aj);cS.setContent(bV);cl.each(cT,function(cV,cU,cW){cS.append(cl.Node.create(cc.sub(a8,{checked:cV.value===A.get(aY)?'checked="checked"':bV,disabled:A.get(bU)?'disabled="disabled"':bV,id:A.get(cy)+L++,label:cV.label,name:A.get(aK),value:cV.value})));});}}});cl.FormBuilderRadioField=i;cl.FormBuilder.types.radio=cl.FormBuilderRadioField;var cc=cl.Lang,a9=cc.isArray,aJ=cc.isNumber,b7=cc.isString,cD="button",b2=".",bV="",bE="field",f="fields",aQ="form-builder-field",ck="form-builder-select-field",v="icon",cy="id",bh="input",ap="label",cC="multiple",aK="name",cQ="node",aa="option",ai="options",aY="predefinedValue",bu="selected",cb="selectedIndex",ad=" ",aS="template",aj="templateNode",bX="text",ae="type",m="value",K=cl.getClassName,bJ=K(bE,bh),W=K(bE,bh,bX),bY=K(aQ),cp=K(aQ,cQ),b3=K(bT,cA),bS='<select id="{id}" class="'+[cp].join(ad)+'" name="{name}" value="{value}"></select>';var an=cl.Component.create({NAME:ck,ATTRS:{multiple:{setter:cl.DataType.Boolean.parse,value:false},template:{valueFn:function(){return bS;}}},UI_ATTRS:cl.FormBuilderField.UI_ATTRS.concat([cC]),CSS_PREFIX:bY,EXTENDS:cl.FormBuilderMultipleChoiceField,prototype:{getHTML:function(){var A=this;return cc.sub(A.get(aS),{id:A.get(cy),label:A.get(ap),name:A.get(aK),value:A.get(aY)});},getPropertyModel:function(){var L=this;var A=L.getStrings();var cS=cl.FormBuilderSelectField.superclass.getPropertyModel.apply(L,arguments);cS.push({attributeName:cC,editor:new cl.RadioCellEditor({options:{"true":A[cv],"false":A[bc]}}),formatter:cl.bind(L._booleanFormatter,L),name:A[cC]});return cS;},_uiSetMultiple:function(cS){var A=this;var L=A.get(aj);if(cS){L.setAttribute(cC,cC);}else{L.removeAttribute(cC);}}}});cl.FormBuilderSelectField=an;cl.FormBuilder.types.select=cl.FormBuilderSelectField;var cc=cl.Lang,a0="boundingBox",aV="container",cK="contentBox",b2=".",bV="",bE="field",f="fields",aQ="form-builder-field",bi="form-builder-text-field",v="icon",cy="id",bh="input",ap="label",cM="large",cq="medium",aK="name",cQ="node",bo="portalLayout",aY="predefinedValue",cm="small",ad=" ",aS="template",aj="templateNode",bX="text",m="value",bN="width",K=cl.getClassName,bJ=K(bE,bh),W=K(bE,bh,bX),bY=K(aQ),cp=K(aQ,cQ),bW='<input id="{id}" class="'+[cp,bJ,W].join(ad)+'" name="{name}" type="text" value="{value}" />',aT={25:"small",50:"medium",100:"large"};var bM=cl.Component.create({NAME:bi,ATTRS:{template:{valueFn:function(){return bW;}},width:{setter:cl.DataType.String.evaluate,value:25}},CSS_PREFIX:bY,EXTENDS:cl.FormBuilderField,prototype:{getHTML:function(){var A=this;return cc.sub(A.get(aS),{id:A.get(cy),label:A.get(ap),name:A.get(aK),value:A.get(aY),width:A.get(bN)});},getPropertyModel:function(){var L=this;var A=L.getStrings();var cS=cl.FormBuilderTextField.superclass.getPropertyModel.apply(L,arguments);cS.push({attributeName:bN,editor:new cl.RadioCellEditor({options:{25:A[cm],50:A[cq],100:A[cM]}}),formatter:function(cU){var cT=cU.record.get(bL).value;return A[aT[cT]];},name:A[bN]});return cS;},_uiSetWidth:function(cS){var A=this;var L=A.get(aj);L.addClass(K("w"+cS));L.removeClass(K("w"+A.prevWidth));A.prevWidth=cS;}}});cl.FormBuilderTextField=bM;cl.FormBuilder.types["text"]=cl.FormBuilderTextField;var cc=cl.Lang,a9=cc.isArray,aJ=cc.isNumber,b7=cc.isString,b2=".",cE="form-builder-textarea-field",K=cl.getClassName,c=K(bE),bI=K(bE,bX),U=K(bE,ax),bY=K(aQ),cp=K(aQ,cQ),ar='<textarea id="{id}" class="'+[cp,c,bI,U].join(ad)+'" name="{name}">{value}</textarea>';var aW=cl.Component.create({NAME:cE,ATTRS:{template:{valueFn:function(){return ar;}}},CSS_PREFIX:bY,EXTENDS:cl.FormBuilderTextField,prototype:{getPropertyModel:function(){var A=this;var cS=A.get(ai);var L=cl.FormBuilderTextAreaField.superclass.getPropertyModel.apply(A,arguments);cL.each(L,function(cU,cT,cV){if(cU.attributeName===aY){cV[cT].editor=new cl.TextAreaCellEditor();
}});return L;}}});cl.FormBuilderTextAreaField=aW;cl.FormBuilder.types["textarea"]=cl.FormBuilderTextAreaField;},"@VERSION@",{requires:["aui-datatype","aui-panel","aui-tooltip"],skinnable:true});AUI.add("aui-form-builder",function(a){},"@VERSION@",{use:["aui-form-builder-base","aui-form-builder-field"],skinnable:true});