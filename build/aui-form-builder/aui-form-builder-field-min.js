AUI.add("aui-form-builder-field",function(bK){var bB=bK.Lang,aL=bB.isArray,bx=bB.isString,h="acceptChildren",aG="boundingBox",bR="builder",bW="button",G="buttons",w="buttonsNode",ay="checkbox",H="checked",p="children",bT="clearfix",aH="close",aI="component",b2="contentBox",aB="container",bU="default",aM="delete",bu=".",aZ="drag",av="dragContainer",u="dragContainerNode",bF="dragNodesList",ar="drop",a5="dropContainer",ba="dropContainerNode",bL="dropNode",bc="dropZone",aQ="dropZoneNode",aw="duplicate",N="edit",bn="",bb="field",g="fields",bt="for",r="form",a1="formBuilder",ax="form-builder-field",o="helper",an="hidden",s="icon",bS="id",ae="label",bG="labelNode",a3="metadata",au="name",b6="node",b="panel",aW="portalLayout",aE="predefinedValue",bd="proxy",aj="required",bm="state",aO="settings",am="settingsFormNode",S="showLabel",ao="size",T=" ",Y="templateNode",by="zone",a7="widget",y=bK.ClassNameManager.getClassName,a9=y(aI),aA=y(bb,ae),q=y(o,bT),aa=y(o,an),bv=y(bm,bU),z=y(r,bR,bW),bq=y(r,bR,bW,aM),aS=y(r,bR,bW,aw),Q=y(r,bR,bW,N),b5=y(r,bR,s),j=y(r,bR,s,aM),v=y(r,bR,s,aw),af=y(r,bR,s,N),bs=y(r,bR,bb),bh=y(r,bR,bb,G),aR=y(r,bR,ar,b6),ah=y(r,bR,ar,by),D=y(a7),bH='<li class="'+[D,a9,bs].join(T)+'"></li>',a='<div class="'+[bh,aa].join(T)+'">'+'<a class="'+[z,Q].join(T)+'" href="javascript:;" title="Edit">'+'<div class="'+[b5,af].join(T)+'"></div>'+"</a>"+'<a class="'+[z,aS].join(T)+'" href="javascript:;" title="Duplicate">'+'<div class="'+[b5,v].join(T)+'"></div>'+"</a>"+'<a class="'+[z,bq].join(T)+'" href="javascript:;" title="Delete">'+'<div class="'+[b5,j].join(T)+'"></div>'+"</a>"+"</div>",B='<div class="'+q+'"></div>',aU='<label class="'+aA+'"></label>',W='<ul class="'+ah+'"></ul>';var t=bK.Component.create({NAME:ax,ATTRS:{acceptChildren:{value:true},formBuilder:{value:undefined},id:{value:bn},icon:{value:bn},label:{value:bn},name:{valueFn:function(){var A=this;return A.get(U)+(++bK.Env._uidx);}},parent:{value:null},predefinedValue:{value:bn},required:{setter:bK.DataType.Boolean.parse,value:false},selected:{setter:bK.DataType.Boolean.parse,value:false},showLabel:{setter:bK.DataType.Boolean.parse,value:true},template:{value:bn},type:{value:bn},buttonsNode:{valueFn:function(){return bK.Node.create(a);}},dropZoneNode:{valueFn:function(){return bK.Node.create(W);}},labelNode:{valueFn:function(){return bK.Node.create(aU);}},templateNode:{valueFn:"getNode"}},AUGMENTS:[bK.FormBuilderFieldSupport],UI_ATTRS:[h,aE,ae,au,S],HTML_PARSER:{buttonsNode:bu+bh,dropZoneNode:bu+ah,labelNode:ae+bu+aA},EXTENDS:bK.Widget,prototype:{BOUNDING_TEMPLATE:bH,initializer:function(){var A=this;A.boundingBox=A.get(aG);A.buttonsNode=A.get(w);A.contentBox=A.get(b2);A.labelNode=A.get(bG);A.templateNode=A.get(Y);A.boundingBox.setData(bb,A);},bindUI:function(){var A=this;},renderUI:function(){var A=this;var b9=A.boundingBox;var cb=A.buttonsNode;var L=A.contentBox;var b8=A.labelNode;var ca=A.templateNode;if(!b9.contains(cb)){b9.prepend(cb);}if(!L.contains(b8)){L.append(b8);b8.setAttribute(bt,ca.get(bS));}if(!L.contains(ca)){L.append(ca);}},saveSettings:function(){var A=this;var L=A.get(a1);var b8=L.get(am);bK.Array.each(bK.io._serialize(b8._node).split("&"),function(ca){var b9=ca.split("=");A.set(b9[0],decodeURIComponent(b9[1]));});},renderSettings:function(){var A=this;var L=A.get(a1);var ca=L.get(am);if(!A.fieldSettingsNode){A.fieldSettingsNode=bK.Node.create(B);var cb=bK.Node.create(B);A.labelField=new bK.Field({type:"text",name:ae,labelText:"Label",value:A.get(ae)}).render(cb);A.labelField.get(b6).on({keyup:bK.bind(A._onLabelKeyUp,A)});A.showLabelField=new bK.Field({type:"checkbox",name:S,labelText:"Show label",labelAlign:"left",value:A.get(S)}).render(cb);var b9=A.showLabelField.get(b6);b9.set(H,A.get(S));b9.on({change:bK.bind(A._onSettingsFieldChange,A)});A._renderSettingsFields([{type:"text",name:au,labelText:"Name",value:A.get(au)},{type:"text",name:aE,labelText:"Default value",value:A.get(aE)}],cb);A.requiredField=new bK.Field({type:"checkbox",name:aj,labelText:"Required",labelAlign:"left",value:aj}).render(cb);var b8=A.requiredField.get(b6);b8.set(H,A.get(aj));b8.on({change:bK.bind(A._onSettingsFieldChange,A)});A.propertiesPanel=new bK.Panel({bodyContent:cb,collapsible:true,title:"Properties"}).render();A.fieldSettingsNode.append(A.propertiesPanel.get(aG));}ca.setContent(A.fieldSettingsNode);},getHTML:function(){},getNode:function(){},_onLabelKeyUp:function(L){var A=this;var b9=L.target;var b8=b9.val();A.set(ae,b8);},_onSettingsFieldChange:function(L){var A=this;var b9=L.target;var b8=b9.val();if(b9.get(U)==ay){b8=b9.get(H);}A.set(b9.get(au),b8);},_renderSettingsFields:function(L,b8){var A=this;bK.each(L,function(ca){var cb=new bK.Field(ca).render(b8);var b9=cb.get(b6);if(ca.type==ay){b9.set(H,ca.value);}A[ca.name+"Field"]=cb;});},_uiSetAcceptChildren:function(ca){var A=this;var L=A.get(aG);var b9=A.get(aQ);var b8=L.one(bu+ah);if(ca&&!b8){L.append(b9);}else{if(!ca&&b8){b8.remove();}else{if(ca&&b8){A.set(aQ,b8);}}}},_uiSetLabel:function(b8){var A=this;var L=A.get(bG);L.setContent(b8);},_uiSetName:function(b8){var A=this;var L=A.get(Y);L.set(au,b8);},_uiSetPredefinedValue:function(b8){var A=this;var L=A.get(Y);L.val(b8);},_uiSetShowLabel:function(b8){var A=this;var L=A.get(bG);L.toggleClass(aa,!b8);}}});bK.FormBuilderField=t;bK.FormBuilder.types["field"]=bK.FormBuilderField;var bB=bK.Lang,aL=bB.isArray,at=bB.isNumber,bx=bB.isString,bg=function(A){return(A instanceof bK.Node);},aT=function(A){return(A instanceof bK.NodeList);},aV=bK.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);}),aG="boundingBox",bW="button",bV="buttonType",b2="contentBox",aB="container",bu=".",aZ="drag",av="dragContainer",u="dragContainerNode",bF="dragNodesList",ar="drop",a5="dropContainer",ba="dropContainerNode",bn="",bb="field",g="fields",ax="form-builder-field",bz="form-builder-button-field",bS="id",s="icon",aP="input",ae="label",au="name",b6="node",O="option",Z="options",aW="portalLayout",aE="predefinedValue",bd="proxy",bw="reset",a2="selected",bC="selectedIndex",aq="submit",T=" ",bD="strings",az="template",Y="templateNode",bp="text",U="type",n="value",y=bK.ClassNameManager.getClassName,bf=y(bb,aP),M=y(bb,aP,bp),bs=y(ax),bN=y(ax,b6),bk=y(a0,b6),bv=y(bm,bU),bo='<input id="{id}" class="'+[bN,bf].join(T)+'" name="{name}" type="{type}" value="{value}" />',b7=[aq,bw,bW];
var bM=bK.Component.create({NAME:bz,ATTRS:{acceptChildren:{value:false,readOnly:true},buttonType:{value:aq,validator:function(A){return bK.Array(b7).indexOf(A.toLowerCase())>-1;}},predefinedValue:{value:aV(aq)},showLabel:{value:false},strings:{value:{button:"Button",reset:"Reset",submit:"Submit"}},template:{value:bo}},UI_ATTRS:[h,aE,ae,au,bV,S],CSS_PREFIX:bs,HTML_PARSER:{templateNode:bu+bN},EXTENDS:bK.FormBuilderField,prototype:{getHTML:function(){var A=this;var ca=A.get(az);var cc=A.get(bS);var b9=A.get(ae);var b8=A.get(au);var L=A.get(bV);var cb=A.get(aE);return bK.substitute(ca,{id:cc,label:b9,name:b8,type:L,value:cb});},getNode:function(){var A=this;return bK.Node.create(A.getHTML());},renderSettings:function(){var cd=this;var cb=cd.get(a1);var A=cb.get(am);var ca=cd.get(bV);var ce=cd.get(bD);bK.FormBuilderButtonField.superclass.renderSettings.apply(cd,arguments);if(!cd._renderedButtonSettings){cd._renderedButtonSettings=true;var b8=cd.propertiesPanel.get(e);var cc=[];bK.each(b7,function(cg){cc.push({labelText:ce[cg],value:cg});});var cf=new bK.Select({labelText:"Button type",name:bV,options:cc}).render(b8.item(0));var L=cf.get(b6);L.on({change:bK.bind(cd._onButtonTypeChange,cd)});var b9=bK.Array(b7).indexOf(ca);L.all(O).item(b9).set(a2,true);}},_onButtonTypeChange:function(L){var A=this;var b8=L.target;A.set(bV,b8.get(n));},_uiSetButtonType:function(b8){var A=this;var L=A.get(Y);L.set(U,b8);}}});bK.FormBuilderButtonField=bM;bK.FormBuilder.types["button"]=bK.FormBuilderButtonField;var bB=bK.Lang,aL=bB.isArray,aN=bB.isBoolean,at=bB.isNumber,bx=bB.isString,aG="boundingBox",e="bodyContent",ay="checkbox",H="checked",ap="choice",b2="contentBox",aB="container",bu=".",aZ="drag",av="dragContainer",u="dragContainerNode",bF="dragNodesList",ar="drop",a5="dropContainer",ba="dropContainerNode",bn="",bb="field",g="fields",ax="form-builder-field",bZ="form-builder-checkbox-field",bS="id",s="icon",a6="inline",ae="label",c="labels",au="name",b6="node",aW="portalLayout",aE="predefinedValue",bd="proxy",ao="size",T=" ",az="template",Y="templateNode",n="value",y=bK.ClassNameManager.getClassName,d=y(bb),ai=y(bb,ay),bI=y(bb,ap),bs=y(ax),b0=y(ax,ay),bN=y(ax,b6),bv=y(bm,bU),bE=y(bb,c,a6),bH='<li class="'+[D,a9,bs,b0].join(T)+'"></li>',aJ='<input id="{id}" class="'+[bN,d,ai,bI].join(T)+'" name="{name}" type="checkbox" value="{value}" {checked} />';var X=bK.Component.create({NAME:bZ,ATTRS:{predefinedValue:{setter:bK.DataType.Boolean.parse,value:false},template:{value:aJ},templateNode:{valueFn:"getNode"}},UI_ATTRS:[h,aE,ae,au,S],CSS_PREFIX:bs,HTML_PARSER:{templateNode:bu+bN},EXTENDS:bK.FormBuilderField,prototype:{BOUNDING_TEMPLATE:bH,bindUI:function(){var A=this;bK.FormBuilderCheckBoxField.superclass.bindUI.apply(A,arguments);var L=A.templateNode;L.on({"change":bK.bind(A._onValueChange,A)});},renderUI:function(){var A=this;var L=A.contentBox;var b9=A.templateNode;var b8=A.labelNode;bK.FormBuilderCheckBoxField.superclass.renderUI.apply(A,arguments);b8.insert(b9,b8,"before");},getHTML:function(){var A=this;var b9=A.get(az);var ca=A.get(H);var cc=A.get(bS);var b8=A.get(ae);var L=A.get(au);var cb=A.get(aE);return bK.substitute(b9,{checked:ca?'checked="checked"':bn,id:cc,label:b8,name:L,value:cb});},getNode:function(){var A=this;return bK.Node.create(A.getHTML());},renderSettings:function(){var A=this;var L=A.get(a1);var ca=L.get(am);bK.FormBuilderCheckBoxField.superclass.renderSettings.apply(A,arguments);if(!A._renderedCheckboxSettings){A._renderedCheckboxSettings=true;A.predefinedValueField.destroy();var b9=A.propertiesPanel.get(e);var b8=new bK.Field({type:"checkbox",name:aE,labelText:"Checked",labelAlign:"left"}).render(b9.item(0));A.checkedFieldNode=b8.get(b6);A.checkedFieldNode.on({change:bK.bind(A._onValueChange,A)});A.checkedFieldNode.set(H,A.get(aE));}},_onValueChange:function(L){var A=this;var b8=L.target;A.set(aE,b8.get(H));},_uiSetPredefinedValue:function(b9){var A=this;var b8=A.get(Y);var L=A.checkedFieldNode;if(L){L.set(H,b9);}b8.set(H,b9);}}});bK.FormBuilderCheckBoxField=X;bK.FormBuilder.types["checkbox"]=bK.FormBuilderCheckBoxField;var bB=bK.Lang,aL=bB.isArray,at=bB.isNumber,bx=bB.isString,bg=function(A){return(A instanceof bK.Node);},aT=function(A){return(A instanceof bK.NodeList);},aG="boundingBox",b2="contentBox",aB="container",bu=".",ar="drop",bn="",bb="field",g="fields",ax="form-builder-field",E="form-builder-fieldset-field",bS="id",s="icon",ae="label",au="name",b6="node",aE="predefinedValue",T=" ",az="template",Y="templateNode",bp="text",n="value",by="zone",y=bK.ClassNameManager.getClassName,bs=y(ax),bN=y(ax,b6),ah=y(r,bR,ar,by),aD='<fieldset class="'+[bN].join(T)+'"></fieldset>',k='<legend class="'+aA+'"></legend>';var x=bK.Component.create({NAME:E,ATTRS:{acceptChildren:{value:true,readOnly:true},template:{value:bn},labelNode:{valueFn:function(){return bK.Node.create(k);}},templateNode:{valueFn:"getNode"}},UI_ATTRS:[h,ae,S],CSS_PREFIX:bs,HTML_PARSER:{templateNode:bu+bN},EXTENDS:bK.FormBuilderField,prototype:{CONTENT_TEMPLATE:aD,renderUI:function(){var A=this;var b9=A.boundingBox;var cb=A.buttonsNode;var L=A.contentBox;var b8=A.labelNode;var ca=A.templateNode;if(!b9.contains(cb)){b9.prepend(cb);}if(!L.contains(b8)){L.append(b8);}},renderSettings:function(){var A=this;var L=A.get(a1);var b9=L.get(am);if(!A._renderedFieldsetSettings){A._renderedFieldsetSettings=true;A.fieldSettingsNode=bK.Node.create(B);var ca=bK.Node.create(B);A.labelField=new bK.Field({type:"text",name:ae,labelText:"Label",value:A.get(ae)}).render(ca);A.labelField.get(b6).on({keyup:bK.bind(A._onLabelKeyUp,A)});A.showLabelField=new bK.Field({type:"checkbox",name:S,labelText:"Show label",labelAlign:"left",value:A.get(S)}).render(ca);var b8=A.showLabelField.get(b6);b8.set(H,A.get(S));b8.on({change:bK.bind(A._onSettingsFieldChange,A)});A.propertiesPanel=new bK.Panel({bodyContent:ca,collapsible:true,title:"Properties"}).render();A.fieldSettingsNode.append(A.propertiesPanel.get(aG));}b9.setContent(A.fieldSettingsNode);},_uiSetAcceptChildren:function(ca){var A=this;
var L=A.get(b2);var b9=A.get(aQ);var b8=L.one(bu+ah);if(ca&&!b8){L.append(b9);}else{if(!ca&&b8){b8.remove();}else{if(ca&&b8){A.set(aQ,b8);}}}},}});bK.FormBuilderFieldsetField=x;bK.FormBuilder.types["fieldset"]=bK.FormBuilderFieldsetField;var bB=bK.Lang,aL=bB.isArray,at=bB.isNumber,bx=bB.isString,bg=function(A){return(A instanceof bK.Node);},aT=function(A){return(A instanceof bK.NodeList);},aG="boundingBox",b2="contentBox",aB="container",bu=".",bn="",bb="field",g="fields",ax="form-builder-field",b1="form-builder-file-upload-field",bS="id",s="icon",ae="label",au="name",b6="node",aE="predefinedValue",T=" ",az="template",Y="templateNode",bp="text",n="value",y=bK.ClassNameManager.getClassName,bs=y(ax),bN=y(ax,b6),bv=y(bm,bU),bj='<input id="{id}" class="'+[bN].join(T)+'" name="{name}" type="file" value="{value}" />';var I=bK.Component.create({NAME:b1,ATTRS:{template:{value:bj},templateNode:{valueFn:"getNode"}},UI_ATTRS:[h,aE,ae,au,S],CSS_PREFIX:bs,HTML_PARSER:{templateNode:bu+bN},EXTENDS:bK.FormBuilderField,prototype:{getHTML:function(){var A=this;var ca=A.get(az);var cc=A.get(bS);var b8=A.get(ae);var L=A.get(au);var b9=A.get(ao);var cb=A.get(aE);return bK.substitute(ca,{id:cc,label:b8,name:L,value:cb});},getNode:function(){var A=this;return bK.Node.create(A.getHTML());},renderSettings:function(){var A=this;var L=A.get(a1);var b9=L.get(am);if(!A._renderedFileUploadSettings){A._renderedFileUploadSettings=true;A.fieldSettingsNode=bK.Node.create(B);var ca=bK.Node.create(B);A.labelField=new bK.Field({type:"text",name:ae,labelText:"Label",value:A.get(ae)}).render(ca);A.labelField.get(b6).on({keyup:bK.bind(A._onLabelKeyUp,A)});A.showLabelField=new bK.Field({type:"checkbox",name:S,labelText:"Show label",labelAlign:"left",value:A.get(S)}).render(ca);var b8=A.showLabelField.get(b6);b8.set(H,A.get(S));b8.on({change:bK.bind(A._onSettingsFieldChange,A)});A._renderSettingsFields([{type:"text",name:au,labelText:"Name",value:A.get(au)},{type:"checkbox",name:aj,labelText:"Required",labelAlign:"left",value:A.get(aj)}],ca);A.propertiesPanel=new bK.Panel({bodyContent:ca,collapsible:true,title:"Properties"}).render();A.fieldSettingsNode.append(A.propertiesPanel.get(aG));}b9.setContent(A.fieldSettingsNode);}}});bK.FormBuilderFileUploadField=I;bK.FormBuilder.types["fileupload"]=bK.FormBuilderFileUploadField;var bB=bK.Lang,aL=bB.isArray,at=bB.isNumber,bx=bB.isString,bg=function(A){return(A instanceof bK.Node);},aT=function(A){return(A instanceof bK.NodeList);},aG="boundingBox",b2="contentBox",aB="container",bu=".",aZ="drag",av="dragContainer",u="dragContainerNode",bF="dragNodesList",ar="drop",a5="dropContainer",ba="dropContainerNode",bn="",bb="field",g="fields",ax="form-builder-field",a0="form-builder-input-field",bS="id",s="icon",aP="input",ae="label",au="name",b6="node",aW="portalLayout",aE="predefinedValue",bd="proxy",T=" ",az="template",Y="templateNode",bp="text",n="value",y=bK.ClassNameManager.getClassName,bf=y(bb,aP),M=y(bb,aP,bp),bs=y(ax),bN=y(ax,b6),bk=y(a0,b6),bv=y(bm,bU),bo='<input id="{id}" class="'+[bN,bf,M].join(T)+'" name="{name}" type="text" value="{value}" />';var m=bK.Component.create({NAME:a0,ATTRS:{template:{value:bo},templateNode:{valueFn:"getNode"}},UI_ATTRS:[h,aE,ae,au,S],CSS_PREFIX:bs,HTML_PARSER:{templateNode:bu+bN},EXTENDS:bK.FormBuilderField,prototype:{bindUI:function(){var A=this;bK.FormBuilderInputField.superclass.bindUI.apply(A,arguments);var L=A.templateNode;L.on({"keyup":bK.bind(A._onValueKeyUp,A)});},getHTML:function(){var A=this;var ca=A.get(az);var cc=A.get(bS);var b8=A.get(ae);var L=A.get(au);var b9=A.get(ao);var cb=A.get(aE);return bK.substitute(ca,{id:cc,label:b8,name:L,value:cb});},getNode:function(){var A=this;return bK.Node.create(A.getHTML());},renderSettings:function(){var A=this;var L=A.get(a1);var b8=L.get(am);bK.FormBuilderCheckBoxField.superclass.renderSettings.apply(A,arguments);if(!A._renderedInputSettings){A._renderedInputSettings=true;var b9=b8.one("input[name=predefinedValue]");b9.on({"keyup":bK.bind(A._onValueKeyUp,A)});}},_onValueKeyUp:function(L){var A=this;var b8=L.target;A.set(aE,b8.val());},_uiSetPredefinedValue:function(cb){var A=this;var L=A.get(a1);var b9=L.get(am);var ca=b9.one("input[name=predefinedValue]");var b8=A.get(Y);b8.val(cb);if(ca&&A.get(a2)){ca.val(cb);}}}});bK.FormBuilderInputField=m;bK.FormBuilder.types["text"]=bK.FormBuilderInputField;var bB=bK.Lang,aL=bB.isArray,at=bB.isNumber,bx=bB.isString,bg=function(A){return(A instanceof bK.Node);},aT=function(A){return(A instanceof bK.NodeList);},aV=bK.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);}),P="add",bA="addNode",aG="boundingBox",bW="button",bV="buttonType",b2="contentBox",aB="container",bU="default",a4="defaultName",b3="defaultOptions",C="defaultValue",bu=".",aZ="drag",av="dragContainer",u="dragContainerNode",bF="dragNodesList",ar="drop",a5="dropContainer",ba="dropContainerNode",bn="",bb="field",g="fields",ax="form-builder-field",J="form-builder-multiple-choice-field",s="icon",bS="id",aP="input",ad="item",ae="label",bX="multiple",au="name",b6="node",O="option",bi="optionTemplate",Z="options",aE="predefinedValue",bd="proxy",b4="remove",bw="reset",aq="submit",T=" ",az="template",Y="templateNode",bp="text",U="type",n="value",y=bK.ClassNameManager.getClassName,bf=y(bb,aP),M=y(bb,aP,bp),l=y(bb,Z,P),bQ=y(bb,Z,ad),bP=y(bb,Z,ad,aP),br=y(bb,Z,ad,aP,au),ab=y(bb,Z,ad,aP,n),aX=y(bb,Z,ad,b4),bs=y(ax),bN=y(ax,b6),bk=y(a0,b6),bv=y(bm,bU),al='<div class="'+[bQ,bE,q].join(T)+'">'+'<input type="text" name="name" class="'+[bP,br,bf,M].join(T)+'" value="{name}" />'+'<input type="text" name="value" class="'+[bP,ab,bf,M].join(T)+'" value="{value}" />'+'<a href="javascript:;" class="'+aX+'">&nbsp;</a>'+"</div>";TPL_ADD='<a class="'+l+'" href="javascript:;">Add an option</a>',ENTER="ENTER";var a8=bK.Component.create({NAME:Z,ATTRS:{allowClear:{value:false},defaultName:{value:bn},defaultValue:{value:bn},options:{value:[],getter:"_getOptions",validator:aL},addNode:{valueFn:function(){return bK.Node.create(TPL_ADD);
}}},HTML_PARSER:{addNode:bu+l},UI_ATTRS:[Z],EXTENDS:bK.Widget,prototype:{initializer:function(){var A=this;A.boundingBox=A.get(aG);A.contentBox=A.get(b2);},renderUI:function(){var A=this;var L=A.boundingBox;var b8=A.get(bA);if(!b8.inDoc()){L.append(b8);}},bindUI:function(){var A=this;var L=A.boundingBox;var b8=A.get(bA);b8.on("click",bK.bind(A._onClickAdd,A));L.delegate("click",bK.bind(A._onClickOptionRemove,A),bu+aX);L.delegate("keypress",bK.bind(A._onKeyPressOption,A),bu+bP);},add:function(b8){var A=this;var L=A.get(Z);L.push(b8);A.set(Z,L);},clear:function(){var A=this;if(A.get(ALLOW_CLEAR)){A.set(Z,[]);}},remove:function(L){var A=this;var b8=A._getOptionNode(L);if(b8){b8.remove();}A.items=A.contentBox.all(bu+bQ);},_addNewOption:function(){var L=this;var b8=L._createOption({name:L.get(a4),value:L.get(C)});b8=bK.Node.create(b8);L.contentBox.append(b8);var A=b8.one(aP);A.focus();A.select();L.items=L.contentBox.all(bu+bQ);return b8;},_createOption:function(L){var A=this;return bK.substitute(al,L);},_getOptionNode:function(L){var A=this;return A.items.item(L);},_getOptions:function(b8){var A=this;var L=[];if(A.items){bK.each(A.items,function(b9){var ca=b9.one(bu+br);var cb=b9.one(bu+ab);L.push({name:ca.val(),value:cb.val()});});}else{L=b8;}return L;},_indexOfTarget:function(b8){var A=this;var L=b8.ancestor(bu+bQ);return A.items.indexOf(L);},_onClickAdd:function(L){var A=this;A._addNewOption();},_onClickOptionRemove:function(b9){var A=this;var b8=A.get(Z);var L=A._indexOfTarget(b9.target);A.remove(L);},_onKeyPressOption:function(ca){var A=this;var b9=A.get(Z);var cb=ca.currentTarget;var L=A.items;if(ca.isKey(ENTER)){var b8=A._indexOfTarget(cb);var cc=cb.hasClass(ab);if((b8==L.size()-1)&&cc){A._addNewOption();}}},_uiSetOptions:function(b9){var A=this;var b8=[];var L=A.get(b2);L.empty();bK.each(b9,function(ca){L.append(A._createOption(ca));});A.items=L.all(bu+bQ);}}});var f=bK.Component.create({NAME:J,ATTRS:{acceptChildren:{value:false,readOnly:true},options:{value:[{name:"option 1",value:"value 1"},{name:"option 2",value:"value 2"},{name:"option 3",value:"value 3"}]},optionTemplate:{value:'<option value="{value}">{name}</option>'},},UI_ATTRS:[h,aE,ae,au,Z,S],CSS_PREFIX:bs,HTML_PARSER:{templateNode:bu+bN},EXTENDS:bK.FormBuilderField,prototype:{initializer:function(){var A=this;bK.FormBuilderMultipleChoiceField.superclass.initializer.apply(A,arguments);},getNode:function(){var A=this;return bK.FormBuilderMultipleChoiceField.superclass.getNode.apply(A,arguments);},renderSettings:function(){var A=this;bK.FormBuilderMultipleChoiceField.superclass.renderSettings.apply(A,arguments);if(!A._renderedMultipleChoiceSettings){A._renderedMultipleChoiceSettings=true;var L=bK.Node.create(B);A.optionsPanel=new bK.Panel({bodyContent:L,collapsible:true,title:"Options"}).render();A.options=new a8({options:A.get(Z)}).render(L);A.fieldSettingsNode.append(A.optionsPanel.get(aG));}},saveSettings:function(){var A=this;bK.FormBuilderMultipleChoiceField.superclass.saveSettings.apply(A,arguments);A.set(Z,A.options.get(Z));},_uiSetOptions:function(b8){var A=this;var L=A.get(Y);L.empty();bK.each(b8,function(b9){L.append(bK.substitute(A.get(bi),b9));});}}});bK.FormBuilderMultipleChoiceField=f;bK.FormBuilder.types["multiple-choice"]=bK.FormBuilderMultipleChoiceField;var bB=bK.Lang,aL=bB.isArray,aN=bB.isBoolean,at=bB.isNumber,bx=bB.isString,aG="boundingBox",e="bodyContent",H="checked",ap="choice",b2="contentBox",aB="container",bu=".",bn="",bb="field",g="fields",ax="form-builder-field",aY="form-builder-radio-field",bS="id",s="icon",a6="inline",ae="label",c="labels",au="name",b6="node",F="optionsContainerNode",aE="predefinedValue",R="radio",ao="size",T=" ",az="template",Y="templateNode",n="value",y=bK.ClassNameManager.getClassName,d=y(bb),bI=y(bb,ap),bs=y(ax),aF=y(ax,R),bN=y(ax,b6),bO=y(ax,Z,aB),bv=y(bm,bU),bE=y(bb,c,a6),bH='<li class="'+[D,a9,bs,aF].join(T)+'"></li>',V='<div class="'+bO+'"></div>',aK='<input id="{id}" class="'+[bN,d,bI].join(T)+'" name="{name}" type="radio" value="{value}" {checked} />';var i=bK.Component.create({NAME:aY,ATTRS:{name:{value:R},optionTemplate:{value:aK},template:{value:aK},optionsContainerNode:{valueFn:function(){return bK.Node.create(V);}},templateNode:{valueFn:"getNode"}},UI_ATTRS:[h,aE,ae,au,S,Z],CSS_PREFIX:bs,HTML_PARSER:{optionsContainerNode:bu+bO,templateNode:bu+bN},EXTENDS:bK.FormBuilderMultipleChoiceField,prototype:{BOUNDING_TEMPLATE:bH,renderUI:function(){var A=this;var b9=A.boundingBox;var cb=A.buttonsNode;var L=A.contentBox;var b8=A.labelNode;if(!b9.contains(cb)){b9.prepend(cb);}if(!L.contains(b8)){L.append(b8);}var ca=A.get(F);if(!L.contains(ca)){L.append(ca);}},getHTML:function(){var A=this;var b9=A.get(az);var ca=A.get(H);var cc=A.get(bS);var b8=A.get(ae);var L=A.get(au);var cb=A.get(aE);return bK.substitute(b9,{checked:ca?'checked="checked"':bn,id:cc,label:b8,name:L,value:cb});},getNode:function(){var A=this;return bK.Node.create(A.getHTML());},_onFieldChange:function(L){var A=this;var b8=L.target;A.set(aE,b8.val());},_uiSetOptions:function(ca){var A=this;var L=A.get(b2);var b9=A.get(F);var b8=A.get(Y);b9.empty();bK.each(ca,function(cd){var cc=new bK.Field({type:R,name:A.get(au),labelText:cd.name,labelAlign:"left",value:cd.value}).render(b9);var cb=cc.get(b6);if(cd.value==A.get(aE)){cb.set(H,true);}cb.on({change:bK.bind(A._onFieldChange,A)});});},_uiSetPredefinedValue:function(ca){var A=this;var L=A.get(a1);var b8=L.get(am);var b9=b8.one("input[name=predefinedValue]");if(b9){b9.val(ca);}}}});bK.FormBuilderRadioField=i;bK.FormBuilder.types["radio"]=bK.FormBuilderRadioField;var bB=bK.Lang,aL=bB.isArray,at=bB.isNumber,bx=bB.isString,bg=function(A){return(A instanceof bK.Node);},aT=function(A){return(A instanceof bK.NodeList);},aV=bK.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);}),aG="boundingBox",bW="button",bV="buttonType",b2="contentBox",aB="container",b3="defaultOptions",bu=".",aZ="drag",av="dragContainer",u="dragContainerNode",bF="dragNodesList",ar="drop",a5="dropContainer",ba="dropContainerNode",bn="",bb="field",g="fields",ax="form-builder-field",bJ="form-builder-select-field",bS="id",s="icon",aP="input",ae="label",bX="multiple",au="name",b6="node",O="option",Z="options",aW="portalLayout",aE="predefinedValue",bd="proxy",bw="reset",bC="selectedIndex",aq="submit",T=" ",az="template",Y="templateNode",bp="text",U="type",n="value",y=bK.ClassNameManager.getClassName,bf=y(bb,aP),M=y(bb,aP,bp),bs=y(ax),bN=y(ax,b6),bk=y(a0,b6),bv=y(bm,bU),bl='<select id="{id}" class="'+[bN].join(T)+'" name="{name}" value="{value}"></select>';
var ac=bK.Component.create({NAME:bJ,ATTRS:{multiple:{value:false,validator:aN},template:{value:bl},templateNode:{valueFn:"getNode"}},UI_ATTRS:[h,aE,ae,au,Z,S,bX],CSS_PREFIX:bs,HTML_PARSER:{templateNode:bu+bN},EXTENDS:bK.FormBuilderMultipleChoiceField,prototype:{getHTML:function(){var A=this;var b9=A.get(az);var cb=A.get(bS);var b8=A.get(ae);var L=A.get(au);var ca=A.get(aE);return bK.substitute(b9,{id:cb,label:b8,name:L,value:ca});},getNode:function(){var A=this;return bK.Node.create(A.getHTML());},renderSettings:function(){var A=this;var L=A.get(a1);var cb=L.get(am);bK.FormBuilderSelectField.superclass.renderSettings.apply(A,arguments);if(!A._renderedSelectSettings){A._renderedSelectSettings=true;var ca=A.propertiesPanel.get(e);var b9=new bK.Field({type:"checkbox",name:bX,labelText:"Multiple",labelAlign:"left"}).render(ca.item(0));var b8=b9.get(b6);b8.on({change:bK.bind(A._onSettingsFieldChange,A)});b8.set(H,A.get(bX));}},_uiSetMultiple:function(b8){var A=this;var L=A.get(Y);if(b8){L.setAttribute(bX,bX);}else{L.removeAttribute(bX);}}}});bK.FormBuilderSelectField=ac;bK.FormBuilder.types["select"]=bK.FormBuilderSelectField;var bB=bK.Lang,aL=bB.isArray,at=bB.isNumber,bx=bB.isString,aG="boundingBox",b2="contentBox",aB="container",bu=".",aZ="drag",av="dragContainer",u="dragContainerNode",bF="dragNodesList",ar="drop",a5="dropContainer",ba="dropContainerNode",bn="",bb="field",g="fields",ax="form-builder-field",bY="form-builder-textarea-field",bS="id",s="icon",ae="label",au="name",b6="node",aW="portalLayout",aE="predefinedValue",bd="proxy",ao="size",T=" ",az="template",Y="templateNode",bp="text",ak="textarea",n="value",y=bK.ClassNameManager.getClassName,d=y(bb),be=y(bb,bp),K=y(bb,ak),bs=y(ax),bN=y(ax,b6),bk=y(a0,b6),bv=y(bm,bU),ag='<textarea id="{id}" class="'+[bN,d,be,K].join(T)+'" name="{name}">{value}</textarea>';var aC=bK.Component.create({NAME:bY,ATTRS:{template:{value:ag},templateNode:{valueFn:"getNode"}},UI_ATTRS:[h,aE,ae,au,S],CSS_PREFIX:bs,HTML_PARSER:{templateNode:bu+bN},EXTENDS:bK.FormBuilderField,prototype:{bindUI:function(){var A=this;bK.FormBuilderInputField.superclass.bindUI.apply(A,arguments);var L=A.templateNode;L.on({"keyup":bK.bind(A._onValueKeyUp,A)});},getHTML:function(){var A=this;var ca=A.get(az);var cc=A.get(bS);var b8=A.get(ae);var L=A.get(au);var b9=A.get(ao);var cb=A.get(aE);return bK.substitute(ca,{id:cc,label:b8,name:L,value:cb});},getNode:function(){var A=this;return bK.Node.create(A.getHTML());},renderSettings:function(){var A=this;var L=A.get(a1);var b8=L.get(am);bK.FormBuilderCheckBoxField.superclass.renderSettings.apply(A,arguments);if(!A._renderedTextareaSettings){A._renderedTextareaSettings=true;var b9=b8.one("input[name=predefinedValue]");b9.on({"keyup":bK.bind(A._onValueKeyUp,A)});}},_onValueKeyUp:function(L){var A=this;var b8=L.target;A.set(aE,b8.val());},_uiSetPredefinedValue:function(cb){var A=this;var L=A.get(a1);var b9=L.get(am);var ca=b9.one("input[name=predefinedValue]");var b8=A.get(Y);b8.val(cb);if(ca&&A.get(a2)){ca.val(cb);}}}});bK.FormBuilderTextAreaField=aC;bK.FormBuilder.types["textarea"]=bK.FormBuilderTextAreaField;},"@VERSION@",{requires:["aui-datatype","aui-form","aui-panel","io","substitute"],skinnable:true});