AUI.add("aui-form-builder-field",function(b1){var bS=b1.Lang,aW=bS.isArray,bO=bS.isString,i="acceptChildren",f="bodyContent",aQ="boundingBox",cb="builder",ch="button",J="buttons",y="buttonsNode",aG="checkbox",K="checked",p="children",cd="clearfix",aR="close",aS="component",cm="contentBox",aK="container",cs="dataType",ce="default",aX="delete",bD="disabled",bK=".",bc="drag",aC="dragContainer",w="dragContainerNode",bW="dragNodesList",az="drop",bg="dropContainer",bm="dropContainerNode",b2="dropNode",bo="dropZone",a2="dropZoneNode",aE="duplicate",Q="edit",bE="",bn="field",h="fields",bJ="for",r="form",bd="formBuilder",aF="form-builder-field",t="help",o="helper",au="hidden",s="icon",cc="id",ai="label",bX="labelNode",bz="lightbulb",bf="metadata",aB="name",ct="node",b="panel",a9="portalLayout",aN="predefinedValue",bp="proxy",ca="readOnlyAttributes",ao="required",a7="requiredFlagNode",bC="state",aZ="settings",ar="settingsFormNode",W="showLabel",av="size",X=" ",bN="string",bU="strings",ac="templateNode",bG="text",v="tip",bs="tipIconNode",Y="type",aD="unique",bP="zone",bi="widget",B=b1.getClassName,bl=B(aS),aJ=B(bn,ai),q=B(o,cd),ae=B(o,au),c=B(s),b9=B(s,bz),bL=B(bC,ce),e=B(bn),bq=B(bn,bG),C=B(r,cb,ch),bH=B(r,cb,ch,aX),a4=B(r,cb,ch,aE),U=B(r,cb,ch,Q),a3=B(r,cb,az,ct),am=B(r,cb,az,bP),cr=B(r,cb,s),k=B(r,cb,s,aX),x=B(r,cb,s,aE),ak=B(r,cb,s,Q),F=B(r,cb,s,v),bI=B(r,cb,bn),bw=B(r,cb,bn,J),cq=B(r,cb,ao),bB=B(r,cb,aD),H=B(bi),bY='<li class="'+[H,bl,bI].join(X)+'"></li>',a='<div class="'+[bw,ae].join(X)+'">'+'<a class="'+[C,U].join(X)+'" href="javascript:;" title="Edit">'+'<div class="'+[cr,ak].join(X)+'"></div>'+"</a>"+'<a class="'+[C,a4].join(X)+'" href="javascript:;" title="Duplicate">'+'<div class="'+[cr,x].join(X)+'"></div>'+"</a>"+'<a class="'+[C,bH].join(X)+'" href="javascript:;" title="Delete">'+'<div class="'+[cr,k].join(X)+'"></div>'+"</a>"+"</div>",D='<div class="'+q+'"></div>',ab='<ul class="'+am+'"></ul>',aj='<span class="'+[e,bq].join(X)+'"></span>',a6='<label class="'+aJ+'"></label>',ay='<span class="'+cq+'">*</span>',cp="<p></p>",bj='<a href="javascript:;" class="'+[c,b9,F].join(X)+'"></a>';var u=b1.Component.create({NAME:aF,ATTRS:{acceptChildren:{value:true},dataType:{value:bN},disabled:{value:false},key:{value:bE},formBuilder:{value:undefined},id:{value:bE},icon:{value:bE},label:{value:bE},name:{valueFn:function(){var A=this;return A.get(Y)+(++b1.Env._uidx);}},parent:{value:null},predefinedValue:{value:bE},readOnlyAttributes:{value:[],validator:aW},required:{setter:b1.DataType.Boolean.parse,value:false},selected:{setter:b1.DataType.Boolean.parse,value:false},showLabel:{setter:b1.DataType.Boolean.parse,value:true},template:{value:bE},tip:{value:bE},type:{value:bE},unique:{setter:b1.DataType.Boolean.parse,value:false},buttonsNode:{valueFn:function(){return b1.Node.create(a);}},dropZoneNode:{valueFn:function(){return b1.Node.create(ab);}},labelNode:{valueFn:function(){return b1.Node.create(a6);}},requiredFlagNode:{valueFn:function(){return b1.Node.create(ay);}},templateNode:{valueFn:"getNode"},tipIconNode:{valueFn:function(){return b1.Node.create(bj);}}},AUGMENTS:[b1.FormBuilderFieldSupport],UI_ATTRS:[i,bD,ai,aB,aN,ao,W,v,aD],HTML_PARSER:{buttonsNode:bK+bw,dropZoneNode:bK+am,labelNode:ai+bK+aJ,requiredFlagNode:bK+cq,tipIconNode:bK+F},prototype:{BOUNDING_TEMPLATE:bY,initializer:function(){var A=this;A.get(aQ).setData(bn,A);A.toolTip=new b1.Tooltip({trigger:A.get(bs),hideDelay:100});},bindUI:function(){var A=this;},renderUI:function(){var A=this;var cx=A.get(aQ);var cA=A.get(y);var L=A.get(cm);var cw=A.get(bX);var cz=A.get(a7);var cy=A.get(ac);var cv=A.get(bs);L.addClass(q);cx.prepend(cA);L.append(cw);L.append(cz);L.append(cv);L.append(cy);A.toolTip.render();},settingsNodesMap:{},saveSettings:function(){var A=this;var L=A.get(bd);var cv=L.get(ar);b1.Array.each(b1.io._serialize(cv._node).split("&"),function(cx){var cw=cx.split("=");A.set(cw[0],decodeURIComponent(cw[1]));});},renderSettings:function(){var cD=this;var cz=cD.get(bd);var A=cz.get(ar);var cE=cz.get(bU);var cw=cD.settingsNodesMap;if(!cD.fieldSettingsNode){cD.fieldSettingsNode=b1.Node.create(D);var cB=b1.Node.create(D);var cx=b1.Node.create(aj);var L=b1.Node.create(a6);var cC=b1.Node.create(cp);L.setContent(cE[Y]);cC.setContent(cD.get(cs)||cD.get(Y));cx.append(L);cx.append(cC);cx.appendTo(cB);cD._renderSettingsFields([{type:"text",name:ai,labelText:"Label",value:cD.get(ai)},{type:"checkbox",name:W,labelText:"Show label",labelAlign:"left",value:cD.get(W)},{type:"text",name:aB,labelText:"Name",value:cD.get(aB)},{type:"checkbox",name:ao,labelText:"Required",labelAlign:"left",value:ao},{type:"text",name:aN,labelText:"Default value",value:cD.get(aN)},{type:"text",name:v,labelText:"Tip",value:cD.get(v)}],cB);var cy=cw.labelSettingNode;cy.on({input:b1.bind(cD._onLabelInput,cD)});var cA=cw.showLabelSettingNode;cA.set(K,cD.get(W));cA.on({change:b1.bind(cD._onSettingsFieldChange,cD)});var cv=cw.requiredSettingNode;cv.set(K,cD.get(ao));cv.on({change:b1.bind(cD._onSettingsFieldChange,cD)});cD.propertiesPanel=new b1.Panel({bodyContent:cB,collapsible:true,title:"Properties"}).render();cD.fieldSettingsNode.append(cD.propertiesPanel.get(aQ));}A.setContent(cD.fieldSettingsNode);},getHTML:function(){},getNode:function(){},_onLabelInput:function(L){var A=this;var cw=L.target;var cv=cw.val();A.set(ai,cv);},_onSettingsFieldChange:function(L){var A=this;var cw=L.target;var cv=cw.val();if(cw.get(Y)===aG){cv=cw.get(K);}A.set(cw.get(aB),cv);},_renderSettingsFields:function(L,cw){var A=this;var cv=A.get(ca);b1.each(L,function(cy){var cz;if(b1.Array.indexOf(cv,cy.name)>-1){cy.disabled=true;}if(cy.type==="select"){cz=new b1.Select(cy);}else{cz=new b1.Field(cy);}cz.render(cw);var cx=cz.get(ct);if(cy.type===aG){cx.set(K,cy.value);}A.settingsNodesMap[cy.name+"SettingNode"]=cx;});},_uiSetAcceptChildren:function(cx){var A=this;var L=A.get(aQ);var cw=A.get(a2);var cv=L.one(bK+am);if(cx&&!cv){L.append(cw);}else{if(!cx&&cv){cv.remove();}else{if(cx&&cv){A.set(a2,cv);}}}},_uiSetDisabled:function(cv){var A=this;
var L=A.get(ac);if(cv){L.setAttribute(bD,cv);}else{L.removeAttribute(bD);}},_uiSetLabel:function(cv){var A=this;var L=A.get(bX);L.setContent(cv);},_uiSetName:function(cv){var A=this;var L=A.get(ac);L.set(aB,cv);},_uiSetPredefinedValue:function(cv){var A=this;var L=A.get(ac);L.val(cv);},_uiSetRequired:function(cv){var A=this;var L=A.get(a7);L.toggleClass(ae,!cv);},_uiSetShowLabel:function(cv){var A=this;var L=A.get(bX);L.toggleClass(ae,!cv);},_uiSetTip:function(cv){var A=this;var L=A.get(bs);L.toggleClass(ae,!cv);A.toolTip.set(f,cv);},_uiSetUnique:function(cv){var A=this;var L=A.get(aQ);var cw=A.get(y);L.toggleClass(bB,cv);cw.one(bK+a4).toggleClass(ae,cv);}}});b1.FormBuilderField=u;b1.FormBuilder.types["field"]=b1.FormBuilderField;var bS=b1.Lang,aW=bS.isArray,aA=bS.isNumber,bO=bS.isString,bt=function(A){return(A instanceof b1.Node);},a5=function(A){return(A instanceof b1.NodeList);},a8=b1.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);}),aQ="boundingBox",ch="button",cf="buttonType",cm="contentBox",aK="container",bK=".",bc="drag",aC="dragContainer",w="dragContainerNode",bW="dragNodesList",az="drop",bg="dropContainer",bm="dropContainerNode",bE="",bn="field",h="fields",aF="form-builder-field",bQ="form-builder-button-field",cc="id",s="icon",a0="input",ai="label",aB="name",ct="node",R="option",ad="options",a9="portalLayout",aN="predefinedValue",bp="proxy",bM="reset",be="selected",bT="selectedIndex",ax="submit",X=" ",bU="strings",aH="template",ac="templateNode",bG="text",Y="type",n="value",B=b1.getClassName,br=B(bn,a0),P=B(bn,a0,bG),bI=B(aF),b4=B(aF,ct),bL=B(bC,ce),bF='<input id="{id}" class="'+[b4,br].join(X)+'" name="{name}" type="{type}" value="{value}" />',cu=[ax,bM,ch];var b3=b1.Component.create({NAME:bQ,ATTRS:{acceptChildren:{value:false,readOnly:true},buttonType:{value:ax,validator:function(A){return b1.Array(cu).indexOf(A.toLowerCase())>-1;}},predefinedValue:{value:a8(ax)},showLabel:{value:false},template:{valueFn:function(){return bF;}}},UI_ATTRS:b1.FormBuilderField.UI_ATTRS.concat([cf]),CSS_PREFIX:bI,HTML_PARSER:{templateNode:bK+b4},EXTENDS:b1.FormBuilderField,prototype:{getHTML:function(){var A=this;var cx=A.get(aH);var cz=A.get(cc);var cw=A.get(ai);var cv=A.get(aB);var L=A.get(cf);var cy=A.get(aN);return b1.substitute(cx,{id:cz,label:cw,name:cv,type:L,value:cy});},getNode:function(){var A=this;return b1.Node.create(A.getHTML());},renderSettings:function(){var cB=this;var cy=cB.get(bd);var A=cy.get(ar);var cx=cB.get(cf);var cC=cy.get(bU);var cw=cB.settingsNodesMap;b1.FormBuilderButtonField.superclass.renderSettings.apply(cB,arguments);if(!cB._renderedButtonSettings){cB._renderedButtonSettings=true;var L=cB.propertiesPanel.get(f);var cA=[];b1.each(cu,function(cD){cA.push({labelText:cC[cD],value:cD});});cB._renderSettingsFields([{labelText:"Button type",name:cf,options:cA,type:"select"}],L.item(0));var cz=cw["buttonTypeSettingNode"];cz.on({change:b1.bind(cB._onButtonTypeChange,cB)});var cv=b1.Array(cu).indexOf(cx);cz.all(R).item(cv).set(be,true);}},_onButtonTypeChange:function(L){var A=this;var cv=L.target;A.set(cf,cv.get(n));},_uiSetButtonType:function(cv){var A=this;var L=A.get(ac);L.setAttribute(Y,cv);}}});b1.FormBuilderButtonField=b3;b1.FormBuilder.types["button"]=b1.FormBuilderButtonField;var bS=b1.Lang,aW=bS.isArray,aY=bS.isBoolean,aA=bS.isNumber,bO=bS.isString,aU="boolean",aQ="boundingBox",f="bodyContent",aG="checkbox",K="checked",aw="choice",cm="contentBox",aK="container",bK=".",bc="drag",aC="dragContainer",w="dragContainerNode",bW="dragNodesList",az="drop",bg="dropContainer",bm="dropContainerNode",bE="",bn="field",h="fields",aF="form-builder-field",cj="form-builder-checkbox-field",cc="id",s="icon",bh="inline",ai="label",d="labels",aB="name",ct="node",S="parentNode",a9="portalLayout",aN="predefinedValue",bp="proxy",av="size",X=" ",aH="template",ac="templateNode",n="value",B=b1.getClassName,e=B(bn),an=B(bn,aG),bZ=B(bn,aw),bI=B(aF),ck=B(aF,aG),b4=B(aF,ct),bL=B(bC,ce),bV=B(bn,d,bh),bY='<li class="'+[H,bl,bI,ck].join(X)+'"></li>',aT='<input id="{id}" class="'+[b4,e,an,bZ].join(X)+'" name="{name}" type="checkbox" value="{value}" {checked} />';var aa=b1.Component.create({NAME:cj,ATTRS:{dataType:{value:aU},predefinedValue:{setter:b1.DataType.Boolean.parse,value:false},template:{valueFn:function(){return aT;}},templateNode:{valueFn:"getNode"}},CSS_PREFIX:bI,HTML_PARSER:{templateNode:bK+b4},EXTENDS:b1.FormBuilderField,prototype:{BOUNDING_TEMPLATE:bY,bindUI:function(){var A=this;b1.FormBuilderCheckBoxField.superclass.bindUI.apply(A,arguments);var L=A.get(ac);L.on({"change":b1.bind(A._onValueChange,A)});},renderUI:function(){var A=this;var L=A.get(cm);var cw=A.get(ac);var cv=A.get(bX);b1.FormBuilderCheckBoxField.superclass.renderUI.apply(A,arguments);cv.insert(cw,cv,"before");},getHTML:function(){var A=this;var cw=A.get(aH);var cx=A.get(K);var cz=A.get(cc);var cv=A.get(ai);var L=A.get(aB);var cy=A.get(aN);return b1.substitute(cw,{checked:cx?'checked="checked"':bE,id:cz,label:cv,name:L,value:cy});},getNode:function(){var A=this;return b1.Node.create(A.getHTML());},renderSettings:function(){var A=this;var L=A.get(bd);var cw=L.get(ar);var cx=A.settingsNodesMap;b1.FormBuilderCheckBoxField.superclass.renderSettings.apply(A,arguments);if(!A._renderedCheckboxSettings){A._renderedCheckboxSettings=true;cx.predefinedValueSettingNode.get(S).remove();var cv=A.propertiesPanel.get(f);A._renderSettingsFields([{type:"checkbox",name:aN,labelText:"Checked",labelAlign:"left"}],cv.item(0));var cy=cx.predefinedValueSettingNode;cy.on({change:b1.bind(A._onValueChange,A)});cy.set(K,A.get(aN));}},_onValueChange:function(L){var A=this;var cv=L.target;A.set(aN,cv.get(K));},_uiSetPredefinedValue:function(cx){var A=this;var L=A.get(ac);var cv=A.settingsNodesMap;var cw=cv.predefinedValueSettingNode;if(cw){cw.set(K,cx);}L.set(K,cx);}}});b1.FormBuilderCheckBoxField=aa;b1.FormBuilder.types["checkbox"]=b1.FormBuilderCheckBoxField;var bS=b1.Lang,aW=bS.isArray,aA=bS.isNumber,bO=bS.isString,bt=function(A){return(A instanceof b1.Node);
},a5=function(A){return(A instanceof b1.NodeList);},aQ="boundingBox",cm="contentBox",aK="container",cs="dataType",bK=".",az="drop",bE="",bn="field",h="fields",aF="form-builder-field",G="form-builder-fieldset-field",cc="id",s="icon",ai="label",aB="name",ct="node",aN="predefinedValue",X=" ",bU="strings",aH="template",ac="templateNode",bG="text",Y="type",n="value",bP="zone",B=b1.getClassName,bI=B(aF),b4=B(aF,ct),am=B(r,cb,az,bP),aM='<fieldset id="{id}" class="'+[b4].join(X)+'"></fieldset>',l='<legend class="'+aJ+'"></legend>';var z=b1.Component.create({NAME:G,ATTRS:{acceptChildren:{value:true,readOnly:true},dataType:{value:undefined},template:{valueFn:function(){return aM;}},labelNode:{valueFn:function(){return b1.Node.create(l);}},templateNode:{valueFn:"getNode"}},UI_ATTRS:[i,ai,W],CSS_PREFIX:bI,HTML_PARSER:{templateNode:bK+b4},EXTENDS:b1.FormBuilderField,prototype:{CONTENT_TEMPLATE:aM,renderUI:function(){var A=this;var cw=A.get(aQ);var cy=A.get(y);var L=A.get(cm);var cv=A.get(bX);var cx=A.get(ac);if(!cw.contains(cy)){cw.prepend(cy);}if(!L.contains(cv)){L.append(cv);}},getHTML:function(){var A=this;var L=A.get(aH);var cv=A.get(cc);return b1.substitute(L,{id:cv});},getNode:function(){var A=this;return b1.Node.create(A.getHTML());},renderSettings:function(){var cC=this;var cy=cC.get(bd);var A=cy.get(ar);var cD=cy.get(bU);var cv=cC.settingsNodesMap;if(!cC._renderedFieldsetSettings){cC._renderedFieldsetSettings=true;cC.fieldSettingsNode=b1.Node.create(D);var cA=b1.Node.create(D);var cw=b1.Node.create(aj);var L=b1.Node.create(a6);var cB=b1.Node.create(cp);L.setContent(cD[Y]);cB.setContent(cC.get(cs)||cC.get(Y));cw.append(L);cw.append(cB);cw.appendTo(cA);cC._renderSettingsFields([{type:"text",name:ai,labelText:"Label",value:cC.get(ai)},{type:"checkbox",name:W,labelText:"Show label",labelAlign:"left",value:cC.get(W)}],cA);var cx=cv["labelSettingNode"];cx.on({input:b1.bind(cC._onLabelInput,cC)});var cz=cv["showLabelSettingNode"];cz.set(K,cC.get(W));cz.on({change:b1.bind(cC._onSettingsFieldChange,cC)});cC.propertiesPanel=new b1.Panel({bodyContent:cA,collapsible:true,title:"Properties"}).render();cC.fieldSettingsNode.append(cC.propertiesPanel.get(aQ));}A.setContent(cC.fieldSettingsNode);},_uiSetAcceptChildren:function(cx){var A=this;var L=A.get(cm);var cw=A.get(a2);var cv=L.one(bK+am);if(cx&&!cv){L.append(cw);}else{if(!cx&&cv){cv.remove();}else{if(cx&&cv){A.set(a2,cv);}}}}}});b1.FormBuilderFieldsetField=z;b1.FormBuilder.types["fieldset"]=b1.FormBuilderFieldsetField;var bS=b1.Lang,aW=bS.isArray,aA=bS.isNumber,bO=bS.isString,bt=function(A){return(A instanceof b1.Node);},a5=function(A){return(A instanceof b1.NodeList);},aQ="boundingBox",cm="contentBox",aK="container",cs="dataType",bK=".",bE="",bn="field",h="fields",aF="form-builder-field",cl="form-builder-file-upload-field",cc="id",s="icon",ai="label",aB="name",ct="node",aN="predefinedValue",X=" ",bU="strings",aH="template",ac="templateNode",bG="text",Y="type",n="value",B=b1.getClassName,bI=B(aF),b4=B(aF,ct),bL=B(bC,ce),by='<input id="{id}" class="'+[b4].join(X)+'" name="{name}" type="file" value="{value}" />';var M=b1.Component.create({NAME:cl,ATTRS:{template:{valueFn:function(){return by;}},templateNode:{valueFn:"getNode"}},CSS_PREFIX:bI,HTML_PARSER:{templateNode:bK+b4},EXTENDS:b1.FormBuilderField,prototype:{getHTML:function(){var A=this;var cx=A.get(aH);var cz=A.get(cc);var cv=A.get(ai);var L=A.get(aB);var cw=A.get(av);var cy=A.get(aN);return b1.substitute(cx,{id:cz,label:cv,name:L,value:cy});},getNode:function(){var A=this;return b1.Node.create(A.getHTML());},renderSettings:function(){var cC=this;var cy=cC.get(bd);var A=cy.get(ar);var cD=cy.get(bU);var cv=cC.settingsNodesMap;if(!cC._renderedFileUploadSettings){cC._renderedFileUploadSettings=true;cC.fieldSettingsNode=b1.Node.create(D);var cA=b1.Node.create(D);var cw=b1.Node.create(aj);var L=b1.Node.create(a6);var cB=b1.Node.create(cp);L.setContent(cD[Y]);cB.setContent(cC.get(cs)||cC.get(Y));cw.append(L);cw.append(cB);cw.appendTo(cA);cC._renderSettingsFields([{type:"text",name:ai,labelText:"Label",value:cC.get(ai)},{type:"checkbox",name:W,labelText:"Show label",labelAlign:"left",value:cC.get(W)},{type:"text",name:aB,labelText:"Name",value:cC.get(aB)},{type:"checkbox",name:ao,labelText:"Required",labelAlign:"left",value:cC.get(ao)}],cA);var cx=cv["labelSettingNode"];cx.on({input:b1.bind(cC._onLabelInput,cC)});var cz=cv["showLabelSettingNode"];cz.set(K,cC.get(W));cz.on({change:b1.bind(cC._onSettingsFieldChange,cC)});cC.propertiesPanel=new b1.Panel({bodyContent:cA,collapsible:true,title:"Properties"}).render();cC.fieldSettingsNode.append(cC.propertiesPanel.get(aQ));}A.setContent(cC.fieldSettingsNode);}}});b1.FormBuilderFileUploadField=M;b1.FormBuilder.types["fileupload"]=b1.FormBuilderFileUploadField;var bS=b1.Lang,aW=bS.isArray,aA=bS.isNumber,bO=bS.isString,bt=function(A){return(A instanceof b1.Node);},a5=function(A){return(A instanceof b1.NodeList);},a8=b1.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);}),T="add",bR="addNode",aQ="boundingBox",ch="button",cf="buttonType",cm="contentBox",aK="container",ce="default",at="defaultLabel",cn="defaultOptions",E="defaultValue",bK=".",bc="drag",aC="dragContainer",w="dragContainerNode",bW="dragNodesList",az="drop",bg="dropContainer",bm="dropContainerNode",bE="",bn="field",h="fields",aF="form-builder-field",N="form-builder-multiple-choice-field",s="icon",cc="id",a0="input",ah="item",ai="label",cg="multiple",aB="name",ct="node",R="option",bx="optionTemplate",ad="options",aN="predefinedValue",bp="proxy",co="remove",bM="reset",ax="submit",X=" ",aH="template",ac="templateNode",bG="text",Y="type",n="value",B=b1.getClassName,br=B(bn,a0),P=B(bn,a0,bG),m=B(bn,ad,T),b7=B(bn,ad,ah),b6=B(bn,ad,ah,a0),aO=B(bn,ad,ah,a0,ai),af=B(bn,ad,ah,a0,n),ba=B(bn,ad,ah,co),bI=B(aF),b4=B(aF,ct),bL=B(bC,ce),aq='<div class="'+[b7,bV,q].join(X)+'">'+'<input type="text" class="'+[b6,aO,br,P].join(X)+'" value="{label}" />'+'<input type="text" class="'+[b6,af,br,P].join(X)+'" value="{value}" />'+'<a href="javascript:;" class="'+ba+'">&nbsp;</a>'+"</div>";
TPL_ADD='<a class="'+m+'" href="javascript:;">Add an option</a>',ENTER="ENTER";var bk=b1.Component.create({NAME:ad,ATTRS:{allowClear:{value:false},defaultLabel:{value:bE},defaultValue:{value:bE},disabled:{value:false,validator:aY},options:{value:[],getter:"_getOptions",validator:aW},addNode:{valueFn:function(){return b1.Node.create(TPL_ADD);}}},HTML_PARSER:{addNode:bK+m},UI_ATTRS:[ad,bD],EXTENDS:b1.Widget,prototype:{renderUI:function(){var A=this;var L=A.get(aQ);var cv=A.get(bR);if(!cv.inDoc()){L.append(cv);}},bindUI:function(){var A=this;var L=A.get(aQ);var cv=A.get(bR);cv.on("click",b1.bind(A._onClickAdd,A));L.delegate("click",b1.bind(A._onClickOptionRemove,A),bK+ba);L.delegate("keypress",b1.bind(A._onKeyPressOption,A),bK+b6);},add:function(cv){var A=this;var L=A.get(ad);L.push(cv);A.set(ad,L);},clear:function(){var A=this;if(A.get(ALLOW_CLEAR)){A.set(ad,[]);}},remove:function(cv){var A=this;var L=A.get(cm);var cw=A._getOptionNode(cv);if(A.get(bD)){return false;}if(cw){cw.remove();}A.items=L.all(bK+b7);},_addNewOption:function(){var L=this;var cv=L.get(cm);if(L.get(bD)){return false;}var cw=L._createOption({label:L.get(at),value:L.get(E)});cw=b1.Node.create(cw);cv.append(cw);var A=cw.one(a0);A.focus();A.select();L.items=cv.all(bK+b7);return cw;},_createOption:function(L){var A=this;return b1.substitute(aq,L);},_getOptionNode:function(L){var A=this;return A.items.item(L);},_getOptions:function(cv){var A=this;var L=[];if(A.items){b1.each(A.items,function(cw){var cy=cw.one(bK+aO);var cx=cw.one(bK+af);L.push({label:cy.val(),value:cx.val()});});}else{L=cv;}return L;},_indexOfTarget:function(cv){var A=this;var L=cv.ancestor(bK+b7);return A.items.indexOf(L);},_onClickAdd:function(L){var A=this;A._addNewOption();},_onClickOptionRemove:function(cw){var A=this;var cv=A.get(ad);var L=A._indexOfTarget(cw.target);A.remove(L);},_onKeyPressOption:function(cx){var A=this;var cw=A.get(ad);var cy=cx.currentTarget;var L=A.items;if(cx.isKey(ENTER)){var cv=A._indexOfTarget(cy);var cz=cy.hasClass(af);if((cv==L.size()-1)&&cz){A._addNewOption();}}},_uiSetDisabled:function(cw){var A=this;var cv=A.get(bR);var L=A.get(aQ);cv.toggleClass(ae,cw);L.all(bK+ba).toggleClass(ae,cw);if(cw){L.all(a0).setAttribute(bD,cw);}else{L.all(a0).removeAttribute(bD);}},_uiSetOptions:function(cw){var A=this;var cv=[];var L=A.get(cm);L.empty();b1.each(cw,function(cx){L.append(A._createOption(cx));});A.items=L.all(bK+b7);}}});var g=b1.Component.create({NAME:N,ATTRS:{acceptChildren:{value:false,readOnly:true},options:{value:[{label:"option 1",value:"value 1"},{label:"option 2",value:"value 2"},{label:"option 3",value:"value 3"}]},optionTemplate:{value:'<option value="{value}">{label}</option>'}},UI_ATTRS:[i,aN,ai,aB,ad,W],CSS_PREFIX:bI,HTML_PARSER:{templateNode:bK+b4},EXTENDS:b1.FormBuilderField,prototype:{getNode:function(){var A=this;return b1.FormBuilderMultipleChoiceField.superclass.getNode.apply(A,arguments);},renderSettings:function(){var A=this;var L=A.get(ca);b1.FormBuilderMultipleChoiceField.superclass.renderSettings.apply(A,arguments);if(!A._renderedMultipleChoiceSettings){A._renderedMultipleChoiceSettings=true;var cw=b1.Node.create(D);A.optionsPanel=new b1.Panel({bodyContent:cw,collapsible:true,title:"Options"}).render();var cv=b1.Array.indexOf(L,ad)>-1;A.options=new bk({disabled:cv,options:A.get(ad)}).render(cw);A.fieldSettingsNode.append(A.optionsPanel.get(aQ));}},saveSettings:function(){var A=this;b1.FormBuilderMultipleChoiceField.superclass.saveSettings.apply(A,arguments);A.set(ad,A.options.get(ad));},_uiSetOptions:function(cv){var A=this;var L=A.get(ac);L.empty();b1.each(cv,function(cw){L.append(b1.substitute(A.get(bx),cw));});}}});b1.FormBuilderMultipleChoiceField=g;b1.FormBuilder.types["multiple-choice"]=b1.FormBuilderMultipleChoiceField;var bS=b1.Lang,aW=bS.isArray,aY=bS.isBoolean,aA=bS.isNumber,bO=bS.isString,aQ="boundingBox",f="bodyContent",K="checked",aw="choice",cm="contentBox",aK="container",bK=".",bE="",bn="field",h="fields",aF="form-builder-field",bb="form-builder-radio-field",cc="id",s="icon",bh="inline",ai="label",d="labels",aB="name",ct="node",I="optionsContainerNode",aN="predefinedValue",V="radio",av="size",X=" ",aH="template",ac="templateNode",n="value",B=b1.getClassName,e=B(bn),bZ=B(bn,aw),bI=B(aF),aP=B(aF,V),b4=B(aF,ct),b5=B(aF,ad,aK),bL=B(bC,ce),bV=B(bn,d,bh),bY='<li class="'+[H,bl,bI,aP].join(X)+'"></li>',Z='<div class="'+b5+'"></div>',aV='<input id="{id}" class="'+[b4,e,bZ].join(X)+'" name="{name}" type="radio" value="{value}" {checked} />',b8='<input type="hidden" />';var j=b1.Component.create({NAME:bb,ATTRS:{name:{value:V},optionTemplate:{value:aV},template:{valueFn:function(){return aV;}},optionsContainerNode:{valueFn:function(){return b1.Node.create(Z);}},templateNode:{valueFn:"getNode"}},CSS_PREFIX:bI,HTML_PARSER:{optionsContainerNode:bK+b5,templateNode:bK+b4},EXTENDS:b1.FormBuilderMultipleChoiceField,prototype:{BOUNDING_TEMPLATE:bY,renderUI:function(){var A=this;var L=A.get(cm);var cv=A.get(I);b1.FormBuilderRadioField.superclass.renderUI.apply(A,arguments);L.append(cv);},getNode:function(){var A=this;return b1.Node.create(b8);},_onFieldChange:function(L){var A=this;var cv=L.target;A.set(aN,cv.val());},_uiSetDisabled:function(cv){var A=this;var L=A.get(I);L.all(a0).each(function(cw){if(cv){cw.setAttribute(bD,cv);}else{cw.removeAttribute(bD);}});},_uiSetOptions:function(cx){var A=this;var L=A.get(cm);var cw=A.get(I);var cv=A.get(ac);cw.empty();b1.each(cx,function(cA){var cz=new b1.Field({type:V,disabled:A.get(bD),name:A.get(aB),labelText:cA.label,labelAlign:"left",value:cA.value}).render(cw);var cy=cz.get(ct);if(cA.value==A.get(aN)){cy.set(K,true);}if(A.get(bD)){cy.setAttribute(bD,cx);}else{cy.removeAttribute(bD);}cy.on({change:b1.bind(A._onFieldChange,A)});});},_uiSetPredefinedValue:function(cx){var A=this;var L=A.get(bd);var cv=L.get(ar);var cw=cv.one("input[name=predefinedValue]");if(cw){cw.val(cx);}}}});b1.FormBuilderRadioField=j;b1.FormBuilder.types["radio"]=b1.FormBuilderRadioField;var bS=b1.Lang,aW=bS.isArray,aA=bS.isNumber,bO=bS.isString,bt=function(A){return(A instanceof b1.Node);
},a5=function(A){return(A instanceof b1.NodeList);},a8=b1.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);}),aQ="boundingBox",ch="button",cf="buttonType",cm="contentBox",aK="container",cn="defaultOptions",bK=".",bc="drag",aC="dragContainer",w="dragContainerNode",bW="dragNodesList",az="drop",bg="dropContainer",bm="dropContainerNode",bE="",bn="field",h="fields",aF="form-builder-field",b0="form-builder-select-field",cc="id",s="icon",a0="input",ai="label",cg="multiple",aB="name",ct="node",R="option",ad="options",a9="portalLayout",aN="predefinedValue",bp="proxy",bM="reset",bT="selectedIndex",ax="submit",X=" ",aH="template",ac="templateNode",bG="text",Y="type",n="value",B=b1.getClassName,br=B(bn,a0),P=B(bn,a0,bG),bI=B(aF),b4=B(aF,ct),bL=B(bC,ce),bA='<select id="{id}" class="'+[b4].join(X)+'" name="{name}" value="{value}"></select>';var ag=b1.Component.create({NAME:b0,ATTRS:{multiple:{setter:b1.DataType.Boolean.parse,value:false},template:{valueFn:function(){return bA;}},templateNode:{valueFn:"getNode"}},UI_ATTRS:b1.FormBuilderField.UI_ATTRS.concat([cg]),CSS_PREFIX:bI,HTML_PARSER:{templateNode:bK+b4},EXTENDS:b1.FormBuilderMultipleChoiceField,prototype:{getHTML:function(){var A=this;var cw=A.get(aH);var cy=A.get(cc);var cv=A.get(ai);var L=A.get(aB);var cx=A.get(aN);return b1.substitute(cw,{id:cy,label:cv,name:L,value:cx});},getNode:function(){var A=this;return b1.Node.create(A.getHTML());},renderSettings:function(){var L=this;var cv=L.get(bd);var cx=cv.get(ar);var cy=L.settingsNodesMap;b1.FormBuilderSelectField.superclass.renderSettings.apply(L,arguments);if(!L._renderedSelectSettings){L._renderedSelectSettings=true;var cw=L.propertiesPanel.get(f);L._renderSettingsFields([{type:"checkbox",name:cg,labelText:"Multiple",labelAlign:"left"}],cw.item(0));var A=cy["multipleSettingNode"];A.on({change:b1.bind(L._onSettingsFieldChange,L)});A.set(K,L.get(cg));}},_uiSetMultiple:function(cv){var A=this;var L=A.get(ac);if(cv){L.setAttribute(cg,cg);}else{L.removeAttribute(cg);}}}});b1.FormBuilderSelectField=ag;b1.FormBuilder.types["select"]=b1.FormBuilderSelectField;var bS=b1.Lang,aW=bS.isArray,aA=bS.isNumber,bO=bS.isString,bt=function(A){return(A instanceof b1.Node);},a5=function(A){return(A instanceof b1.NodeList);},aQ="boundingBox",cm="contentBox",aK="container",bK=".",bc="drag",aC="dragContainer",w="dragContainerNode",bW="dragNodesList",az="drop",bg="dropContainer",bm="dropContainerNode",bE="",bn="field",h="fields",aF="form-builder-field",a1="form-builder-input-field",cc="id",s="icon",a0="input",ai="label",aB="name",ct="node",a9="portalLayout",aN="predefinedValue",bp="proxy",X=" ",aH="template",ac="templateNode",bG="text",n="value",bv="width",B=b1.getClassName,br=B(bn,a0),P=B(bn,a0,bG),bI=B(aF),b4=B(aF,ct),bL=B(bC,ce),bF='<input id="{id}" class="'+[b4,br,P].join(X)+'" name="{name}" type="text" value="{value}" />',aI={small:25,medium:50,large:100};var bu=b1.Component.create({NAME:a1,ATTRS:{template:{valueFn:function(){return bF;}},templateNode:{valueFn:"getNode"},width:{setter:b1.DataType.String.evaluate,value:25}},CSS_PREFIX:bI,HTML_PARSER:{templateNode:bK+b4},EXTENDS:b1.FormBuilderField,prototype:{bindUI:function(){var A=this;b1.FormBuilderTextField.superclass.bindUI.apply(A,arguments);var L=A.get(ac);L.on({input:b1.bind(A._onValueInput,A)});},getHTML:function(){var A=this;var cx=A.get(aH);var cz=A.get(cc);var cv=A.get(ai);var L=A.get(aB);var cy=A.get(aN);var cw=A.get(bv);return b1.substitute(cx,{id:cz,label:cv,name:L,value:cy,width:cw});},getNode:function(){var A=this;return b1.Node.create(A.getHTML());},renderSettings:function(){var cB=this;var cA=cB.get(bd);var cv=cA.get(ar);var cz=cB.settingsNodesMap;var cC=cA.get(bU);b1.FormBuilderTextField.superclass.renderSettings.apply(cB,arguments);if(!cB._renderedInputSettings){cB._renderedInputSettings=true;var cx=cB.propertiesPanel.get(f);var A=0;var cy=-1;var cw=[];b1.each(aI,function(cF,cE){if(cF==cB.get(bv)){cy=A;}cw.push({labelText:cC[cE],value:cF});A++;});cB._renderSettingsFields([{labelText:"Width",name:bv,options:cw,type:"select",value:cB.get(bv)}],cx.item(0));var L=cz["predefinedValueSettingNode"];L.on({input:b1.bind(cB._onValueInput,cB)});var cD=cz["widthSettingNode"];cD.on({change:b1.bind(cB._onWidthChange,cB)});cD.all(R).item(cy).set(be,true);}},_onValueInput:function(L){var A=this;var cv=L.target;A.set(aN,cv.val());},_onWidthChange:function(L){var A=this;var cv=L.target;A.set(bv,cv.val());},_uiSetWidth:function(cv){var A=this;var L=A.get(ac);L.addClass(B("w"+cv));L.removeClass(B("w"+A.prevWidth));A.prevWidth=cv;}}});b1.FormBuilderTextField=bu;b1.FormBuilder.types["text"]=b1.FormBuilderTextField;var bS=b1.Lang,aW=bS.isArray,aA=bS.isNumber,bO=bS.isString,aQ="boundingBox",cm="contentBox",aK="container",bK=".",bc="drag",aC="dragContainer",w="dragContainerNode",bW="dragNodesList",az="drop",bg="dropContainer",bm="dropContainerNode",bE="",bn="field",h="fields",aF="form-builder-field",ci="form-builder-textarea-field",cc="id",s="icon",ai="label",aB="name",ct="node",a9="portalLayout",aN="predefinedValue",bp="proxy",av="size",X=" ",aH="template",ac="templateNode",bG="text",ap="textarea",n="value",B=b1.getClassName,e=B(bn),bq=B(bn,bG),O=B(bn,ap),bI=B(aF),b4=B(aF,ct),bL=B(bC,ce),al='<textarea id="{id}" class="'+[b4,e,bq,O].join(X)+'" name="{name}">{value}</textarea>';var aL=b1.Component.create({NAME:ci,ATTRS:{template:{valueFn:function(){return al;}},templateNode:{valueFn:"getNode"}},CSS_PREFIX:bI,HTML_PARSER:{templateNode:bK+b4},EXTENDS:b1.FormBuilderTextField,prototype:{getHTML:function(){var A=this;var cx=A.get(aH);var cz=A.get(cc);var cv=A.get(ai);var L=A.get(aB);var cw=A.get(av);var cy=A.get(aN);return b1.substitute(cx,{id:cz,label:cv,name:L,value:cy});},getNode:function(){var A=this;return b1.Node.create(A.getHTML());}}});b1.FormBuilderTextAreaField=aL;b1.FormBuilder.types["textarea"]=b1.FormBuilderTextAreaField;},"@VERSION@",{requires:["aui-datatype","aui-form","aui-panel","aui-tooltip","io","substitute"],skinnable:true});