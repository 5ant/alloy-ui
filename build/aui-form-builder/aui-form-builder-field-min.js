AUI.add("aui-form-builder-field",function(bQ){var bK=bQ.Lang,aI=bK.isArray,ai=bK.isString,c="acceptChildren",aB="boundingBox",bZ="builder",b7="button",D="buttons",cc="buttonsNode",bj="checkbox",E="checked",ch="children",b3="clearfix",aC="close",aE="component",cb="contentBox",bd="container",n="dataType",z="default",aK="delete",bu="disabled",bE=".",aV="drag",bo="dragContainer",cd="dragContainerNode",ae="dragNodesList",au="drop",aM="dropContainer",a7="dropContainerNode",X="dropNode",aD="dropZone",a2="dropZoneNode",bl="duplicate",H="edit",bt="",a8="field",f="fields",bA="for",s="form",aT="formBuilder",bi="form-builder-field",o="helper",an="hidden",r="icon",b2="id",ab="label",Z="labelNode",a0="metadata",av="name",cj="node",a="panel",aU="portalLayout",bc="predefinedValue",a9="proxy",bW="readOnlyAttributes",ak="required",aQ="requiredFlagNode",bv="state",a4="settings",al="settingsFormNode",bU="showLabel",ap="size",Q=" ",aj="string",af="strings",bS="templateNode",bx="text",P="type",bk="unique",bH="zone",aL="widget",x=bQ.getClassName,a6=x(aE),bg=x(a8,ab),cf=x(o,b3),W=x(o,an),bD=x(bv,z),b=x(a8),be=x(a8,bx),y=x(s,bZ,b7),ao=x(s,bZ,b7,aK),aZ=x(s,bZ,b7,bl),J=x(s,bZ,b7,H),a3=x(s,bZ,au,cj),bI=x(s,bZ,au,bH),ci=x(s,bZ,r),i=x(s,bZ,r,aK),u=x(s,bZ,r,bl),bM=x(s,bZ,r,H),bz=x(s,bZ,a8),bn=x(s,bZ,a8,D),p=x(s,bZ,ak),bw=x(s,bZ,bk),b1=x(aL),bO='<li class="'+[b1,a6,bz].join(Q)+'"></li>',l='<div class="'+[bn,W].join(Q)+'">'+'<a class="'+[y,J].join(Q)+'" href="javascript:;" title="Edit">'+'<div class="'+[ci,bM].join(Q)+'"></div>'+"</a>"+'<a class="'+[y,aZ].join(Q)+'" href="javascript:;" title="Duplicate">'+'<div class="'+[ci,u].join(Q)+'"></div>'+"</a>"+'<a class="'+[y,ao].join(Q)+'" href="javascript:;" title="Delete">'+'<div class="'+[ci,i].join(Q)+'"></div>'+"</a>"+"</div>",b4='<div class="'+cf+'"></div>',V='<ul class="'+bI+'"></ul>',ac='<span class="'+[b,be].join(Q)+'"></span>',aR='<label class="'+bg+'"></label>',at='<span class="'+p+'">*</span>',cg="<p></p>";var ce=bQ.Component.create({NAME:bi,ATTRS:{acceptChildren:{value:true},dataType:{value:aj},disabled:{value:false},key:{value:bt},formBuilder:{value:undefined},id:{value:bt},icon:{value:bt},label:{value:bt},name:{valueFn:function(){var A=this;return A.get(P)+(++bQ.Env._uidx);}},parent:{value:null},predefinedValue:{value:bt},readOnlyAttributes:{value:[],validator:aI},required:{setter:bQ.DataType.Boolean.parse,value:false},selected:{setter:bQ.DataType.Boolean.parse,value:false},showLabel:{setter:bQ.DataType.Boolean.parse,value:true},template:{value:bt},type:{value:bt},unique:{setter:bQ.DataType.Boolean.parse,value:false},buttonsNode:{valueFn:function(){return bQ.Node.create(l);}},dropZoneNode:{valueFn:function(){return bQ.Node.create(V);}},labelNode:{valueFn:function(){return bQ.Node.create(aR);}},requiredFlagNode:{valueFn:function(){return bQ.Node.create(at);}},templateNode:{valueFn:"getNode"}},AUGMENTS:[bQ.FormBuilderFieldSupport],UI_ATTRS:[c,bu,ab,av,bc,ak,bU,bk],HTML_PARSER:{buttonsNode:bE+bn,dropZoneNode:bE+bI,labelNode:ab+bE+bg,requiredFlagNode:bE+p},prototype:{BOUNDING_TEMPLATE:bO,initializer:function(){var A=this;A.get(aB).setData(a8,A);},bindUI:function(){var A=this;},renderUI:function(){var L=this;var co=L.get(aB);var cp=L.get(cc);var cl=L.get(cb);var cn=L.get(Z);var A=L.get(aQ);var cm=L.get(bS);cl.addClass(cf);if(!co.contains(cp)){co.prepend(cp);}if(!cl.contains(cn)){cl.append(cn);cl.append(A);cn.setAttribute(bA,cm.get(b2));}A.insert(cn,A,"after");if(!cl.contains(cm)){cl.append(cm);}},settingsNodesMap:{},saveSettings:function(){var A=this;var L=A.get(aT);var cl=L.get(al);bQ.Array.each(bQ.io._serialize(cl._node).split("&"),function(cm){var cn=cm.split("=");A.set(cn[0],decodeURIComponent(cn[1]));});},renderSettings:function(){var ct=this;var cn=ct.get(aT);var cl=cn.get(al);var cu=cn.get(af);var co=ct.settingsNodesMap;if(!ct.fieldSettingsNode){ct.fieldSettingsNode=bQ.Node.create(b4);var cs=bQ.Node.create(b4);var cq=bQ.Node.create(ac);var cr=bQ.Node.create(aR);var A=bQ.Node.create(cg);cr.setContent(cu[P]);A.setContent(ct.get(n)||ct.get(P));cq.append(cr);cq.append(A);cq.appendTo(cs);ct._renderSettingsFields([{type:"text",name:ab,labelText:"Label",value:ct.get(ab)},{type:"checkbox",name:bU,labelText:"Show label",labelAlign:"left",value:ct.get(bU)},{type:"text",name:av,labelText:"Name",value:ct.get(av)},{type:"checkbox",name:ak,labelText:"Required",labelAlign:"left",value:ak},{type:"text",name:bc,labelText:"Default value",value:ct.get(bc)}],cs);var cm=co["labelSettingNode"];cm.on({input:bQ.bind(ct._onLabelInput,ct)});var L=co["showLabelSettingNode"];L.set(E,ct.get(bU));L.on({change:bQ.bind(ct._onSettingsFieldChange,ct)});var cp=co["requiredSettingNode"];cp.set(E,ct.get(ak));cp.on({change:bQ.bind(ct._onSettingsFieldChange,ct)});ct.propertiesPanel=new bQ.Panel({bodyContent:cs,collapsible:true,title:"Properties"}).render();ct.fieldSettingsNode.append(ct.propertiesPanel.get(aB));}cl.setContent(ct.fieldSettingsNode);},getHTML:function(){},getNode:function(){},_onLabelInput:function(L){var A=this;var cm=L.target;var cl=cm.val();A.set(ab,cl);},_onSettingsFieldChange:function(L){var A=this;var cm=L.target;var cl=cm.val();if(cm.get(P)==bj){cl=cm.get(E);}A.set(cm.get(av),cl);},_renderSettingsFields:function(cm,cl){var A=this;var L=A.get(bW);bQ.each(cm,function(co){var cp;if(bQ.Array.indexOf(L,co.name)>-1){co.disabled=true;}if(co.type=="select"){cp=new bQ.Select(co);}else{cp=new bQ.Field(co);}cp.render(cl);var cn=cp.get(cj);if(co.type==bj){cn.set(E,co.value);}A.settingsNodesMap[co.name+"SettingNode"]=cn;});},_uiSetAcceptChildren:function(cn){var A=this;var cl=A.get(aB);var cm=A.get(a2);var L=cl.one(bE+bI);if(cn&&!L){cl.append(cm);}else{if(!cn&&L){L.remove();}else{if(cn&&L){A.set(a2,L);}}}},_uiSetDisabled:function(cl){var A=this;var L=A.get(bS);if(cl){L.setAttribute(bu,cl);}else{L.removeAttribute(bu);}},_uiSetLabel:function(cl){var A=this;var L=A.get(Z);L.setContent(cl);},_uiSetName:function(cl){var A=this;var L=A.get(bS);L.set(av,cl);},_uiSetPredefinedValue:function(cl){var A=this;
var L=A.get(bS);L.val(cl);},_uiSetRequired:function(cl){var L=this;var A=L.get(aQ);A.toggleClass(W,!cl);},_uiSetShowLabel:function(cl){var A=this;var L=A.get(Z);L.toggleClass(W,!cl);},_uiSetUnique:function(cm){var A=this;var L=A.get(aB);var cl=A.get(cc);L.toggleClass(bw,cm);cl.one(bE+aZ).toggleClass(W,cm);}}});bQ.FormBuilderField=ce;bQ.FormBuilder.types["field"]=bQ.FormBuilderField;var bK=bQ.Lang,aI=bK.isArray,bq=bK.isNumber,ai=bK.isString,ax=function(A){return(A instanceof bQ.Node);},aS=function(A){return(A instanceof bQ.NodeList);},aY=bQ.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);}),aB="boundingBox",b7="button",b5="buttonType",cb="contentBox",bd="container",bE=".",aV="drag",bo="dragContainer",cd="dragContainerNode",ae="dragNodesList",au="drop",aM="dropContainer",a7="dropContainerNode",bt="",a8="field",f="fields",bi="form-builder-field",ah="form-builder-button-field",b2="id",r="icon",aN="input",ab="label",av="name",cj="node",bV="option",bT="options",aU="portalLayout",bc="predefinedValue",a9="proxy",bF="reset",a1="selected",bJ="selectedIndex",bs="submit",Q=" ",af="strings",bh="template",bS="templateNode",bx="text",P="type",m="value",x=bQ.getClassName,ay=x(a8,aN),bY=x(a8,aN,bx),bz=x(bi),R=x(bi,cj),bD=x(bv,z),by='<input id="{id}" class="'+[R,ay].join(Q)+'" name="{name}" type="{type}" value="{value}" />',ck=[bs,bF,b7];var T=bQ.Component.create({NAME:ah,ATTRS:{acceptChildren:{value:false,readOnly:true},buttonType:{value:bs,validator:function(A){return bQ.Array(ck).indexOf(A.toLowerCase())>-1;}},predefinedValue:{value:aY(bs)},showLabel:{value:false},template:{valueFn:function(){return by;}}},UI_ATTRS:bQ.FormBuilderField.UI_ATTRS.concat([b5]),CSS_PREFIX:bz,HTML_PARSER:{templateNode:bE+R},EXTENDS:bQ.FormBuilderField,prototype:{getHTML:function(){var A=this;var cl=A.get(bh);var cp=A.get(b2);var cn=A.get(ab);var cm=A.get(av);var L=A.get(b5);var co=A.get(bc);return bQ.substitute(cl,{id:cp,label:cn,name:cm,type:L,value:co});},getNode:function(){var A=this;return bQ.Node.create(A.getHTML());},renderSettings:function(){var cq=this;var cl=cq.get(aT);var L=cl.get(al);var cp=cq.get(b5);var cr=cl.get(af);var cm=cq.settingsNodesMap;bQ.FormBuilderButtonField.superclass.renderSettings.apply(cq,arguments);if(!cq._renderedButtonSettings){cq._renderedButtonSettings=true;var co=cq.propertiesPanel.get(d);var cs=[];bQ.each(ck,function(ct){cs.push({labelText:cr[ct],value:ct});});cq._renderSettingsFields([{labelText:"Button type",name:b5,options:cs,type:"select"}],co.item(0));var A=cm["buttonTypeSettingNode"];A.on({change:bQ.bind(cq._onButtonTypeChange,cq)});var cn=bQ.Array(ck).indexOf(cp);A.all(bV).item(cn).set(a1,true);}},_onButtonTypeChange:function(L){var A=this;var cl=L.target;A.set(b5,cl.get(m));},_uiSetButtonType:function(cl){var A=this;var L=A.get(bS);L.setAttribute(P,cl);}}});bQ.FormBuilderButtonField=T;bQ.FormBuilder.types["button"]=bQ.FormBuilderButtonField;var bK=bQ.Lang,aI=bK.isArray,a5=bK.isBoolean,bq=bK.isNumber,ai=bK.isString,aG="boolean",aB="boundingBox",d="bodyContent",bj="checkbox",E="checked",ar="choice",cb="contentBox",bd="container",bE=".",aV="drag",bo="dragContainer",cd="dragContainerNode",ae="dragNodesList",au="drop",aM="dropContainer",a7="dropContainerNode",bt="",a8="field",f="fields",bi="form-builder-field",b8="form-builder-checkbox-field",b2="id",r="icon",aO="inline",ab="label",g="labels",av="name",cj="node",aU="portalLayout",bc="predefinedValue",a9="proxy",ap="size",Q=" ",bh="template",bS="templateNode",m="value",x=bQ.getClassName,b=x(a8),bG=x(a8,bj),bN=x(a8,ar),bz=x(bi),b9=x(bi,bj),R=x(bi,cj),bD=x(bv,z),ad=x(a8,g,aO),bO='<li class="'+[b1,a6,bz,b9].join(Q)+'"></li>',aF='<input id="{id}" class="'+[R,b,bG,bN].join(Q)+'" name="{name}" type="checkbox" value="{value}" {checked} />';var U=bQ.Component.create({NAME:b8,ATTRS:{dataType:{value:aG},predefinedValue:{setter:bQ.DataType.Boolean.parse,value:false},template:{valueFn:function(){return aF;}},templateNode:{valueFn:"getNode"}},CSS_PREFIX:bz,HTML_PARSER:{templateNode:bE+R},EXTENDS:bQ.FormBuilderField,prototype:{BOUNDING_TEMPLATE:bO,bindUI:function(){var A=this;bQ.FormBuilderCheckBoxField.superclass.bindUI.apply(A,arguments);var L=A.get(bS);L.on({"change":bQ.bind(A._onValueChange,A)});},renderUI:function(){var A=this;var L=A.get(cb);var cl=A.get(bS);var cm=A.get(Z);bQ.FormBuilderCheckBoxField.superclass.renderUI.apply(A,arguments);cm.insert(cl,cm,"before");},getHTML:function(){var A=this;var L=A.get(bh);var cn=A.get(E);var cp=A.get(b2);var cm=A.get(ab);var cl=A.get(av);var co=A.get(bc);return bQ.substitute(L,{checked:cn?'checked="checked"':bt,id:cp,label:cm,name:cl,value:co});},getNode:function(){var A=this;return bQ.Node.create(A.getHTML());},renderSettings:function(){var L=this;var cl=L.get(aT);var cm=cl.get(al);var co=L.settingsNodesMap;bQ.FormBuilderCheckBoxField.superclass.renderSettings.apply(L,arguments);if(!L._renderedCheckboxSettings){L._renderedCheckboxSettings=true;co["predefinedValueSettingNode"].remove();var A=L.propertiesPanel.get(d);L._renderSettingsFields([{type:"checkbox",name:bc,labelText:"Checked",labelAlign:"left"}],A.item(0));var cn=co["predefinedValueSettingNode"];cn.on({change:bQ.bind(L._onValueChange,L)});cn.set(E,L.get(bc));}},_onValueChange:function(L){var A=this;var cl=L.target;A.set(bc,cl.get(E));},_uiSetPredefinedValue:function(cm){var A=this;var L=A.get(bS);var cn=A.settingsNodesMap;var cl=cn["predefinedValueSettingNode"];if(cl){cl.set(E,cm);}L.set(E,cm);}}});bQ.FormBuilderCheckBoxField=U;bQ.FormBuilder.types["checkbox"]=bQ.FormBuilderCheckBoxField;var bK=bQ.Lang,aI=bK.isArray,bq=bK.isNumber,ai=bK.isString,ax=function(A){return(A instanceof bQ.Node);},aS=function(A){return(A instanceof bQ.NodeList);},aB="boundingBox",cb="contentBox",bd="container",n="dataType",bE=".",au="drop",bt="",a8="field",f="fields",bi="form-builder-field",C="form-builder-fieldset-field",b2="id",r="icon",ab="label",av="name",cj="node",bc="predefinedValue",Q=" ",af="strings",bh="template",bS="templateNode",bx="text",P="type",m="value",bH="zone",x=bQ.getClassName,bz=x(bi),R=x(bi,cj),bI=x(s,bZ,au,bH),bb='<fieldset id="{id}" class="'+[R].join(Q)+'"></fieldset>',j='<legend class="'+bg+'"></legend>';
var v=bQ.Component.create({NAME:C,ATTRS:{acceptChildren:{value:true,readOnly:true},dataType:{value:undefined},template:{valueFn:function(){return bb;}},labelNode:{valueFn:function(){return bQ.Node.create(j);}},templateNode:{valueFn:"getNode"}},UI_ATTRS:[c,ab,bU],CSS_PREFIX:bz,HTML_PARSER:{templateNode:bE+R},EXTENDS:bQ.FormBuilderField,prototype:{CONTENT_TEMPLATE:bb,renderUI:function(){var A=this;var cn=A.get(aB);var co=A.get(cc);var L=A.get(cb);var cm=A.get(Z);var cl=A.get(bS);if(!cn.contains(co)){cn.prepend(co);}if(!L.contains(cm)){L.append(cm);}},getHTML:function(){var A=this;var L=A.get(bh);var cl=A.get(b2);return bQ.substitute(L,{id:cl});},getNode:function(){var A=this;return bQ.Node.create(A.getHTML());},renderSettings:function(){var cs=this;var cn=cs.get(aT);var cl=cn.get(al);var ct=cn.get(af);var co=cs.settingsNodesMap;if(!cs._renderedFieldsetSettings){cs._renderedFieldsetSettings=true;cs.fieldSettingsNode=bQ.Node.create(b4);var cr=bQ.Node.create(b4);var cp=bQ.Node.create(ac);var cq=bQ.Node.create(aR);var A=bQ.Node.create(cg);cq.setContent(ct[P]);A.setContent(cs.get(n)||cs.get(P));cp.append(cq);cp.append(A);cp.appendTo(cr);cs._renderSettingsFields([{type:"text",name:ab,labelText:"Label",value:cs.get(ab)},{type:"checkbox",name:bU,labelText:"Show label",labelAlign:"left",value:cs.get(bU)}],cr);var cm=co["labelSettingNode"];cm.on({input:bQ.bind(cs._onLabelInput,cs)});var L=co["showLabelSettingNode"];L.set(E,cs.get(bU));L.on({change:bQ.bind(cs._onSettingsFieldChange,cs)});cs.propertiesPanel=new bQ.Panel({bodyContent:cr,collapsible:true,title:"Properties"}).render();cs.fieldSettingsNode.append(cs.propertiesPanel.get(aB));}cl.setContent(cs.fieldSettingsNode);},_uiSetAcceptChildren:function(cn){var A=this;var L=A.get(cb);var cm=A.get(a2);var cl=L.one(bE+bI);if(cn&&!cl){L.append(cm);}else{if(!cn&&cl){cl.remove();}else{if(cn&&cl){A.set(a2,cl);}}}}}});bQ.FormBuilderFieldsetField=v;bQ.FormBuilder.types["fieldset"]=bQ.FormBuilderFieldsetField;var bK=bQ.Lang,aI=bK.isArray,bq=bK.isNumber,ai=bK.isString,ax=function(A){return(A instanceof bQ.Node);},aS=function(A){return(A instanceof bQ.NodeList);},aB="boundingBox",cb="contentBox",bd="container",n="dataType",bE=".",bt="",a8="field",f="fields",bi="form-builder-field",ca="form-builder-file-upload-field",b2="id",r="icon",ab="label",av="name",cj="node",bc="predefinedValue",Q=" ",af="strings",bh="template",bS="templateNode",bx="text",P="type",m="value",x=bQ.getClassName,bz=x(bi),R=x(bi,cj),bD=x(bv,z),br='<input id="{id}" class="'+[R].join(Q)+'" name="{name}" type="file" value="{value}" />';var F=bQ.Component.create({NAME:ca,ATTRS:{template:{valueFn:function(){return br;}},templateNode:{valueFn:"getNode"}},CSS_PREFIX:bz,HTML_PARSER:{templateNode:bE+R},EXTENDS:bQ.FormBuilderField,prototype:{getHTML:function(){var A=this;var L=A.get(bh);var cp=A.get(b2);var cm=A.get(ab);var cl=A.get(av);var cn=A.get(ap);var co=A.get(bc);return bQ.substitute(L,{id:cp,label:cm,name:cl,value:co});},getNode:function(){var A=this;return bQ.Node.create(A.getHTML());},renderSettings:function(){var cs=this;var cn=cs.get(aT);var cl=cn.get(al);var ct=cn.get(af);var co=cs.settingsNodesMap;if(!cs._renderedFileUploadSettings){cs._renderedFileUploadSettings=true;cs.fieldSettingsNode=bQ.Node.create(b4);var cr=bQ.Node.create(b4);var cp=bQ.Node.create(ac);var cq=bQ.Node.create(aR);var A=bQ.Node.create(cg);cq.setContent(ct[P]);A.setContent(cs.get(n)||cs.get(P));cp.append(cq);cp.append(A);cp.appendTo(cr);cs._renderSettingsFields([{type:"text",name:ab,labelText:"Label",value:cs.get(ab)},{type:"checkbox",name:bU,labelText:"Show label",labelAlign:"left",value:cs.get(bU)},{type:"text",name:av,labelText:"Name",value:cs.get(av)},{type:"checkbox",name:ak,labelText:"Required",labelAlign:"left",value:cs.get(ak)}],cr);var cm=co["labelSettingNode"];cm.on({input:bQ.bind(cs._onLabelInput,cs)});var L=co["showLabelSettingNode"];L.set(E,cs.get(bU));L.on({change:bQ.bind(cs._onSettingsFieldChange,cs)});cs.propertiesPanel=new bQ.Panel({bodyContent:cr,collapsible:true,title:"Properties"}).render();cs.fieldSettingsNode.append(cs.propertiesPanel.get(aB));}cl.setContent(cs.fieldSettingsNode);}}});bQ.FormBuilderFileUploadField=F;bQ.FormBuilder.types["fileupload"]=bQ.FormBuilderFileUploadField;var bK=bQ.Lang,aI=bK.isArray,bq=bK.isNumber,ai=bK.isString,ax=function(A){return(A instanceof bQ.Node);},aS=function(A){return(A instanceof bQ.NodeList);},aY=bQ.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);}),I="add",ag="addNode",aB="boundingBox",b7="button",b5="buttonType",cb="contentBox",bd="container",z="default",am="defaultLabel",t="defaultOptions",B="defaultValue",bE=".",aV="drag",bo="dragContainer",cd="dragContainerNode",ae="dragNodesList",au="drop",aM="dropContainer",a7="dropContainerNode",bt="",a8="field",f="fields",bi="form-builder-field",G="form-builder-multiple-choice-field",r="icon",b2="id",aN="input",aa="item",ab="label",b6="multiple",av="name",cj="node",bV="option",bp="optionTemplate",bT="options",bc="predefinedValue",a9="proxy",q="remove",bF="reset",bs="submit",Q=" ",bh="template",bS="templateNode",bx="text",P="type",m="value",x=bQ.getClassName,ay=x(a8,aN),bY=x(a8,aN,bx),k=x(a8,bT,I),N=x(a8,bT,aa),M=x(a8,bT,aa,aN),ba=x(a8,bT,aa,aN,ab),bR=x(a8,bT,aa,aN,m),aX=x(a8,bT,aa,q),bz=x(bi),R=x(bi,cj),bD=x(bv,z),bC='<div class="'+[N,ad,cf].join(Q)+'">'+'<input type="text" class="'+[M,ba,ay,bY].join(Q)+'" value="{label}" />'+'<input type="text" class="'+[M,bR,ay,bY].join(Q)+'" value="{value}" />'+'<a href="javascript:;" class="'+aX+'">&nbsp;</a>'+"</div>";TPL_ADD='<a class="'+k+'" href="javascript:;">Add an option</a>',ENTER="ENTER";var aJ=bQ.Component.create({NAME:bT,ATTRS:{allowClear:{value:false},defaultLabel:{value:bt},defaultValue:{value:bt},disabled:{value:false,validator:a5},options:{value:[],getter:"_getOptions",validator:aI},addNode:{valueFn:function(){return bQ.Node.create(TPL_ADD);}}},HTML_PARSER:{addNode:bE+k},UI_ATTRS:[bT,bu],EXTENDS:bQ.Widget,prototype:{renderUI:function(){var A=this;
var L=A.get(aB);var cl=A.get(ag);if(!cl.inDoc()){L.append(cl);}},bindUI:function(){var A=this;var L=A.get(aB);var cl=A.get(ag);cl.on("click",bQ.bind(A._onClickAdd,A));L.delegate("click",bQ.bind(A._onClickOptionRemove,A),bE+aX);L.delegate("keypress",bQ.bind(A._onKeyPressOption,A),bE+M);},add:function(L){var A=this;var cl=A.get(bT);cl.push(L);A.set(bT,cl);},clear:function(){var A=this;if(A.get(ALLOW_CLEAR)){A.set(bT,[]);}},remove:function(cl){var A=this;var L=A.get(cb);var cm=A._getOptionNode(cl);if(A.get(bu)){return false;}if(cm){cm.remove();}A.items=L.all(bE+N);},_addNewOption:function(){var L=this;var cl=L.get(cb);if(L.get(bu)){return false;}var cm=L._createOption({label:L.get(am),value:L.get(B)});cm=bQ.Node.create(cm);cl.append(cm);var A=cm.one(aN);A.focus();A.select();L.items=cl.all(bE+N);return cm;},_createOption:function(L){var A=this;return bQ.substitute(bC,L);},_getOptionNode:function(L){var A=this;return A.items.item(L);},_getOptions:function(cl){var A=this;var L=[];if(A.items){bQ.each(A.items,function(cm){var co=cm.one(bE+ba);var cn=cm.one(bE+bR);L.push({label:co.val(),value:cn.val()});});}else{L=cl;}return L;},_indexOfTarget:function(cl){var A=this;var L=cl.ancestor(bE+N);return A.items.indexOf(L);},_onClickAdd:function(L){var A=this;A._addNewOption();},_onClickOptionRemove:function(cm){var A=this;var cl=A.get(bT);var L=A._indexOfTarget(cm.target);A.remove(L);},_onKeyPressOption:function(cn){var A=this;var cm=A.get(bT);var cp=cn.currentTarget;var L=A.items;if(cn.isKey(ENTER)){var cl=A._indexOfTarget(cp);var co=cp.hasClass(bR);if((cl==L.size()-1)&&co){A._addNewOption();}}},_uiSetDisabled:function(cm){var A=this;var cl=A.get(ag);var L=A.get(aB);cl.toggleClass(W,cm);L.all(bE+aX).toggleClass(W,cm);if(cm){L.all(aN).setAttribute(bu,cm);}else{L.all(aN).removeAttribute(bu);}},_uiSetOptions:function(cm){var A=this;var cl=[];var L=A.get(cb);L.empty();bQ.each(cm,function(cn){L.append(A._createOption(cn));});A.items=L.all(bE+N);}}});var e=bQ.Component.create({NAME:G,ATTRS:{acceptChildren:{value:false,readOnly:true},options:{value:[{label:"option 1",value:"value 1"},{label:"option 2",value:"value 2"},{label:"option 3",value:"value 3"}]},optionTemplate:{value:'<option value="{value}">{label}</option>'}},UI_ATTRS:[c,bc,ab,av,bT,bU],CSS_PREFIX:bz,HTML_PARSER:{templateNode:bE+R},EXTENDS:bQ.FormBuilderField,prototype:{getNode:function(){var A=this;return bQ.FormBuilderMultipleChoiceField.superclass.getNode.apply(A,arguments);},renderSettings:function(){var A=this;var L=A.get(bW);bQ.FormBuilderMultipleChoiceField.superclass.renderSettings.apply(A,arguments);if(!A._renderedMultipleChoiceSettings){A._renderedMultipleChoiceSettings=true;var cm=bQ.Node.create(b4);A.optionsPanel=new bQ.Panel({bodyContent:cm,collapsible:true,title:"Options"}).render();var cl=bQ.Array.indexOf(L,bT)>-1;A.options=new aJ({disabled:cl,options:A.get(bT)}).render(cm);A.fieldSettingsNode.append(A.optionsPanel.get(aB));}},saveSettings:function(){var A=this;bQ.FormBuilderMultipleChoiceField.superclass.saveSettings.apply(A,arguments);A.set(bT,A.options.get(bT));},_uiSetOptions:function(cl){var A=this;var L=A.get(bS);L.empty();bQ.each(cl,function(cm){L.append(bQ.substitute(A.get(bp),cm));});}}});bQ.FormBuilderMultipleChoiceField=e;bQ.FormBuilder.types["multiple-choice"]=bQ.FormBuilderMultipleChoiceField;var bK=bQ.Lang,aI=bK.isArray,a5=bK.isBoolean,bq=bK.isNumber,ai=bK.isString,aB="boundingBox",d="bodyContent",E="checked",ar="choice",cb="contentBox",bd="container",bE=".",bt="",a8="field",f="fields",bi="form-builder-field",aW="form-builder-radio-field",b2="id",r="icon",aO="inline",ab="label",g="labels",av="name",cj="node",b0="optionsContainerNode",bc="predefinedValue",K="radio",ap="size",Q=" ",bh="template",bS="templateNode",m="value",x=bQ.getClassName,b=x(a8),bN=x(a8,ar),bz=x(bi),aA=x(bi,K),R=x(bi,cj),O=x(bi,bT,bd),bD=x(bv,z),ad=x(a8,g,aO),bO='<li class="'+[b1,a6,bz,aA].join(Q)+'"></li>',S='<div class="'+O+'"></div>',aH='<input id="{id}" class="'+[R,b,bN].join(Q)+'" name="{name}" type="radio" value="{value}" {checked} />';var h=bQ.Component.create({NAME:aW,ATTRS:{name:{value:K},optionTemplate:{value:aH},template:{valueFn:function(){return aH;}},optionsContainerNode:{valueFn:function(){return bQ.Node.create(S);}},templateNode:{valueFn:"getNode"}},CSS_PREFIX:bz,HTML_PARSER:{optionsContainerNode:bE+O,templateNode:bE+R},EXTENDS:bQ.FormBuilderMultipleChoiceField,prototype:{BOUNDING_TEMPLATE:bO,renderUI:function(){var L=this;var cn=L.get(aB);var cp=L.get(cc);var cl=L.get(cb);var cm=L.get(Z);var A=L.get(aQ);if(!cn.contains(cp)){cn.prepend(cp);}if(!cl.contains(cm)){cl.append(cm);cl.append(A);}A.insert(cm,A,"after");var co=L.get(b0);if(!cl.contains(co)){cl.append(co);}},getHTML:function(){var A=this;var L=A.get(bh);var cn=A.get(E);var cp=A.get(b2);var cm=A.get(ab);var cl=A.get(av);var co=A.get(bc);return bQ.substitute(L,{checked:cn?'checked="checked"':bt,id:cp,label:cm,name:cl,value:co});},getNode:function(){var A=this;return bQ.Node.create(A.getHTML());},_onFieldChange:function(L){var A=this;var cl=L.target;A.set(bc,cl.val());},_uiSetDisabled:function(cl){var A=this;var L=A.get(b0);L.all(aN).each(function(cm){if(cl){cm.setAttribute(bu,cl);}else{cm.removeAttribute(bu);}});},_uiSetOptions:function(cn){var A=this;var L=A.get(cb);var cm=A.get(b0);var cl=A.get(bS);cm.empty();bQ.each(cn,function(cq){var co=new bQ.Field({type:K,disabled:A.get(bu),name:A.get(av),labelText:cq.label,labelAlign:"left",value:cq.value}).render(cm);var cp=co.get(cj);if(cq.value==A.get(bc)){cp.set(E,true);}if(A.get(bu)){cp.setAttribute(bu,cn);}else{cp.removeAttribute(bu);}cp.on({change:bQ.bind(A._onFieldChange,A)});});},_uiSetPredefinedValue:function(cn){var A=this;var L=A.get(aT);var cl=L.get(al);var cm=cl.one("input[name=predefinedValue]");if(cm){cm.val(cn);}}}});bQ.FormBuilderRadioField=h;bQ.FormBuilder.types["radio"]=bQ.FormBuilderRadioField;var bK=bQ.Lang,aI=bK.isArray,bq=bK.isNumber,ai=bK.isString,ax=function(A){return(A instanceof bQ.Node);},aS=function(A){return(A instanceof bQ.NodeList);
},aY=bQ.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);}),aB="boundingBox",b7="button",b5="buttonType",cb="contentBox",bd="container",t="defaultOptions",bE=".",aV="drag",bo="dragContainer",cd="dragContainerNode",ae="dragNodesList",au="drop",aM="dropContainer",a7="dropContainerNode",bt="",a8="field",f="fields",bi="form-builder-field",bP="form-builder-select-field",b2="id",r="icon",aN="input",ab="label",b6="multiple",av="name",cj="node",bV="option",bT="options",aU="portalLayout",bc="predefinedValue",a9="proxy",bF="reset",bJ="selectedIndex",bs="submit",Q=" ",bh="template",bS="templateNode",bx="text",P="type",m="value",x=bQ.getClassName,ay=x(a8,aN),bY=x(a8,aN,bx),bz=x(bi),R=x(bi,cj),bD=x(bv,z),aq='<select id="{id}" class="'+[R].join(Q)+'" name="{name}" value="{value}"></select>';var Y=bQ.Component.create({NAME:bP,ATTRS:{multiple:{setter:bQ.DataType.Boolean.parse,value:false},template:{valueFn:function(){return aq;}},templateNode:{valueFn:"getNode"}},UI_ATTRS:bQ.FormBuilderField.UI_ATTRS.concat([b6]),CSS_PREFIX:bz,HTML_PARSER:{templateNode:bE+R},EXTENDS:bQ.FormBuilderMultipleChoiceField,prototype:{getHTML:function(){var A=this;var L=A.get(bh);var co=A.get(b2);var cm=A.get(ab);var cl=A.get(av);var cn=A.get(bc);return bQ.substitute(L,{id:co,label:cm,name:cl,value:cn});},getNode:function(){var A=this;return bQ.Node.create(A.getHTML());},renderSettings:function(){var cl=this;var cm=cl.get(aT);var cn=cm.get(al);var co=cl.settingsNodesMap;bQ.FormBuilderSelectField.superclass.renderSettings.apply(cl,arguments);if(!cl._renderedSelectSettings){cl._renderedSelectSettings=true;var L=cl.propertiesPanel.get(d);cl._renderSettingsFields([{type:"checkbox",name:b6,labelText:"Multiple",labelAlign:"left"}],L.item(0));var A=co["multipleSettingNode"];A.on({change:bQ.bind(cl._onSettingsFieldChange,cl)});A.set(E,cl.get(b6));}},_uiSetMultiple:function(cl){var A=this;var L=A.get(bS);if(cl){L.setAttribute(b6,b6);}else{L.removeAttribute(b6);}}}});bQ.FormBuilderSelectField=Y;bQ.FormBuilder.types["select"]=bQ.FormBuilderSelectField;var bK=bQ.Lang,aI=bK.isArray,bq=bK.isNumber,ai=bK.isString,ax=function(A){return(A instanceof bQ.Node);},aS=function(A){return(A instanceof bQ.NodeList);},aB="boundingBox",cb="contentBox",bd="container",bE=".",aV="drag",bo="dragContainer",cd="dragContainerNode",ae="dragNodesList",au="drop",aM="dropContainer",a7="dropContainerNode",bt="",a8="field",f="fields",bi="form-builder-field",aP="form-builder-input-field",b2="id",r="icon",aN="input",ab="label",av="name",cj="node",aU="portalLayout",bc="predefinedValue",a9="proxy",Q=" ",bh="template",bS="templateNode",bx="text",m="value",bm="width",x=bQ.getClassName,ay=x(a8,aN),bY=x(a8,aN,bx),bz=x(bi),R=x(bi,cj),bD=x(bv,z),by='<input id="{id}" class="'+[R,ay,bY].join(Q)+'" name="{name}" type="text" value="{value}" />',bf={small:25,medium:50,large:100};var aw=bQ.Component.create({NAME:aP,ATTRS:{template:{valueFn:function(){return by;}},templateNode:{valueFn:"getNode"},width:{setter:bQ.DataType.String.evaluate,value:25}},CSS_PREFIX:bz,HTML_PARSER:{templateNode:bE+R},EXTENDS:bQ.FormBuilderField,prototype:{bindUI:function(){var A=this;bQ.FormBuilderTextField.superclass.bindUI.apply(A,arguments);var L=A.get(bS);L.on({input:bQ.bind(A._onValueInput,A)});},getHTML:function(){var A=this;var L=A.get(bh);var cp=A.get(b2);var cm=A.get(ab);var cl=A.get(av);var co=A.get(bc);var cn=A.get(bm);return bQ.substitute(L,{id:cp,label:cm,name:cl,value:co,width:cn});},getNode:function(){var A=this;return bQ.Node.create(A.getHTML());},renderSettings:function(){var cs=this;var cm=cs.get(aT);var cl=cm.get(al);var cn=cs.settingsNodesMap;var ct=cm.get(af);bQ.FormBuilderTextField.superclass.renderSettings.apply(cs,arguments);if(!cs._renderedInputSettings){cs._renderedInputSettings=true;var cp=cs.propertiesPanel.get(d);var A=0;var co=-1;var cq=[];bQ.each(bf,function(cv,cu){if(cv==cs.get(bm)){co=A;}cq.push({labelText:ct[cu],value:cv});A++;});cs._renderSettingsFields([{labelText:"Width",name:bm,options:cq,type:"select",value:cs.get(bm)}],cp.item(0));var L=cn["predefinedValueSettingNode"];L.on({input:bQ.bind(cs._onValueInput,cs)});var cr=cn["widthSettingNode"];cr.on({change:bQ.bind(cs._onWidthChange,cs)});cr.all(bV).item(co).set(a1,true);}},_onValueInput:function(L){var A=this;var cl=L.target;A.set(bc,cl.val());},_onWidthChange:function(L){var A=this;var cl=L.target;A.set(bm,cl.val());},_uiSetWidth:function(cl){var A=this;var L=A.get(bS);L.addClass(x("w"+cl));L.removeClass(x("w"+A.prevWidth));A.prevWidth=cl;}}});bQ.FormBuilderTextField=aw;bQ.FormBuilder.types["text"]=bQ.FormBuilderTextField;var bK=bQ.Lang,aI=bK.isArray,bq=bK.isNumber,ai=bK.isString,aB="boundingBox",cb="contentBox",bd="container",bE=".",aV="drag",bo="dragContainer",cd="dragContainerNode",ae="dragNodesList",au="drop",aM="dropContainer",a7="dropContainerNode",bt="",a8="field",f="fields",bi="form-builder-field",w="form-builder-textarea-field",b2="id",r="icon",ab="label",av="name",cj="node",aU="portalLayout",bc="predefinedValue",a9="proxy",ap="size",Q=" ",bh="template",bS="templateNode",bx="text",bB="textarea",m="value",x=bQ.getClassName,b=x(a8),be=x(a8,bx),bX=x(a8,bB),bz=x(bi),R=x(bi,cj),bD=x(bv,z),bL='<textarea id="{id}" class="'+[R,b,be,bX].join(Q)+'" name="{name}">{value}</textarea>';var az=bQ.Component.create({NAME:w,ATTRS:{template:{valueFn:function(){return bL;}},templateNode:{valueFn:"getNode"}},CSS_PREFIX:bz,HTML_PARSER:{templateNode:bE+R},EXTENDS:bQ.FormBuilderTextField,prototype:{getHTML:function(){var A=this;var L=A.get(bh);var cp=A.get(b2);var cm=A.get(ab);var cl=A.get(av);var cn=A.get(ap);var co=A.get(bc);return bQ.substitute(L,{id:cp,label:cm,name:cl,value:co});},getNode:function(){var A=this;return bQ.Node.create(A.getHTML());}}});bQ.FormBuilderTextAreaField=az;bQ.FormBuilder.types["textarea"]=bQ.FormBuilderTextAreaField;},"@VERSION@",{requires:["aui-datatype","aui-form","aui-panel","io","substitute"],skinnable:true});