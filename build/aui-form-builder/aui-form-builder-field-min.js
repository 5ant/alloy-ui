AUI.add("aui-form-builder-field",function(b4){var bV=b4.Lang,aW=bV.isArray,bR=bV.isString,I=b4.IO.prototype._serialize,h="acceptChildren",e="bodyContent",aQ="boundingBox",cd="builder",cj="button",J="buttons",x="buttonsNode",aG="checkbox",K="checked",o="children",cf="clearfix",aR="close",aS="component",co="contentBox",aK="container",cu="dataType",cg="default",aX="delete",bG="disabled",bN=".",bd="drag",aC="dragContainer",v="dragContainerNode",bZ="dragNodesList",az="drop",bh="dropContainer",bo="dropContainerNode",b5="dropNode",bq="dropZone",a2="dropZoneNode",aE="duplicate",Q="edit",bH="",bp="field",g="fields",a8="fixed",bM="for",q="form",be="formBuilder",aF="form-builder-field",s="help",n="helper",au="hidden",r="icon",ce="id",ai="label",b0="labelNode",bC="lightbulb",bg="metadata",aB="name",cv="node",b="panel",ba="portalLayout",aN="predefinedValue",bs="proxy",cc="readOnlyAttributes",ao="required",a7="requiredFlagNode",bF="state",bn="select",aZ="settings",ar="settingsFormNode",W="showLabel",av="size",X=" ",bQ="string",bX="strings",ac="templateNode",bJ="text",aq="textarea",u="tip",bv="tipIconNode",Y="type",aD="unique",bS="zone",bj="widget",z=b4.getClassName,bm=z(aS),aJ=z(bp,ai),p=z(n,cf),ae=z(n,au),bO=z(bF,cg),d=z(bp),bt=z(bp,bJ),B=z(q,cd,cj),bK=z(q,cd,cj,aX),a4=z(q,cd,cj,aE),U=z(q,cd,cj,Q),a3=z(q,cd,az,cv),am=z(q,cd,az,bS),ct=z(q,cd,r),j=z(q,cd,r,aX),w=z(q,cd,r,aE),ak=z(q,cd,r,Q),E=z(q,cd,r,u),bL=z(q,cd,bp),bz=z(q,cd,bp,J),br=z(q,cd,a8),cs=z(q,cd,ao),bE=z(q,cd,aD),G=z(bj),b2='<li class="'+[G,bm,bL].join(X)+'"></li>',a='<div class="'+[bz,ae].join(X)+'">'+'<a class="'+[B,U].join(X)+'" href="javascript:;" title="Edit">'+'<div class="'+[ct,ak].join(X)+'"></div>'+"</a>"+'<a class="'+[B,a4].join(X)+'" href="javascript:;" title="Duplicate">'+'<div class="'+[ct,w].join(X)+'"></div>'+"</a>"+'<a class="'+[B,bK].join(X)+'" href="javascript:;" title="Delete">'+'<div class="'+[ct,j].join(X)+'"></div>'+"</a>"+"</div>",C='<div class="'+p+'"></div>',ab='<ul class="'+am+'"></ul>',aj='<span class="'+[d,bt].join(X)+'"></span>',a6='<label class="'+aJ+'"></label>',ay='<span class="'+cs+'">*</span>',cr="<p></p>",bk='<a href="javascript:;" class="'+E+'"></a>';var t=b4.Component.create({NAME:aF,ATTRS:{acceptChildren:{value:true},dataType:{value:bQ},disabled:{value:false},key:{value:bH},fixed:{value:false},formBuilder:{value:undefined},id:{value:bH},icon:{value:bH},label:{value:bH},name:{valueFn:function(){var A=this;return A.get(Y)+(++b4.Env._uidx);}},parent:{value:null},predefinedValue:{value:bH},readOnlyAttributes:{value:[],validator:aW},required:{setter:b4.DataType.Boolean.parse,value:false},selected:{setter:b4.DataType.Boolean.parse,value:false},showLabel:{setter:b4.DataType.Boolean.parse,value:true},template:{value:bH},tip:{value:bH},type:{value:bH},unique:{setter:b4.DataType.Boolean.parse,value:false},buttonsNode:{valueFn:function(){return b4.Node.create(a);}},dropZoneNode:{valueFn:function(){return b4.Node.create(ab);}},labelNode:{valueFn:function(){return b4.Node.create(a6);}},requiredFlagNode:{valueFn:function(){return b4.Node.create(ay);}},templateNode:{valueFn:"getNode"},tipIconNode:{valueFn:function(){return b4.Node.create(bk);}}},AUGMENTS:[b4.FormBuilderFieldSupport],UI_ATTRS:[h,bG,a8,ai,aB,aN,ao,W,u,aD],HTML_PARSER:{buttonsNode:bN+bz,dropZoneNode:bN+am,labelNode:ai+bN+aJ,requiredFlagNode:bN+cs,tipIconNode:bN+E},prototype:{BOUNDING_TEMPLATE:b2,initializer:function(){var A=this;A.get(aQ).setData(bp,A);A.toolTip=new b4.Tooltip({trigger:A.get(bv),hideDelay:100});},bindUI:function(){var A=this;},renderUI:function(){var A=this;var cz=A.get(aQ);var cC=A.get(x);var L=A.get(co);var cy=A.get(b0);var cB=A.get(a7);var cA=A.get(ac);var cx=A.get(bv);L.addClass(p);cz.prepend(cC);L.append(cy);L.append(cB);L.append(cx);L.append(cA);A.toolTip.render();},settingsNodesMap:{},saveSettings:function(){var A=this;var L=A.get(be);var cx=L.get(ar);b4.Array.each(I(cx._node).split("&"),function(cz){var cy=cz.split("=");A.set(cy[0],decodeURIComponent(cy[1]));});},renderSettings:function(){var cF=this;var cB=cF.get(be);var A=cB.get(ar);var cG=cB.get(bX);var cy=cF.settingsNodesMap;if(!cF.fieldSettingsNode){cF.fieldSettingsNode=b4.Node.create(C);var cD=b4.Node.create(C);var cz=b4.Node.create(aj);var L=b4.Node.create(a6);var cE=b4.Node.create(cr);L.setContent(cG[Y]);cE.setContent(cF.get(cu)||cF.get(Y));cz.append(L);cz.append(cE);cz.appendTo(cD);cF._renderSettingsFields([{type:"text",name:ai,labelText:"Label",value:cF.get(ai)},{type:"checkbox",name:W,labelText:"Show label",labelAlign:"left",value:cF.get(W)},{type:"text",name:aB,labelText:"Name",value:cF.get(aB)},{type:"checkbox",name:ao,labelText:"Required",labelAlign:"left",value:ao},{type:"text",name:aN,labelText:"Default value",value:cF.get(aN)},{type:"textarea",name:u,labelText:"Tip",value:cF.get(u)}],cD);var cA=cy.labelSettingNode;cA.on({input:b4.bind(cF._onLabelInput,cF)});var cC=cy.showLabelSettingNode;cC.set(K,cF.get(W));cC.on({change:b4.bind(cF._onSettingsFieldChange,cF)});var cx=cy.requiredSettingNode;cx.set(K,cF.get(ao));cx.on({change:b4.bind(cF._onSettingsFieldChange,cF)});cF.propertiesPanel=new b4.Panel({bodyContent:cD,collapsible:true,title:"Properties"}).render();cF.fieldSettingsNode.append(cF.propertiesPanel.get(aQ));}A.setContent(cF.fieldSettingsNode);},getHTML:function(){},getNode:function(){},_onLabelInput:function(L){var A=this;var cy=L.target;var cx=cy.val();A.set(ai,cx);},_onSettingsFieldChange:function(L){var A=this;var cy=L.target;var cx=cy.val();if(cy.get(Y)===aG){cx=cy.get(K);}A.set(cy.get(aB),cx);},_renderSettingsFields:function(L,cy){var A=this;var cx=A.get(cc);b4.each(L,function(cA){var cB;if(b4.Array.indexOf(cx,cA.name)>-1){cA.disabled=true;}if(cA.type===bn){cB=new b4.Select(cA);}else{if(cA.type===aq){cB=new b4.Textarea(cA);}else{cB=new b4.Field(cA);}}cB.render(cy);var cz=cB.get(cv);if(cA.type===aG){cz.set(K,cA.value);}A.settingsNodesMap[cA.name+"SettingNode"]=cz;});},_uiSetAcceptChildren:function(cz){var A=this;var L=A.get(aQ);var cy=A.get(a2);var cx=L.one(bN+am);
if(cz&&!cx){L.append(cy);}else{if(!cz&&cx){cx.remove();}else{if(cz&&cx){A.set(a2,cx);}}}},_uiSetDisabled:function(cx){var A=this;var L=A.get(ac);if(cx){L.setAttribute(bG,cx);}else{L.removeAttribute(bG);}},_uiSetFixed:function(cx){var A=this;var cy=A.get(x);var L=cy.one(bN+bK);L.toggleClass(ae,cx);},_uiSetLabel:function(cx){var A=this;var L=A.get(b0);L.setContent(cx);},_uiSetName:function(cx){var A=this;var L=A.get(ac);L.set(aB,cx);},_uiSetPredefinedValue:function(cx){var A=this;var L=A.get(ac);L.val(cx);},_uiSetRequired:function(cx){var A=this;var L=A.get(a7);L.toggleClass(ae,!cx);},_uiSetShowLabel:function(cx){var A=this;var L=A.get(b0);L.toggleClass(ae,!cx);},_uiSetTip:function(cx){var A=this;var L=A.get(bv);L.toggleClass(ae,!cx);A.toolTip.set(e,cx);},_uiSetUnique:function(cx){var A=this;var L=A.get(aQ);var cy=A.get(x);L.toggleClass(bE,cx);cy.one(bN+a4).toggleClass(ae,cx);}}});b4.FormBuilderField=t;b4.FormBuilder.types["field"]=b4.FormBuilderField;var bV=b4.Lang,aW=bV.isArray,aA=bV.isNumber,bR=bV.isString,bw=function(A){return(A instanceof b4.Node);},a5=function(A){return(A instanceof b4.NodeList);},a9=b4.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);}),aQ="boundingBox",cj="button",ch="buttonType",co="contentBox",aK="container",bN=".",bd="drag",aC="dragContainer",v="dragContainerNode",bZ="dragNodesList",az="drop",bh="dropContainer",bo="dropContainerNode",bH="",bp="field",g="fields",aF="form-builder-field",bT="form-builder-button-field",ce="id",r="icon",a0="input",ai="label",aB="name",cv="node",S="option",ad="options",ba="portalLayout",aN="predefinedValue",bs="proxy",bP="reset",bf="selected",bW="selectedIndex",ax="submit",X=" ",bX="strings",aH="template",ac="templateNode",bJ="text",Y="type",m="value",z=b4.getClassName,bu=z(bp,a0),P=z(bp,a0,bJ),bL=z(aF),b7=z(aF,cv),bO=z(bF,cg),bI='<input id="{id}" class="'+[b7,bu].join(X)+'" name="{name}" type="{type}" value="{value}" />',cw=[ax,bP,cj];var b6=b4.Component.create({NAME:bT,ATTRS:{acceptChildren:{value:false,readOnly:true},buttonType:{value:ax,validator:function(A){return b4.Array(cw).indexOf(A.toLowerCase())>-1;}},predefinedValue:{value:a9(ax)},showLabel:{value:false},template:{valueFn:function(){return bI;}}},UI_ATTRS:b4.FormBuilderField.UI_ATTRS.concat([ch]),CSS_PREFIX:bL,HTML_PARSER:{templateNode:bN+b7},EXTENDS:b4.FormBuilderField,prototype:{getHTML:function(){var A=this;var cz=A.get(aH);var cB=A.get(ce);var cy=A.get(ai);var cx=A.get(aB);var L=A.get(ch);var cA=A.get(aN);return b4.substitute(cz,{id:cB,label:cy,name:cx,type:L,value:cA});},getNode:function(){var A=this;return b4.Node.create(A.getHTML());},renderSettings:function(){var cD=this;var cA=cD.get(be);var A=cA.get(ar);var cz=cD.get(ch);var cE=cA.get(bX);var cy=cD.settingsNodesMap;b4.FormBuilderButtonField.superclass.renderSettings.apply(cD,arguments);if(!cD._renderedButtonSettings){cD._renderedButtonSettings=true;var L=cD.propertiesPanel.get(e);var cC=[];b4.each(cw,function(cF){cC.push({labelText:cE[cF],value:cF});});cD._renderSettingsFields([{labelText:"Button type",name:ch,options:cC,type:"select"}],L.item(0));var cB=cy["buttonTypeSettingNode"];cB.on({change:b4.bind(cD._onButtonTypeChange,cD)});var cx=b4.Array(cw).indexOf(cz);cB.all(S).item(cx).set(bf,true);}},_onButtonTypeChange:function(L){var A=this;var cx=L.target;A.set(ch,cx.get(m));},_uiSetButtonType:function(cx){var A=this;var L=A.get(ac);L.setAttribute(Y,cx);}}});b4.FormBuilderButtonField=b6;b4.FormBuilder.types["button"]=b4.FormBuilderButtonField;var bV=b4.Lang,aW=bV.isArray,aY=bV.isBoolean,aA=bV.isNumber,bR=bV.isString,aU="boolean",aQ="boundingBox",e="bodyContent",aG="checkbox",K="checked",aw="choice",co="contentBox",aK="container",bN=".",bd="drag",aC="dragContainer",v="dragContainerNode",bZ="dragNodesList",az="drop",bh="dropContainer",bo="dropContainerNode",bH="",bp="field",g="fields",aF="form-builder-field",cl="form-builder-checkbox-field",ce="id",r="icon",bi="inline",ai="label",c="labels",aB="name",cv="node",R="parentNode",ba="portalLayout",aN="predefinedValue",bs="proxy",av="size",X=" ",aH="template",ac="templateNode",m="value",z=b4.getClassName,d=z(bp),an=z(bp,aG),b1=z(bp,aw),bL=z(aF),cm=z(aF,aG),b7=z(aF,cv),bO=z(bF,cg),bY=z(bp,c,bi),b2='<li class="'+[G,bm,bL,cm].join(X)+'"></li>',aT='<input id="{id}" class="'+[b7,d,an,b1].join(X)+'" name="{name}" type="checkbox" value="{value}" {checked} />';var aa=b4.Component.create({NAME:cl,ATTRS:{dataType:{value:aU},predefinedValue:{setter:b4.DataType.Boolean.parse,value:false},template:{valueFn:function(){return aT;}},templateNode:{valueFn:"getNode"}},CSS_PREFIX:bL,HTML_PARSER:{templateNode:bN+b7},EXTENDS:b4.FormBuilderField,prototype:{BOUNDING_TEMPLATE:b2,bindUI:function(){var A=this;b4.FormBuilderCheckBoxField.superclass.bindUI.apply(A,arguments);var L=A.get(ac);L.on({"change":b4.bind(A._onValueChange,A)});},renderUI:function(){var A=this;var L=A.get(co);var cy=A.get(ac);var cx=A.get(b0);b4.FormBuilderCheckBoxField.superclass.renderUI.apply(A,arguments);cx.insert(cy,cx,"before");},getHTML:function(){var A=this;var cy=A.get(aH);var cz=A.get(K);var cB=A.get(ce);var cx=A.get(ai);var L=A.get(aB);var cA=A.get(aN);return b4.substitute(cy,{checked:cz?'checked="checked"':bH,id:cB,label:cx,name:L,value:cA});},getNode:function(){var A=this;return b4.Node.create(A.getHTML());},renderSettings:function(){var A=this;var L=A.get(be);var cy=L.get(ar);var cz=A.settingsNodesMap;b4.FormBuilderCheckBoxField.superclass.renderSettings.apply(A,arguments);if(!A._renderedCheckboxSettings){A._renderedCheckboxSettings=true;cz.predefinedValueSettingNode.get(R).remove();var cx=A.propertiesPanel.get(e);A._renderSettingsFields([{type:"checkbox",name:aN,labelText:"Checked",labelAlign:"left"}],cx.item(0));var cA=cz.predefinedValueSettingNode;cA.on({change:b4.bind(A._onValueChange,A)});cA.set(K,A.get(aN));}},_onValueChange:function(L){var A=this;var cx=L.target;A.set(aN,cx.get(K));},_uiSetPredefinedValue:function(cz){var A=this;var L=A.get(ac);var cx=A.settingsNodesMap;var cy=cx.predefinedValueSettingNode;
if(cy){cy.set(K,cz);}L.set(K,cz);}}});b4.FormBuilderCheckBoxField=aa;b4.FormBuilder.types["checkbox"]=b4.FormBuilderCheckBoxField;var bV=b4.Lang,aW=bV.isArray,aA=bV.isNumber,bR=bV.isString,bw=function(A){return(A instanceof b4.Node);},a5=function(A){return(A instanceof b4.NodeList);},aQ="boundingBox",co="contentBox",aK="container",cu="dataType",bN=".",az="drop",bH="",bp="field",g="fields",aF="form-builder-field",F="form-builder-fieldset-field",ce="id",r="icon",ai="label",aB="name",cv="node",aN="predefinedValue",X=" ",bX="strings",aH="template",ac="templateNode",bJ="text",Y="type",m="value",bS="zone",z=b4.getClassName,bL=z(aF),b7=z(aF,cv),am=z(q,cd,az,bS),aM='<fieldset id="{id}" class="'+[b7].join(X)+'"></fieldset>',k='<legend class="'+aJ+'"></legend>';var y=b4.Component.create({NAME:F,ATTRS:{acceptChildren:{value:true,readOnly:true},dataType:{value:undefined},template:{valueFn:function(){return aM;}},labelNode:{valueFn:function(){return b4.Node.create(k);}},templateNode:{valueFn:"getNode"}},UI_ATTRS:[h,ai,W],CSS_PREFIX:bL,HTML_PARSER:{templateNode:bN+b7},EXTENDS:b4.FormBuilderField,prototype:{CONTENT_TEMPLATE:aM,renderUI:function(){var A=this;var cy=A.get(aQ);var cA=A.get(x);var L=A.get(co);var cx=A.get(b0);var cz=A.get(ac);if(!cy.contains(cA)){cy.prepend(cA);}if(!L.contains(cx)){L.append(cx);}},getHTML:function(){var A=this;var L=A.get(aH);var cx=A.get(ce);return b4.substitute(L,{id:cx});},getNode:function(){var A=this;return b4.Node.create(A.getHTML());},renderSettings:function(){var cE=this;var cA=cE.get(be);var A=cA.get(ar);var cF=cA.get(bX);var cx=cE.settingsNodesMap;if(!cE._renderedFieldsetSettings){cE._renderedFieldsetSettings=true;cE.fieldSettingsNode=b4.Node.create(C);var cC=b4.Node.create(C);var cy=b4.Node.create(aj);var L=b4.Node.create(a6);var cD=b4.Node.create(cr);L.setContent(cF[Y]);cD.setContent(cE.get(cu)||cE.get(Y));cy.append(L);cy.append(cD);cy.appendTo(cC);cE._renderSettingsFields([{type:"text",name:ai,labelText:"Label",value:cE.get(ai)},{type:"checkbox",name:W,labelText:"Show label",labelAlign:"left",value:cE.get(W)}],cC);var cz=cx["labelSettingNode"];cz.on({input:b4.bind(cE._onLabelInput,cE)});var cB=cx["showLabelSettingNode"];cB.set(K,cE.get(W));cB.on({change:b4.bind(cE._onSettingsFieldChange,cE)});cE.propertiesPanel=new b4.Panel({bodyContent:cC,collapsible:true,title:"Properties"}).render();cE.fieldSettingsNode.append(cE.propertiesPanel.get(aQ));}A.setContent(cE.fieldSettingsNode);},_uiSetAcceptChildren:function(cz){var A=this;var L=A.get(co);var cy=A.get(a2);var cx=L.one(bN+am);if(cz&&!cx){L.append(cy);}else{if(!cz&&cx){cx.remove();}else{if(cz&&cx){A.set(a2,cx);}}}}}});b4.FormBuilderFieldsetField=y;b4.FormBuilder.types["fieldset"]=b4.FormBuilderFieldsetField;var bV=b4.Lang,aW=bV.isArray,aA=bV.isNumber,bR=bV.isString,bw=function(A){return(A instanceof b4.Node);},a5=function(A){return(A instanceof b4.NodeList);},aQ="boundingBox",co="contentBox",aK="container",cu="dataType",bN=".",bH="",bp="field",g="fields",aF="form-builder-field",cn="form-builder-file-upload-field",ce="id",r="icon",ai="label",aB="name",cv="node",aN="predefinedValue",X=" ",bX="strings",aH="template",ac="templateNode",bJ="text",Y="type",m="value",z=b4.getClassName,bL=z(aF),b7=z(aF,cv),bO=z(bF,cg),bB='<input id="{id}" class="'+[b7].join(X)+'" name="{name}" type="file" value="{value}" />';var M=b4.Component.create({NAME:cn,ATTRS:{template:{valueFn:function(){return bB;}},templateNode:{valueFn:"getNode"}},CSS_PREFIX:bL,HTML_PARSER:{templateNode:bN+b7},EXTENDS:b4.FormBuilderField,prototype:{getHTML:function(){var A=this;var cz=A.get(aH);var cB=A.get(ce);var cx=A.get(ai);var L=A.get(aB);var cy=A.get(av);var cA=A.get(aN);return b4.substitute(cz,{id:cB,label:cx,name:L,value:cA});},getNode:function(){var A=this;return b4.Node.create(A.getHTML());},renderSettings:function(){var cF=this;var cB=cF.get(be);var A=cB.get(ar);var cG=cB.get(bX);var cy=cF.settingsNodesMap;if(!cF._renderedFileUploadSettings){cF._renderedFileUploadSettings=true;cF.fieldSettingsNode=b4.Node.create(C);var cD=b4.Node.create(C);var cz=b4.Node.create(aj);var L=b4.Node.create(a6);var cE=b4.Node.create(cr);L.setContent(cG[Y]);cE.setContent(cF.get(cu)||cF.get(Y));cz.append(L);cz.append(cE);cz.appendTo(cD);cF._renderSettingsFields([{type:"text",name:ai,labelText:"Label",value:cF.get(ai)},{type:"checkbox",name:W,labelText:"Show label",labelAlign:"left",value:cF.get(W)},{type:"text",name:aB,labelText:"Name",value:cF.get(aB)},{type:"checkbox",name:ao,labelText:"Required",labelAlign:"left",value:cF.get(ao)},{type:"textarea",name:u,labelText:"Tip",value:cF.get(u)}],cD);var cA=cy.labelSettingNode;cA.on({input:b4.bind(cF._onLabelInput,cF)});var cC=cy.showLabelSettingNode;cC.set(K,cF.get(W));cC.on({change:b4.bind(cF._onSettingsFieldChange,cF)});var cx=cy.requiredSettingNode;cx.set(K,cF.get(ao));cx.on({change:b4.bind(cF._onSettingsFieldChange,cF)});cF.propertiesPanel=new b4.Panel({bodyContent:cD,collapsible:true,title:"Properties"}).render();cF.fieldSettingsNode.append(cF.propertiesPanel.get(aQ));}A.setContent(cF.fieldSettingsNode);}}});b4.FormBuilderFileUploadField=M;b4.FormBuilder.types["fileupload"]=b4.FormBuilderFileUploadField;var bV=b4.Lang,aW=bV.isArray,aA=bV.isNumber,bR=bV.isString,bw=function(A){return(A instanceof b4.Node);},a5=function(A){return(A instanceof b4.NodeList);},a9=b4.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);}),T="add",bU="addNode",aQ="boundingBox",cj="button",ch="buttonType",co="contentBox",aK="container",cg="default",at="defaultLabel",cp="defaultOptions",D="defaultValue",bN=".",bd="drag",aC="dragContainer",v="dragContainerNode",bZ="dragNodesList",az="drop",bh="dropContainer",bo="dropContainerNode",bH="",bp="field",g="fields",aF="form-builder-field",N="form-builder-multiple-choice-field",r="icon",ce="id",a0="input",ah="item",ai="label",ci="multiple",aB="name",cv="node",S="option",bA="optionTemplate",ad="options",aN="predefinedValue",bs="proxy",cq="remove",bP="reset",ax="submit",X=" ",aH="template",ac="templateNode",bJ="text",Y="type",m="value",z=b4.getClassName,bu=z(bp,a0),P=z(bp,a0,bJ),l=z(bp,ad,T),ca=z(bp,ad,ah),b9=z(bp,ad,ah,a0),aO=z(bp,ad,ah,a0,ai),af=z(bp,ad,ah,a0,m),bb=z(bp,ad,ah,cq),bL=z(aF),b7=z(aF,cv),bO=z(bF,cg),ap='<div class="'+[ca,bY,p].join(X)+'">'+'<input type="text" class="'+[b9,aO,bu,P].join(X)+'" value="{label}" />'+'<input type="text" class="'+[b9,af,bu,P].join(X)+'" value="{value}" />'+'<a href="javascript:;" class="'+bb+'">&nbsp;</a>'+"</div>";
TPL_ADD='<a class="'+l+'" href="javascript:;">Add an option</a>',ENTER="ENTER";var bl=b4.Component.create({NAME:ad,ATTRS:{allowClear:{value:false},defaultLabel:{value:bH},defaultValue:{value:bH},disabled:{value:false,validator:aY},options:{value:[],getter:"_getOptions",validator:aW},addNode:{valueFn:function(){return b4.Node.create(TPL_ADD);}}},HTML_PARSER:{addNode:bN+l},UI_ATTRS:[ad,bG],EXTENDS:b4.Widget,prototype:{renderUI:function(){var A=this;var L=A.get(aQ);var cx=A.get(bU);if(!cx.inDoc()){L.append(cx);}},bindUI:function(){var A=this;var L=A.get(aQ);var cx=A.get(bU);cx.on("click",b4.bind(A._onClickAdd,A));L.delegate("click",b4.bind(A._onClickOptionRemove,A),bN+bb);L.delegate("keypress",b4.bind(A._onKeyPressOption,A),bN+b9);},add:function(cx){var A=this;var L=A.get(ad);L.push(cx);A.set(ad,L);},clear:function(){var A=this;if(A.get(ALLOW_CLEAR)){A.set(ad,[]);}},remove:function(cx){var A=this;var L=A.get(co);var cy=A._getOptionNode(cx);if(A.get(bG)){return false;}if(cy){cy.remove();}A.items=L.all(bN+ca);},_addNewOption:function(){var L=this;var cx=L.get(co);if(L.get(bG)){return false;}var cy=L._createOption({label:L.get(at),value:L.get(D)});cy=b4.Node.create(cy);cx.append(cy);var A=cy.one(a0);A.focus();A.select();L.items=cx.all(bN+ca);return cy;},_createOption:function(L){var A=this;return b4.substitute(ap,L);},_getOptionNode:function(L){var A=this;return A.items.item(L);},_getOptions:function(cx){var A=this;var L=[];if(A.items){b4.each(A.items,function(cy){var cA=cy.one(bN+aO);var cz=cy.one(bN+af);L.push({label:cA.val(),value:cz.val()});});}else{L=cx;}return L;},_indexOfTarget:function(cx){var A=this;var L=cx.ancestor(bN+ca);return A.items.indexOf(L);},_onClickAdd:function(L){var A=this;A._addNewOption();},_onClickOptionRemove:function(cy){var A=this;var cx=A.get(ad);var L=A._indexOfTarget(cy.target);A.remove(L);},_onKeyPressOption:function(cz){var A=this;var cy=A.get(ad);var cA=cz.currentTarget;var L=A.items;if(cz.isKey(ENTER)){var cx=A._indexOfTarget(cA);var cB=cA.hasClass(af);if((cx==L.size()-1)&&cB){A._addNewOption();}}},_uiSetDisabled:function(cy){var A=this;var cx=A.get(bU);var L=A.get(aQ);cx.toggleClass(ae,cy);L.all(bN+bb).toggleClass(ae,cy);if(cy){L.all(a0).setAttribute(bG,cy);}else{L.all(a0).removeAttribute(bG);}},_uiSetOptions:function(cy){var A=this;var cx=[];var L=A.get(co);L.empty();b4.each(cy,function(cz){L.append(A._createOption(cz));});A.items=L.all(bN+ca);}}});var f=b4.Component.create({NAME:N,ATTRS:{acceptChildren:{value:false,readOnly:true},options:{value:[{label:"option 1",value:"value 1"},{label:"option 2",value:"value 2"},{label:"option 3",value:"value 3"}]},optionTemplate:{value:'<option value="{value}">{label}</option>'}},UI_ATTRS:[h,aN,ai,aB,ad,W],CSS_PREFIX:bL,HTML_PARSER:{templateNode:bN+b7},EXTENDS:b4.FormBuilderField,prototype:{getNode:function(){var A=this;return b4.FormBuilderMultipleChoiceField.superclass.getNode.apply(A,arguments);},renderSettings:function(){var A=this;var L=A.get(cc);b4.FormBuilderMultipleChoiceField.superclass.renderSettings.apply(A,arguments);if(!A._renderedMultipleChoiceSettings){A._renderedMultipleChoiceSettings=true;var cy=b4.Node.create(C);A.optionsPanel=new b4.Panel({bodyContent:cy,collapsible:true,title:"Options"}).render();var cx=b4.Array.indexOf(L,ad)>-1;A.options=new bl({disabled:cx,options:A.get(ad)}).render(cy);A.fieldSettingsNode.append(A.optionsPanel.get(aQ));}},saveSettings:function(){var A=this;b4.FormBuilderMultipleChoiceField.superclass.saveSettings.apply(A,arguments);A.set(ad,A.options.get(ad));},_uiSetOptions:function(cx){var A=this;var L=A.get(ac);L.empty();b4.each(cx,function(cy){L.append(b4.substitute(A.get(bA),cy));});}}});b4.FormBuilderMultipleChoiceField=f;b4.FormBuilder.types["multiple-choice"]=b4.FormBuilderMultipleChoiceField;var bV=b4.Lang,aW=bV.isArray,aY=bV.isBoolean,aA=bV.isNumber,bR=bV.isString,aQ="boundingBox",e="bodyContent",K="checked",aw="choice",co="contentBox",aK="container",bN=".",bH="",bp="field",g="fields",aF="form-builder-field",bc="form-builder-radio-field",ce="id",r="icon",bi="inline",ai="label",c="labels",aB="name",cv="node",H="optionsContainerNode",aN="predefinedValue",V="radio",av="size",X=" ",aH="template",ac="templateNode",m="value",z=b4.getClassName,d=z(bp),b1=z(bp,aw),bL=z(aF),aP=z(aF,V),b7=z(aF,cv),b8=z(aF,ad,aK),bO=z(bF,cg),bY=z(bp,c,bi),b2='<li class="'+[G,bm,bL,aP].join(X)+'"></li>',Z='<div class="'+b8+'"></div>',aV='<input id="{id}" class="'+[b7,d,b1].join(X)+'" name="{name}" type="radio" value="{value}" {checked} />',cb='<input type="hidden" />';var i=b4.Component.create({NAME:bc,ATTRS:{name:{value:V},optionTemplate:{value:aV},template:{valueFn:function(){return aV;}},optionsContainerNode:{valueFn:function(){return b4.Node.create(Z);}},templateNode:{valueFn:"getNode"}},CSS_PREFIX:bL,HTML_PARSER:{optionsContainerNode:bN+b8,templateNode:bN+b7},EXTENDS:b4.FormBuilderMultipleChoiceField,prototype:{BOUNDING_TEMPLATE:b2,renderUI:function(){var A=this;var L=A.get(co);var cx=A.get(H);b4.FormBuilderRadioField.superclass.renderUI.apply(A,arguments);L.append(cx);},getNode:function(){var A=this;return b4.Node.create(cb);},_onFieldChange:function(L){var A=this;var cx=L.target;A.set(aN,cx.val());},_uiSetDisabled:function(cx){var A=this;var L=A.get(H);L.all(a0).each(function(cy){if(cx){cy.setAttribute(bG,cx);}else{cy.removeAttribute(bG);}});},_uiSetOptions:function(cz){var A=this;var L=A.get(co);var cy=A.get(H);var cx=A.get(ac);cy.empty();b4.each(cz,function(cC){var cB=new b4.Field({type:V,disabled:A.get(bG),name:A.get(aB),labelText:cC.label,labelAlign:"left",value:cC.value}).render(cy);var cA=cB.get(cv);if(cC.value==A.get(aN)){cA.set(K,true);}if(A.get(bG)){cA.setAttribute(bG,cz);}else{cA.removeAttribute(bG);}cA.on({change:b4.bind(A._onFieldChange,A)});});},_uiSetPredefinedValue:function(cz){var A=this;var L=A.get(be);var cx=L.get(ar);var cy=cx.one("input[name=predefinedValue]");if(cy){cy.val(cz);}}}});b4.FormBuilderRadioField=i;b4.FormBuilder.types["radio"]=b4.FormBuilderRadioField;var bV=b4.Lang,aW=bV.isArray,aA=bV.isNumber,bR=bV.isString,bw=function(A){return(A instanceof b4.Node);
},a5=function(A){return(A instanceof b4.NodeList);},a9=b4.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);}),aQ="boundingBox",cj="button",ch="buttonType",co="contentBox",aK="container",cp="defaultOptions",bN=".",bd="drag",aC="dragContainer",v="dragContainerNode",bZ="dragNodesList",az="drop",bh="dropContainer",bo="dropContainerNode",bH="",bp="field",g="fields",aF="form-builder-field",b3="form-builder-select-field",ce="id",r="icon",a0="input",ai="label",ci="multiple",aB="name",cv="node",S="option",ad="options",ba="portalLayout",aN="predefinedValue",bs="proxy",bP="reset",bW="selectedIndex",ax="submit",X=" ",aH="template",ac="templateNode",bJ="text",Y="type",m="value",z=b4.getClassName,bu=z(bp,a0),P=z(bp,a0,bJ),bL=z(aF),b7=z(aF,cv),bO=z(bF,cg),bD='<select id="{id}" class="'+[b7].join(X)+'" name="{name}" value="{value}"></select>';var ag=b4.Component.create({NAME:b3,ATTRS:{multiple:{setter:b4.DataType.Boolean.parse,value:false},template:{valueFn:function(){return bD;}},templateNode:{valueFn:"getNode"}},UI_ATTRS:b4.FormBuilderField.UI_ATTRS.concat([ci]),CSS_PREFIX:bL,HTML_PARSER:{templateNode:bN+b7},EXTENDS:b4.FormBuilderMultipleChoiceField,prototype:{getHTML:function(){var A=this;var cy=A.get(aH);var cA=A.get(ce);var cx=A.get(ai);var L=A.get(aB);var cz=A.get(aN);return b4.substitute(cy,{id:cA,label:cx,name:L,value:cz});},getNode:function(){var A=this;return b4.Node.create(A.getHTML());},renderSettings:function(){var L=this;var cx=L.get(be);var cz=cx.get(ar);var cA=L.settingsNodesMap;b4.FormBuilderSelectField.superclass.renderSettings.apply(L,arguments);if(!L._renderedSelectSettings){L._renderedSelectSettings=true;var cy=L.propertiesPanel.get(e);L._renderSettingsFields([{type:"checkbox",name:ci,labelText:"Multiple",labelAlign:"left"}],cy.item(0));var A=cA["multipleSettingNode"];A.on({change:b4.bind(L._onSettingsFieldChange,L)});A.set(K,L.get(ci));}},_uiSetMultiple:function(cx){var A=this;var L=A.get(ac);if(cx){L.setAttribute(ci,ci);}else{L.removeAttribute(ci);}}}});b4.FormBuilderSelectField=ag;b4.FormBuilder.types["select"]=b4.FormBuilderSelectField;var bV=b4.Lang,aW=bV.isArray,aA=bV.isNumber,bR=bV.isString,bw=function(A){return(A instanceof b4.Node);},a5=function(A){return(A instanceof b4.NodeList);},aQ="boundingBox",co="contentBox",aK="container",bN=".",bd="drag",aC="dragContainer",v="dragContainerNode",bZ="dragNodesList",az="drop",bh="dropContainer",bo="dropContainerNode",bH="",bp="field",g="fields",aF="form-builder-field",a1="form-builder-input-field",ce="id",r="icon",a0="input",ai="label",aB="name",cv="node",ba="portalLayout",aN="predefinedValue",bs="proxy",X=" ",aH="template",ac="templateNode",bJ="text",m="value",by="width",z=b4.getClassName,bu=z(bp,a0),P=z(bp,a0,bJ),bL=z(aF),b7=z(aF,cv),bO=z(bF,cg),bI='<input id="{id}" class="'+[b7,bu,P].join(X)+'" name="{name}" type="text" value="{value}" />',aI={small:25,medium:50,large:100};var bx=b4.Component.create({NAME:a1,ATTRS:{template:{valueFn:function(){return bI;}},templateNode:{valueFn:"getNode"},width:{setter:b4.DataType.String.evaluate,value:25}},CSS_PREFIX:bL,HTML_PARSER:{templateNode:bN+b7},EXTENDS:b4.FormBuilderField,prototype:{bindUI:function(){var A=this;b4.FormBuilderTextField.superclass.bindUI.apply(A,arguments);var L=A.get(ac);L.on({input:b4.bind(A._onValueInput,A)});},getHTML:function(){var A=this;var cz=A.get(aH);var cB=A.get(ce);var cx=A.get(ai);var L=A.get(aB);var cA=A.get(aN);var cy=A.get(by);return b4.substitute(cz,{id:cB,label:cx,name:L,value:cA,width:cy});},getNode:function(){var A=this;return b4.Node.create(A.getHTML());},renderSettings:function(){var cD=this;var cC=cD.get(be);var cx=cC.get(ar);var cB=cD.settingsNodesMap;var cE=cC.get(bX);b4.FormBuilderTextField.superclass.renderSettings.apply(cD,arguments);if(!cD._renderedInputSettings){cD._renderedInputSettings=true;var cz=cD.propertiesPanel.get(e);var A=0;var cA=-1;var cy=[];b4.each(aI,function(cH,cG){if(cH==cD.get(by)){cA=A;}cy.push({labelText:cE[cG],value:cH});A++;});cD._renderSettingsFields([{labelText:"Width",name:by,options:cy,type:"select",value:cD.get(by)}],cz.item(0));var L=cB["predefinedValueSettingNode"];L.on({input:b4.bind(cD._onValueInput,cD)});var cF=cB["widthSettingNode"];cF.on({change:b4.bind(cD._onWidthChange,cD)});cF.all(S).item(cA).set(bf,true);}},_onValueInput:function(L){var A=this;var cx=L.target;A.set(aN,cx.val());},_onWidthChange:function(L){var A=this;var cx=L.target;A.set(by,cx.val());},_uiSetWidth:function(cx){var A=this;var L=A.get(ac);L.addClass(z("w"+cx));L.removeClass(z("w"+A.prevWidth));A.prevWidth=cx;}}});b4.FormBuilderTextField=bx;b4.FormBuilder.types["text"]=b4.FormBuilderTextField;var bV=b4.Lang,aW=bV.isArray,aA=bV.isNumber,bR=bV.isString,aQ="boundingBox",co="contentBox",aK="container",bN=".",bd="drag",aC="dragContainer",v="dragContainerNode",bZ="dragNodesList",az="drop",bh="dropContainer",bo="dropContainerNode",bH="",bp="field",g="fields",aF="form-builder-field",ck="form-builder-textarea-field",ce="id",r="icon",ai="label",aB="name",cv="node",ba="portalLayout",aN="predefinedValue",bs="proxy",av="size",X=" ",aH="template",ac="templateNode",bJ="text",aq="textarea",m="value",z=b4.getClassName,d=z(bp),bt=z(bp,bJ),O=z(bp,aq),bL=z(aF),b7=z(aF,cv),bO=z(bF,cg),al='<textarea id="{id}" class="'+[b7,d,bt,O].join(X)+'" name="{name}">{value}</textarea>';var aL=b4.Component.create({NAME:ck,ATTRS:{template:{valueFn:function(){return al;}},templateNode:{valueFn:"getNode"}},CSS_PREFIX:bL,HTML_PARSER:{templateNode:bN+b7},EXTENDS:b4.FormBuilderTextField,prototype:{getHTML:function(){var A=this;var cz=A.get(aH);var cB=A.get(ce);var cx=A.get(ai);var L=A.get(aB);var cy=A.get(av);var cA=A.get(aN);return b4.substitute(cz,{id:cB,label:cx,name:L,value:cA});},getNode:function(){var A=this;return b4.Node.create(A.getHTML());}}});b4.FormBuilderTextAreaField=aL;b4.FormBuilder.types["textarea"]=b4.FormBuilderTextAreaField;},"@VERSION@",{requires:["aui-datatype","aui-form","aui-panel","aui-tooltip","io","substitute"],skinnable:true});