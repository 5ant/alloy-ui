AUI.add("aui-form-builder-field",function(bK){var bE=bK.Lang,aG=bE.isArray,ah=bE.isString,c="acceptChildren",az="boundingBox",bS="builder",b0="button",C="buttons",b5="buttonsNode",bf="checkbox",D="checked",ca="children",bW="clearfix",aA="close",aC="component",b4="contentBox",ba="container",n="dataType",y="default",aI="delete",by=".",aS="drag",bj="dragContainer",b6="dragContainerNode",ad="dragNodesList",ar="drop",aK="dropContainer",a4="dropContainerNode",W="dropNode",aB="dropZone",aZ="dropZoneNode",bh="duplicate",G="edit",bo="",a5="field",f="fields",bu="for",r="form",aQ="formBuilder",be="form-builder-field",o="helper",am="hidden",q="icon",bV="id",aa="label",Y="labelNode",aX="metadata",at="name",cc="node",a="panel",aR="portalLayout",a9="predefinedValue",a6="proxy",aj="required",bp="state",a1="settings",ak="settingsFormNode",bO="showLabel",ao="size",P=" ",ai="string",ae="strings",bM="templateNode",br="text",O="type",bg="unique",bB="zone",aJ="widget",w=bK.getClassName,a3=w(aC),bc=w(a5,aa),b8=w(o,bW),V=w(o,am),bx=w(bp,y),b=w(a5),bb=w(a5,br),x=w(r,bS,b0),an=w(r,bS,b0,aI),aW=w(r,bS,b0,bh),H=w(r,bS,b0,G),cb=w(r,bS,q),i=w(r,bS,q,aI),t=w(r,bS,q,bh),bG=w(r,bS,q,G),bt=w(r,bS,a5),bi=w(r,bS,a5,C),a0=w(r,bS,ar,cc),bC=w(r,bS,ar,bB),bq=w(r,bS,bg),bU=w(aJ),bI='<li class="'+[bU,a3,bt].join(P)+'"></li>',l='<div class="'+[bi,V].join(P)+'">'+'<a class="'+[x,H].join(P)+'" href="javascript:;" title="Edit">'+'<div class="'+[cb,bG].join(P)+'"></div>'+"</a>"+'<a class="'+[x,aW].join(P)+'" href="javascript:;" title="Duplicate">'+'<div class="'+[cb,t].join(P)+'"></div>'+"</a>"+'<a class="'+[x,an].join(P)+'" href="javascript:;" title="Delete">'+'<div class="'+[cb,i].join(P)+'"></div>'+"</a>"+"</div>",bX='<div class="'+b8+'"></div>',U='<ul class="'+bC+'"></ul>',ab='<span class="'+[b,bb].join(P)+'"></span>',aO='<label class="'+bc+'"></label>',b9="<p></p>";var b7=bK.Component.create({NAME:be,ATTRS:{acceptChildren:{value:true},dataType:{value:ai},key:{value:bo},formBuilder:{value:undefined},id:{value:bo},icon:{value:bo},label:{value:bo},name:{valueFn:function(){var A=this;return A.get(O)+(++bK.Env._uidx);}},parent:{value:null},predefinedValue:{value:bo},required:{setter:bK.DataType.Boolean.parse,value:false},selected:{setter:bK.DataType.Boolean.parse,value:false},showLabel:{setter:bK.DataType.Boolean.parse,value:true},template:{value:bo},type:{value:bo},unique:{setter:bK.DataType.Boolean.parse,value:false},buttonsNode:{valueFn:function(){return bK.Node.create(l);}},dropZoneNode:{valueFn:function(){return bK.Node.create(U);}},labelNode:{valueFn:function(){return bK.Node.create(aO);}},templateNode:{valueFn:"getNode"}},AUGMENTS:[bK.FormBuilderFieldSupport],UI_ATTRS:[c,a9,aa,at,bO,bg],HTML_PARSER:{buttonsNode:by+bi,dropZoneNode:by+bC,labelNode:aa+by+bc},prototype:{BOUNDING_TEMPLATE:bI,initializer:function(){var A=this;A.get(az).setData(a5,A);},bindUI:function(){var A=this;},renderUI:function(){var A=this;var cg=A.get(az);var ch=A.get(b5);var L=A.get(b4);var cf=A.get(Y);var ce=A.get(bM);if(!cg.contains(ch)){cg.prepend(ch);}if(!L.contains(cf)){L.append(cf);cf.setAttribute(bu,ce.get(bV));}if(!L.contains(ce)){L.append(ce);}},saveSettings:function(){var A=this;var L=A.get(aQ);var ce=L.get(ak);bK.Array.each(bK.io._serialize(ce._node).split("&"),function(cf){var cg=cf.split("=");A.set(cg[0],decodeURIComponent(cg[1]));});},renderSettings:function(){var cl=this;var ce=cl.get(aQ);var A=ce.get(ak);var cm=ce.get(ae);if(!cl.fieldSettingsNode){cl.fieldSettingsNode=bK.Node.create(bX);var ch=bK.Node.create(bX);var cj=bK.Node.create(ab);var ck=bK.Node.create(aO);ck.setContent(cm[O]);var cf=bK.Node.create(b9);var ci=cl.get(n)||cl.get(O);cf.setContent(ci);cj.append(ck);cj.append(cf);cj.appendTo(ch);cl.labelField=new bK.Field({type:"text",name:aa,labelText:"Label",value:cl.get(aa)}).render(ch);cl.labelField.get(cc).on({keyup:bK.bind(cl._onLabelKeyUp,cl)});cl.showLabelField=new bK.Field({type:"checkbox",name:bO,labelText:"Show label",labelAlign:"left",value:cl.get(bO)}).render(ch);var cg=cl.showLabelField.get(cc);cg.set(D,cl.get(bO));cg.on({change:bK.bind(cl._onSettingsFieldChange,cl)});cl._renderSettingsFields([{type:"text",name:at,labelText:"Name",value:cl.get(at)},{type:"text",name:a9,labelText:"Default value",value:cl.get(a9)}],ch);cl.requiredField=new bK.Field({type:"checkbox",name:aj,labelText:"Required",labelAlign:"left",value:aj}).render(ch);var L=cl.requiredField.get(cc);L.set(D,cl.get(aj));L.on({change:bK.bind(cl._onSettingsFieldChange,cl)});cl.propertiesPanel=new bK.Panel({bodyContent:ch,collapsible:true,title:"Properties"}).render();cl.fieldSettingsNode.append(cl.propertiesPanel.get(az));}A.setContent(cl.fieldSettingsNode);},getHTML:function(){},getNode:function(){},_onLabelKeyUp:function(L){var A=this;var cf=L.target;var ce=cf.val();A.set(aa,ce);},_onSettingsFieldChange:function(L){var A=this;var cf=L.target;var ce=cf.val();if(cf.get(O)==bf){ce=cf.get(D);}A.set(cf.get(at),ce);},_renderSettingsFields:function(ce,L){var A=this;bK.each(ce,function(cg){var ch=new bK.Field(cg).render(L);var cf=ch.get(cc);if(cg.type==bf){cf.set(D,cg.value);}A[cg.name+"Field"]=ch;});},_uiSetAcceptChildren:function(cg){var A=this;var ce=A.get(az);var cf=A.get(aZ);var L=ce.one(by+bC);if(cg&&!L){ce.append(cf);}else{if(!cg&&L){L.remove();}else{if(cg&&L){A.set(aZ,L);}}}},_uiSetLabel:function(ce){var A=this;var L=A.get(Y);L.setContent(ce);},_uiSetName:function(ce){var A=this;var L=A.get(bM);L.set(at,ce);},_uiSetPredefinedValue:function(ce){var A=this;var L=A.get(bM);L.val(ce);},_uiSetShowLabel:function(ce){var A=this;var L=A.get(Y);L.toggleClass(V,!ce);},_uiSetUnique:function(cf){var A=this;var L=A.get(az);var ce=A.get(b5);L.toggleClass(bq,cf);ce.one(by+aW).toggleClass(V,cf);}}});bK.FormBuilderField=b7;bK.FormBuilder.types["field"]=bK.FormBuilderField;var bE=bK.Lang,aG=bE.isArray,bl=bE.isNumber,ah=bE.isString,av=function(A){return(A instanceof bK.Node);},aP=function(A){return(A instanceof bK.NodeList);},aV=bK.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);
}),az="boundingBox",b0="button",bY="buttonType",b4="contentBox",ba="container",by=".",aS="drag",bj="dragContainer",b6="dragContainerNode",ad="dragNodesList",ar="drop",aK="dropContainer",a4="dropContainerNode",bo="",a5="field",f="fields",be="form-builder-field",ag="form-builder-button-field",bV="id",q="icon",aL="input",aa="label",at="name",cc="node",bP="option",bN="options",aR="portalLayout",a9="predefinedValue",a6="proxy",bz="reset",aY="selected",bD="selectedIndex",bn="submit",P=" ",ae="strings",bd="template",bM="templateNode",br="text",O="type",m="value",w=bK.getClassName,aw=w(a5,aL),bR=w(a5,aL,br),bt=w(be),Q=w(be,cc),bx=w(bp,y),bs='<input id="{id}" class="'+[Q,aw].join(P)+'" name="{name}" type="{type}" value="{value}" />',cd=[bn,bz,b0];var S=bK.Component.create({NAME:ag,ATTRS:{acceptChildren:{value:false,readOnly:true},buttonType:{value:bn,validator:function(A){return bK.Array(cd).indexOf(A.toLowerCase())>-1;}},predefinedValue:{value:aV(bn)},showLabel:{value:false},strings:{value:{button:"Button",reset:"Reset",submit:"Submit"}},template:{valueFn:function(){return bs;}}},UI_ATTRS:[c,a9,aa,at,bY,bO],CSS_PREFIX:bt,HTML_PARSER:{templateNode:by+Q},EXTENDS:bK.FormBuilderField,prototype:{getHTML:function(){var A=this;var ce=A.get(bd);var ci=A.get(bV);var cg=A.get(aa);var cf=A.get(at);var L=A.get(bY);var ch=A.get(a9);return bK.substitute(ce,{id:ci,label:cg,name:cf,type:L,value:ch});},getNode:function(){var A=this;return bK.Node.create(A.getHTML());},renderSettings:function(){var ci=this;var L=ci.get(aQ);var A=L.get(ak);var ch=ci.get(bY);var cj=ci.get(ae);bK.FormBuilderButtonField.superclass.renderSettings.apply(ci,arguments);if(!ci._renderedButtonSettings){ci._renderedButtonSettings=true;var cg=ci.propertiesPanel.get(d);var cl=[];bK.each(cd,function(cm){cl.push({labelText:cj[cm],value:cm});});var ck=new bK.Select({labelText:"Button type",name:bY,options:cl}).render(cg.item(0));var ce=ck.get(cc);ce.on({change:bK.bind(ci._onButtonTypeChange,ci)});var cf=bK.Array(cd).indexOf(ch);ce.all(bP).item(cf).set(aY,true);}},_onButtonTypeChange:function(L){var A=this;var ce=L.target;A.set(bY,ce.get(m));},_uiSetButtonType:function(ce){var A=this;var L=A.get(bM);L.set(O,ce);}}});bK.FormBuilderButtonField=S;bK.FormBuilder.types["button"]=bK.FormBuilderButtonField;var bE=bK.Lang,aG=bE.isArray,a2=bE.isBoolean,bl=bE.isNumber,ah=bE.isString,aE="boolean",az="boundingBox",d="bodyContent",bf="checkbox",D="checked",aq="choice",b4="contentBox",ba="container",by=".",aS="drag",bj="dragContainer",b6="dragContainerNode",ad="dragNodesList",ar="drop",aK="dropContainer",a4="dropContainerNode",bo="",a5="field",f="fields",be="form-builder-field",b1="form-builder-checkbox-field",bV="id",q="icon",aM="inline",aa="label",g="labels",at="name",cc="node",aR="portalLayout",a9="predefinedValue",a6="proxy",ao="size",P=" ",bd="template",bM="templateNode",m="value",w=bK.getClassName,b=w(a5),bA=w(a5,bf),bH=w(a5,aq),bt=w(be),b2=w(be,bf),Q=w(be,cc),bx=w(bp,y),ac=w(a5,g,aM),bI='<li class="'+[bU,a3,bt,b2].join(P)+'"></li>',aD='<input id="{id}" class="'+[Q,b,bA,bH].join(P)+'" name="{name}" type="checkbox" value="{value}" {checked} />';var T=bK.Component.create({NAME:b1,ATTRS:{dataType:{value:aE},predefinedValue:{setter:bK.DataType.Boolean.parse,value:false},template:{valueFn:function(){return aD;}},templateNode:{valueFn:"getNode"}},UI_ATTRS:[c,a9,aa,at,bO],CSS_PREFIX:bt,HTML_PARSER:{templateNode:by+Q},EXTENDS:bK.FormBuilderField,prototype:{BOUNDING_TEMPLATE:bI,bindUI:function(){var A=this;bK.FormBuilderCheckBoxField.superclass.bindUI.apply(A,arguments);var L=A.get(bM);L.on({"change":bK.bind(A._onValueChange,A)});},renderUI:function(){var A=this;var L=A.get(b4);var ce=A.get(bM);var cf=A.get(Y);bK.FormBuilderCheckBoxField.superclass.renderUI.apply(A,arguments);cf.insert(ce,cf,"before");},getHTML:function(){var A=this;var L=A.get(bd);var cg=A.get(D);var ci=A.get(bV);var cf=A.get(aa);var ce=A.get(at);var ch=A.get(a9);return bK.substitute(L,{checked:cg?'checked="checked"':bo,id:ci,label:cf,name:ce,value:ch});},getNode:function(){var A=this;return bK.Node.create(A.getHTML());},renderSettings:function(){var L=this;var cf=L.get(aQ);var cg=cf.get(ak);bK.FormBuilderCheckBoxField.superclass.renderSettings.apply(L,arguments);if(!L._renderedCheckboxSettings){L._renderedCheckboxSettings=true;L.predefinedValueField.destroy();var A=L.propertiesPanel.get(d);var ce=new bK.Field({type:"checkbox",name:a9,labelText:"Checked",labelAlign:"left"}).render(A.item(0));L.checkedFieldNode=ce.get(cc);L.checkedFieldNode.on({change:bK.bind(L._onValueChange,L)});L.checkedFieldNode.set(D,L.get(a9));}},_onValueChange:function(L){var A=this;var ce=L.target;A.set(a9,ce.get(D));},_uiSetPredefinedValue:function(cf){var A=this;var ce=A.get(bM);var L=A.checkedFieldNode;if(L){L.set(D,cf);}ce.set(D,cf);}}});bK.FormBuilderCheckBoxField=T;bK.FormBuilder.types["checkbox"]=bK.FormBuilderCheckBoxField;var bE=bK.Lang,aG=bE.isArray,bl=bE.isNumber,ah=bE.isString,av=function(A){return(A instanceof bK.Node);},aP=function(A){return(A instanceof bK.NodeList);},az="boundingBox",b4="contentBox",ba="container",n="dataType",by=".",ar="drop",bo="",a5="field",f="fields",be="form-builder-field",B="form-builder-fieldset-field",bV="id",q="icon",aa="label",at="name",cc="node",a9="predefinedValue",P=" ",ae="strings",bd="template",bM="templateNode",br="text",O="type",m="value",bB="zone",w=bK.getClassName,bt=w(be),Q=w(be,cc),bC=w(r,bS,ar,bB),a8='<fieldset id="{id}" class="'+[Q].join(P)+'"></fieldset>',j='<legend class="'+bc+'"></legend>';var u=bK.Component.create({NAME:B,ATTRS:{acceptChildren:{value:true,readOnly:true},dataType:{value:undefined},template:{valueFn:function(){return a8;}},labelNode:{valueFn:function(){return bK.Node.create(j);}},templateNode:{valueFn:"getNode"}},UI_ATTRS:[c,aa,bO],CSS_PREFIX:bt,HTML_PARSER:{templateNode:by+Q},EXTENDS:bK.FormBuilderField,prototype:{CONTENT_TEMPLATE:a8,renderUI:function(){var A=this;var cg=A.get(az);var ch=A.get(b5);var L=A.get(b4);var cf=A.get(Y);var ce=A.get(bM);if(!cg.contains(ch)){cg.prepend(ch);
}if(!L.contains(cf)){L.append(cf);}},getHTML:function(){var A=this;var L=A.get(bd);var ce=A.get(bV);return bK.substitute(L,{id:ce});},getNode:function(){var A=this;return bK.Node.create(A.getHTML());},renderSettings:function(){var ck=this;var L=ck.get(aQ);var A=L.get(ak);var cl=L.get(ae);if(!ck._renderedFieldsetSettings){ck._renderedFieldsetSettings=true;ck.fieldSettingsNode=bK.Node.create(bX);var cg=bK.Node.create(bX);var ci=bK.Node.create(ab);var cj=bK.Node.create(aO);cj.setContent(cl[O]);var ce=bK.Node.create(b9);var ch=ck.get(n)||ck.get(O);ce.setContent(ch);ci.append(cj);ci.append(ce);ci.appendTo(cg);ck.labelField=new bK.Field({type:"text",name:aa,labelText:"Label",value:ck.get(aa)}).render(cg);ck.labelField.get(cc).on({keyup:bK.bind(ck._onLabelKeyUp,ck)});ck.showLabelField=new bK.Field({type:"checkbox",name:bO,labelText:"Show label",labelAlign:"left",value:ck.get(bO)}).render(cg);var cf=ck.showLabelField.get(cc);cf.set(D,ck.get(bO));cf.on({change:bK.bind(ck._onSettingsFieldChange,ck)});ck.propertiesPanel=new bK.Panel({bodyContent:cg,collapsible:true,title:"Properties"}).render();ck.fieldSettingsNode.append(ck.propertiesPanel.get(az));}A.setContent(ck.fieldSettingsNode);},_uiSetAcceptChildren:function(cg){var A=this;var L=A.get(b4);var cf=A.get(aZ);var ce=L.one(by+bC);if(cg&&!ce){L.append(cf);}else{if(!cg&&ce){ce.remove();}else{if(cg&&ce){A.set(aZ,ce);}}}}}});bK.FormBuilderFieldsetField=u;bK.FormBuilder.types["fieldset"]=bK.FormBuilderFieldsetField;var bE=bK.Lang,aG=bE.isArray,bl=bE.isNumber,ah=bE.isString,av=function(A){return(A instanceof bK.Node);},aP=function(A){return(A instanceof bK.NodeList);},az="boundingBox",b4="contentBox",ba="container",n="dataType",by=".",bo="",a5="field",f="fields",be="form-builder-field",b3="form-builder-file-upload-field",bV="id",q="icon",aa="label",at="name",cc="node",a9="predefinedValue",P=" ",ae="strings",bd="template",bM="templateNode",br="text",O="type",m="value",w=bK.getClassName,bt=w(be),Q=w(be,cc),bx=w(bp,y),bm='<input id="{id}" class="'+[Q].join(P)+'" name="{name}" type="file" value="{value}" />';var E=bK.Component.create({NAME:b3,ATTRS:{template:{valueFn:function(){return bm;}},templateNode:{valueFn:"getNode"}},UI_ATTRS:[c,a9,aa,at,bO],CSS_PREFIX:bt,HTML_PARSER:{templateNode:by+Q},EXTENDS:bK.FormBuilderField,prototype:{getHTML:function(){var A=this;var L=A.get(bd);var ci=A.get(bV);var cf=A.get(aa);var ce=A.get(at);var cg=A.get(ao);var ch=A.get(a9);return bK.substitute(L,{id:ci,label:cf,name:ce,value:ch});},getNode:function(){var A=this;return bK.Node.create(A.getHTML());},renderSettings:function(){var ck=this;var L=ck.get(aQ);var A=L.get(ak);var cl=L.get(ae);if(!ck._renderedFileUploadSettings){ck._renderedFileUploadSettings=true;ck.fieldSettingsNode=bK.Node.create(bX);var cg=bK.Node.create(bX);var ci=bK.Node.create(ab);var cj=bK.Node.create(aO);cj.setContent(cl[O]);var ce=bK.Node.create(b9);var ch=ck.get(n)||ck.get(O);ce.setContent(ch);ci.append(cj);ci.append(ce);ci.appendTo(cg);ck.labelField=new bK.Field({type:"text",name:aa,labelText:"Label",value:ck.get(aa)}).render(cg);ck.labelField.get(cc).on({keyup:bK.bind(ck._onLabelKeyUp,ck)});ck.showLabelField=new bK.Field({type:"checkbox",name:bO,labelText:"Show label",labelAlign:"left",value:ck.get(bO)}).render(cg);var cf=ck.showLabelField.get(cc);cf.set(D,ck.get(bO));cf.on({change:bK.bind(ck._onSettingsFieldChange,ck)});ck._renderSettingsFields([{type:"text",name:at,labelText:"Name",value:ck.get(at)},{type:"checkbox",name:aj,labelText:"Required",labelAlign:"left",value:ck.get(aj)}],cg);ck.propertiesPanel=new bK.Panel({bodyContent:cg,collapsible:true,title:"Properties"}).render();ck.fieldSettingsNode.append(ck.propertiesPanel.get(az));}A.setContent(ck.fieldSettingsNode);}}});bK.FormBuilderFileUploadField=E;bK.FormBuilder.types["fileupload"]=bK.FormBuilderFileUploadField;var bE=bK.Lang,aG=bE.isArray,bl=bE.isNumber,ah=bE.isString,av=function(A){return(A instanceof bK.Node);},aP=function(A){return(A instanceof bK.NodeList);},aV=bK.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);}),I="add",af="addNode",az="boundingBox",b0="button",bY="buttonType",b4="contentBox",ba="container",y="default",al="defaultLabel",s="defaultOptions",z="defaultValue",by=".",aS="drag",bj="dragContainer",b6="dragContainerNode",ad="dragNodesList",ar="drop",aK="dropContainer",a4="dropContainerNode",bo="",a5="field",f="fields",be="form-builder-field",F="form-builder-multiple-choice-field",q="icon",bV="id",aL="input",Z="item",aa="label",bZ="multiple",at="name",cc="node",bP="option",bk="optionTemplate",bN="options",a9="predefinedValue",a6="proxy",p="remove",bz="reset",bn="submit",P=" ",bd="template",bM="templateNode",br="text",O="type",m="value",w=bK.getClassName,aw=w(a5,aL),bR=w(a5,aL,br),k=w(a5,bN,I),M=w(a5,bN,Z),K=w(a5,bN,Z,aL),a7=w(a5,bN,Z,aL,aa),bL=w(a5,bN,Z,aL,m),aU=w(a5,bN,Z,p),bt=w(be),Q=w(be,cc),bx=w(bp,y),bw='<div class="'+[M,ac,b8].join(P)+'">'+'<input type="text" class="'+[K,a7,aw,bR].join(P)+'" value="{label}" />'+'<input type="text" class="'+[K,bL,aw,bR].join(P)+'" value="{value}" />'+'<a href="javascript:;" class="'+aU+'">&nbsp;</a>'+"</div>";TPL_ADD='<a class="'+k+'" href="javascript:;">Add an option</a>',ENTER="ENTER";var aH=bK.Component.create({NAME:bN,ATTRS:{allowClear:{value:false},defaultLabel:{value:bo},defaultValue:{value:bo},options:{value:[],getter:"_getOptions",validator:aG},addNode:{valueFn:function(){return bK.Node.create(TPL_ADD);}}},HTML_PARSER:{addNode:by+k},UI_ATTRS:[bN],EXTENDS:bK.Widget,prototype:{renderUI:function(){var A=this;var L=A.get(az);var ce=A.get(af);if(!ce.inDoc()){L.append(ce);}},bindUI:function(){var A=this;var L=A.get(az);var ce=A.get(af);ce.on("click",bK.bind(A._onClickAdd,A));L.delegate("click",bK.bind(A._onClickOptionRemove,A),by+aU);L.delegate("keypress",bK.bind(A._onKeyPressOption,A),by+K);},add:function(L){var A=this;var ce=A.get(bN);ce.push(L);A.set(bN,ce);},clear:function(){var A=this;if(A.get(ALLOW_CLEAR)){A.set(bN,[]);}},remove:function(ce){var A=this;var L=A.get(b4);
var cf=A._getOptionNode(ce);if(cf){cf.remove();}A.items=L.all(by+M);},_addNewOption:function(){var L=this;var ce=L.get(b4);var cf=L._createOption({label:L.get(al),value:L.get(z)});cf=bK.Node.create(cf);ce.append(cf);var A=cf.one(aL);A.focus();A.select();L.items=ce.all(by+M);return cf;},_createOption:function(L){var A=this;return bK.substitute(bw,L);},_getOptionNode:function(L){var A=this;return A.items.item(L);},_getOptions:function(ce){var A=this;var L=[];if(A.items){bK.each(A.items,function(cf){var ch=cf.one(by+a7);var cg=cf.one(by+bL);L.push({label:ch.val(),value:cg.val()});});}else{L=ce;}return L;},_indexOfTarget:function(ce){var A=this;var L=ce.ancestor(by+M);return A.items.indexOf(L);},_onClickAdd:function(L){var A=this;A._addNewOption();},_onClickOptionRemove:function(cf){var A=this;var ce=A.get(bN);var L=A._indexOfTarget(cf.target);A.remove(L);},_onKeyPressOption:function(cg){var A=this;var cf=A.get(bN);var ci=cg.currentTarget;var L=A.items;if(cg.isKey(ENTER)){var ce=A._indexOfTarget(ci);var ch=ci.hasClass(bL);if((ce==L.size()-1)&&ch){A._addNewOption();}}},_uiSetOptions:function(cf){var A=this;var ce=[];var L=A.get(b4);L.empty();bK.each(cf,function(cg){L.append(A._createOption(cg));});A.items=L.all(by+M);}}});var e=bK.Component.create({NAME:F,ATTRS:{acceptChildren:{value:false,readOnly:true},options:{value:[{label:"option 1",value:"value 1"},{label:"option 2",value:"value 2"},{label:"option 3",value:"value 3"}]},optionTemplate:{value:'<option value="{value}">{label}</option>'}},UI_ATTRS:[c,a9,aa,at,bN,bO],CSS_PREFIX:bt,HTML_PARSER:{templateNode:by+Q},EXTENDS:bK.FormBuilderField,prototype:{initializer:function(){var A=this;bK.FormBuilderMultipleChoiceField.superclass.initializer.apply(A,arguments);},getNode:function(){var A=this;return bK.FormBuilderMultipleChoiceField.superclass.getNode.apply(A,arguments);},renderSettings:function(){var A=this;bK.FormBuilderMultipleChoiceField.superclass.renderSettings.apply(A,arguments);if(!A._renderedMultipleChoiceSettings){A._renderedMultipleChoiceSettings=true;var L=bK.Node.create(bX);A.optionsPanel=new bK.Panel({bodyContent:L,collapsible:true,title:"Options"}).render();A.options=new aH({options:A.get(bN)}).render(L);A.fieldSettingsNode.append(A.optionsPanel.get(az));}},saveSettings:function(){var A=this;bK.FormBuilderMultipleChoiceField.superclass.saveSettings.apply(A,arguments);A.set(bN,A.options.get(bN));},_uiSetOptions:function(ce){var A=this;var L=A.get(bM);L.empty();bK.each(ce,function(cf){L.append(bK.substitute(A.get(bk),cf));});}}});bK.FormBuilderMultipleChoiceField=e;bK.FormBuilder.types["multiple-choice"]=bK.FormBuilderMultipleChoiceField;var bE=bK.Lang,aG=bE.isArray,a2=bE.isBoolean,bl=bE.isNumber,ah=bE.isString,az="boundingBox",d="bodyContent",D="checked",aq="choice",b4="contentBox",ba="container",by=".",bo="",a5="field",f="fields",be="form-builder-field",aT="form-builder-radio-field",bV="id",q="icon",aM="inline",aa="label",g="labels",at="name",cc="node",bT="optionsContainerNode",a9="predefinedValue",J="radio",ao="size",P=" ",bd="template",bM="templateNode",m="value",w=bK.getClassName,b=w(a5),bH=w(a5,aq),bt=w(be),ay=w(be,J),Q=w(be,cc),N=w(be,bN,ba),bx=w(bp,y),ac=w(a5,g,aM),bI='<li class="'+[bU,a3,bt,ay].join(P)+'"></li>',R='<div class="'+N+'"></div>',aF='<input id="{id}" class="'+[Q,b,bH].join(P)+'" name="{name}" type="radio" value="{value}" {checked} />';var h=bK.Component.create({NAME:aT,ATTRS:{name:{value:J},optionTemplate:{value:aF},template:{valueFn:function(){return aF;}},optionsContainerNode:{valueFn:function(){return bK.Node.create(R);}},templateNode:{valueFn:"getNode"}},UI_ATTRS:[c,a9,aa,at,bO,bN],CSS_PREFIX:bt,HTML_PARSER:{optionsContainerNode:by+N,templateNode:by+Q},EXTENDS:bK.FormBuilderMultipleChoiceField,prototype:{BOUNDING_TEMPLATE:bI,renderUI:function(){var A=this;var cf=A.get(az);var ch=A.get(b5);var L=A.get(b4);var ce=A.get(Y);if(!cf.contains(ch)){cf.prepend(ch);}if(!L.contains(ce)){L.append(ce);}var cg=A.get(bT);if(!L.contains(cg)){L.append(cg);}},getHTML:function(){var A=this;var L=A.get(bd);var cg=A.get(D);var ci=A.get(bV);var cf=A.get(aa);var ce=A.get(at);var ch=A.get(a9);return bK.substitute(L,{checked:cg?'checked="checked"':bo,id:ci,label:cf,name:ce,value:ch});},getNode:function(){var A=this;return bK.Node.create(A.getHTML());},_onFieldChange:function(L){var A=this;var ce=L.target;A.set(a9,ce.val());},_uiSetOptions:function(cg){var A=this;var L=A.get(b4);var cf=A.get(bT);var ce=A.get(bM);cf.empty();bK.each(cg,function(cj){var ch=new bK.Field({type:J,name:A.get(at),labelText:cj.label,labelAlign:"left",value:cj.value}).render(cf);var ci=ch.get(cc);if(cj.value==A.get(a9)){ci.set(D,true);}ci.on({change:bK.bind(A._onFieldChange,A)});});},_uiSetPredefinedValue:function(cg){var A=this;var L=A.get(aQ);var ce=L.get(ak);var cf=ce.one("input[name=predefinedValue]");if(cf){cf.val(cg);}}}});bK.FormBuilderRadioField=h;bK.FormBuilder.types["radio"]=bK.FormBuilderRadioField;var bE=bK.Lang,aG=bE.isArray,bl=bE.isNumber,ah=bE.isString,av=function(A){return(A instanceof bK.Node);},aP=function(A){return(A instanceof bK.NodeList);},aV=bK.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);}),az="boundingBox",b0="button",bY="buttonType",b4="contentBox",ba="container",s="defaultOptions",by=".",aS="drag",bj="dragContainer",b6="dragContainerNode",ad="dragNodesList",ar="drop",aK="dropContainer",a4="dropContainerNode",bo="",a5="field",f="fields",be="form-builder-field",bJ="form-builder-select-field",bV="id",q="icon",aL="input",aa="label",bZ="multiple",at="name",cc="node",bP="option",bN="options",aR="portalLayout",a9="predefinedValue",a6="proxy",bz="reset",bD="selectedIndex",bn="submit",P=" ",bd="template",bM="templateNode",br="text",O="type",m="value",w=bK.getClassName,aw=w(a5,aL),bR=w(a5,aL,br),bt=w(be),Q=w(be,cc),bx=w(bp,y),ap='<select id="{id}" class="'+[Q].join(P)+'" name="{name}" value="{value}"></select>';var X=bK.Component.create({NAME:bJ,ATTRS:{multiple:{setter:bK.DataType.Boolean.parse,value:false},template:{valueFn:function(){return ap;
}},templateNode:{valueFn:"getNode"}},UI_ATTRS:[c,a9,aa,at,bN,bO,bZ],CSS_PREFIX:bt,HTML_PARSER:{templateNode:by+Q},EXTENDS:bK.FormBuilderMultipleChoiceField,prototype:{getHTML:function(){var A=this;var L=A.get(bd);var ch=A.get(bV);var cf=A.get(aa);var ce=A.get(at);var cg=A.get(a9);return bK.substitute(L,{id:ch,label:cf,name:ce,value:cg});},getNode:function(){var A=this;return bK.Node.create(A.getHTML());},renderSettings:function(){var L=this;var cg=L.get(aQ);var ch=cg.get(ak);bK.FormBuilderSelectField.superclass.renderSettings.apply(L,arguments);if(!L._renderedSelectSettings){L._renderedSelectSettings=true;var A=L.propertiesPanel.get(d);var ce=new bK.Field({type:"checkbox",name:bZ,labelText:"Multiple",labelAlign:"left"}).render(A.item(0));var cf=ce.get(cc);cf.on({change:bK.bind(L._onSettingsFieldChange,L)});cf.set(D,L.get(bZ));}},_uiSetMultiple:function(ce){var A=this;var L=A.get(bM);if(ce){L.setAttribute(bZ,bZ);}else{L.removeAttribute(bZ);}}}});bK.FormBuilderSelectField=X;bK.FormBuilder.types["select"]=bK.FormBuilderSelectField;var bE=bK.Lang,aG=bE.isArray,bl=bE.isNumber,ah=bE.isString,av=function(A){return(A instanceof bK.Node);},aP=function(A){return(A instanceof bK.NodeList);},az="boundingBox",b4="contentBox",ba="container",by=".",aS="drag",bj="dragContainer",b6="dragContainerNode",ad="dragNodesList",ar="drop",aK="dropContainer",a4="dropContainerNode",bo="",a5="field",f="fields",be="form-builder-field",aN="form-builder-input-field",bV="id",q="icon",aL="input",aa="label",at="name",cc="node",aR="portalLayout",a9="predefinedValue",a6="proxy",P=" ",bd="template",bM="templateNode",br="text",m="value",w=bK.getClassName,aw=w(a5,aL),bR=w(a5,aL,br),bt=w(be),Q=w(be,cc),bx=w(bp,y),bs='<input id="{id}" class="'+[Q,aw,bR].join(P)+'" name="{name}" type="text" value="{value}" />';var au=bK.Component.create({NAME:aN,ATTRS:{template:{valueFn:function(){return bs;}},templateNode:{valueFn:"getNode"}},UI_ATTRS:[c,a9,aa,at,bO],CSS_PREFIX:bt,HTML_PARSER:{templateNode:by+Q},EXTENDS:bK.FormBuilderField,prototype:{bindUI:function(){var A=this;bK.FormBuilderTextField.superclass.bindUI.apply(A,arguments);var L=A.get(bM);L.on({"keyup":bK.bind(A._onValueKeyUp,A)});},getHTML:function(){var A=this;var L=A.get(bd);var ci=A.get(bV);var cf=A.get(aa);var ce=A.get(at);var cg=A.get(ao);var ch=A.get(a9);return bK.substitute(L,{id:ci,label:cf,name:ce,value:ch});},getNode:function(){var A=this;return bK.Node.create(A.getHTML());},renderSettings:function(){var A=this;var L=A.get(aQ);var ce=L.get(ak);bK.FormBuilderTextField.superclass.renderSettings.apply(A,arguments);if(!A._renderedInputSettings){A._renderedInputSettings=true;var cf=ce.one("input[name=predefinedValue]");cf.on({"keyup":bK.bind(A._onValueKeyUp,A)});}},_onValueKeyUp:function(L){var A=this;var ce=L.target;A.set(a9,ce.val());},_uiSetPredefinedValue:function(ch){var A=this;var ce=A.get(aQ);var cf=ce.get(ak);var cg=cf.one("input[name=predefinedValue]");var L=A.get(bM);L.val(ch);if(cg&&A.get(aY)){cg.val(ch);}}}});bK.FormBuilderTextField=au;bK.FormBuilder.types["text"]=bK.FormBuilderTextField;var bE=bK.Lang,aG=bE.isArray,bl=bE.isNumber,ah=bE.isString,az="boundingBox",b4="contentBox",ba="container",by=".",aS="drag",bj="dragContainer",b6="dragContainerNode",ad="dragNodesList",ar="drop",aK="dropContainer",a4="dropContainerNode",bo="",a5="field",f="fields",be="form-builder-field",v="form-builder-textarea-field",bV="id",q="icon",aa="label",at="name",cc="node",aR="portalLayout",a9="predefinedValue",a6="proxy",ao="size",P=" ",bd="template",bM="templateNode",br="text",bv="textarea",m="value",w=bK.getClassName,b=w(a5),bb=w(a5,br),bQ=w(a5,bv),bt=w(be),Q=w(be,cc),bx=w(bp,y),bF='<textarea id="{id}" class="'+[Q,b,bb,bQ].join(P)+'" name="{name}">{value}</textarea>';var ax=bK.Component.create({NAME:v,ATTRS:{template:{valueFn:function(){return bF;}},templateNode:{valueFn:"getNode"}},UI_ATTRS:[c,a9,aa,at,bO],CSS_PREFIX:bt,HTML_PARSER:{templateNode:by+Q},EXTENDS:bK.FormBuilderField,prototype:{bindUI:function(){var A=this;bK.FormBuilderTextAreaField.superclass.bindUI.apply(A,arguments);var L=A.get(bM);L.on({"keyup":bK.bind(A._onValueKeyUp,A)});},getHTML:function(){var A=this;var L=A.get(bd);var ci=A.get(bV);var cf=A.get(aa);var ce=A.get(at);var cg=A.get(ao);var ch=A.get(a9);return bK.substitute(L,{id:ci,label:cf,name:ce,value:ch});},getNode:function(){var A=this;return bK.Node.create(A.getHTML());},renderSettings:function(){var A=this;var L=A.get(aQ);var ce=L.get(ak);bK.FormBuilderTextAreaField.superclass.renderSettings.apply(A,arguments);if(!A._renderedTextareaSettings){A._renderedTextareaSettings=true;var cf=ce.one("input[name=predefinedValue]");cf.on({"keyup":bK.bind(A._onValueKeyUp,A)});}},_onValueKeyUp:function(L){var A=this;var ce=L.target;A.set(a9,ce.val());},_uiSetPredefinedValue:function(ch){var A=this;var ce=A.get(aQ);var cf=ce.get(ak);var cg=cf.one("input[name=predefinedValue]");var L=A.get(bM);L.val(ch);if(cg&&A.get(aY)){cg.val(ch);}}}});bK.FormBuilderTextAreaField=ax;bK.FormBuilder.types["textarea"]=bK.FormBuilderTextAreaField;},"@VERSION@",{requires:["aui-datatype","aui-form","aui-panel","io","substitute"],skinnable:true});