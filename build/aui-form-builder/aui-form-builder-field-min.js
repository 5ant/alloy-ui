AUI.add("aui-form-builder-field",function(b3){var bU=b3.Lang,aV=bU.isArray,bQ=bU.isString,h="acceptChildren",e="bodyContent",aP="boundingBox",cc="builder",ci="button",I="buttons",x="buttonsNode",aF="checkbox",J="checked",o="children",ce="clearfix",aQ="close",aR="component",cn="contentBox",aJ="container",cu="dataType",cf="default",aW="delete",bF="disabled",bM=".",bc="drag",aB="dragContainer",v="dragContainerNode",bY="dragNodesList",ay="drop",bg="dropContainer",bn="dropContainerNode",b4="dropNode",bp="dropZone",a1="dropZoneNode",aD="duplicate",P="edit",bG="",bo="field",g="fields",a7="fixed",bL="for",q="form",bd="formBuilder",aE="form-builder-field",s="help",n="helper",at="hidden",r="icon",cd="id",ah="label",bZ="labelNode",bB="lightbulb",bf="metadata",aA="name",cv="node",b="panel",a9="portalLayout",aM="predefinedValue",br="proxy",cb="readOnlyAttributes",an="required",a6="requiredFlagNode",bE="state",bm="select",aY="settings",aq="settingsFormNode",V="showLabel",au="size",W=" ",bP="string",bW="strings",ab="templateNode",bI="text",ap="textarea",u="tip",bu="tipIconNode",X="type",aC="unique",bR="zone",bi="widget",z=b3.getClassName,bl=z(aR),aI=z(bo,ah),p=z(n,ce),ad=z(n,at),bN=z(bE,cf),d=z(bo),bs=z(bo,bI),B=z(q,cc,ci),bJ=z(q,cc,ci,aW),a3=z(q,cc,ci,aD),T=z(q,cc,ci,P),a2=z(q,cc,ay,cv),al=z(q,cc,ay,bR),ct=z(q,cc,r),j=z(q,cc,r,aW),w=z(q,cc,r,aD),aj=z(q,cc,r,P),E=z(q,cc,r,u),bK=z(q,cc,bo),by=z(q,cc,bo,I),bq=z(q,cc,a7),cs=z(q,cc,an),bD=z(q,cc,aC),G=z(bi),b1='<li class="'+[G,bl,bK].join(W)+'"></li>',a='<div class="'+[by,ad].join(W)+'">'+'<a class="'+[B,T].join(W)+'" href="javascript:;" title="Edit">'+'<div class="'+[ct,aj].join(W)+'"></div>'+"</a>"+'<a class="'+[B,a3].join(W)+'" href="javascript:;" title="Duplicate">'+'<div class="'+[ct,w].join(W)+'"></div>'+"</a>"+'<a class="'+[B,bJ].join(W)+'" href="javascript:;" title="Delete">'+'<div class="'+[ct,j].join(W)+'"></div>'+"</a>"+"</div>",C='<div class="'+p+'"></div>',aa='<ul class="'+al+'"></ul>',ai='<span class="'+[d,bs].join(W)+'"></span>',a5='<label class="'+aI+'"></label>',ax='<span class="'+cs+'">*</span>',cr="<p></p>",bj='<a href="javascript:;" class="'+E+'"></a>';var t=b3.Component.create({NAME:aE,ATTRS:{acceptChildren:{value:true},dataType:{value:bP},disabled:{value:false},fixed:{value:false},formBuilder:{value:undefined},id:{value:bG},icon:{value:bG},key:{value:bG},label:{value:bG},localizationMap:{value:{}},name:{valueFn:function(){var A=this;return A.get(X)+(++b3.Env._uidx);}},parent:{value:null},predefinedValue:{value:bG},readOnlyAttributes:{value:[],validator:aV},required:{setter:b3.DataType.Boolean.parse,value:false},selected:{setter:b3.DataType.Boolean.parse,value:false},showLabel:{setter:b3.DataType.Boolean.parse,value:true},template:{value:bG},tip:{value:bG},type:{value:bG},unique:{setter:b3.DataType.Boolean.parse,value:false},buttonsNode:{valueFn:function(){return b3.Node.create(a);}},dropZoneNode:{valueFn:function(){return b3.Node.create(aa);}},labelNode:{valueFn:function(){return b3.Node.create(a5);}},requiredFlagNode:{valueFn:function(){return b3.Node.create(ax);}},templateNode:{valueFn:"getNode"},tipIconNode:{valueFn:function(){return b3.Node.create(bj);}}},AUGMENTS:[b3.FormBuilderFieldSupport],UI_ATTRS:[h,bF,a7,ah,aA,aM,an,V,u,aC],HTML_PARSER:{buttonsNode:bM+by,dropZoneNode:bM+al,labelNode:ah+bM+aI,requiredFlagNode:bM+cs,tipIconNode:bM+E},prototype:{BOUNDING_TEMPLATE:b1,initializer:function(){var A=this;A.get(aP).setData(bo,A);A.toolTip=new b3.Tooltip({trigger:A.get(bu),hideDelay:100});},bindUI:function(){var A=this;},renderUI:function(){var A=this;var cz=A.get(aP);var cC=A.get(x);var L=A.get(cn);var cy=A.get(bZ);var cB=A.get(a6);var cA=A.get(ab);var cx=A.get(bu);L.addClass(p);cz.prepend(cC);L.append(cy);L.append(cB);L.append(cx);L.append(cA);A.toolTip.render();},settingsNodesMap:{},saveSettings:function(){var A=this;var L=A.get(bd);var cx=L.get(aq);b3.Array.each(b3.io._serialize(cx._node).split("&"),function(cz){var cy=cz.split("=");A.set(cy[0],decodeURIComponent(cy[1]));});},renderSettings:function(){var cF=this;var cB=cF.get(bd);var A=cB.get(aq);var cG=cB.get(bW);var cy=cF.settingsNodesMap;if(!cF.fieldSettingsNode){cF.fieldSettingsNode=b3.Node.create(C);var cD=b3.Node.create(C);var cz=b3.Node.create(ai);var L=b3.Node.create(a5);var cE=b3.Node.create(cr);L.setContent(cG[X]);cE.setContent(cF.get(cu)||cF.get(X));cz.append(L);cz.append(cE);cz.appendTo(cD);cF._renderSettingsFields([{type:"text",name:ah,labelText:"Label",value:cF.get(ah)},{type:"checkbox",name:V,labelText:"Show label",labelAlign:"left",value:cF.get(V)},{type:"text",name:aA,labelText:"Name",value:cF.get(aA)},{type:"checkbox",name:an,labelText:"Required",labelAlign:"left",value:an},{type:"text",name:aM,labelText:"Default value",value:cF.get(aM)},{type:"textarea",name:u,labelText:"Tip",value:cF.get(u)}],cD);var cA=cy.labelSettingNode;cA.on({input:b3.bind(cF._onLabelInput,cF)});var cC=cy.showLabelSettingNode;cC.set(J,cF.get(V));cC.on({change:b3.bind(cF._onSettingsFieldChange,cF)});var cx=cy.requiredSettingNode;cx.set(J,cF.get(an));cx.on({change:b3.bind(cF._onSettingsFieldChange,cF)});cF.propertiesPanel=new b3.Panel({bodyContent:cD,collapsible:true,title:"Properties"}).render();cF.fieldSettingsNode.append(cF.propertiesPanel.get(aP));}A.setContent(cF.fieldSettingsNode);},getHTML:function(){},getNode:function(){},_onLabelInput:function(L){var A=this;var cy=L.target;var cx=cy.val();A.set(ah,cx);},_onSettingsFieldChange:function(L){var A=this;var cy=L.target;var cx=cy.val();if(cy.get(X)===aF){cx=cy.get(J);}A.set(cy.get(aA),cx);},_renderSettingsFields:function(L,cy){var A=this;var cx=A.get(cb);b3.each(L,function(cA){var cB;if(b3.Array.indexOf(cx,cA.name)>-1){cA.disabled=true;}if(cA.type===bm){cB=new b3.Select(cA);}else{if(cA.type===ap){cB=new b3.Textarea(cA);}else{cB=new b3.Field(cA);}}cB.render(cy);var cz=cB.get(cv);if(cA.type===aF){cz.set(J,cA.value);}A.settingsNodesMap[cA.name+"SettingNode"]=cz;});},_uiSetAcceptChildren:function(cz){var A=this;var L=A.get(aP);var cy=A.get(a1);
var cx=L.one(bM+al);if(cz&&!cx){L.append(cy);}else{if(!cz&&cx){cx.remove();}else{if(cz&&cx){A.set(a1,cx);}}}},_uiSetDisabled:function(cx){var A=this;var L=A.get(ab);if(cx){L.setAttribute(bF,cx);}else{L.removeAttribute(bF);}},_uiSetFixed:function(cx){var A=this;var cy=A.get(x);var L=cy.one(bM+bJ);L.toggleClass(ad,cx);},_uiSetLabel:function(cx){var A=this;var L=A.get(bZ);L.setContent(cx);},_uiSetName:function(cx){var A=this;var L=A.get(ab);L.set(aA,cx);},_uiSetPredefinedValue:function(cx){var A=this;var L=A.get(ab);L.val(cx);},_uiSetRequired:function(cx){var A=this;var L=A.get(a6);L.toggleClass(ad,!cx);},_uiSetShowLabel:function(cx){var A=this;var L=A.get(bZ);L.toggleClass(ad,!cx);},_uiSetTip:function(cx){var A=this;var L=A.get(bu);L.toggleClass(ad,!cx);A.toolTip.set(e,cx);},_uiSetUnique:function(cx){var A=this;var L=A.get(aP);var cy=A.get(x);L.toggleClass(bD,cx);cy.one(bM+a3).toggleClass(ad,cx);}}});b3.FormBuilderField=t;b3.FormBuilder.types["field"]=b3.FormBuilderField;var bU=b3.Lang,aV=bU.isArray,az=bU.isNumber,bQ=bU.isString,bv=function(A){return(A instanceof b3.Node);},a4=function(A){return(A instanceof b3.NodeList);},a8=b3.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);}),aP="boundingBox",ci="button",cg="buttonType",cn="contentBox",aJ="container",bM=".",bc="drag",aB="dragContainer",v="dragContainerNode",bY="dragNodesList",ay="drop",bg="dropContainer",bn="dropContainerNode",bG="",bo="field",g="fields",aE="form-builder-field",bS="form-builder-button-field",cd="id",r="icon",aZ="input",ah="label",aA="name",cv="node",Q="option",ac="options",a9="portalLayout",aM="predefinedValue",br="proxy",bO="reset",be="selected",bV="selectedIndex",aw="submit",W=" ",bW="strings",aG="template",ab="templateNode",bI="text",X="type",m="value",z=b3.getClassName,bt=z(bo,aZ),O=z(bo,aZ,bI),bK=z(aE),b6=z(aE,cv),bN=z(bE,cf),bH='<input id="{id}" class="'+[b6,bt].join(W)+'" name="{name}" type="{type}" value="{value}" />',cw=[aw,bO,ci];var b5=b3.Component.create({NAME:bS,ATTRS:{acceptChildren:{value:false,readOnly:true},buttonType:{value:aw,validator:function(A){return b3.Array(cw).indexOf(A.toLowerCase())>-1;}},predefinedValue:{value:a8(aw)},showLabel:{value:false},template:{valueFn:function(){return bH;}}},UI_ATTRS:b3.FormBuilderField.UI_ATTRS.concat([cg]),CSS_PREFIX:bK,HTML_PARSER:{templateNode:bM+b6},EXTENDS:b3.FormBuilderField,prototype:{getHTML:function(){var A=this;var cz=A.get(aG);var cB=A.get(cd);var cy=A.get(ah);var cx=A.get(aA);var L=A.get(cg);var cA=A.get(aM);return b3.substitute(cz,{id:cB,label:cy,name:cx,type:L,value:cA});},getNode:function(){var A=this;return b3.Node.create(A.getHTML());},renderSettings:function(){var cD=this;var cA=cD.get(bd);var A=cA.get(aq);var cz=cD.get(cg);var cE=cA.get(bW);var cy=cD.settingsNodesMap;b3.FormBuilderButtonField.superclass.renderSettings.apply(cD,arguments);if(!cD._renderedButtonSettings){cD._renderedButtonSettings=true;var L=cD.propertiesPanel.get(e);var cC=[];b3.each(cw,function(cF){cC.push({labelText:cE[cF],value:cF});});cD._renderSettingsFields([{labelText:"Button type",name:cg,options:cC,type:"select"}],L.item(0));var cB=cy["buttonTypeSettingNode"];cB.on({change:b3.bind(cD._onButtonTypeChange,cD)});var cx=b3.Array(cw).indexOf(cz);cB.all(Q).item(cx).set(be,true);}},_onButtonTypeChange:function(L){var A=this;var cx=L.target;A.set(cg,cx.get(m));},_uiSetButtonType:function(cx){var A=this;var L=A.get(ab);L.setAttribute(X,cx);}}});b3.FormBuilderButtonField=b5;b3.FormBuilder.types["button"]=b3.FormBuilderButtonField;var bU=b3.Lang,aV=bU.isArray,aX=bU.isBoolean,az=bU.isNumber,bQ=bU.isString,aT="boolean",aP="boundingBox",e="bodyContent",aF="checkbox",J="checked",av="choice",cn="contentBox",aJ="container",bM=".",bc="drag",aB="dragContainer",v="dragContainerNode",bY="dragNodesList",ay="drop",bg="dropContainer",bn="dropContainerNode",bG="",bo="field",g="fields",aE="form-builder-field",ck="form-builder-checkbox-field",cd="id",r="icon",bh="inline",ah="label",c="labels",aA="name",cv="node",R="parentNode",a9="portalLayout",aM="predefinedValue",br="proxy",au="size",W=" ",aG="template",ab="templateNode",m="value",z=b3.getClassName,d=z(bo),am=z(bo,aF),b0=z(bo,av),bK=z(aE),cl=z(aE,aF),b6=z(aE,cv),bN=z(bE,cf),bX=z(bo,c,bh),b1='<li class="'+[G,bl,bK,cl].join(W)+'"></li>',aS='<input id="{id}" class="'+[b6,d,am,b0].join(W)+'" name="{name}" type="checkbox" value="{value}" {checked} />';var Z=b3.Component.create({NAME:ck,ATTRS:{dataType:{value:aT},predefinedValue:{setter:b3.DataType.Boolean.parse,value:false},template:{valueFn:function(){return aS;}},templateNode:{valueFn:"getNode"}},CSS_PREFIX:bK,HTML_PARSER:{templateNode:bM+b6},EXTENDS:b3.FormBuilderField,prototype:{BOUNDING_TEMPLATE:b1,bindUI:function(){var A=this;b3.FormBuilderCheckBoxField.superclass.bindUI.apply(A,arguments);var L=A.get(ab);L.on({"change":b3.bind(A._onValueChange,A)});},renderUI:function(){var A=this;var L=A.get(cn);var cy=A.get(ab);var cx=A.get(bZ);b3.FormBuilderCheckBoxField.superclass.renderUI.apply(A,arguments);cx.insert(cy,cx,"before");},getHTML:function(){var A=this;var cy=A.get(aG);var cz=A.get(J);var cB=A.get(cd);var cx=A.get(ah);var L=A.get(aA);var cA=A.get(aM);return b3.substitute(cy,{checked:cz?'checked="checked"':bG,id:cB,label:cx,name:L,value:cA});},getNode:function(){var A=this;return b3.Node.create(A.getHTML());},renderSettings:function(){var A=this;var L=A.get(bd);var cy=L.get(aq);var cz=A.settingsNodesMap;b3.FormBuilderCheckBoxField.superclass.renderSettings.apply(A,arguments);if(!A._renderedCheckboxSettings){A._renderedCheckboxSettings=true;cz.predefinedValueSettingNode.get(R).remove();var cx=A.propertiesPanel.get(e);A._renderSettingsFields([{type:"checkbox",name:aM,labelText:"Checked",labelAlign:"left"}],cx.item(0));var cA=cz.predefinedValueSettingNode;cA.on({change:b3.bind(A._onValueChange,A)});cA.set(J,A.get(aM));}},_onValueChange:function(L){var A=this;var cx=L.target;A.set(aM,cx.get(J));},_uiSetPredefinedValue:function(cz){var A=this;var L=A.get(ab);var cx=A.settingsNodesMap;
var cy=cx.predefinedValueSettingNode;if(cy){cy.set(J,cz);}L.set(J,cz);}}});b3.FormBuilderCheckBoxField=Z;b3.FormBuilder.types["checkbox"]=b3.FormBuilderCheckBoxField;var bU=b3.Lang,aV=bU.isArray,az=bU.isNumber,bQ=bU.isString,bv=function(A){return(A instanceof b3.Node);},a4=function(A){return(A instanceof b3.NodeList);},aP="boundingBox",cn="contentBox",aJ="container",cu="dataType",bM=".",ay="drop",bG="",bo="field",g="fields",aE="form-builder-field",F="form-builder-fieldset-field",cd="id",r="icon",ah="label",aA="name",cv="node",aM="predefinedValue",W=" ",bW="strings",aG="template",ab="templateNode",bI="text",X="type",m="value",bR="zone",z=b3.getClassName,bK=z(aE),b6=z(aE,cv),al=z(q,cc,ay,bR),aL='<fieldset id="{id}" class="'+[b6].join(W)+'"></fieldset>',k='<legend class="'+aI+'"></legend>';var y=b3.Component.create({NAME:F,ATTRS:{acceptChildren:{value:true,readOnly:true},dataType:{value:undefined},template:{valueFn:function(){return aL;}},labelNode:{valueFn:function(){return b3.Node.create(k);}},templateNode:{valueFn:"getNode"}},UI_ATTRS:[h,ah,V],CSS_PREFIX:bK,HTML_PARSER:{templateNode:bM+b6},EXTENDS:b3.FormBuilderField,prototype:{CONTENT_TEMPLATE:aL,renderUI:function(){var A=this;var cy=A.get(aP);var cA=A.get(x);var L=A.get(cn);var cx=A.get(bZ);var cz=A.get(ab);if(!cy.contains(cA)){cy.prepend(cA);}if(!L.contains(cx)){L.append(cx);}},getHTML:function(){var A=this;var L=A.get(aG);var cx=A.get(cd);return b3.substitute(L,{id:cx});},getNode:function(){var A=this;return b3.Node.create(A.getHTML());},renderSettings:function(){var cE=this;var cA=cE.get(bd);var A=cA.get(aq);var cF=cA.get(bW);var cx=cE.settingsNodesMap;if(!cE._renderedFieldsetSettings){cE._renderedFieldsetSettings=true;cE.fieldSettingsNode=b3.Node.create(C);var cC=b3.Node.create(C);var cy=b3.Node.create(ai);var L=b3.Node.create(a5);var cD=b3.Node.create(cr);L.setContent(cF[X]);cD.setContent(cE.get(cu)||cE.get(X));cy.append(L);cy.append(cD);cy.appendTo(cC);cE._renderSettingsFields([{type:"text",name:ah,labelText:"Label",value:cE.get(ah)},{type:"checkbox",name:V,labelText:"Show label",labelAlign:"left",value:cE.get(V)}],cC);var cz=cx["labelSettingNode"];cz.on({input:b3.bind(cE._onLabelInput,cE)});var cB=cx["showLabelSettingNode"];cB.set(J,cE.get(V));cB.on({change:b3.bind(cE._onSettingsFieldChange,cE)});cE.propertiesPanel=new b3.Panel({bodyContent:cC,collapsible:true,title:"Properties"}).render();cE.fieldSettingsNode.append(cE.propertiesPanel.get(aP));}A.setContent(cE.fieldSettingsNode);},_uiSetAcceptChildren:function(cz){var A=this;var L=A.get(cn);var cy=A.get(a1);var cx=L.one(bM+al);if(cz&&!cx){L.append(cy);}else{if(!cz&&cx){cx.remove();}else{if(cz&&cx){A.set(a1,cx);}}}}}});b3.FormBuilderFieldsetField=y;b3.FormBuilder.types["fieldset"]=b3.FormBuilderFieldsetField;var bU=b3.Lang,aV=bU.isArray,az=bU.isNumber,bQ=bU.isString,bv=function(A){return(A instanceof b3.Node);},a4=function(A){return(A instanceof b3.NodeList);},aP="boundingBox",cn="contentBox",aJ="container",cu="dataType",bM=".",bG="",bo="field",g="fields",aE="form-builder-field",cm="form-builder-file-upload-field",cd="id",r="icon",ah="label",aA="name",cv="node",aM="predefinedValue",W=" ",bW="strings",aG="template",ab="templateNode",bI="text",X="type",m="value",z=b3.getClassName,bK=z(aE),b6=z(aE,cv),bN=z(bE,cf),bA='<input id="{id}" class="'+[b6].join(W)+'" name="{name}" type="file" value="{value}" />';var K=b3.Component.create({NAME:cm,ATTRS:{template:{valueFn:function(){return bA;}},templateNode:{valueFn:"getNode"}},CSS_PREFIX:bK,HTML_PARSER:{templateNode:bM+b6},EXTENDS:b3.FormBuilderField,prototype:{getHTML:function(){var A=this;var cz=A.get(aG);var cB=A.get(cd);var cx=A.get(ah);var L=A.get(aA);var cy=A.get(au);var cA=A.get(aM);return b3.substitute(cz,{id:cB,label:cx,name:L,value:cA});},getNode:function(){var A=this;return b3.Node.create(A.getHTML());},renderSettings:function(){var cF=this;var cB=cF.get(bd);var A=cB.get(aq);var cG=cB.get(bW);var cy=cF.settingsNodesMap;if(!cF._renderedFileUploadSettings){cF._renderedFileUploadSettings=true;cF.fieldSettingsNode=b3.Node.create(C);var cD=b3.Node.create(C);var cz=b3.Node.create(ai);var L=b3.Node.create(a5);var cE=b3.Node.create(cr);L.setContent(cG[X]);cE.setContent(cF.get(cu)||cF.get(X));cz.append(L);cz.append(cE);cz.appendTo(cD);cF._renderSettingsFields([{type:"text",name:ah,labelText:"Label",value:cF.get(ah)},{type:"checkbox",name:V,labelText:"Show label",labelAlign:"left",value:cF.get(V)},{type:"text",name:aA,labelText:"Name",value:cF.get(aA)},{type:"checkbox",name:an,labelText:"Required",labelAlign:"left",value:cF.get(an)},{type:"textarea",name:u,labelText:"Tip",value:cF.get(u)}],cD);var cA=cy.labelSettingNode;cA.on({input:b3.bind(cF._onLabelInput,cF)});var cC=cy.showLabelSettingNode;cC.set(J,cF.get(V));cC.on({change:b3.bind(cF._onSettingsFieldChange,cF)});var cx=cy.requiredSettingNode;cx.set(J,cF.get(an));cx.on({change:b3.bind(cF._onSettingsFieldChange,cF)});cF.propertiesPanel=new b3.Panel({bodyContent:cD,collapsible:true,title:"Properties"}).render();cF.fieldSettingsNode.append(cF.propertiesPanel.get(aP));}A.setContent(cF.fieldSettingsNode);}}});b3.FormBuilderFileUploadField=K;b3.FormBuilder.types["fileupload"]=b3.FormBuilderFileUploadField;var bU=b3.Lang,co=b3.Array,aV=bU.isArray,az=bU.isNumber,bQ=bU.isString,bv=function(A){return(A instanceof b3.Node);},a4=function(A){return(A instanceof b3.NodeList);},a8=b3.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);}),S="add",bT="addNode",aP="boundingBox",ci="button",cg="buttonType",cn="contentBox",aJ="container",cf="default",ar="defaultLabel",cp="defaultOptions",D="defaultValue",bM=".",bc="drag",aB="dragContainer",v="dragContainerNode",bY="dragNodesList",ay="drop",bg="dropContainer",bn="dropContainerNode",bG="",bo="field",g="fields",aE="form-builder-field",M="form-builder-multiple-choice-field",r="icon",cd="id",aZ="input",ag="item",ah="label",ch="multiple",aA="name",cv="node",Q="option",bz="optionTemplate",ac="options",aM="predefinedValue",br="proxy",cq="remove",bO="reset",aw="submit",W=" ",aG="template",ab="templateNode",bI="text",X="type",m="value",z=b3.getClassName,bt=z(bo,aZ),O=z(bo,aZ,bI),l=z(bo,ac,S),b9=z(bo,ac,ag),b8=z(bo,ac,ag,aZ),aN=z(bo,ac,ag,aZ,ah),ae=z(bo,ac,ag,aZ,m),ba=z(bo,ac,ag,cq),bK=z(aE),b6=z(aE,cv),bN=z(bE,cf),ao='<div class="'+[b9,bX,p].join(W)+'">'+'<input type="text" class="'+[b8,aN,bt,O].join(W)+'" value="{label}" />'+'<input type="text" class="'+[b8,ae,bt,O].join(W)+'" value="{value}" />'+'<a href="javascript:;" class="'+ba+'">&nbsp;</a>'+"</div>";
TPL_ADD='<a class="'+l+'" href="javascript:;">Add an option</a>',ENTER="ENTER";var bk=b3.Component.create({NAME:ac,ATTRS:{allowClear:{value:false},defaultLabel:{value:bG},defaultValue:{value:bG},disabled:{validator:aX,value:false},options:{getter:"_getOptions",validator:aV,value:[]},addNode:{valueFn:function(){return b3.Node.create(TPL_ADD);}}},HTML_PARSER:{addNode:bM+l},UI_ATTRS:[ac,bF],EXTENDS:b3.Widget,prototype:{renderUI:function(){var A=this;var L=A.get(aP);var cx=A.get(bT);if(!cx.inDoc()){L.append(cx);}},bindUI:function(){var A=this;var L=A.get(aP);var cx=A.get(bT);cx.on("click",b3.bind(A._onClickAdd,A));L.delegate("click",b3.bind(A._onClickOptionRemove,A),bM+ba);L.delegate("keypress",b3.bind(A._onKeyPressOption,A),bM+b8);},add:function(cx){var A=this;var L=A.get(ac);L.push(cx);A.set(ac,L);},clear:function(){var A=this;if(A.get(ALLOW_CLEAR)){A.set(ac,[]);}},remove:function(cx){var A=this;var L=A.get(cn);var cy=A._getOptionNode(cx);if(!A.get(bF)){if(cy){cy.remove();}A.items=L.all(bM+b9);}},_addNewOption:function(){var L=this;if(!L.get(bF)){var cx=L.get(cn);var cy=L._createOption({label:L.get(ar),value:L.get(D)});cx.append(cy);var A=cy.one(aZ);A.focus();A.select();L.items=cx.all(bM+b9);return cy;}},_createOption:function(L){var A=this;return b3.Node.create(b3.substitute(ao,L));},_getOptionNode:function(L){var A=this;return A.items.item(L);},_getOptions:function(cx){var A=this;var L=[];if(A.items){b3.each(A.items,function(cA,cy,cD){var cC=cA.one(bM+aN);var cB=cA.one(bM+ae);var cz=cx[cy]||{};cz.label=cC.val();cz.value=cB.val();L.push(cz);});}else{L=cx;}return L;},_indexOfTarget:function(cx){var A=this;var L=cx.ancestor(bM+b9);return A.items.indexOf(L);},_onClickAdd:function(L){var A=this;A._addNewOption();},_onClickOptionRemove:function(cy){var A=this;var cx=A.get(ac);var L=A._indexOfTarget(cy.target);A.remove(L);},_onKeyPressOption:function(cz){var A=this;var cy=A.get(ac);var cA=cz.currentTarget;var L=A.items;if(cz.isKey(ENTER)){var cx=A._indexOfTarget(cA);var cB=cA.hasClass(ae);if((cx==L.size()-1)&&cB){A._addNewOption();}}},_uiSetDisabled:function(cy){var A=this;var cx=A.get(bT);var L=A.get(aP);cx.toggleClass(ad,cy);L.all(bM+ba).toggleClass(ad,cy);if(cy){L.all(aZ).setAttribute(bF,cy);}else{L.all(aZ).removeAttribute(bF);}},_uiSetOptions:function(cy){var A=this;var cx=[];var L=A.get(cn);L.empty();co.each(cy,function(cA,cz,cB){L.append(A._createOption(cA));});A.items=L.all(bM+b9);}}});var f=b3.Component.create({NAME:M,ATTRS:{acceptChildren:{value:false,readOnly:true},options:{value:[{label:"option 1",value:"value 1"},{label:"option 2",value:"value 2"},{label:"option 3",value:"value 3"}]},optionTemplate:{value:'<option value="{value}">{label}</option>'}},UI_ATTRS:[h,aM,ah,aA,ac,V],CSS_PREFIX:bK,HTML_PARSER:{templateNode:bM+b6},EXTENDS:b3.FormBuilderField,prototype:{getNode:function(){var A=this;return b3.FormBuilderMultipleChoiceField.superclass.getNode.apply(A,arguments);},renderSettings:function(){var A=this;var L=A.get(cb);b3.FormBuilderMultipleChoiceField.superclass.renderSettings.apply(A,arguments);if(!A._renderedMultipleChoiceSettings){A._renderedMultipleChoiceSettings=true;var cy=b3.Node.create(C);A.optionsPanel=new b3.Panel({bodyContent:cy,collapsible:true,title:"Options"}).render();var cx=b3.Array.indexOf(L,ac)>-1;A.options=new bk({disabled:cx,options:A.get(ac)}).render(cy);A.fieldSettingsNode.append(A.optionsPanel.get(aP));}},saveSettings:function(){var A=this;b3.FormBuilderMultipleChoiceField.superclass.saveSettings.apply(A,arguments);A.set(ac,A.options.get(ac));},_uiSetOptions:function(cx){var A=this;var L=A.get(ab);L.empty();co.each(cx,function(cz,cy,cA){L.append(b3.substitute(A.get(bz),cz));});}}});b3.FormBuilderMultipleChoiceField=f;b3.FormBuilder.types["multiple-choice"]=b3.FormBuilderMultipleChoiceField;var bU=b3.Lang,aV=bU.isArray,aX=bU.isBoolean,az=bU.isNumber,bQ=bU.isString,aP="boundingBox",e="bodyContent",J="checked",av="choice",cn="contentBox",aJ="container",bM=".",bG="",bo="field",g="fields",aE="form-builder-field",bb="form-builder-radio-field",cd="id",r="icon",bh="inline",ah="label",c="labels",aA="name",cv="node",H="optionsContainerNode",aM="predefinedValue",U="radio",au="size",W=" ",aG="template",ab="templateNode",m="value",z=b3.getClassName,d=z(bo),b0=z(bo,av),bK=z(aE),aO=z(aE,U),b6=z(aE,cv),b7=z(aE,ac,aJ),bN=z(bE,cf),bX=z(bo,c,bh),b1='<li class="'+[G,bl,bK,aO].join(W)+'"></li>',Y='<div class="'+b7+'"></div>',aU='<input id="{id}" class="'+[b6,d,b0].join(W)+'" name="{name}" type="radio" value="{value}" {checked} />',ca='<input type="hidden" />';var i=b3.Component.create({NAME:bb,ATTRS:{name:{value:U},optionTemplate:{value:aU},template:{valueFn:function(){return aU;}},optionsContainerNode:{valueFn:function(){return b3.Node.create(Y);}},templateNode:{valueFn:"getNode"}},CSS_PREFIX:bK,HTML_PARSER:{optionsContainerNode:bM+b7,templateNode:bM+b6},EXTENDS:b3.FormBuilderMultipleChoiceField,prototype:{BOUNDING_TEMPLATE:b1,renderUI:function(){var A=this;var L=A.get(cn);var cx=A.get(H);b3.FormBuilderRadioField.superclass.renderUI.apply(A,arguments);L.append(cx);},getNode:function(){var A=this;return b3.Node.create(ca);},_onFieldChange:function(L){var A=this;var cx=L.target;A.set(aM,cx.val());},_uiSetDisabled:function(cx){var A=this;var L=A.get(H);L.all(aZ).each(function(cy){if(cx){cy.setAttribute(bF,cx);}else{cy.removeAttribute(bF);}});},_uiSetOptions:function(cz){var A=this;var L=A.get(cn);var cy=A.get(H);var cx=A.get(ab);cy.empty();b3.each(cz,function(cC){var cB=new b3.Field({type:U,disabled:A.get(bF),name:A.get(aA),labelText:cC.label,labelAlign:"left",value:cC.value}).render(cy);var cA=cB.get(cv);if(cC.value==A.get(aM)){cA.set(J,true);}if(A.get(bF)){cA.setAttribute(bF,cz);}else{cA.removeAttribute(bF);}cA.on({change:b3.bind(A._onFieldChange,A)});});},_uiSetPredefinedValue:function(cz){var A=this;var L=A.get(bd);var cx=L.get(aq);var cy=cx.one("input[name=predefinedValue]");if(cy){cy.val(cz);}}}});b3.FormBuilderRadioField=i;b3.FormBuilder.types["radio"]=b3.FormBuilderRadioField;
var bU=b3.Lang,aV=bU.isArray,az=bU.isNumber,bQ=bU.isString,bv=function(A){return(A instanceof b3.Node);},a4=function(A){return(A instanceof b3.NodeList);},a8=b3.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);}),aP="boundingBox",ci="button",cg="buttonType",cn="contentBox",aJ="container",cp="defaultOptions",bM=".",bc="drag",aB="dragContainer",v="dragContainerNode",bY="dragNodesList",ay="drop",bg="dropContainer",bn="dropContainerNode",bG="",bo="field",g="fields",aE="form-builder-field",b2="form-builder-select-field",cd="id",r="icon",aZ="input",ah="label",ch="multiple",aA="name",cv="node",Q="option",ac="options",a9="portalLayout",aM="predefinedValue",br="proxy",bO="reset",bV="selectedIndex",aw="submit",W=" ",aG="template",ab="templateNode",bI="text",X="type",m="value",z=b3.getClassName,bt=z(bo,aZ),O=z(bo,aZ,bI),bK=z(aE),b6=z(aE,cv),bN=z(bE,cf),bC='<select id="{id}" class="'+[b6].join(W)+'" name="{name}" value="{value}"></select>';var af=b3.Component.create({NAME:b2,ATTRS:{multiple:{setter:b3.DataType.Boolean.parse,value:false},template:{valueFn:function(){return bC;}},templateNode:{valueFn:"getNode"}},UI_ATTRS:b3.FormBuilderField.UI_ATTRS.concat([ch]),CSS_PREFIX:bK,HTML_PARSER:{templateNode:bM+b6},EXTENDS:b3.FormBuilderMultipleChoiceField,prototype:{getHTML:function(){var A=this;var cy=A.get(aG);var cA=A.get(cd);var cx=A.get(ah);var L=A.get(aA);var cz=A.get(aM);return b3.substitute(cy,{id:cA,label:cx,name:L,value:cz});},getNode:function(){var A=this;return b3.Node.create(A.getHTML());},renderSettings:function(){var L=this;var cx=L.get(bd);var cz=cx.get(aq);var cA=L.settingsNodesMap;b3.FormBuilderSelectField.superclass.renderSettings.apply(L,arguments);if(!L._renderedSelectSettings){L._renderedSelectSettings=true;var cy=L.propertiesPanel.get(e);L._renderSettingsFields([{type:"checkbox",name:ch,labelText:"Multiple",labelAlign:"left"}],cy.item(0));var A=cA["multipleSettingNode"];A.on({change:b3.bind(L._onSettingsFieldChange,L)});A.set(J,L.get(ch));}},_uiSetMultiple:function(cx){var A=this;var L=A.get(ab);if(cx){L.setAttribute(ch,ch);}else{L.removeAttribute(ch);}}}});b3.FormBuilderSelectField=af;b3.FormBuilder.types["select"]=b3.FormBuilderSelectField;var bU=b3.Lang,aV=bU.isArray,az=bU.isNumber,bQ=bU.isString,bv=function(A){return(A instanceof b3.Node);},a4=function(A){return(A instanceof b3.NodeList);},aP="boundingBox",cn="contentBox",aJ="container",bM=".",bc="drag",aB="dragContainer",v="dragContainerNode",bY="dragNodesList",ay="drop",bg="dropContainer",bn="dropContainerNode",bG="",bo="field",g="fields",aE="form-builder-field",a0="form-builder-input-field",cd="id",r="icon",aZ="input",ah="label",aA="name",cv="node",a9="portalLayout",aM="predefinedValue",br="proxy",W=" ",aG="template",ab="templateNode",bI="text",m="value",bx="width",z=b3.getClassName,bt=z(bo,aZ),O=z(bo,aZ,bI),bK=z(aE),b6=z(aE,cv),bN=z(bE,cf),bH='<input id="{id}" class="'+[b6,bt,O].join(W)+'" name="{name}" type="text" value="{value}" />',aH={small:25,medium:50,large:100};var bw=b3.Component.create({NAME:a0,ATTRS:{template:{valueFn:function(){return bH;}},templateNode:{valueFn:"getNode"},width:{setter:b3.DataType.String.evaluate,value:25}},CSS_PREFIX:bK,HTML_PARSER:{templateNode:bM+b6},EXTENDS:b3.FormBuilderField,prototype:{bindUI:function(){var A=this;b3.FormBuilderTextField.superclass.bindUI.apply(A,arguments);var L=A.get(ab);L.on({input:b3.bind(A._onValueInput,A)});},getHTML:function(){var A=this;var cz=A.get(aG);var cB=A.get(cd);var cx=A.get(ah);var L=A.get(aA);var cA=A.get(aM);var cy=A.get(bx);return b3.substitute(cz,{id:cB,label:cx,name:L,value:cA,width:cy});},getNode:function(){var A=this;return b3.Node.create(A.getHTML());},renderSettings:function(){var cD=this;var cC=cD.get(bd);var cx=cC.get(aq);var cB=cD.settingsNodesMap;var cE=cC.get(bW);b3.FormBuilderTextField.superclass.renderSettings.apply(cD,arguments);if(!cD._renderedInputSettings){cD._renderedInputSettings=true;var cz=cD.propertiesPanel.get(e);var A=0;var cA=-1;var cy=[];b3.each(aH,function(cH,cG){if(cH==cD.get(bx)){cA=A;}cy.push({labelText:cE[cG],value:cH});A++;});cD._renderSettingsFields([{labelText:"Width",name:bx,options:cy,type:"select",value:cD.get(bx)}],cz.item(0));var L=cB["predefinedValueSettingNode"];L.on({input:b3.bind(cD._onValueInput,cD)});var cF=cB["widthSettingNode"];cF.on({change:b3.bind(cD._onWidthChange,cD)});cF.all(Q).item(cA).set(be,true);}},_onValueInput:function(L){var A=this;var cx=L.target;A.set(aM,cx.val());},_onWidthChange:function(L){var A=this;var cx=L.target;A.set(bx,cx.val());},_uiSetWidth:function(cx){var A=this;var L=A.get(ab);L.addClass(z("w"+cx));L.removeClass(z("w"+A.prevWidth));A.prevWidth=cx;}}});b3.FormBuilderTextField=bw;b3.FormBuilder.types["text"]=b3.FormBuilderTextField;var bU=b3.Lang,aV=bU.isArray,az=bU.isNumber,bQ=bU.isString,aP="boundingBox",cn="contentBox",aJ="container",bM=".",bc="drag",aB="dragContainer",v="dragContainerNode",bY="dragNodesList",ay="drop",bg="dropContainer",bn="dropContainerNode",bG="",bo="field",g="fields",aE="form-builder-field",cj="form-builder-textarea-field",cd="id",r="icon",ah="label",aA="name",cv="node",a9="portalLayout",aM="predefinedValue",br="proxy",au="size",W=" ",aG="template",ab="templateNode",bI="text",ap="textarea",m="value",z=b3.getClassName,d=z(bo),bs=z(bo,bI),N=z(bo,ap),bK=z(aE),b6=z(aE,cv),bN=z(bE,cf),ak='<textarea id="{id}" class="'+[b6,d,bs,N].join(W)+'" name="{name}">{value}</textarea>';var aK=b3.Component.create({NAME:cj,ATTRS:{template:{valueFn:function(){return ak;}},templateNode:{valueFn:"getNode"}},CSS_PREFIX:bK,HTML_PARSER:{templateNode:bM+b6},EXTENDS:b3.FormBuilderTextField,prototype:{getHTML:function(){var A=this;var cz=A.get(aG);var cB=A.get(cd);var cx=A.get(ah);var L=A.get(aA);var cy=A.get(au);var cA=A.get(aM);return b3.substitute(cz,{id:cB,label:cx,name:L,value:cA});},getNode:function(){var A=this;return b3.Node.create(A.getHTML());}}});b3.FormBuilderTextAreaField=aK;b3.FormBuilder.types["textarea"]=b3.FormBuilderTextAreaField;},"@VERSION@",{requires:["aui-datatype","aui-form","aui-panel","aui-tooltip","io","substitute"],skinnable:true});
