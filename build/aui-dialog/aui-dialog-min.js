AUI.add("aui-dialog",function(o){var j=o.Lang,I=j.isBoolean,z=j.isArray,O=j.isObject,C=o.WidgetStdMod,S=function(A){return parseInt(A,10)||0;},K=o.config.doc,t="",T="boundingBox",W="button",c="buttons",U="close",P="closethick",J="constrain2view",d="dd",Q="default",V="destroyOnClose",v="dialog",w=".",l="draggable",B="dragConfig",k="dragInstance",g="footerContent",R="hd",H="height",F="icon",b="icons",r="io",u="loading",y="modal",X="proxy",e="resizable",E="resizableConfig",m="resizableInstance",D="stack",i="useARIA",N="viewportRegion",f="width",p="resize:resize",M="resize:end",h=o.getClassName,x=h(v),a=h(v,R),s=h(F,u),n=h(d),G=K.createTextNode("");var q=function(A){if(!o.DialogMask){o.DialogMask=new o.OverlayMask().render();}};o.mix(q,{NAME:v,ATTRS:{bodyContent:{value:G},buttons:{value:[],validator:z},close:{value:true},constrain2view:{setter:"_setConstrain2view",value:false,validator:I},destroyOnClose:{value:false,validator:I},draggable:{value:true},dragConfig:{setter:function(L){var A=this;return o.merge({bubbleTargets:A,node:A.get(T),handles:[w+a]},L||{});},writeOnce:true,value:{},validator:O},dragInstance:{setter:"_setDragInstance",value:null},modal:{lazyAdd:false,setter:"_setModal",validator:I,value:false},resizableConfig:{setter:function(L){var A=this;return o.merge({bubbleTargets:A,handles:"r,br,b",minHeight:100,minWidth:200,constrain2view:true,node:A.get(T),proxy:true,after:{end:o.bind(A._syncResizableDimentions,A),resize:o.bind(A._syncResizableDimentions,A)}},L||{});},writeOnce:true,value:{},validator:O},resizableInstance:{setter:"_setResizableInstance",value:null},resizable:{value:true},stack:{value:true,setter:function(A){return this._setStack(A);},validator:I},strings:{value:{close:"Close dialog"}}}});q.prototype={initializer:function(Y){var A=this;var Z=A.get(b);var ab=A.get(U);var aa=A.get(c);if(aa&&aa.length&&!A.get(g)){A.set(g,G);}if(ab){var L={icon:P,id:P,handler:{fn:A.close,context:A},title:A.get("strings").close};if(Z){Z.push(L);}A.set(b,Z);}A.publish("close",{defaultFn:A._close});A.after("constrain2viewChange",A._afterConstrain2viewChange,A);A.after("draggableChange",A._afterDraggableChange,A);A.after("dragInstanceChange",A._afterDragInstanceChange,A);A.after("render",A._afterRenderer);A.after("resizableChange",A._afterResizableChange,A);A.after("resizableInstanceChange",A._afterResizableInstanceChange,A);},bindUI:function(){var A=this;A._bindLazyComponents();A.on("visibleChange",A._afterSetVisible);},syncUI:function(){var A=this;if(A.get(i)){A.plug(o.Plugin.Aria,{attributes:{visible:{ariaName:"hidden",format:function(L){return !L;}}}});}},destructor:function(){var A=this;var L=A.get(T);o.Event.purgeElement(L,true);o.DialogManager.remove(A);},alignToViewport:function(Y,L){var A=this;var Z=o.getDoc().get(N);A.move([Z.left+S(Y),Z.top+S(L)]);},_bindLazyComponents:function(){var A=this;var L=A.get(T);L.on("mouseenter",o.bind(A._initLazyComponents,A));},close:function(){var A=this;A.fire("close");},_afterRenderer:function(L){var A=this;A._initButtons();A.get(D);A.get(r);},_close:function(){var A=this;if(A.get(V)){A.destroy();}else{A.hide();}if(A.get(y)){o.DialogMask.hide();}},_initButtons:function(){var A=this;var Y=A.get(c);if(Y.length){var L=new o.Toolbar({children:Y});L._DEFAULT_CONTEXT=A;L.render(A.footerNode);A.fire("contentUpdate");A.buttons=L;}},_initLazyComponents:function(){var A=this;A.get(k);A.get(m);},_setDefaultARIAValues:function(){var A=this;if(!A.get(i)){return;}A.aria.setRole("dialog",A.get(T));if(A.icons){var L=A.icons.item(P);if(L){A.aria.setAttribute("controls",A.get("id"),L.get(T));}}},_setDragInstance:function(L){var A=this;if(A.get(l)){L=new o.DD.Drag(A.get(B));A._updateDDConstrain2view(L);}return L;},_setModal:function(L){var A=this;if(L){o.DialogMask.show();}else{o.DialogMask.hide();}return L;},_setResizableInstance:function(L){var A=this;if(A.get(e)){L=new o.Resize(A.get(E));}return L;},_setStack:function(L){var A=this;if(L){o.DialogManager.register(A);}else{o.DialogManager.remove(A);}return L;},_syncResizableDimentions:function(Y){var A=this;var L=Y.type;var Z=Y.info;if((L===M)||((L===p)&&!Y.currentTarget.get(X))){A.set(H,Z.offsetHeight);A.set(f,Z.offsetWidth);}},_updateDDConstrain2view:function(Y){var A=this;var L=A.get(J);if(L){Y.plug(o.Plugin.DDConstrained,{constrain2view:L});}else{Y.unplug(o.Plugin.DDConstrained);}},_afterConstrain2viewChange:function(L){var A=this;A._updateDDConstrain2view(A.get(k));},_afterDraggableChange:function(L){var A=this;A.set(k,null);},_afterDragInstanceChange:function(L){var A=this;if(L.prevVal){L.prevVal.destroy();}},_afterResizableChange:function(L){var A=this;A.set(m,null);},_afterResizableInstanceChange:function(L){var A=this;if(L.prevVal){L.prevVal.destroy();}},_afterSetVisible:function(L){var A=this;if(A.get(y)){if(L.newVal){o.DialogMask.show();}else{o.DialogMask.hide();}}},_uiHandles:[]};o.Dialog=o.Component.create({NAME:v,EXTENDS:o.Panel,AUGMENTS:[q,o.WidgetPosition,o.WidgetStack,o.WidgetPositionAlign,o.WidgetPositionConstrain]});o.DialogManager=new o.OverlayManager({zIndexBase:1000});o.mix(o.DialogManager,{findByChild:function(A){return o.Widget.getByNode(o.one(A).ancestor(w+x,true));},closeByChild:function(A){return o.DialogManager.findByChild(A).close();},refreshByChild:function(L){var A=o.DialogManager.findByChild(L);if(A&&A.io){A.io.start();}}});},"@VERSION@",{requires:["aui-panel","dd-constrain","aui-button-item","aui-overlay-manager","aui-overlay-mask","aui-io-plugin","aui-resize"],skinnable:true});