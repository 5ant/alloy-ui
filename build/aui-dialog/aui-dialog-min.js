AUI.add("aui-dialog",function(r){var ac=r.Lang,x=r.Object,K=ac.isBoolean,E=ac.isArray,Q=ac.isObject,k=ac.toInt,M=r.config.doc,w="",n="bodyContent",W="boundingBox",aa="button",d="buttons",X="close",R="closethick",L="constrain2view",b="container",e="dd",S="default",Y="destroyOnClose",z="dialog",B=".",o="draggable",m="dragInstance",h="footerContent",T="hd",J="height",H="icon",c="icons",u="io",y="loading",D="modal",ab="proxy",f="resizable",p="resizableInstance",G="stack",g="width",P="viewportRegion",s="resize:resize",O="resize:end",i=r.ClassNameManager.getClassName,C=i(z),j=i(z,aa),F=i(z,aa,b),U=i(z,aa,S),a=i(z,T),v=i(H,y),q=i(e),I=M.createTextNode(""),N='<button class="'+j+'"></button>',Z='<div class="'+F+'"></div>';var t=function(A){if(!r.DialogMask){r.DialogMask=new r.OverlayMask().render();}};r.mix(t,{NAME:z,ATTRS:{bodyContent:{value:I},buttons:{value:[],validator:E},close:{value:true},constrain2view:{value:false,validator:K},destroyOnClose:{value:false,validator:K},draggable:{lazyAdd:true,value:true,setter:function(A){return this._setDraggable(A);}},dragInstance:{value:null},modal:{lazyAdd:false,value:false,validator:K},resizable:{setter:function(A){return this._setResizable(A);},value:true},resizableInstance:{value:null},stack:{lazyAdd:true,value:true,setter:function(A){return this._setStack(A);},validator:K}}});t.prototype={initializer:function(ae){var A=this;var af=A.get(c);var ah=A.get(X);var ag=A.get(d);if(ag&&ag.length&&!A.get(h)){A.set(h,I);}if(ah){var ad={icon:R,id:R,handler:{fn:A.close,context:A}};if(af){af.push(ad);}A.set(c,af);}A.addTarget(r.DialogManager);A.after("render",A._afterRenderer);},bindUI:function(){var A=this;A._bindLazyComponents();A.publish("close",{defaultFn:A._close});},destructor:function(){var A=this;var ad=A.get(W);r.Event.purgeElement(ad,true);r.DialogManager.remove(A);},alignToViewport:function(ae,ad){var A=this;var af=r.getDoc().get(P);A.move([af.left+k(ae),af.top+k(ad)]);},_bindLazyComponents:function(){var A=this;var ad=A.get(W);ad.on("mouseenter",r.bind(A._initLazyComponents,A));},close:function(){var A=this;A.fire("close");},_afterConstrain2viewChange:function(ad){var A=this;A._setConstrain2view(ad.newVal);},_afterRenderer:function(ad){var A=this;A._initButtons();A.get(G);A.get(u);},_close:function(){var A=this;if(A.get(Y)){A.destroy();}else{A.hide();}},_initButtons:function(){var A=this;var ae=A.get(d);var ad=r.Node.create(Z);var af=r.Node.create(N);r.each(ae,function(ai,ah){var al=af.clone();if(ai.isDefault){al.addClass(U);}if(ai.handler){var ak=ai.handler;var aj=ak.fn||ak;var ag=ak.context||A;al.on("click",aj,ag);}al.html(ai.text||w);ad.append(al);});if(ae.length){A.set(h,ad);}},_initLazyComponents:function(){var A=this;if(!A.get(m)&&A.get(o)){A.get(o);}if(!A.get(p)&&A.get(f)){A.get(f);}},_setConstrain2view:function(ad){var A=this;var ae=A.get(m);if(ae){if(ad){ae.plug(r.Plugin.DDConstrained,{constrain2view:A.get(L)});}else{ae.unplug(r.Plugin.DDConstrained);}}},_setDraggable:function(ag){var A=this;var ae=A.get(W);var af=function(){var aj=A.get(m);if(aj){aj.destroy();aj.unplug(r.Plugin.DDConstrained);}};r.DD.DDM.CSS_PREFIX=q;if(ag){var ah={node:ae,handles:[B+a]};var ad=r.merge(ah,ag||{});if(ad.on){r.each(ad.on,function(ak,aj){ad.on[aj]=r.bind(ak,A);});}af();var ai=new r.DD.Drag(ad);A.set(m,ai);A.after("constrain2viewChange",A._afterConstrain2viewChange,A);A._setConstrain2view(A.get("constrain2view"));}else{af();}return ag;},_setResizable:function(ag){var A=this;var ah=A.get(p);var af=function(){if(ah){ah.destroy();}};if(ag){var ae=function(aj){var ai=aj.type;var ak=aj.info;if((ai===O)||((ai===s)&&!aj.currentTarget.get(ab))){A.set(J,ak.offsetHeight);A.set(g,ak.offsetWidth);}};af();var ad=new r.Resize(r.merge({handles:"r,br,b",minHeight:100,minWidth:200,constrain2view:true,node:A.get(W),proxy:true},ag||{}));ad.after("end",ae);ad.after("resize",ae);A.set(p,ad);return ag;}else{af();}},_setStack:function(ad){var A=this;if(ad){r.DialogManager.register(A);}else{r.DialogManager.remove(A);}return ad;},_uiHandles:[]};r.Dialog=r.Base.build(z,r.Panel,[t,r.WidgetPosition,r.WidgetStack,r.WidgetPositionAlign,r.WidgetPositionConstrain]);var l=new r.OverlayManager({zIndexBase:1000});var V={};l._MODALS=V;l.after(["dialog:destroy","dialog:modalChange","dialog:render","dialog:visibleChange"],function(ad){var A=ad.target;if(A){var ae=A.get("id");if(ad.type!=="dialog:destroy"&&A.get("visible")&&A.get("modal")){V[ae]=true;r.DialogMask.show();}else{delete V[ae];if(x.isEmpty(V)){r.DialogMask.hide();}}}});r.mix(l,{findByChild:function(A){return r.Widget.getByNode(r.one(A).ancestor(B+C,true));},closeByChild:function(A){return l.findByChild(A).close();},refreshByChild:function(ad){var A=l.findByChild(ad);if(A&&A.io){A.io.start();}}});r.DialogManager=l;},"@VERSION@",{requires:["aui-panel","dd-constrain","aui-button-item","aui-overlay-manager","aui-overlay-mask","aui-io-plugin","aui-resize"],skinnable:true});