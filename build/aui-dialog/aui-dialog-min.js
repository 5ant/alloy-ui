AUI.add("aui-dialog",function(S){var M=S.Lang,j=M.isBoolean,d=M.isArray,n=M.isObject,X="",O="bodyContent",r="boundingBox",v="button",E="buttons",s="close",k="constrain2view",C="container",F="dd",o="default",t="destroyOnClose",Z="dialog",a=".",P="draggable",N="dragInstance",I="footerContent",p="hd",i="height",g="icon",D="icons",V="io",Y="loading",c="modal",w="proxy",G="resizable",Q="resizableInstance",f="stack",H="width",T="resize:resize",m="resize:end",J=S.ClassNameManager.getClassName,b=J(Z),K=J(Z,v),e=J(Z,v,C),q=J(Z,v,o),B=J(Z,p),W=J(g,Y),R=J(F),h=document.createTextNode(""),l='<button class="'+K+'"></button>',u='<div class="'+e+'"></div>';var U=function(A){if(!S.DialogMask){S.DialogMask=new S.OverlayMask().render();}};S.mix(U,{NAME:Z,ATTRS:{bodyContent:{value:h},buttons:{value:[],validator:d},close:{value:true},constrain2view:{value:false,validator:j},destroyOnClose:{value:false,validator:j},draggable:{lazyAdd:true,value:true,setter:function(A){return this._setDraggable(A);}},dragInstance:{value:null},modal:{setter:function(A){return this._setModal(A);},lazyAdd:false,value:false,validator:j},resizable:{setter:function(A){return this._setResizable(A);},value:true},resizableInstance:{value:null},stack:{lazyAdd:true,value:true,setter:function(A){return this._setStack(A);},validator:j}}});U.prototype={initializer:function(x){var A=this;var y=A.get(D);var AA=A.get(s);var z=A.get(E);if(z&&z.length&&!A.get(I)){A.set(I,h);}if(AA){var L={icon:s,id:s,handler:{fn:A.close,context:A}};if(y){y.push(L);}A.set(D,y);}A.after("render",A._afterRenderer);},bindUI:function(){var A=this;A._bindLazyComponents();A.publish("close",{defaultFn:A._close});A.on("visibleChange",A._afterSetVisible);},destructor:function(){var A=this;var L=A.get(r);S.Event.purgeElement(L,true);},_bindLazyComponents:function(){var A=this;var L=A.get(r);L.on("mouseenter",S.bind(A._initLazyComponents,A));},close:function(){var A=this;A.fire("close");},_afterRenderer:function(L){var A=this;A._initButtons();A.get(f);A.get(V);},_close:function(){var A=this;if(A.get(t)){A.destroy();}else{A.hide();}if(A.get(c)){S.DialogMask.hide();}},_initButtons:function(){var A=this;var x=A.get(E);var L=S.Node.create(u);var y=S.Node.create(l);S.each(x,function(AA,z){var AB=y.cloneNode();if(AA.isDefault){AB.addClass(q);}if(AA.handler){AB.on("click",AA.handler,A);}AB.html(AA.text||X);L.append(AB);});if(x.length){A.set(I,L);}},_initLazyComponents:function(){var A=this;if(!A.get(N)&&A.get(P)){A.get(P);}if(!A.get(Q)&&A.get(G)){A.get(G);}},_setDraggable:function(z){var A=this;var x=A.get(r);var y=function(){var AC=A.get(N);if(AC){AC.destroy();AC.unplug(S.Plugin.DDConstrained);}};S.DD.DDM.CSS_PREFIX=R;if(z){var AA={node:x,handles:[a+B]};var L=S.merge(AA,z||{});if(L.on){S.each(L.on,function(AD,AC){L.on[AC]=S.bind(AD,A);});}y();var AB=new S.DD.Drag(L);AB.plug(S.Plugin.DDConstrained,{constrain2view:A.get(k)});A.set(N,AB);}else{y();}return z;},_setModal:function(L){var A=this;if(L){S.DialogMask.show();}else{S.DialogMask.hide();}return L;},_setResizable:function(z){var A=this;var AA=A.get(Q);var y=function(){if(AA){AA.destroy();}};if(z){var x=function(AC){var AB=AC.type;var AD=AC.info;if((AB==m)||((AB==T)&&!AC.currentTarget.get(w))){A.set(i,AD.height);A.set(H,AD.width);}};y();var L=new S.Resize(S.merge({handles:"r,br,b",minHeight:100,minWidth:200,constrain2view:true,node:A.get(r),proxy:true},z||{}));L.after("end",x);L.after("resize",x);A.set(Q,L);return z;}else{y();}},_setStack:function(L){var A=this;if(L){S.DialogManager.register(A);}else{S.DialogManager.remove(A);}return L;},_afterSetVisible:function(L){var A=this;if(A.get(c)){if(L.newVal){S.DialogMask.show();}else{S.DialogMask.hide();}}}};S.Dialog=S.Base.build(Z,S.Panel,[U,S.WidgetPosition,S.WidgetStack,S.WidgetPositionAlign,S.WidgetPositionConstrain]);S.DialogManager=new S.OverlayManager({zIndexBase:1000});S.mix(S.DialogManager,{findByChild:function(A){return S.Widget.getByNode(S.one(A).ancestor(a+b,true));},closeByChild:function(A){return S.DialogManager.findByChild(A).close();},refreshByChild:function(L){var A=S.DialogManager.findByChild(L);if(A&&A.io){A.io.start();}}});},"@VERSION@",{requires:["aui-panel","dd-constrain","aui-button-item","aui-overlay-manager","aui-overlay-mask","aui-io-plugin","aui-resize"],skinnable:true});