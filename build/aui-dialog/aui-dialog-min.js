AUI.add("aui-dialog",function(p){var ac=p.Lang,v=p.Object,K=ac.isBoolean,C=ac.isArray,P=ac.isObject,j=ac.toInt,E=p.WidgetStdMod,M=p.config.doc,u="",W="boundingBox",Z="button",c="buttons",X="close",Q="closethick",L="constrain2view",V="data-tabindex",d="dd",S="default",Y="destroyOnClose",x="dialog",y=".",D="dragConfig",aa=5,l="dragInstance",n="draggable",g="footerContent",T="hd",J="height",H="icon",b="icons",s="io",w="loading",B="modal",ab="proxy",e="resizable",G="resizableConfig",m="resizableInstance",F="stack",R="tabIndex",i="useARIA",O="viewportRegion",f="width",q="resize:resize",N="resize:end",h=p.getClassName,z=h(x),a=h(x,T),t=h(H,w),o=h(d),I=M.createTextNode("");var r=function(A){if(!p.DialogMask){p.DialogMask=new p.OverlayMask({visible:true}).render();}};p.mix(r,{NAME:x,ATTRS:{bodyContent:{value:I},buttons:{value:[],validator:C},close:{value:true},constrain2view:{setter:"_setConstrain2view",value:false,validator:K},destroyOnClose:{value:false,validator:K},draggable:{value:true},dragConfig:{setter:function(ad){var A=this;return p.merge({bubbleTargets:A,node:A.get(W),handles:[y+a]},ad||{});},writeOnce:true,value:{},validator:P},dragInstance:{setter:"_setDragInstance",value:null},modal:{lazyAdd:false,validator:K,value:false},resizableConfig:{setter:function(ad){var A=this;return p.merge({bubbleTargets:A,handles:"r,br,b",minHeight:100,minWidth:200,constrain2view:true,node:A.get(W),proxy:true,after:{end:p.bind(A._syncResizableDimentions,A),resize:p.bind(A._syncResizableDimentions,A)}},ad||{});},writeOnce:true,value:{},validator:P},resizableInstance:{setter:"_setResizableInstance",value:null},resizable:{value:true},stack:{value:true,setter:function(A){return this._setStack(A);},validator:K},strings:{value:{close:"Close dialog"}}}});r.prototype={initializer:function(ae){var A=this;var ag=A.get(b);var ai=A.get(X);var ah=A.get(c);if(ah&&ah.length&&!A.get(g)){A.set(g,I);}if(ai){var af=p.guid();var ad={icon:Q,id:af,handler:{fn:A.close,context:A},title:A.get("strings").close};if(ag){ag.push(ad);}A.set(b,ag);A._closeId=af;}A.publish("close",{defaultFn:A._close});A.addTarget(p.DialogManager);A.after("constrain2viewChange",A._afterConstrain2viewChange);A.after("drag:start",A._afterDragStart);A.after("draggableChange",A._afterDraggableChange);A.after("dragInstanceChange",A._afterDragInstanceChange);A.after("render",A._afterRenderer);A.after("resizableChange",A._afterResizableChange);A.after("resizableInstanceChange",A._afterResizableInstanceChange);},bindUI:function(){var A=this;A._bindLazyComponents();},syncUI:function(){var A=this;if(A.get(i)){A.plug(p.Plugin.Aria,{attributes:{visible:{ariaName:"hidden",format:function(ad){return !ad;}}}});}},destructor:function(){var A=this;var ad=A.get(W);p.Event.purgeElement(ad,true);p.DialogManager.remove(A);},alignToViewport:function(ae,ad){var A=this;var af=p.getDoc().get(O);A.move([af.left+j(ae),af.top+j(ad)]);},_bindLazyComponents:function(){var A=this;var ad=A.get(W);ad.on("mouseenter",p.bind(A._initLazyComponents,A));},close:function(){var A=this;A.fire("close");},_afterRenderer:function(ad){var A=this;A._initButtons();A.get(F);A.get(s);},_close:function(){var A=this;if(A.get(Y)){A.destroy();}else{A.hide();}},_initButtons:function(){var A=this;var ae=A.get(c);if(ae.length){var ad=new p.Toolbar({children:ae});ad._DEFAULT_CONTEXT=A;ad.render(A.footerNode);A.fire("contentUpdate");A.buttons=ad;}},_initLazyComponents:function(){var A=this;A.get(l);A.get(m);},_setDefaultARIAValues:function(){var A=this;var ad=A.icons;if(!A.get(i)){return;}A.aria.setRole("dialog",A.get(W));if(ad){var ae=ad.item(A._closeId)||null;if(ae){A.aria.setAttribute("controls",A.get("id"),ae.get(W));}}},_setDragInstance:function(ad){var A=this;if(A.get(n)){ad=new p.DD.Drag(A.get(D));A._updateDDConstrain2view(ad);}return ad;},_setResizableInstance:function(ad){var A=this;if(A.get(e)){ad=new p.Resize(A.get(G));}return ad;},_setStack:function(ad){var A=this;if(ad){p.DialogManager.register(A);}else{p.DialogManager.remove(A);}return ad;},_syncResizableDimentions:function(ae){var A=this;var ad=ae.type;var af=ae.info;if((ad===N)||((ad===q)&&!ae.currentTarget.get(ab))){A.set(J,af.offsetHeight);A.set(f,af.offsetWidth);}},_updateDDConstrain2view:function(ad){var A=this;ad.plug(p.Plugin.DDConstrained,{constrain2view:A.get(L)});},_afterConstrain2viewChange:function(ad){var A=this;A._updateDDConstrain2view(A.get(l));},_afterDraggableChange:function(ad){var A=this;A.set(l,null);},_afterDragInstanceChange:function(ad){var A=this;if(ad.prevVal){ad.prevVal.destroy();}},_afterDragStart:function(A){var al=this;var ah=al.get(L);if(!ah){var ak=al.get(l);var af=ak.get("dragNode");var ag=af.get("viewportRegion");var ae=af.get("region");var aj=[0,0];var ad=ak.deltaXY||aj;var ai=ak.mouseXY||aj;ak.plug(p.Plugin.DDConstrained,{constrain:{bottom:ag.bottom+(ae.height-ad[1])-aa,left:ag.left-ad[0]+aa,right:ag.right+(ae.right-ai[0])+aa,top:ag.top-ad[1]+aa}});}},_afterResizableChange:function(ad){var A=this;A.set(m,null);},_afterResizableInstanceChange:function(ad){var A=this;if(ad.prevVal){ad.prevVal.destroy();}}};p.Dialog=p.Component.create({NAME:x,EXTENDS:p.Panel,AUGMENTS:[r,p.WidgetPosition,p.WidgetStack,p.WidgetPositionAlign,p.WidgetPositionConstrain]});var k=new p.OverlayManager({zIndexBase:1000});var U={};k._MODALS=U;k.after(["dialog:destroy","dialog:modalChange","dialog:render","dialog:visibleChange"],function(ad){var A=ad.target;if(A){var ae=A.get("id");if(ad.type!=="dialog:destroy"&&A.get("visible")&&A.get("modal")){U[ae]=true;p.DialogMask.show();k._blockIFrameFocus();}else{delete U[ae];if(v.isEmpty(U)){p.DialogMask.hide();k._unblockIFrameFocus();}}}});p.mix(k,{findByChild:function(A){return p.Widget.getByNode(p.one(A).ancestor(y+z,true));},closeByChild:function(A){return k.findByChild(A).close();},refreshByChild:function(ad){var A=k.findByChild(ad);if(A&&A.io){A.io.start();}},_blockIFrameFocus:function(){p.all("iframe").each(function(){if(this.ancestor(y+z)===null){if(!this.hasAttribute(V)){this.setAttribute(V,this.get(R));
}this.set(R,-1);}});},_unblockIFrameFocus:function(){p.all("iframe").each(function(){if(this.hasAttribute(V)){this.set(R,this.getAttribute(V));}});}});p.DialogManager=k;},"@VERSION@",{requires:["aui-panel","dd-constrain","aui-button-item","aui-overlay-manager","aui-overlay-mask","aui-io-plugin","aui-resize"],skinnable:true});