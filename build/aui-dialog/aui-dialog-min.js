AUI.add("aui-dialog",function(R){var K=R.Lang,i=K.isBoolean,b=K.isArray,m=K.isObject,W="",N="bodyContent",q="boundingBox",u="button",D="buttons",r="close",j="constrain2view",C="container",E="dd",n="default",s="destroyOnClose",Y="dialog",Z=".",O="draggable",M="dragInstance",H="footerContent",o="hd",g="height",e="icon",U="io",X="loading",a="modal",v="proxy",F="resizable",P="resizableInstance",d="stack",h="tools",G="width",S="resize:resize",l="resize:end",I=R.ClassNameManager.getClassName,J=I(Y,u),c=I(Y,u,C),p=I(Y,u,n),B=I(Y,o),V=I(e,X),Q=I(E),f=document.createTextNode(""),k='<button class="'+J+'"></button>',t='<div class="'+c+'"></div>';var T=function(A){if(!R.DialogMask){R.DialogMask=new R.OverlayMask().render();}};R.mix(T,{NAME:Y,ATTRS:{bodyContent:{value:f},buttons:{value:[],validator:b},close:{value:true},constrain2view:{value:false,validator:i},destroyOnClose:{value:false,validator:i},draggable:{lazyAdd:true,value:true,setter:function(A){return this._setDraggable(A);}},dragInstance:{value:null},modal:{setter:function(A){return this._setModal(A);},lazyAdd:false,value:false,validator:i},resizable:{setter:function(A){return this._setResizable(A);},value:true},resizableInstance:{value:null},stack:{lazyAdd:true,value:true,setter:function(A){return this._setStack(A);},validator:i}}});T.prototype={initializer:function(w){var A=this;var y=A.get(h);var z=A.get(r);var x=A.get(D);if(x&&x.length&&!A.get(H)){A.set(H,f);}if(z){var L={icon:r,id:r,handler:{fn:A.close,context:A}};if(y){y.push(L);}A.set(h,y);}A.after("render",A._afterRenderer);},bindUI:function(){var A=this;A._bindLazyComponents();A.publish("close",{defaultFn:A._close});A.on("visibleChange",A._afterSetVisible);},destructor:function(){var A=this;var L=A.get(q);R.Event.purgeElement(L,true);},_bindLazyComponents:function(){var A=this;var L=A.get(q);L.on("mouseenter",R.bind(A._initLazyComponents,A));},close:function(){var A=this;A.fire("close");},_afterRenderer:function(L){var A=this;A._initButtons();A.get(d);A.get(U);},_close:function(){var A=this;if(A.get(s)){A.destroy();}else{A.hide();}if(A.get(a)){R.DialogMask.hide();}},_initButtons:function(){var A=this;var w=A.get(D);var L=R.Node.create(t);var x=R.Node.create(k);R.each(w,function(z,y){var AA=x.cloneNode();if(z.isDefault){AA.addClass(p);}if(z.handler){AA.on("click",z.handler,A);}AA.html(z.text||W);L.append(AA);});if(w.length){A.set(H,L);}},_initLazyComponents:function(){var A=this;if(!A.get(M)&&A.get(O)){A.get(O);}if(!A.get(P)&&A.get(F)){A.get(F);}},_setDraggable:function(y){var A=this;var w=A.get(q);var x=function(){var AB=A.get(M);if(AB){AB.destroy();AB.unplug(R.Plugin.DDConstrained);}};R.DD.DDM.CSS_PREFIX=Q;if(y){var z={node:w,handles:[Z+B]};var L=R.merge(z,y||{});if(L.on){R.each(L.on,function(AC,AB){L.on[AB]=R.bind(AC,A);});}x();var AA=new R.DD.Drag(L);AA.plug(R.Plugin.DDConstrained,{constrain2view:A.get(j)});A.set(M,AA);}else{x();}return y;},_setModal:function(L){var A=this;if(L){R.DialogMask.show();}else{R.DialogMask.hide();}return L;},_setResizable:function(y){var A=this;var z=A.get(P);var x=function(){if(z){z.destroy();}};if(y){var w=function(AB){var AA=AB.type;var AC=AB.info;if((AA==l)||((AA==S)&&!AB.currentTarget.get(v))){A.set(g,AC.height);A.set(G,AC.width);}};x();var L=new R.Resize(R.merge({handles:"r,br,b",minHeight:100,minWidth:200,constrain2view:true,node:A.get(q),proxy:true},y||{}));L.after("end",w);L.after("resize",w);A.set(P,L);return y;}else{x();}},_setStack:function(L){var A=this;if(L){R.DialogManager.register(A);}else{R.DialogManager.remove(A);}return L;},_afterSetVisible:function(L){var A=this;if(A.get(a)){if(L.newVal){R.DialogMask.show();}else{R.DialogMask.hide();}}}};R.Dialog=R.Base.build(Y,R.Panel,[T,R.WidgetPosition,R.WidgetStack,R.WidgetPositionAlign]);R.DialogManager=new R.OverlayManager({zIndexBase:1000});R.mix(R.DialogManager,{findByChild:function(A){return R.Widget.getByNode(A);},closeByChild:function(A){return R.DialogManager.findByChild(A).close();},refreshByChild:function(L){var A=R.DialogManager.findByChild(L);if(A&&A.io){A.io.start();}}});},"@VERSION@",{requires:["aui-panel","dd-constrain","aui-tool-item","aui-overlay-manager","aui-overlay-mask","aui-io-plugin","aui-resize"],skinnable:true});