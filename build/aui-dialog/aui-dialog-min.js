AUI.add("aui-dialog",function(q){var ac=q.Lang,w=q.Object,J=ac.isBoolean,D=ac.isArray,P=ac.isObject,V=function(A){return parseInt(A,10)||0;},L=q.config.doc,v="",m="bodyContent",W="boundingBox",aa="button",d="buttons",X="close",Q="closethick",K="constrain2view",b="container",e="dd",R="default",Y="destroyOnClose",y="dialog",z=".",n="draggable",l="dragInstance",h="footerContent",S="hd",I="height",G="icon",c="icons",t="io",x="loading",C="modal",ab="proxy",f="resizable",o="resizableInstance",F="stack",g="width",O="viewportRegion",r="resize:resize",N="resize:end",i=q.ClassNameManager.getClassName,B=i(y),j=i(y,aa),E=i(y,aa,b),T=i(y,aa,R),a=i(y,S),u=i(G,x),p=i(e),H=L.createTextNode(""),M='<button class="'+j+'"></button>',Z='<div class="'+E+'"></div>';var s=function(A){if(!q.DialogMask){q.DialogMask=new q.OverlayMask().render();}};q.mix(s,{NAME:y,ATTRS:{bodyContent:{value:H},buttons:{value:[],validator:D},close:{value:true},constrain2view:{value:false,validator:J},destroyOnClose:{value:false,validator:J},draggable:{lazyAdd:true,value:true,setter:function(A){return this._setDraggable(A);}},dragInstance:{value:null},modal:{lazyAdd:false,value:false,validator:J},resizable:{setter:function(A){return this._setResizable(A);},value:true},resizableInstance:{value:null},stack:{lazyAdd:true,value:true,setter:function(A){return this._setStack(A);},validator:J}}});s.prototype={initializer:function(ae){var A=this;var af=A.get(c);var ah=A.get(X);var ag=A.get(d);if(ag&&ag.length&&!A.get(h)){A.set(h,H);}if(ah){var ad={icon:Q,id:Q,handler:{fn:A.close,context:A}};if(af){af.push(ad);}A.set(c,af);}A.addTarget(q.DialogManager);A.after("render",A._afterRenderer);},bindUI:function(){var A=this;A._bindLazyComponents();A.publish("close",{defaultFn:A._close});},destructor:function(){var A=this;var ad=A.get(W);q.Event.purgeElement(ad,true);q.DialogManager.remove(A);},alignToViewport:function(ae,ad){var A=this;var af=q.getDoc().get(O);A.move([af.left+V(ae),af.top+V(ad)]);},_bindLazyComponents:function(){var A=this;var ad=A.get(W);ad.on("mouseenter",q.bind(A._initLazyComponents,A));},close:function(){var A=this;A.fire("close");},_afterConstrain2viewChange:function(ad){var A=this;A._setConstrain2view(ad.newVal);},_afterRenderer:function(ad){var A=this;A._initButtons();A.get(F);A.get(t);},_close:function(){var A=this;if(A.get(Y)){A.destroy();}else{A.hide();}},_initButtons:function(){var A=this;var ae=A.get(d);var ad=q.Node.create(Z);var af=q.Node.create(M);q.each(ae,function(ai,ah){var al=af.clone();if(ai.isDefault){al.addClass(T);}if(ai.handler){var ak=ai.handler;var aj=ak.fn||ak;var ag=ak.context||A;al.on("click",aj,ag);}al.html(ai.text||v);ad.append(al);});if(ae.length){A.set(h,ad);}},_initLazyComponents:function(){var A=this;if(!A.get(l)&&A.get(n)){A.get(n);}if(!A.get(o)&&A.get(f)){A.get(f);}},_setConstrain2view:function(ad){var A=this;var ae=A.get(l);if(ae){if(ad){ae.plug(q.Plugin.DDConstrained,{constrain2view:A.get(K)});}else{ae.unplug(q.Plugin.DDConstrained);}}},_setDraggable:function(ag){var A=this;var ae=A.get(W);var af=function(){var aj=A.get(l);if(aj){aj.destroy();aj.unplug(q.Plugin.DDConstrained);}};q.DD.DDM.CSS_PREFIX=p;if(ag){var ah={node:ae,handles:[z+a]};var ad=q.merge(ah,ag||{});if(ad.on){q.each(ad.on,function(ak,aj){ad.on[aj]=q.bind(ak,A);});}af();var ai=new q.DD.Drag(ad);A.set(l,ai);A.after("constrain2viewChange",A._afterConstrain2viewChange,A);A._setConstrain2view(A.get("constrain2view"));}else{af();}return ag;},_setResizable:function(ag){var A=this;var ah=A.get(o);var af=function(){if(ah){ah.destroy();}};if(ag){var ae=function(aj){var ai=aj.type;var ak=aj.info;if((ai===N)||((ai===r)&&!aj.currentTarget.get(ab))){A.set(I,ak.offsetHeight);A.set(g,ak.offsetWidth);}};af();var ad=new q.Resize(q.merge({handles:"r,br,b",minHeight:100,minWidth:200,constrain2view:true,node:A.get(W),proxy:true},ag||{}));ad.after("end",ae);ad.after("resize",ae);A.set(o,ad);return ag;}else{af();}},_setStack:function(ad){var A=this;if(ad){q.DialogManager.register(A);}else{q.DialogManager.remove(A);}return ad;},_uiHandles:[]};q.Dialog=q.Base.build(y,q.Panel,[s,q.WidgetPosition,q.WidgetStack,q.WidgetPositionAlign,q.WidgetPositionConstrain]);var k=new q.OverlayManager({zIndexBase:1000});var U={};k._MODALS=U;k.after(["dialog:destroy","dialog:modalChange","dialog:render","dialog:visibleChange"],function(ad){var A=ad.target;if(A){var ae=A.get("id");if(ad.type!=="dialog:destroy"&&A.get("visible")&&A.get("modal")){U[ae]=true;q.DialogMask.show();}else{delete U[ae];if(w.isEmpty(U)){q.DialogMask.hide();}}}});q.mix(k,{findByChild:function(A){return q.Widget.getByNode(q.one(A).ancestor(z+B,true));},closeByChild:function(A){return k.findByChild(A).close();},refreshByChild:function(ad){var A=k.findByChild(ad);if(A&&A.io){A.io.start();}}});q.DialogManager=k;},"@VERSION@",{requires:["aui-panel","dd-constrain","aui-button-item","aui-overlay-manager","aui-overlay-mask","aui-io-plugin","aui-resize"],skinnable:true});