AUI.add("aui-scheduler-view",function(b9){var cq=b9.Lang,cH=cq.isObject,bY=cq.isString,aX=cq.isBoolean,aJ=cq.isNumber,bh=function(A){return A===0?0:(A<0?-1:1);},aN=function(A,cL){return Math.max(Math.abs(A),cL)*bh(A);},bL=function(A){return parseFloat(A)||0;},bN=function(cL,A){return Math.round(cL/A)*A;},at=b9.DataType.DateMath,b5=b9.WidgetStdMod,aO=at.WEEK_LENGTH,bP="scheduler-view",aI="scheduler-view-day",cd="scheduler-view-week",cA="scheduler-view-month",bK="activeView",a9="am",v="borderLeftWidth",ch="borderRightWidth",aT="boundingBox",bA="childNodes",r="children",ai="col",aA="colDaysNode",cb="colHeaderDaysNode",J="colblank",z="coldata",aL="colday",a="colgrid",bv="colmonth",X="colspan",m="coltime",cv="columnNode",aR="container",aP="content",cx="contentBox",ay="createDocumentFragment",be="currentDate",bB="data",bd="dateFormat",cn="day",V="days",F="delegateConfig",bI="disabled",Y="div",bn="division",ad="down",cf="dragNode",bX="duration",aD="endDate",a5="event",cJ="eventRecorder",t="eventWidth",b3="events",aK="first",ce="firstDayOfWeek",bb="grid",cI="hd",b7="header",bc="headerDateFormat",cE="headerTableNode",bS="height",q="HELPER",au="hidden",aS="host",aH="hourHeight",w="icon",am="isoTime",bi="labelAM",aF="labelPM",aU="left",aB="locale",ae="marker",a7="markercell",bQ="markercellNode",a0="markercellsNode",M="markers",bG="month",ba="monthContainerNode",bE="navigationDateFormat",aQ="next",bO="nextDate",cK="node",al="nomonth",av="noscroll",b6="offsetHeight",L="offsetTop",b8="offsetWidth",cm="ownerDocument",ca="pad",cs="parentEvent",S="parentNode",ap="pm",ac="prevDate",bu="proxy",aj="px",aV="rendered",b4="repeated",a1="right",bs="row",s="scheduler",aG="scheduler-event",aa="scrollable",U="shim",cc="startDate",aW="table",cy="tableColNode",j="tableDataNode",E="tableGridNode",by="tableNode",bZ="tableTimeNode",bw="tbody",e="td",bp="time",ak="timesNode",g="title",an="today",bt="top",cF="tr",B="trigger",ct="week",bC="width",bM="-",k="a",bR=".",bJ="",bD="%",W=" ",G=b9.getClassName,bo=G(bP,av),af=G(bP,aa);var aZ=b9.Component.create({NAME:bP,AUGMENTS:[b9.WidgetStdMod],ATTRS:{bodyContent:{value:bJ},height:{value:600},isoTime:{value:false,validator:aX},name:{value:bJ,validator:bY},navigationDateFormat:{value:"%A - %d %b %Y",validator:bY},nextDate:{getter:"getNextDate",readOnly:true},prevDate:{getter:"getPrevDate",readOnly:true},scheduler:{lazyAdd:false,setter:"_setScheduler"},scrollable:{value:true,validator:aX},triggerNode:{setter:b9.one},visible:{value:false}},BIND_UI_ATTRS:[aa],prototype:{initializer:function(){var A=this;A.after("render",A._afterRender);},syncUI:function(){var A=this;A.syncStdContent();},adjustCurrentDate:function(){var A=this;var cM=A.get(s);var cL=cM.get(be);cM.set(be,cL);},flushViewCache:function(){},getNextDate:function(){},getPrevDate:function(){},getToday:function(){return at.clearTime(new Date());},limitDate:function(cL,cM){var A=this;if(at.after(cL,cM)){cL=at.clone(cM);}return cL;},plotEvents:function(A){},syncStdContent:function(){},syncEventUI:function(A){},_uiSetCurrentDate:function(A){},_afterRender:function(cM){var A=this;var cL=A.get(s);A.adjustCurrentDate();A._uiSetScrollable(A.get(aa));},_setScheduler:function(cM){var A=this;var cL=A.get(s);if(cL){A.removeTarget(cL);}if(cM){A.addTarget(cM);cM.after("eventsChange",b9.bind(A.flushViewCache,A));}return cM;},_uiSetScrollable:function(cM){var A=this;var cL=A.bodyNode;if(cL){cL.toggleClass(af,cM);cL.toggleClass(bo,!cM);}},_uiSetVisible:function(cL){var A=this;aZ.superclass._uiSetVisible.apply(this,arguments);if(cL&&A.get(aV)){A.adjustCurrentDate();}}}});b9.SchedulerView=aZ;var bH=cq.sub;var P=function(A,cL){return function(cN){var cM=cN.all(A);return(cM.size()>=cL)?cM:null;};},Z=G(q,au),aM=G(aG),bk=G(aG,bI),bU=G(aG,bu),R=G(s,an),ar=G(s,an,cI),C=G(bP,z),c=G(bP,a),ci=G(bP,bb),cj=G(bP,bb,aR),bm=G(bP,ae,bn),cl=G(bP,a7),N=G(bP,M),bz=G(bP,aW),cp=G(bP,cn,b7,aW),u=G(bP,cn,b7,cn),bl=G(bP,cn,b7,cn,ca,a1),bW=G(bP,cn,b7,cn,aK),a4=G(bP,cn,b7,ai),cC=G(bP,aW,ai),aE=G(bP,aW,ai,U),Q=G(bP,aW,J),I=G(bP,aW,aL),n=G(bP,aW,aL,b7),cu=G(bP,aW,m),br=G(bP,aW,bp),ag='<div class="'+cl+'">'+'<div class="'+bm+'"></div>'+"</div>",ax='<table cellspacing="0" cellpadding="0" class="'+bz+'">'+"<tbody>"+'<tr class="'+c+'" height="1">'+'<td height="0" class="'+[cC,Q].join(W)+'"></td>'+'<td class="'+cj+'" colspan="1">'+'<div class="'+ci+'">'+'<div class="'+N+'"></div>'+"</div>"+"</td>"+"</tr>"+'<tr class="'+C+'">'+'<td class="'+[cC,cu].join(W)+'"></td>'+"</tr>"+"</tbody>"+"</table>",bg='<td class="'+[cC,I].join(W)+'">'+'<div class="'+aE+'"></div>'+"</td>",i='<div class="'+br+'">{hour}</div>',az='<table cellspacing="0" cellpadding="0" class="'+cp+'">'+"<tbody>"+'<tr class="'+a4+'"></tr>'+"</tbody>"+"</table>",bj='<th class="'+u+'"><a href="#">&nbsp;</a></th>',aw='<td class="'+[u,bW].join(W)+'"></td>',x='<th class="'+[u,bl].join(W)+'">&nbsp;</th>';var cD=b9.Component.create({NAME:aI,ATTRS:{bodyContent:{value:bJ},days:{value:1,validator:aJ},delegateConfig:{value:{},setter:function(cL){var A=this;return b9.merge({dragConfig:{useShim:false},bubbleTargets:A,container:A.get(aT),nodes:bR+aM,invalid:"input, select, button, a, textarea, "+bR+bk},cL||{});},validator:cH},headerDateFormat:{value:"%a %d/%m",validator:bY},name:{value:cn},hourHeight:{value:52,validator:aJ},eventWidth:{value:95,validator:aJ},headerTableNode:{valueFn:function(){return b9.Node.create(az);}},tableNode:{valueFn:function(){return b9.Node.create(ax);}},colDaysNode:{valueFn:"_valueColDaysNode"},colHeaderDaysNode:{valueFn:"_valueColHeaderDaysNode"},markercellsNode:{valueFn:"_valueMarkercellsNode"},timesNode:{valueFn:"_valueTimesNode"}},HTML_PARSER:{colHeaderDaysNode:P(bR+u,2),colDaysNode:P(bR+I,1),markercellsNode:P(bR+cl,24),timesNode:P(bR+br,24),headerTableNode:bR+cp,tableNode:bR+bz},EXTENDS:b9.SchedulerView,prototype:{initializer:function(){var A=this;A.colDaysNode=A.get(aA);A.colHeaderDaysNode=A.get(cb);A.headerTableNode=A.get(cE);A.markercellsNode=A.get(a0);A.tableNode=A.get(by);A.timesNode=A.get(ak);
A.colShimNodes=A.colDaysNode.all(bR+aE);A.colDataNode=A.tableNode.one(bR+C);A.colTimeNode=A.tableNode.one(bR+cu);A.dayHeaderColNode=A.headerTableNode.one(bR+a4);A.gridContainer=A.tableNode.one(bR+cj);A.markersNode=A.tableNode.one(bR+N);A.activeColumn=null;},renderUI:function(){var A=this;A.colTimeNode.setContent(A.timesNode);A.markersNode.setContent(A.markercellsNode);A.colDaysNode.appendTo(A.colDataNode);A.colHeaderDaysNode.appendTo(A.dayHeaderColNode);},bindUI:function(){var A=this;A.headerTableNode.delegate("click",b9.bind(A._onClickDaysHeader,A),bR+u);A.colDataNode.delegate("mousedown",b9.bind(A._onMouseDownTableCol,A),bR+cC);A.colDataNode.delegate("mouseup",b9.bind(A._onMouseUpTableCol,A),bR+cC);A.colDataNode.delegate("mousemove",b9.bind(A._onMouseMoveTableCol,A),bR+cC);A.on("drag:end",A._onEventDragEnd);A.on("drag:start",A._onEventDragStart);A.on("drag:tickAlignY",A._dragTickAlignY);A.after("drag:align",A._afterDragAlign);},syncUI:function(){var A=this;cD.superclass.syncUI.apply(this,arguments);A.gridContainer.attr(X,A.get(V));A._setupDragDrop();},syncStdContent:function(){var A=this;A.setStdModContent(b5.BODY,A.tableNode.getDOM());A.setStdModContent(b5.HEADER,A.headerTableNode.getDOM());},calculateTopByDate:function(cN){var cL=this;var A=cL.get(aH);var cM=cN.getHours();var cO=cN.getMinutes();var cP=cN.getSeconds();return((cM*60)+cO+(cP/60))*(A/60);},calculateHoursByTop:function(cO){var cL=this;var A=cL.get(aH);var cQ=bL((cO/A).toFixed(2));var cP=0;var cN=Math.floor((cQ*100)%100*0.6);var cM=Math.floor(cQ);return[cM,cN,cP];},getNextDate:function(){var A=this;var cM=A.get(s);var cL=cM.get(be);return at.add(cL,at.DAY,1);},getPrevDate:function(){var A=this;var cM=A.get(s);var cL=cM.get(be);return at.subtract(cL,at.DAY,1);},getColumnByDate:function(cM){var A=this;var cN=A.get(s);var cL=at.safeClearTime(cN.get(be));var cO=at.getDayOffset(at.safeClearTime(cM),cL);return A.colDaysNode.item(cO);},getDateByColumn:function(cM){var A=this;var cN=A.get(s);var cL=at.safeClearTime(cN.get(be));return at.add(cL,at.DAY,cM);},plotEvents:function(cM){var A=this;var cL=A.get(s);A.colShimNodes.each(function(cQ,cP){var cO=A.getDateByColumn(cP);var cN=cL.getEventsByDay(cO);cQ.empty();b9.Array.each(cN,function(cR,cS){if(!cR.isDayOverlapEvent()){cQ.append(cR.get(cK));cR.set(cv,cQ.get(S));A.syncEventTopUI(cR);A.syncEventHeightUI(cR);}});A.syncEventsIntersectionUI(cN);});},syncColumnsUI:function(){var A=this;A.colDaysNode.each(function(cN,cM){var cL=A.getDateByColumn(cM);cN.toggleClass(R,at.isToday(cL));});},syncDaysHeaderUI:function(){var cM=this;var cO=cM.get(s);var cN=cO.get(be);var cL=cM.get(bc);var A=cM.get(aB);cM.colHeaderDaysNode.all(k).each(function(cR,cQ){var cP=at.add(cN,at.DAY,cQ);var cS=b9.DataType.Date.format(cP,{format:cL,locale:A});cR.toggleClass(ar,at.isToday(cP));cR.html(cS);});},syncEventsIntersectionUI:function(cL){var A=this;var cM=A.get(s);var cN=A.get(t);cM.flushEvents();b9.Array.each(cL,function(cP,cQ){var cS=A.findEventIntersections(cP,cL);var cR=cS.length;var cO=(cN/cR);b9.Array.each(cS,function(cU,cV){var cT=cU.get(cK);var cX=cO*cV;var cW=cO*1.7;if(cV===(cR-1)){cW=cN-cX;}cT.setStyle(bC,cW+bD);cT.setStyle(aU,cX+bD);var cY=cT.get(S);if(cY){cY.insert(cT,cV);}cU._filtered=true;});});},syncEventHeightUI:function(cM){var cL=this;var A=cL.get(aH);var cO=cL.calculateTopByDate(cM.get(cc));var cN=cL.calculateTopByDate(cM.get(aD));cM.get(cK).set(b6,Math.max(cN-cO,A/2));},syncEventRecorderUI:function(cN){var A=this;var cM=A.get(s);var cO=cM.get(cJ);var cL=cO.get(cK);if(cN&&!cL.inDoc()){cN.append(cL);}A.syncEventTopUI(cO);A.syncEventHeightUI(cO);},syncEventTopUI:function(cM){var cL=this;var A=cM.get(cK);var cN=cL.calculateTopByDate(cM.get(cc));A.setStyle(bt,cN+aj);},findEventIntersections:function(cL,cM){var A=this;var cN=[];b9.Array.each(cM,function(cP,cO){if(!cL._filtered&&!cP.isDayOverlapEvent()&&cL.intersectHours(cP)){cN.push(cP);}});return cN;},_createEvents:function(){var A=this;var cL=function(cM,cN){A.publish(cM,{defaultFn:cN,queuable:false,emitFacade:true,bubbles:true});};},_afterDragAlign:function(cL){var A=this;A.delegate.dd.actXY[0]=null;},_dragTickAlignX:function(cO){var A=this;var cQ=A.proxyEvt;var cM=A.colDaysNode.indexOf(cO);var cL=A.getDateByColumn(cM);var cP=at.clone(cL);var cN=at.clone(cL);at.copyHours(cN,cQ.get(aD));at.copyHours(cP,cQ.get(cc));cQ.set(aD,cN);cQ.set(cc,cP);cO.append(cQ.get(cK));},_dragTickAlignY:function(cO){var cL=this;var A=cO.target.get(aS);var cR=cL.proxyEvt;var cN=A.get(cK).getData(aG);var cQ=at.clone(cR.get(cc));var cP=cL.calculateHoursByTop(bL(A.get(cf).getComputedStyle(bt)));cL._setTickedHours(cQ,cP);var cM=at.clone(cQ);cR.set(aD,at.add(cM,at.MINUTES,cL._currentEvtDuration));cR.set(cc,cQ);cR.syncNodeTitleUI();},_getXYDelta:function(cL){var A=this;var cN=cL.currentTarget;var cM=cN.getXY(),cO=[cL.pageX,cL.pageY];return b9.Array.map(cM,function(cQ,cP){return(cO[cP]-cQ);});},_getTickY:function(){var A=this;return bN(Math.ceil(A.get(aH)/2),10);},_getColumnRefWidth:function(){var A=this;var cL=A.colDaysNode.item(0);return bL(cL.get(b8))-bL(cL.getStyle(ch))-bL(cL.getStyle(v));},_setupDragDrop:function(){var cL=this;var cM=cL.get(aT);if(!cL.proxyEvt){var cN=cL.get(s);cL.proxyEvt=new b9.SchedulerEvent({scheduler:cN});cL.proxyEvt.removeTarget(cN);cL.proxyEvt.get(cK).addClass(bU).hide();}if(!cL.delegate){cL.delegate=new b9.DD.Delegate(cL.get(F));}var A=cL.delegate.dd;var cO=cL.get(aH)/2;A.unplug(b9.Plugin.DDConstrained);A.unplug(b9.Plugin.DDNodeScroll);A.plug(b9.Plugin.DDConstrained,{bubbleTargets:cL,constrain:cL.bodyNode,stickY:true,tickY:cO});A.plug(b9.Plugin.DDNodeScroll,{node:cL.bodyNode,scrollDelay:150});},_uiSetCurrentDate:function(cL){var A=this;A.syncColumnsUI();A.syncDaysHeaderUI();},_onClickDaysHeader:function(cN){var A=this;var cM=A.get(s);if(cN.target.test(k)){var cO=cM.getViewByName(cn);var cL=A.colHeaderDaysNode.indexOf(cN.currentTarget)-1;if(cO){cM.set(be,A.getDateByColumn(cL));cM.set(bK,cO);}}cN.preventDefault();},_onEventDragEnd:function(cP){var cL=this;
var cN=cL.get(s);var cM=cL.get(aT);var A=cL.delegate.dd;var cQ=cL.proxyEvt;var cO=A.get(cK).getData(aG);A.get(cK).show();cQ.get(cK).hide();cM.selectable();cO.copyDates(cQ);cN.syncEventsUI();},_onEventDragStart:function(cP){var cL=this;var cN=cL.get(aT);var A=cL.delegate.dd;var cQ=cL.proxyEvt;var cO=A.get(cK).getData(aG);if(cO){var cM=cO.get(cv);var cR=cQ.get(cK);A.set(cf,cR);cM.append(cR);cQ.copyPropagateAttrValues(cO);cL.syncEventTopUI(cQ);cL.syncEventHeightUI(cQ);cR.show();cL._currentEvtDuration=cO.getMinutesDuration();}A.get(cK).hide();cN.unselectable();},_onMouseDownTableCol:function(cN){var A=this;var cM=A.get(s);var cO=cM.get(cJ);if(cO&&!cM.get(bI)){cO.hideOverlay();if(cN.target.test(bR+aE)){var cL=A.colDaysNode.indexOf(cN.currentTarget);A.dragXY=A.startXY=A._getXYDelta(cN);A.ddStartDate=A.getDateByColumn(cL);A.ddEndDate=at.clone(A.ddStartDate);A._setTickedHours(A.ddStartDate,A.calculateHoursByTop(A.startXY[1]));A.ddMaxDate=at.clone(A.ddStartDate);A.ddMaxDate.setHours(23,59,59);cO.set(cc,A.ddStartDate);cO.set(aD,A.limitDate(cO.get(aD),A.ddMaxDate));cN.halt();}}},_onMouseMoveTableCol:function(cO){var A=this;var cN=A.get(s);var cR=cN.get(cJ);if(A.activeColumn!==cO.currentTarget){A.activeColumn=cO.currentTarget;cO.pageX=100;A._dragTickAlignX(A.activeColumn);}var cP=A.ddStartDate;if(cP){A.dragXY=A._getXYDelta(cO);A._setTickedHours(A.ddEndDate,A.calculateHoursByTop(A.dragXY[1]));var cQ=at.getMinutesOffset(A.ddEndDate,cP);if((A.dragXY[1]-A.startXY[1])>0){cQ=aN(cQ,cR.get(bX));}var cL=A.limitDate(at.add(cP,at.MINUTES,cQ),A.ddMaxDate);if(cQ>0){cR.set(aD,cL);}else{var cM=cR.get(aD);cR.set(cc,cL);cR.set(aD,cM);}A.syncEventRecorderUI(cO.currentTarget);}},_onMouseUpTableCol:function(cM){var A=this;var cL=A.get(s);var cN=cL.get(cJ);if(cN&&!cL.get(bI)){if(A.ddStartDate){A.syncEventRecorderUI(cM.currentTarget);cN.showOverlay();}A.ddEndDate=null;A.ddStartDate=null;}},_setTickedHours:function(cL,cM){var A=this;cL.setHours(cM[0],bN(cM[1],A._getTickY()),cM[2]);},_valueColDaysNode:function(){var A=this;var cM=A.get(V);var cL=[];while(cM--){cL.push(bg);}return b9.NodeList.create(cL.join(bJ));},_valueColHeaderDaysNode:function(){var A=this;var cM=A.get(V);var cL=[];cL.push(aw);while(cM--){cL.push(bj);}cL.push(x);return b9.NodeList.create(cL.join(bJ));},_valueMarkercellsNode:function(){var A=this;var cL=[],cM;for(cM=0;cM<=23;cM++){cL.push(ag);}return b9.NodeList.create(cL.join(bJ));},_valueTimesNode:function(){var A=this;var cN=A.get(am);var cM=[],cL;for(cL=0;cL<=23;cL++){cM.push(bH(i,{hour:cN?at.toIsoTimeString(cL):at.toUsTimeString(cL,false,true)}));}return b9.NodeList.create(cM.join(bJ));}}});b9.SchedulerDayView=cD;var ao=b9.Component.create({NAME:cd,ATTRS:{bodyContent:{value:bJ},days:{value:7},name:{value:ct}},EXTENDS:b9.SchedulerDayView,prototype:{adjustCurrentDate:function(){var A=this;var cN=A.get(s);var cL=cN.get(be);var cM=cN.get(ce);cN.set(be,at.getFirstDayOfWeek(cL,cM));},getNextDate:function(){var A=this;var cM=A.get(s);var cL=cM.get(be);var cN=A._firstDayOfWeek(cL);return at.add(cN,at.WEEK,1);},getPrevDate:function(){var A=this;var cM=A.get(s);var cL=cM.get(be);var cN=A._firstDayOfWeek(cL);return at.subtract(cN,at.WEEK,1);},getToday:function(){var A=this;var cL=ao.superclass.getToday.apply(this,arguments);return A._firstDayOfWeek(cL);},_firstDayOfWeek:function(cM){var A=this;var cN=A.get(s);var cL=cN.get(ce);return at.getFirstDayOfWeek(cM,cL);}}});b9.SchedulerWeekView=ao;var f=G(w),l=G(w,"arrowstop-1-l"),cw=G(w,"arrowstop-1-r"),b2=G(bP,bG,a),o=G(bP,bG,a,aK),b=G(bP,bG,a,an),h=G(bP,bG,aR),a6=G(bP,bG,b7,ai),y=G(bP,bG,b7,cn),cz=G(bP,bG,b7,aW),b1=G(bP,bG,bs),aq=G(bP,bG,bs,aR),cG=G(bP,aW,bv,b7),bF=G(bP,bG,aW,bB),b0=G(bP,bG,aW,bB,ai),cg=G(bP,bG,aW,bB,ai,aK),a3=G(bP,bG,aW,bB,ai,al),aY=G(bP,bG,aW,bB,ai,g),cB=G(bP,bG,aW,bB,ai,g,ad),ah=G(bP,bG,aW,bB,ai,g,aK),D=G(bP,bG,aW,bB,ai,g,aQ),T=G(bP,bG,aW,bB,ai,g,an),bq=G(bP,bG,aW,bB,a5),d=G(bP,bG,aW,bB,a5,aU),p=G(bP,bG,aW,bB,a5,b4),bT=G(bP,bG,aW,bB,a5,a1),a2=G(bP,bG,aW,bB,aK),bf=G(bP,bG,aW,bb),cr=G(bP,bG,aW,bb,aK),H='<table cellspacing="0" cellpadding="0" class="'+cz+'">'+"<tbody>"+'<tr class="'+a6+'"></tr>'+"</tbody>"+"</table>",O='<th class="'+y+'"><div>&nbsp;</div></th>',co='<div class="'+h+'">'+'<div class="'+aq+'">'+'<div class="'+b1+'" style="top: 0; height: 16.6667%;"></div>'+'<div class="'+b1+'" style="top: 16.6667%; height: 16.6667%;"></div>'+'<div class="'+b1+'" style="top: 33.3333%; height: 16.6667%;"></div>'+'<div class="'+b1+'" style="top: 50%; height: 16.6667%;"></div>'+'<div class="'+b1+'" style="top: 66.6667%; height: 16.6667%;"></div>'+'<div class="'+b1+'" style="top: 83.3333%; height: 16.6667%;"></div>'+"</div>"+"</div>",bx='<table cellspacing="0" cellpadding="0" class="'+bf+'">'+"<tbody>"+"<tr>"+'<td class="'+[b2,o].join(W)+'">&nbsp;</td>'+'<td class="'+b2+'">&nbsp;</td>'+'<td class="'+b2+'">&nbsp;</td>'+'<td class="'+b2+'">&nbsp;</td>'+'<td class="'+b2+'">&nbsp;</td>'+'<td class="'+b2+'">&nbsp;</td>'+'<td class="'+b2+'">&nbsp;</td>'+"</tr>"+"</tbody>"+"</table>",bV='<table cellspacing="0" cellpadding="0" class="'+bF+'">'+"<tbody></tbody>"+"</table>",ck="<tr></tr>",a8='<td class="'+b0+'"><div></div></td>',ab='<span class="'+[f,l].join(W)+'"></span>',K='<span class="'+[f,cw].join(W)+'"></span>';var aC=b9.Component.create({NAME:cA,ATTRS:{bodyContent:{value:bJ},name:{value:bG},headerDateFormat:{value:"%a"},navigationDateFormat:{value:"%b %Y"},scrollable:{value:false},monthContainerNode:{valueFn:function(){return b9.Node.create(co);}},headerTableNode:{valueFn:function(){return b9.Node.create(H);}},colHeaderDaysNode:{valueFn:"_valueColHeaderDaysNode"},tableGridNode:{valueFn:"_valueTableGridNode"}},HTML_PARSER:{tableGridNode:P(bR+bf,7),colHeaderDaysNode:P(bR+y,7),monthContainerNode:bR+h,headerTableNode:bR+cz},EXTENDS:b9.SchedulerView,prototype:{evtDateStack:null,evtDataTableStack:null,initializer:function(){var A=this;A.evtDateStack={};A.evtDataTableStack={};A.colHeaderDaysNode=A.get(cb);A.headerTableNode=A.get(cE);A.monthContainerNode=A.get(ba);A.tableGridNode=A.get(E);
A.dayHeaderColNode=A.headerTableNode.one(bR+a6);A.monthRows=A.monthContainerNode.all(bR+b1);A.tableGridCols=A.tableGridNode.all(e);},renderUI:function(){var A=this;A.colHeaderDaysNode.appendTo(A.dayHeaderColNode);A.monthRows.each(function(cN,cM){var cL=A.tableGridNode.item(cM);cN.append(cL.toggleClass(cr,(cM===0)));});},buildEventsTable:function(cL,cQ){var cW=this;var cT=5;var cN=at.clearTime(cW._findCurrentMonthEnd());var cV=at.clearTime(cW._findCurrentMonthStart());var cS=String(cV.getTime()).concat(cL.getTime()).concat(cQ.getTime());var cR=cW.evtDataTableStack[cS];if(!cR){cR=b9.Node.create(bV);var cU=cR.one(bw);var cO=b9.Node.create(ck);cW.loopDates(cL,cQ,function(cY,cX){var cZ=b9.Node.create(a8);cZ.addClass(aY).toggleClass(ah,(cX===0)).toggleClass(T,at.isToday(cY)).toggleClass(D,at.isToday(at.subtract(cY,at.DAY,1))).toggleClass(cB,at.isToday(at.subtract(cY,at.WEEK,1)));if(at.before(cY,cV)||at.after(cY,cN)){cZ.addClass(a3);}cO.append(cZ.setContent(cY.getDate()));});cU.append(cO);var A;for(A=0;A<cT;A++){var cP=0;var cM=b9.Node.create(ck);cW.loopDates(cL,cQ,function(c2,c0){if(cP<=c0){var c1=cW.getIntersectEvents(c2),cY=c1[A];var c3=b9.Node.create(a8);if(cY){var cX=c3.one(Y);var cZ=cW._getEvtSplitInfo(cY,cL,cQ);c3.attr(X,cZ.colspan);cX.addClass(bq).setContent(cW._getEvtLabel(cY));if(cZ.left){cX.addClass(d).prepend(ab);}if(cZ.right){cX.addClass(bT).append(K);}if(cY.get(cs)){cX.addClass(p);}cP+=cZ.colspan;}else{cP++;}cM.append(c3);}});cU.append(cM);}cW.evtDataTableStack[cS]=cR;}return cR;},flushViewCache:function(){var A=this;A.evtDateStack={};A.evtDataTableStack={};},getIntersectEvents:function(cL){var A=this;var cN=A.get(s);var cM=String(cL.getTime());if(!A.evtDateStack[cM]){A.evtDateStack[cM]=cN.getIntersectEvents(cL);}return A.evtDateStack[cM];},loopDates:function(A,cN,cQ,cR,cP){var cS=this;var cL=at.clone(A);var cM=cN.getTime(),cO;for(cO=0;cL.getTime()<=cM;cO++){cQ.apply(cS,[cL,cO]);cL=at.add(cL,(cR||at.DAY),(cP||1));}},plotEvents:function(){var cL=this;var cM=cL._findCurrentMonthStart();var A=at.safeClearTime(cL._findFirstDayOfWeek(cM));cL.bodyNode.all(bR+bF).remove();cL.monthRows.each(function(cQ,cO){var cN=at.add(A,at.WEEK,cO);var cR=at.add(cN,at.DAY,aO-1);var cP=cL.buildEventsTable(cN,cR);if(cO===0){cP.addClass(a2);}cQ.append(cP);});},syncStdContent:function(){var A=this;A.setStdModContent(b5.BODY,A.monthContainerNode.getDOM());A.setStdModContent(b5.HEADER,A.headerTableNode.getDOM());},syncGridUI:function(){var cS=this;var cM=cS.getToday();var cL=cS.get(s);cS.tableGridCols.removeClass(b);if(at.isSameMonth(cM,cL.get(be))){var A=cL.get(ce);var cO=cS._findCurrentMonthStart();var cQ=cS._findFirstDayOfWeek(cM);var cN=at.getWeekNumber(cM,A)-at.getWeekNumber(cO,A);var cR=(cM.getDate()-cQ.getDate());var cP=cS.tableGridNode.item(cN).all(e).item(cR);if(cP){cP.addClass(b);}}},adjustCurrentDate:function(){var A=this;var cL=A.get(s);cL.set(be,A._findCurrentMonthStart());},getNextDate:function(){var A=this;var cM=A.get(s);var cL=cM.get(be);return at.add(cL,at.MONTH,1);},getPrevDate:function(){var A=this;var cM=A.get(s);var cL=cM.get(be);return at.subtract(cL,at.MONTH,1);},syncDaysHeaderUI:function(){var cM=this;var cP=cM.get(s);var cN=cP.get(be);var cL=cM.get(bc);var A=cM.get(aB);var cO=cM._findFirstDayOfWeek(cN);cM.colHeaderDaysNode.all(Y).each(function(cS,cR){var cQ=at.add(cO,at.DAY,cR);var cT=b9.DataType.Date.format(cQ,{format:cL,locale:A});cS.html(cT);});},_findCurrentMonthEnd:function(){var A=this;var cM=A.get(s);var cL=cM.get(be);return at.findMonthEnd(cL);},_findCurrentMonthStart:function(){var A=this;var cM=A.get(s);var cL=cM.get(be);return at.findMonthStart(cL);},_findFirstDayOfWeek:function(cM){var A=this;var cN=A.get(s);var cL=cN.get(ce);return at.getFirstDayOfWeek(cM,cL);},_getEvtLabel:function(cM){var cL=this;var cN=cM.get(aD);var A=cM.get(cc);return[A.getHours(),bM,cN.getHours(),W,cM.get(aP)].join(bJ);},_getEvtSplitInfo:function(cR,A,cP){var cS=this;var cL=cR.getClearStartDate();var cQ=cR.getClearEndDate();var cO=cR.getDaysDuration();var cN={};var cM=1;if(at.after(cL,A)){cM=Math.min(cO,Math.abs(at.getDayOffset(cP,cL))+1);if(cM>1){cN.right=true;}}else{cM=Math.abs(at.getDayOffset(cQ,A)+1);if(cM>1){cN.left=true;}}cN.colspan=Math.min(cM,aO);if(cM>=aO){cN.right=true;cN.left=true;}return cN;},_uiSetCurrentDate:function(cL){var A=this;A.syncDaysHeaderUI();A.syncGridUI();},_valueColHeaderDaysNode:function(){var A=this;return A._valueNodeList(aO,O);},_valueTableGridNode:function(){var A=this;return A._valueNodeList(aO,bx);},_valueNodeList:function(cN,cM){var A=this;var cL=[];while(cN--){cL.push(cM);}return b9.NodeList.create(cL.join(bJ));}}});b9.SchedulerMonthView=aC;},"@VERSION@",{skinnable:true,requires:["aui-scheduler-event","aui-calendar","aui-button-item","dd-drag","dd-delegate","dd-drop","dd-constrain"]});