AUI.add("aui-scheduler-base",function(ac){var P=ac.Lang,aw=P.isString,a=P.isArray,d=P.isDate,I=P.isNumber,B=P.isObject,H=function(A){return(A instanceof ac.Scheduler);},s=function(A){return(A instanceof ac.SchedulerView);},aa=function(A){return(A instanceof ac.SchedulerEvent);},t=function(A){return(ac.SchedulerCalendar&&(A instanceof ac.SchedulerCalendar));},h=ac.DataType.DateMath,W=ac.WidgetStdMod,U=".",o="",p=" ",r="scheduler-base",ai="data-view-name",F="activeView",av="clearfix",E="controls",ak="controlsNode",an="current",ab="currentDate",Y="currentDateNode",aj="date",ag="endDate",ah="eventClass",N="eventRecorder",ax="events",aC="hd",v="header",au="headerNode",m="helper",S="icon",j="iconNextNode",aq="iconPrevNode",aA="locale",l="name",Q="nav",M="navNode",ap="navigationDateFormat",n="next",c="nextDate",at="prev",al="prevDate",aB="rendered",L="scheduler",ay="startDate",D="strings",e="today",ad="todayNode",u="triggerNode",y="view",O="viewStack",aD="views",X="viewsNode",z=ac.getClassName,ae=z(m,av),i=z(S),ao=z(r,E),T=z(r,an,aj),f=z(r,aC),V=z(r,S,n),C=z(r,S,at),az=z(r,Q),x=z(r,e),Z=z(r,y),g=z(r,y,o),q=z(r,aD),am='<div class="'+ao+'"></div>',w='<div class="'+T+'"></div>',b='<div class="'+f+'"></div>',aE='<a href="#" class="'+[i,V].join(p)+'">Next</a>',af='<a href="#" class="'+[i,C].join(p)+'">Prev</a>',k='<div class="'+az+'"></div>',R='<a href="#" class="'+x+'">{today}</a>',ar='<a href="#" class="'+[Z,g].join(p)+'{name}" data-view-name="{name}">{label}</a>',J='<div class="'+q+'"></div>';var K=function(){};K.ATTRS={eventClass:{valueFn:function(){return ac.SchedulerEvent;}},events:{value:[],setter:"_setEvents",validator:a}};ac.mix(K.prototype,{addEvent:function(aF){var A=this;var aG=A.get(ax);if(ac.Array.indexOf(aG,aF)>-1){ac.Array.removeItem(aG,aF);}aG.push(aF);A.set(ax,aG);},addEvents:function(aF){var A=this;ac.Array.each(A._normalizeEvents(aF),ac.bind(A.addEvent,A));},eachEvent:function(aG){var A=this;var aF=A.get(ax);ac.Array.each(aF,aG,A);},removeEvent:function(aF){var A=this;var aG=A.get(ax);if(aG.length){ac.Array.removeItem(aG,aF);A.set(ax,aG);}},removeEvents:function(aF){var A=this;ac.Array.each(A._normalizeEvents(aF),ac.bind(A.removeEvent,A));},_normalizeEvents:function(aG){var A=this;var aF=[];aG=ac.Array(aG);ac.Array.each(aG,function(aH){if(aa(aH)){aF.push(aH);}else{if(t(aH)){if(H(A)){aH.set(L,A);}aF=aF.concat(A._normalizeEvents(aH.get(ax)));}else{aH=new (A.get(ah))(aH);aF.push(aH);}}if(H(A)){aH.set(L,A);aH.set(ah,A.get(ah));}});return aF;},_setEvents:function(aF){var A=this;return A._normalizeEvents(aF);}});ac.SchedulerEventSupport=K;var G=ac.Component.create({NAME:r,ATTRS:{activeView:{validator:s},eventRecorder:{setter:"_setEventRecorder"},strings:{value:{day:"Day",month:"Month",today:"Today",week:"Week",year:"Year"}},navigationDateFormat:{getter:function(aG){var A=this;var aF=A.get(F);if(aF){return aF.get(ap);}return aG;},value:"%A - %d %b %Y",validator:aw},views:{setter:"_setViews",value:[]},currentDate:{valueFn:function(){return new Date();},validator:d},firstDayOfWeek:{value:0,validator:I},controlsNode:{valueFn:function(){return ac.Node.create(am);}},currentDateNode:{valueFn:function(){return ac.Node.create(w);}},headerNode:{valueFn:function(){return ac.Node.create(b);}},iconNextNode:{valueFn:function(){return ac.Node.create(aE);}},iconPrevNode:{valueFn:function(){return ac.Node.create(af);}},navNode:{valueFn:function(){return ac.Node.create(k);}},todayNode:{valueFn:function(){return ac.Node.create(this._processTemplate(R));}},viewsNode:{valueFn:function(){return ac.Node.create(J);}}},HTML_PARSER:{controlsNode:U+ao,currentDateNode:U+T,headerNode:U+f,iconNextNode:U+V,iconPrevNode:U+C,navNode:U+az,todayNode:U+x,viewsNode:U+q},UI_ATTRS:[ab],AUGMENTS:[ac.SchedulerEventSupport,ac.WidgetStdMod],prototype:{viewStack:null,initializer:function(){var A=this;A[O]={};A[ak]=A.get(ak);A[Y]=A.get(Y);A[v]=A.get(au);A[j]=A.get(j);A[aq]=A.get(aq);A[M]=A.get(M);A[ad]=A.get(ad);A[X]=A.get(X);A.after({activeViewChange:A._afterActiveViewChange,render:A._afterRender});},bindUI:function(){var A=this;A._bindDelegate();},syncUI:function(){var A=this;A.syncStdContent();},flushEvents:function(){var A=this;ac.Array.each(A.get(ax),function(aF){aF.eachRepeatedEvent(function(aG){delete aG._filtered;});delete aF._filtered;});},getEventsByDay:function(aF,aG){var A=this;aF=h.safeClearTime(aF);return A._getEvents(aF,function(aH){return h.compare(aH.getClearStartDate(),aF)||(aG&&h.compare(aH.getClearEndDate(),aF));});},getIntersectEvents:function(aF){var A=this;aF=h.safeClearTime(aF);return A._getEvents(aF,function(aH){var aG=aH.getClearStartDate();var aI=aH.getClearEndDate();return(h.compare(aF,aG)||h.compare(aF,aI)||h.between(aF,aG,aI));});},sortEventsByDateAsc:function(aF){var A=this;aF.sort(function(aJ,aH){var aI=aJ.get(ag);var aG=aH.get(ag);var aL=aJ.get(ay);var aK=aH.get(ay);if(h.after(aL,aK)||(h.compare(aL,aK)&&h.before(aI,aG))){return 1;}else{return -1;}});},getViewByName:function(aF){var A=this;return A[O][aF];},getStrings:function(){var A=this;return A.get(D);},getString:function(aF){var A=this;return A.getStrings()[aF];},renderView:function(aF){var A=this;if(aF){aF.show();if(!aF.get(aB)){if(!A.bodyNode){A.setStdModContent(W.BODY,o);}aF.render(A.bodyNode);}}},plotViewEvents:function(aF){var A=this;aF.plotEvents(A.get(ax));},syncEventsUI:function(){var A=this;A.plotViewEvents(A.get(F));},_afterActiveViewChange:function(aH){var aF=this;if(aF.get(aB)){var aG=aH.newVal;var A=aH.prevVal;if(A){A.hide();}aF.renderView(aG);var aI=aF.get(N);if(aI){aI.hideOverlay();}}},_afterRender:function(aF){var A=this;A.renderView(A.get(F));},_bindDelegate:function(){var A=this;A[X].delegate("click",A._onClickViewTrigger,U+Z,A);A[ak].delegate("click",A._onClickPrevIcon,U+C,A);A[ak].delegate("click",A._onClickNextIcon,U+V,A);A[ak].delegate("click",A._onClickToday,U+x,A);},_createViewTriggerNode:function(aF){var A=this;if(!aF.get(u)){var aG=aF.get(l);aF.set(u,ac.Node.create(P.sub(ar,{name:aG,label:(A.getString(aG)||aG)})));}return aF.get(u);
},_getEvents:function(aF,aI){var A=this;var aH=A.get(ax);var aG=[];ac.Array.each(aH,function(aJ){if(aI.apply(A,[aJ])){aG.push(aJ);}else{if(aJ.isRepeatableDate(aF)){var aK=aJ.repeatByDate(aF);aG.push(aK);}}});A.sortEventsByDateAsc(aG);return aG;},_onClickToday:function(aF){var A=this;A.set(ab,A.get(F).getToday());aF.preventDefault();},_onClickNextIcon:function(aF){var A=this;A.set(ab,A.get(F).get(c));aF.preventDefault();},_onClickPrevIcon:function(aF){var A=this;A.set(ab,A.get(F).get(al));aF.preventDefault();},_onClickViewTrigger:function(aF){var A=this;var aG=aF.currentTarget.attr(ai);A.set(F,A.getViewByName(aG));aF.preventDefault();},_processTemplate:function(aF){var A=this;return P.sub(aF,A.getStrings());},_setEventRecorder:function(aF){var A=this;if(aF){aF.set(L,A);aF.set(ah,A.get(ah));}},_setViews:function(aG){var A=this;var aF=[];ac.Array.each(aG,function(aH){if(s(aH)&&!aH.get(aB)){aH.set(L,A);aH.set(ah,A.get(ah));aF.push(aH);A[O][aH.get(l)]=aH;}});if(!A.get(F)){A.set(F,aG[0]);}return aF;},syncStdContent:function(){var A=this;var aF=A.get(aD);A[M].append(A[aq]);A[M].append(A[j]);A[ak].append(A[ad]);A[ak].append(A[M]);A[ak].append(A[Y]);ac.Array.each(aF,function(aG){A[X].append(A._createViewTriggerNode(aG));});A[v].append(A[ak]);A[v].append(A[X]);A[v].addClass(ae);A.setStdModContent(W.HEADER,A[v].getDOM());},_uiSetCurrentDate:function(aH){var A=this;var aG=ac.DataType.Date.format(aH,{format:A.get(ap),locale:A.get(aA)});A[Y].html(aG);if(A.get(aB)){var aF=A.get(F);if(aF){aF._uiSetCurrentDate(aH);}A.syncEventsUI();}}}});ac.Scheduler=G;},"@VERSION@",{skinnable:true,requires:["aui-scheduler-view","datasource"]});AUI.add("aui-scheduler-view",function(cU){var c8=cU.Lang,bi=c8.isBoolean,B=c8.isFunction,aR=c8.isNumber,dp=c8.isObject,cG=c8.isString,cs=function(A){return parseFloat(A)||0;},cv=function(du,A){return Math.round(du/A)*A;},aA=cU.DataType.DateMath,cP=cU.WidgetStdMod,aZ=aA.WEEK_LENGTH,cx="scheduler-view",aQ="scheduler-view-day",df="scheduler-view-month",cn="scheduler-view-table",cZ="scheduler-view-week",bx="activeColumn",cr="activeView",R="allDay",az="body",a7="boundingBox",ds="cancel",a9="close",ao="col",aH="colDaysNode",cX="colHeaderDaysNode",L="colblank",z="coldata",aT="colday",b="colgrid",ab="colspan",p="coltime",bT="columnData",bg="columnDayHeader",aV="columnShims",a4="columnTableGrid",bG="columnTime",a3="container",a0="content",bw="creationEndDate",ae="creationStartDate",bF="currentDate",b9="data",c5="day",X="days",E="delegateConfig",cq="disabled",bd="displayDaysInterval",cK="displayRows",ac="div",bR="division",di="dotted",ah="down",I="draggingEvent",cF="duration",aL="endDate",bq="event",dh="eventClass",cp="eventPlaceholder",dr="eventRecorder",u="eventWidth",cL="events",ck="eventsOverlay",ag="eventsOverlayNode",cO="filterFn",aS="first",c0="firstDayOfWeek",cd="fixedHeight",bB="grid",b6="gridContainer",br="grip",dq="hd",cR="header",bD="headerDateFormat",dm="headerTableNode",bm="headerView",bP="headerViewConfig",aX="headerViewLabelNode",cC="height",bt="horizontal",a6="host",aO="hourHeight",w="icon",w="icon",at="isoTime",ai="label",be="lasso",a8="left",aI="locale",n="marginRight",ak="marker",bs="markercell",bk="markercellsNode",M="markers",cg="markersNode",cj="month",bz="monthContainerNode",c1="monthRowContainer",f="monthRows",b2="more",F="mousedown",P="mousemove",bc="mouseup",a1="next",dt="node",ar="nomonth",aB="noscroll",cQ="offsetHeight",cS="offsetWidth",by="overlay",cV="pad",aU="paddingNode",db="parentEvent",V="parentNode",b0="proxy",ap="px",al="region",ba="rendered",cM="repeated",cA="resizer",cH="resizerNode",cu="resizing",bl="right",bY="row",bX="rowsContainerNode",cw="save",t="scheduler",aN="scheduler-event",ad="scrollable",W="shim",N="showMore",cY="startDate",aa="startXY",cI="strings",bb="table",D="tableGridNode",b7="tableNode",cl="tableRowContainer",de="tableRows",b5="tbody",h="td",bU="time",aq="timesNode",j="title",a="tl",au="today",bW="top",dn="tr",b4="view",aG="visible",da="week",cb="width",x="data-colnumber",l="a",bQ=",",ct="-",cz=".",co="",cc="%",Z=" ",G=cU.getClassName,bS=G(cx,aB),aj=G(cx,ad);var bj=cU.Component.create({NAME:cx,AUGMENTS:[cU.WidgetStdMod],ATTRS:{bodyContent:{value:co},eventClass:{valueFn:function(){return cU.SchedulerEvent;}},filterFn:{validator:B,value:function(A){return true;}},height:{value:600},isoTime:{value:false,validator:bi},name:{value:co,validator:cG},navigationDateFormat:{value:"%A - %d %B, %Y",validator:cG},nextDate:{getter:"getNextDate",readOnly:true},prevDate:{getter:"getPrevDate",readOnly:true},scheduler:{lazyAdd:false,setter:"_setScheduler"},scrollable:{value:true,validator:bi},triggerNode:{setter:cU.one},visible:{value:false}},BIND_UI_ATTRS:[ad],prototype:{initializer:function(){var A=this;A.after("render",A._afterRender);},syncUI:function(){var A=this;A.syncStdContent();},adjustCurrentDate:function(){var A=this;var dv=A.get(t);var du=dv.get(bF);dv.set(bF,du);},flushViewCache:function(){},getNextDate:function(){},getPrevDate:function(){},getToday:function(){return aA.clearTime(new Date());},limitDate:function(du,dv){var A=this;if(aA.after(du,dv)){du=aA.clone(dv);}return du;},plotEvents:function(){},syncStdContent:function(){},syncEventUI:function(A){},_uiSetCurrentDate:function(A){},_afterRender:function(du){var A=this;A.adjustCurrentDate();A._uiSetScrollable(A.get(ad));},_setScheduler:function(dv){var A=this;var du=A.get(t);if(du){A.removeTarget(du);}if(dv){A.addTarget(dv);dv.after("eventsChange",cU.bind(A.flushViewCache,A));}return dv;},_uiSetScrollable:function(dv){var A=this;var du=A.bodyNode;if(du){du.toggleClass(aj,dv);du.toggleClass(bS,!dv);}},_uiSetVisible:function(du){var A=this;bj.superclass._uiSetVisible.apply(this,arguments);if(du&&A.get(ba)){A.adjustCurrentDate();}}}});cU.SchedulerView=bj;var cm=c8.sub;var m=cU.cached(function(){var dw=cU.config.doc,du=dw.createElement("div"),A=dw.getElementsByTagName("body")[0],dv=0.1;if(A){du.style.cssText="position:absolute;visibility:hidden;overflow:scroll;width:20px;";du.appendChild(dw.createElement("p")).style.height="1px";
A.insertBefore(du,A.firstChild);dv=du.offsetWidth-du.clientWidth;A.removeChild(du);}return dv;},null,0.1);var Q=function(A,du){return function(dw){var dv=dw.all(A);return(dv.size()>=du)?dv:null;};},i=G(w),J=G(w,br,di,bt),aW=G(aN),bL=G(aN,cq),cD=G(aN,b0),U=G(t,au),ax=G(t,au,dq),C=G(cx,z),e=G(cx,b),c2=G(cx,bB),c3=G(cx,bB,a3),aY=G(cx,c5,cA,w),cB=G(cx,c5,cA),bO=G(cx,ak,bR),c4=G(cx,bs),O=G(cx,M),b8=G(cx,c5,bb),c7=G(cx,c5,cR,bb),v=G(cx,c5,cR,c5),bN=G(cx,c5,cR,c5,cV,bl),cE=G(cx,c5,cR,c5,aS),bp=G(cx,c5,cR,ao),bA=G(cx,c5,cR,b4,ai),dj=G(cx,c5,bb,ao),aM=G(cx,c5,bb,ao,W),T=G(cx,c5,bb,L),K=G(cx,c5,bb,aT),dc=G(cx,c5,bb,p),bV=G(cx,c5,bb,bU),r='<div class="'+cB+'">'+'<div class="'+[i,J,aY].join(Z)+'"></div>'+"</div>",am='<div class="'+c4+'">'+'<div class="'+bO+'"></div>'+"</div>",q='<span class="'+bA+'">{label}</span>',aE='<table cellspacing="0" cellpadding="0" class="'+b8+'">'+"<tbody>"+'<tr class="'+e+'" height="1">'+'<td height="0" class="'+[dj,T].join(Z)+'"></td>'+'<td class="'+c3+'" colspan="1">'+'<div class="'+c2+'">'+'<div class="'+O+'"></div>'+"</div>"+"</td>"+"</tr>"+'<tr class="'+C+'">'+'<td class="'+[dj,dc].join(Z)+'"></td>'+"</tr>"+"</tbody>"+"</table>",bH='<td class="'+[dj,K].join(Z)+'" data-colnumber="{colNumber}">'+'<div class="'+aM+'"></div>'+"</td>",k='<div class="'+bV+'">{hour}</div>',aF='<table cellspacing="0" cellpadding="0" class="'+c7+'">'+"<tbody>"+'<tr class="'+bp+'"></tr>'+"</tbody>"+"</table>",bK='<th class="'+v+'" data-colnumber="{colNumber}"><a href="#">&nbsp;</a></th>',aD='<td class="'+[v,cE].join(Z)+'"></td>',y='<th class="'+[v,bN].join(Z)+'">&nbsp;</th>';var dl=cU.Component.create({NAME:aQ,ATTRS:{bodyContent:{value:co},days:{value:1,validator:aR},delegateConfig:{value:{},setter:function(du){var A=this;return cU.merge({dragConfig:{useShim:false},bubbleTargets:A,container:A.get(a7),nodes:cz+aW,invalid:"input, select, button, a, textarea, "+cz+bL},du||{});},validator:dp},eventWidth:{value:95,validator:aR},filterFn:{value:function(A){return(A.getHoursDuration()<=24&&!A.get(R));}},headerDateFormat:{value:"%d %A",validator:cG},headerView:{value:true,validator:bi},headerViewConfig:{setter:function(du){var A=this;return cU.merge({displayDaysInterval:1,displayRows:6,filterFn:function(dv){return((dv.getHoursDuration()>24)||dv.get(R));},height:"auto",visible:true},du||{});},value:{}},hourHeight:{value:52,validator:aR},name:{value:c5},strings:{value:{allDay:"All day"}},headerTableNode:{valueFn:function(){return cU.Node.create(aF);}},headerViewLabelNode:{valueFn:function(){var du=this;var A=du.get(cI);return cU.Node.create(cm(q,{label:A[R]}));}},resizerNode:{valueFn:function(){return cU.Node.create(r);}},tableNode:{valueFn:function(){return cU.Node.create(aE);}},colDaysNode:{valueFn:"_valueColDaysNode"},colHeaderDaysNode:{valueFn:"_valueColHeaderDaysNode"},markercellsNode:{valueFn:"_valueMarkercellsNode"},timesNode:{valueFn:"_valueTimesNode"}},HTML_PARSER:{colDaysNode:Q(cz+K,1),colHeaderDaysNode:Q(cz+v,2),headerTableNode:cz+c7,headerViewLabelNode:cz+bA,markercellsNode:Q(cz+c4,24),resizerNode:cz+cB,tableNode:cz+b8,timesNode:Q(cz+bV,24)},EXTENDS:cU.SchedulerView,prototype:{initializer:function(){var A=this;A[aH]=A.get(aH);A[cX]=A.get(cX);A[dm]=A.get(dm);A[bk]=A.get(bk);A[cH]=A.get(cH);A[b7]=A.get(b7);A[aq]=A.get(aq);A[bx]=null;A[bT]=A[b7].one(cz+C);A[bg]=A.headerTableNode.one(cz+bp);A[aV]=A[aH].all(cz+aM);A[bG]=A[b7].one(cz+dc);A[b6]=A[b7].one(cz+c3);A[cg]=A[b7].one(cz+O);if(A.get(bm)){A[bm]=new cU.SchedulerTableView(A.get(bP));}},renderUI:function(){var A=this;A[bG].setContent(A[aq]);A[cg].setContent(A[bk]);A[aH].appendTo(A[bT]);A[cX].appendTo(A[bg]);if(A[bm]){A[bm].set(t,A.get(t));A[bm].render();}},bindUI:function(){var A=this;A[dm].delegate("click",cU.bind(A._onClickDaysHeader,A),cz+v);A[bT].delegate("mousedown",cU.bind(A._onMouseDownTableCol,A),cz+dj);A[bT].delegate("mouseenter",cU.bind(A._onMouseEnterEvent,A),cz+aW);A[bT].delegate("mouseleave",cU.bind(A._onMouseLeaveEvent,A),cz+aW);A[bT].delegate("mousemove",cU.bind(A._onMouseMoveTableCol,A),cz+K);A[bT].delegate("mouseup",cU.bind(A._onMouseUpTableCol,A),cz+dj);A.on("drag:end",A._onEventDragEnd);A.on("drag:start",A._onEventDragStart);A.on("drag:tickAlignY",A._dragTickAlignY);A.on("schedulerChange",A._onSchedulerChange);A.after("drag:align",A._afterDragAlign);},syncUI:function(){var A=this;dl.superclass.syncUI.apply(this,arguments);A[b6].attr(ab,A.get(X));A._setupDragDrop();},syncStdContent:function(){var du=this;du.setStdModContent(cP.BODY,du[b7].getDOM());var A=cU.NodeList.create(du[dm]);if(du[bm]){A.push(du[bm].get(a7));A.push(du.get(aX));}du.setStdModContent(cP.HEADER,A);},calculateEventHeight:function(dv){var du=this;var A=du.get(aO);return Math.max(dv*(A/60),A/2);},calculateTop:function(du){var A=this;return((du.getHours()*60)+du.getMinutes()+(du.getSeconds()/60))*(A.get(aO)/60);},getNextDate:function(){var A=this;var du=A.get(t).get(bF);return aA.add(du,aA.DAY,1);},getPrevDate:function(){var A=this;var du=A.get(t).get(bF);return aA.subtract(du,aA.DAY,1);},getColumnByDate:function(du){var A=this;return A[aH].item(A.getDateDaysOffset(du));},getColumnShimByDate:function(du){var A=this;return A[aV].item(A.getDateDaysOffset(du));},getDateByColumn:function(dv){var A=this;var du=aA.safeClearTime(A.get(t).get(bF));return aA.add(du,aA.DAY,dv);},getDateDaysOffset:function(dv){var A=this;var du=aA.safeClearTime(A.get(t).get(bF));return aA.getDayOffset(aA.safeClearTime(dv),du);},getYCoordTime:function(dx){var du=this;var A=du.get(aO);var dy=cs((dx/A).toFixed(2));var dw=Math.floor((dy*100)%100*0.6);var dv=Math.floor(dy);return[dv,dw,0];},plotEvent:function(dv){var A=this;var dw=dv.get(dt);if(dw.size()<2){dv.addPaddingNode();}var dy=dv.get(dt).item(0);var du=dv.get(dt).item(1);var dx=A.getColumnShimByDate(dv.get(aL));var dz=A.getColumnShimByDate(dv.get(cY));if(dz){dz.append(dy);if(dv.get(aG)){dy.show();}}else{dy.hide();}if(dx){if(dx.compareTo(dz)||dv.isDayBoundaryEvent()){du.hide();}else{dx.append(du);if(dv.get(aG)){du.show();}}}else{du.hide();
}dv.syncNodeUI();A.syncEventTopUI(dv);A.syncEventHeightUI(dv);},plotEvents:function(){var A=this;var du=A.get(t);var dv=A.get(cO);A[aV].each(function(dz,dy){var dw=du.getEventsByDay(A.getDateByColumn(dy),true);var dx=[];dz.empty();cU.Array.each(dw,function(dA){if(dv.apply(A,[dA])){A.plotEvent(dA);dx.push(dA);}});A.syncEventsIntersectionUI(dx);});if(A.get(bm)){A.syncHeaderViewUI();}},syncColumnsUI:function(){var A=this;A[aH].each(function(dw,dv){var du=A.getDateByColumn(dv);dw.toggleClass(U,aA.isToday(du));});},syncDaysHeaderUI:function(){var dv=this;var dw=dv.get(t).get(bF);var du=dv.get(bD);var A=dv.get(aI);dv[cX].all(l).each(function(dz,dy){var dx=aA.add(dw,aA.DAY,dy);var dA=cU.DataType.Date.format(dx,{format:du,locale:A});dz.toggleClass(ax,aA.isToday(dx));dz.html(dA);});},syncEventsIntersectionUI:function(du){var A=this;var dv=A.get(u);A.get(t).flushEvents();cU.Array.each(du,function(dx){var dz=A.findEventIntersections(dx,du);var dy=dz.length;var dw=(dv/dy);cU.Array.each(dz,function(dB,dC){var dA=dB.get(dt).item(0);var dE=dw*dC;var dD=dw*1.7;if(dC===(dy-1)){dD=dv-dE;}dA.setStyle(cb,dD+cc);dA.setStyle(a8,dE+cc);var dF=dA.get(V);if(dF){dF.insert(dA,dC);}dB._filtered=true;});});},syncEventHeightUI:function(dw){var du=this;var dA=dw.get(aL);var A=dw.get(cY);var dx=aA.clone(A);dx.setHours(24,0,0);var dy=aA.getMinutesOffset(du.limitDate(dA,dx),A);dw.get(dt).item(0).set(cQ,du.calculateEventHeight(dy));var dv=dw.get(dt).item(1);if(dv.inDoc()){var dz=aA.getMinutesOffset(dA,aA.toMidnight(dw.getClearEndDate()));dv.set(cQ,du.calculateEventHeight(dz));}},syncEventTopUI:function(du){var A=this;du.get(dt).item(0).setStyle(bW,A.calculateTop(du.get(cY))+ap);du.get(dt).item(1).setStyle(bW,0);},syncHeaderViewUI:function(){var du=this;if(du.get(bm)){var dw=du[bm];dw.plotEvents();var dx=dw.get(a7);dx.setStyle(n,m());var dv=dx.one(cz+bo);var A=Math.max(dv.get(cQ),40);dw.set(cC,A);du._fillHeight();}},calculateYDelta:function(dv,du){var A=this;return(du[1]-dv[1])/(A.get(aO)/2)*30;},findEventIntersections:function(du,dv){var A=this;var dw=[];cU.Array.each(dv,function(dx){if(!du._filtered&&du.intersectHours(dx)){dw.push(dx);}});return dw;},getXYDelta:function(du){var A=this;var dv=du.currentTarget.getXY(),dw=[du.pageX,du.pageY];return cU.Array.map(dv,function(dy,dx){return(dw[dx]-dy);});},getTickY:function(){var A=this;return cv(Math.ceil(A.get(aO)/2),10);},roundToNearestHour:function(du,dv){var A=this;du.setHours(dv[0],cv(dv[1],A.getTickY()),dv[2]);},_afterDragAlign:function(dv){var du=this;var A=dv.target;if(!du[aa]){du[aa]=A.actXY;}A.actXY[0]=null;},_dragTickAlignX:function(dv){var du=this;var dy=du[I];if(dy&&!du[cu]){var dw=du[cp];var dx=cs(dv.attr(x))-du.startColNumber;du.draggingEventStartDate=aA.add(dy.get(cY),aA.DAY,dx);var A=aA.clone(du.draggingEventStartDate);aA.copyHours(A,dw.get(cY));dw.move(A);du.plotEvent(dw);}},_dragTickAlignY:function(A){var dz=this;var du=dz.get(t);var dB=du.get(dr);var dw=dz[I];if(dw){var dA=A.target.get(a6);var dx=dz[cp];var dy=dz.calculateYDelta(dz[aa],dA.actXY);if(dz[cu]){var dv=aA.add(dz.draggingEventEndDate,aA.MINUTES,dy);if(aA.getMinutesOffset(dv,dz.draggingEventStartDate)<=dB.get(cF)){return;}dx.set(aL,dv);}else{dx.move(aA.add(dz.draggingEventStartDate,aA.MINUTES,dy));}dz.plotEvent(dx);}},_setupDragDrop:function(){var du=this;if(!du[cp]){var dv=du.get(t);du[cp]=new (du.get(dh))({scheduler:dv});du[cp].removeTarget(dv);du[cp].get(dt).addClass(cD).hide();}if(!du.delegate){du.delegate=new cU.DD.Delegate(du.get(E));}var A=du.delegate.dd;A.unplug(cU.Plugin.DDConstrained);A.unplug(cU.Plugin.DDNodeScroll);var dw=du.bodyNode.get(al);dw.bottom=Infinity;dw.top=-Infinity;A.plug(cU.Plugin.DDConstrained,{bubbleTargets:du,constrain:dw,stickY:true,tickY:du.get(aO)/2});A.plug(cU.Plugin.DDNodeScroll,{node:du.bodyNode,scrollDelay:150});},_uiSetCurrentDate:function(du){var A=this;A.syncColumnsUI();A.syncDaysHeaderUI();},_onClickDaysHeader:function(dw){var A=this;var dv=A.get(t);if(dw.target.test(l)){var dx=dv.getViewByName(c5);if(dx){var du=cs(dw.currentTarget.attr(x));dv.set(bF,A.getDateByColumn(du));dv.set(cr,dx);}}dw.preventDefault();},_onEventDragEnd:function(du){var A=this;var dw=A[I];if(dw){var dv=A[cp];dv.set(aG,false);dw.set(aG,true);dw.copyDates(dv);A.get(t).syncEventsUI();}A[aa]=null;A[I]=null;},_onEventDragStart:function(dv){var A=this;var dx=A[I]=A.delegate.dd.get(dt).getData(aN);if(dx){var dw=A[cp];dw.copyPropagateAttrValues(dx);A.plotEvent(dw);dx.set(aG,false);A.draggingEventStartDate=aA.clone(dx.get(cY));A.draggingEventEndDate=aA.clone(dx.get(aL));var du=A.getColumnByDate(dx.get(cY));A.startColNumber=du?cs(du.attr(x)):0;}},_onMouseDownTableCol:function(du){var dz=this;var dy=du.target;var dw=dz.get(t);var dA=dw.get(dr);if(dA&&!dw.get(cq)){dA.hideOverlay();if(dy.test(cz+aM)){dz[aa]=[du.pageX,du.pageY];var dB=cs(du.currentTarget.attr(x));var dv=dz.getDateByColumn(dB);var A=dz.getXYDelta(du);dz.roundToNearestHour(dv,dz.getYCoordTime(A[1]));var dx=aA.add(dv,aA.MINUTES,dA.get(cF));dA.move(dv);dA.set(R,false);dA.set(aL,dx);dz[ae]=dv;dz[bw]=dx;du.halt();}else{if(dy.test([cz+cB,cz+aY].join(bQ))){dz[cu]=true;}}}dz.get(a7).unselectable();},_onMouseEnterEvent:function(dv){var A=this;var dw=dv.currentTarget;var du=dw.getData(aN);if(du&&!du.get(cq)){A[cH].appendTo(dw);}},_onMouseLeaveEvent:function(du){var A=this;if(!A[cu]){A._removeResizer();}},_onMouseMoveTableCol:function(dx){var A=this;var dw=dx.currentTarget;var du=A.get(t).get(dr);if(A[bx]!==dw){A[bx]=dw;A._dragTickAlignX(A[bx]);}var dv=A[bw];var dy=A[ae];if(dy){var dz=cv(A.calculateYDelta(A[aa],[dx.pageX,dx.pageY]),A.getTickY());if(A._delta!==dz){if(dz>0){du.set(aL,aA.add(dv,aA.MINUTES,dz));}else{du.set(cY,aA.add(dy,aA.MINUTES,dz));}A.plotEvent(du);A._delta=dz;}}},_onMouseUpTableCol:function(dw){var A=this;var dv=A.get(t);var du=dv.get(dr);if(du&&!dv.get(cq)){if(A[ae]){A.plotEvent(du);du.showOverlay([dw.pageX,dw.pageY]);}}A[ae]=null;A[bw]=null;A[cu]=false;A[aa]=null;A._removeResizer();A.get(a7).selectable();},_onSchedulerChange:function(du){var A=this;
if(A[bm]){A[bm].set(t,du.newVal);}},_removeResizer:function(){var A=this;A[cH].remove();},_valueColDaysNode:function(){var A=this;var dw=A.get(X);var du=[],dv=0;while(dw--){du.push(cU.Lang.sub(bH,{colNumber:dv++}));}return cU.NodeList.create(du.join(co));},_valueColHeaderDaysNode:function(){var A=this;var dw=A.get(X);var du=[],dv=0;du.push(aD);while(dw--){du.push(cU.Lang.sub(bK,{colNumber:dv++}));}du.push(y);return cU.NodeList.create(du.join(co));},_valueMarkercellsNode:function(){var A=this;var du=[],dv;for(dv=0;dv<=23;dv++){du.push(am);}return cU.NodeList.create(du.join(co));},_valueTimesNode:function(){var A=this;var dw=A.get(at);var dv=[],du;for(du=0;du<=23;du++){dv.push(cm(k,{hour:dw?aA.toIsoTimeString(du):aA.toUsTimeString(du,false,true)}));}return cU.NodeList.create(dv.join(co));}}});cU.SchedulerDayView=dl;var aw=cU.Component.create({NAME:cZ,ATTRS:{bodyContent:{value:co},days:{value:7},headerViewConfig:{value:{displayDaysInterval:aZ}},name:{value:da}},EXTENDS:cU.SchedulerDayView,prototype:{adjustCurrentDate:function(){var A=this;var dw=A.get(t);var du=dw.get(bF);var dv=dw.get(c0);dw.set(bF,aA.getFirstDayOfWeek(du,dv));},getNextDate:function(){var A=this;var dv=A.get(t);var du=dv.get(bF);var dw=A._firstDayOfWeek(du);return aA.add(dw,aA.WEEK,1);},getPrevDate:function(){var A=this;var dv=A.get(t);var du=dv.get(bF);var dw=A._firstDayOfWeek(du);return aA.subtract(dw,aA.WEEK,1);},getToday:function(){var A=this;var du=aw.superclass.getToday.apply(this,arguments);return A._firstDayOfWeek(du);},_firstDayOfWeek:function(dv){var A=this;var dw=A.get(t);var du=dw.get(c0);return aA.getFirstDayOfWeek(dv,du);}}});cU.SchedulerWeekView=aw;var i=G(w),o=G(w,"arrowstop-1-l"),dd=G(w,"arrowstop-1-r"),s=G(cx,bb,b),a2=G(cx,bb,b,aS),aC=G(cx,bb,b,au),bI=G(cx,bb,a3),dk=G(cx,bb,cL,by,dt),av=G(cx,bb,cL,by,dt,az),cf=G(cx,bb,cL,by,dt,a9),ay=G(cx,bb,cR,ao),c9=G(cx,bb,cR,c5),d=G(cx,bb,cR,bb),H=G(cx,bb,be),ci=G(cx,bb,b2),cT=G(cx,bb,bY),ca=G(cx,bb,bY,a3),bo=G(cx,bb,b9),cN=G(cx,bb,b9,ao),b3=G(cx,bb,b9,ao,j),cJ=G(cx,bb,b9,ao,j,ah),ce=G(cx,bb,b9,ao,j,aS),dg=G(cx,bb,b9,ao,j,a1),bM=G(cx,bb,b9,ao,j,au),aJ=G(cx,bb,b9,bq),c=G(cx,bb,b9,bq,a8),cW=G(cx,bb,b9,bq,cM),an=G(cx,bb,b9,bq,bl),af=G(cx,bb,b9,aS),aP=G(cx,bb,bB),ch=G(cx,bb,bB,aS),a5='<div class="'+bI+'">'+'<div class="'+ca+'"></div>'+"</div>",b1='<div class="'+dk+'">'+'<div class="'+av+'"></div>'+'<a href="javascript:;" class="'+cf+'">{label}</a>'+"</div>",cy='<td class="'+s+'">&nbsp;</td>',g='<th class="'+c9+'"><div>&nbsp;</div></th>',Y='<table cellspacing="0" cellpadding="0" class="'+d+'">'+"<tbody>"+'<tr class="'+ay+'"></tr>'+"</tbody>"+"</table>",bZ='<div class="'+H+'"></div>',bv='<a href="javascript:;" class="'+ci+'">{label} {count}</a>',bE='<div class="'+cT+'" style="top: {top}%; height: {height}%;"></div>',bJ='<table cellspacing="0" cellpadding="0" class="'+bo+'">'+"<tbody></tbody>"+"</table>",bf='<table cellspacing="0" cellpadding="0" class="'+aP+'">'+"<tbody>"+"<tr></tr>"+"</tbody>"+"</table>",S='<span class="'+[i,o].join(Z)+'"></span>',bu='<span class="'+[i,dd].join(Z)+'"></span>',bC='<td class="'+cN+'"><div></div></td>',c6="<tr></tr>";var bh=cU.Component.create({NAME:cn,ATTRS:{bodyContent:{value:co},displayDaysInterval:{value:42},displayRows:{value:4},fixedHeight:{value:true},name:{value:bb},headerDateFormat:{value:"%a"},navigationDateFormat:{value:"%b %Y"},scrollable:{value:false},strings:{value:{close:"Close",showMore:"Show more"}},headerTableNode:{valueFn:function(){return cU.Node.create(Y);}},colHeaderDaysNode:{valueFn:"_valueColHeaderDaysNode"},rowsContainerNode:{valueFn:function(){return cU.Node.create(a5);}},tableGridNode:{valueFn:"_valueTableGridNode"}},HTML_PARSER:{colHeaderDaysNode:Q(cz+c9,7),headerTableNode:cz+d,rowsContainerNode:cz+bI,tableGridNode:Q(cz+aP,7)},EXTENDS:cU.SchedulerView,prototype:{evtDateStack:null,evtRenderedStack:null,rowDataTableStack:null,initializer:function(){var A=this;A.evtDateStack={};A.evtRenderedStack={};A.rowDataTableStack={};A[cX]=A.get(cX);A[dm]=A.get(dm);A[bX]=A.get(bX);A[D]=A.get(D);A[bg]=A.headerTableNode.one(cz+ay);A[a4]=cU.NodeList.create();A[cl]=A[bX].one(cz+ca);A[de]=cU.NodeList.create();},bindUI:function(){var A=this;var du=A.get(t).get(dr);du.on({cancel:cU.bind(A.removeLasso,A),save:cU.bind(A.removeLasso,A)});A[bX].on({mousedown:cU.bind(A._onMouseDownGrid,A),mousemove:cU.bind(A._onMouseMoveGrid,A),mouseup:cU.bind(A._onMouseUpGrid,A)});A[bX].delegate("click",cU.bind(A._onClickMore,A),cz+ci);},renderUI:function(){var A=this;var du=A._getDisplayRowsCount();for(var dv=0;dv<du;dv++){A[de].push(A.buildGridRowNode(dv));}A._renderEventsOverlay();A[cX].appendTo(A[bg]);A[de].appendTo(A[cl]);},buildEventsRow:function(dv,dA,dz){var du=this;var dw=du.get(cK);var A=du._getDisplayRowDaysCount();var dy=0;var dx=cU.Node.create(c6);du.loopDates(dv,dA,function(dJ,dF){if(dy>dF){return;}var dK=du.getIntersectEvents(dJ);var dH=du._getRenderableEvent(dK,dv,dA,dJ);var dD=cU.Node.create(bC);var dC=dD.one(ac);if((dw<dK.length)&&(dz===(dw-1))){var dI=du.get(cI);var dE=cU.Node.create(c8.sub(bv,{count:(dK.length-(dw-1)),label:dI[N]}));dE.setData(cL,dK);dC.append(dE);}else{if(dH){var dB=du._getEvtSplitInfo(dH,dJ,dv,dA);dD.attr(ab,dB.colspan);dy+=(dB.colspan-1);du._syncEventNodeContainerUI(dH,dC,dB);du._syncEventNodeUI(dH,dC,dJ);var dG=String(dJ.getTime());du.evtRenderedStack[dG].push(dH);}}dy++;dx.append(dD);});return dx;},buildEventsTable:function(A,dx){var dD=this;var dB=dD.get(cK);var dA=aA.clearTime(dD._findCurrentIntervalStart());var dz=String(dA.getTime()).concat(A.getTime()).concat(dx.getTime());var dC=dD.rowDataTableStack[dz];if(!dC){dC=cU.Node.create(bJ);var dw=dC.one(b5);var dv=dD.buildEventsTitleRow(dC,A,dx);dw.append(dv);for(var dy=0;dy<dB;dy++){var du=dD.buildEventsRow(A,dx,dy);dw.append(du);}dD.rowDataTableStack[dz]=dC;}return dC;},buildEventsTitleRow:function(dv,du,dx){var A=this;var dw=cU.Node.create(c6);A.loopDates(du,dx,function(dz,dy){var dA=cU.Node.create(bC);dA.addClass(b3).toggleClass(ce,(dy===0)).toggleClass(bM,aA.isToday(dz)).toggleClass(dg,aA.isToday(aA.subtract(dz,aA.DAY,1))).toggleClass(cJ,aA.isToday(aA.subtract(dz,aA.WEEK,1)));
dw.append(dA.setContent(dz.getDate()));});return dw;},buildGridRowNode:function(dy){var dv=this;var dw=dv._getDisplayRowsCount();var du=100/dw;var A=dv._getTableGridNode(dy);var dx=cU.Node.create(c8.sub(bE,{height:du,top:du*dy}));dx.append(A.toggleClass(ch,(dy===0)));return dx;},flushViewCache:function(){var A=this;A.evtDateStack={};A.evtRenderedStack={};A.rowDataTableStack={};},getIntersectEvents:function(du){var A=this;var dx=A.get(t);var dw=String(du.getTime());if(!A.evtDateStack[dw]){var dv=dx.getIntersectEvents(du);A.evtDateStack[dw]=dv.filter(A.get(cO));}return A.evtDateStack[dw];},getNextDate:function(){var A=this;var dw=A.get(t);var du=dw.get(bF);var dv=A.get(bd);return aA.add(du,aA.DAY,dv);},getPrevDate:function(){var A=this;var dw=A.get(t);var du=dw.get(bF);var dv=A.get(bd);return aA.subtract(du,aA.DAY,dv);},hideEventsOverlay:function(){var A=this;A[ck].set(aG,false);},loopDates:function(A,dw,dz,dA,dy){var dB=this;var du=aA.clone(A);var dv=dw.getTime();var dx;for(dx=0;du.getTime()<=dv;dx++){dz.apply(dB,[du,dx]);du=aA.add(du,(dA||aA.DAY),(dy||1));}},plotEvents:function(){var du=this;var dx=du._findCurrentIntervalStart();var A=aA.safeClearTime(dx);du.flushViewCache();du.hideEventsOverlay();du.bodyNode.all(cz+bo).remove();var dv=du.get(bd);var dw=Math.min(dv,aZ);du[de].each(function(dB,dz){var dy=aA.add(A,aA.DAY,dw*dz);var dC=aA.add(dy,aA.DAY,dw-1);var dA=du.buildEventsTable(dy,dC);if(dz===0){dA.addClass(af);}dB.append(dA);});},removeLasso:function(){var A=this;if(A.lasso){A.lasso.remove();}},renderLasso:function(dA,du){var dG=this;var dx=dA;var dz=du;if(dA[1]>du[1]){dx=du;dz=dA;}var dH=dx[0],dC=dx[1],dv=dz[0],A=dz[1];dG.removeLasso();dG.lasso=cU.NodeList.create();for(var dw=dC;dw<=A;dw++){var dy=dG.gridCellHeight,dF=dG.gridCellWidth,dD=0,dB=(dy*dw);if(dw===dC){if(dC===A){dD+=Math.min(dH,dv)*dF;dF*=Math.abs(dv-dH)+1;}else{dD+=dH*dF;dF*=aZ-dH;}}else{if(dw===A){dF*=dv+1;}else{dF*=aZ;}}var dE=cU.Node.create(bZ);dG.lasso.push(dE);dG[bX].append(dE);dE.sizeTo(dF,dy);dE.setXY(dG._offsetXY([dD,dB],1));}},syncDaysHeaderUI:function(){var dv=this;var dy=dv.get(t);var dw=dy.get(bF);var du=dv.get(bD);var A=dv.get(aI);var dx=dv._findFirstDayOfWeek(dw);dv.colHeaderDaysNode.all(ac).each(function(dB,dA){var dz=aA.add(dx,aA.DAY,dA);var dC=cU.DataType.Date.format(dz,{format:du,locale:A});dB.html(dC);});},syncGridUI:function(){var dD=this;var dx=dD.getToday();var du=dD.get(t);dD[a4].removeClass(aC);var dw=dD._findCurrentIntervalStart();var dz=dD._findCurrentIntervalEnd();if(aA.between(dx,dw,dz)){var A=du.get(c0);var dB=dD._findFirstDayOfWeek(dx);var dy=aA.getWeekNumber(dx,A)-aA.getWeekNumber(dw,A);var dC=(dx.getDate()-dB.getDate());var dv=dD._getCellIndex([dC,dy]);var dA=dD[a4].item(dv);if(dA){dA.addClass(aC);}}},syncStdContent:function(){var A=this;A.setStdModContent(cP.BODY,A[bX].getDOM());A.setStdModContent(cP.HEADER,A[dm].getDOM());},_findCurrentIntervalEnd:function(){var A=this;var dw=A.get(t);var du=dw.get(bF);var dv=A.get(bd);return aA.add(du,aA.DAY,dv);},_findCurrentIntervalStart:function(){var A=this;var du=A.get(t);return du.get(bF);},_findFirstDayOfWeek:function(dv){var A=this;var dw=A.get(t);var du=dw.get(c0);return aA.getFirstDayOfWeek(dv,du);},_getCellIndex:function(du){var A=this;return du[1]*aZ+du[0];},_getDisplayRowsCount:function(){var A=this;var du=A.get(bd);return Math.ceil(du/aZ);},_getDisplayRowDaysCount:function(){var A=this;var du=A.get(bd);return Math.min(du,aZ);},_getEvtLabel:function(dv){var du=this;var dw=dv.get(aL);var A=dv.get(cY);return[A.getHours(),ct,dw.getHours(),Z,dv.get(a0)].join(co);},_getEvtSplitInfo:function(dy,dB,A,dw){var dz=this;var du=dy.getClearStartDate();var dx=dy.getClearEndDate();var dA=aA.getDayOffset(dw,dB);var dv={colspan:Math.min(aA.getDayOffset(dx,dB),dA)+1,left:aA.before(du,A),right:aA.after(dx,dw)};return dv;},_getPositionDate:function(dv){var du=this;var dw=du._findCurrentIntervalStart();var A=aA.safeClearTime(du._findFirstDayOfWeek(dw));return aA.add(A,aA.DAY,du._getCellIndex(dv));},_getRenderableEvent:function(dC,A,dw,dD){var dB=this;var dz=String(dD.getTime());if(!dB.evtRenderedStack[dz]){dB.evtRenderedStack[dz]=[];}for(var dv=0;dv<dC.length;dv++){var dA=dC[dv];var du=dA.get(cY);var dy=aA.after(dD,du)&&!aA.isDayOverlap(dD,A);var dx=!aA.isDayOverlap(du,dD);var dE=cU.Array.indexOf(dB.evtRenderedStack[dz],dA)>-1;if(!dE&&(dx||dy)){return dA;}}return null;},_getTableGridNode:function(dz){var du=this;var dw=du.get(bd);var A=du[D].item(dz);var dy=A.one(dn);for(var dv=0;dv<Math.min(dw,aZ);dv++){var dx=cU.Node.create(cy);dy.append(dx);du[a4].push(dx);}return A;},_offsetXY:function(dw,dv){var A=this;var du=A[bX].getXY();return[dw[0]+du[0]*dv,dw[1]+du[1]*dv];},_onClickMore:function(dv){var A=this;var dw=dv.target;var du=dw.getData(cL);var dx=cU.NodeList.create();cU.Array.each(du,function(dz){var dy=dz.get(dt).item(0).clone();dy.setData(aN,dz);dy.setStyles({height:"auto",left:0,position:"relative",top:0,width:"auto"});dx.push(dy);});A[ck].bodyNode.one(cz+av).setContent(dx);A[ck].setAttrs({visible:true,xy:dw.getXY()});},_onMouseDownGrid:function(dx){var du=this;var dy=dx.target;if(dy.test([cz+s,cz+cN].join(bQ))){du._recording=true;var dv=du._getDisplayRowsCount();var A=du._getDisplayRowDaysCount();du.gridCellHeight=du[bX].get(cQ)/dv;du.gridCellWidth=du[bX].get(cS)/A;var dw=du._offsetXY([dx.pageX,dx.pageY],-1);du.lassoStartPosition=du.lassoLastPosition=du._findPosition(dw);du.renderLasso(du.lassoStartPosition,du.lassoLastPosition);du[bX].unselectable();}},_onMouseMoveGrid:function(dx){var du=this;var dy=dx.currentTarget;var dv=du._offsetXY([dx.pageX,dx.pageY],-1);var dw=du.lassoLastPosition||du.lassoStartPosition;var A=du._findPosition(dv);var dz=dw&&((A[0]!==dw[0])||(A[1]!==dw[1]));if(dz&&du._recording){du.lassoLastPosition=A;du.renderLasso(du.lassoStartPosition,A);}},_onMouseUpGrid:function(dz){var du=this;var dy=du.get(t);var dw=dy.get(dr);if(dw&&du._recording&&!dy.get(cq)){var dx=du._getPositionDate(du.lassoStartPosition);var dv=du._getPositionDate(du.lassoLastPosition);
var A=new Date(Math.min(dx,dv));A.setHours(0,0,0);var dA=new Date(Math.max(dx,dv));dA.setHours(23,59,59);dw.set(R,true);dw.set(aL,dA);dw.set(cY,A);dw.showOverlay([dz.pageX,dz.pageY]);du.hideEventsOverlay();du._recording=false;}},_findPosition:function(dw){var A=this;var dv=Math.floor(dw[0]/A.gridCellWidth);var du=Math.floor(dw[1]/A.gridCellHeight);return[dv,du];},_renderEventsOverlay:function(){var du=this;var A=du.get(cI);du[ck]=new cU.Overlay({align:{points:[a,a]},bodyContent:c8.sub(b1,{label:A[a9]}),render:du[bX],visible:false,width:250,zIndex:450});du[ck].bodyNode.delegate("click",cU.bind(du.hideEventsOverlay,du),cz+cf);},_syncEventNodeContainerUI:function(du,dw,dv){var A=this;dw.addClass(aJ);if(dv.left){dw.addClass(c).prepend(S);}if(dv.right){dw.addClass(an).append(bu);}if(du.get(db)){dw.addClass(cW);}},_syncEventNodeUI:function(dC,du,dE){var dD=this;var dx=dD.get(t);var A=dx.get(c0);var dw=dC.get(dt);var dv=dC.get(cY);var dB=aA.clearTime(dD._findCurrentIntervalStart());var dy=aA.getFirstDayOfWeek(new Date(Math.max(dv,dB)),A);var dA=Math.floor(aA.getDayOffset(dE,dy)/aZ);if(dw.size()<=dA){dC.addPaddingNode();}var dz=dw.item(dA);dz.setStyles({height:"auto",left:0,top:0,width:"auto"});dz.appendTo(du);dC.syncNodeUI();},_uiSetCurrentDate:function(du){var A=this;A.syncDaysHeaderUI();A.syncGridUI();},_valueColHeaderDaysNode:function(){var A=this;var du=A.get(bd);var dv=Math.min(du,aZ);return A._valueNodeList(dv,g);},_valueTableGridNode:function(){var A=this;var du=A.get(bd);var dv=Math.min(du,aZ);return A._valueNodeList(dv,bf);},_valueNodeList:function(dw,dv){var A=this;var du=[];while(dw--){du.push(dv);}return cU.NodeList.create(du.join(co));}}});cU.SchedulerTableView=bh;var bn=G(df,bb,b9,ao,ar);var aK=cU.Component.create({NAME:df,ATTRS:{displayDaysInterval:{readOnly:true,value:42},name:{value:cj}},EXTENDS:cU.SchedulerTableView,prototype:{getNextDate:function(){var A=this;var dv=A.get(t);var du=dv.get(bF);return aA.add(du,aA.MONTH,1);},getPrevDate:function(){var A=this;var dv=A.get(t);var du=dv.get(bF);return aA.subtract(du,aA.MONTH,1);},plotEvents:function(){var A=this;cU.SchedulerMonthView.superclass.plotEvents.apply(A,arguments);var dv=A.get(t);var du=dv.get(bF);var dy=aA.findMonthEnd(du);var dx=aA.findMonthStart(du);var dw=A._findCurrentIntervalStart();var dz=A[cl].all(cz+b3);dz.each(function(dC,dA){var dB=aA.add(dw,aA.DAY,dA);if(aA.before(dB,dx)||aA.after(dB,dy)){dC.addClass(bn);}});},_findCurrentIntervalStart:function(){var A=this;var dw=A.get(t);var du=dw.get(bF);var dv=aA.findMonthStart(du);return A._findFirstDayOfWeek(dv);},_findFirstDayOfWeek:function(dv){var A=this;var dw=A.get(t);var du=dw.get(c0);return aA.getFirstDayOfWeek(dv,du);}}});cU.SchedulerMonthView=aK;},"@VERSION@",{skinnable:true,requires:["aui-scheduler-event","aui-calendar","aui-button-item","dd-drag","dd-delegate","dd-drop","dd-constrain"]});AUI.add("aui-scheduler-event",function(aK){var an=aK.Lang,bj=an.isString,f=an.isDate,a9=an.isFunction,G=an.isObject,bc=an.isBoolean,ac=an.isNumber,aY=aK.ColorUtil,j=aK.DataType.DateMath,a5=aK.cached(function(A){return A.substring(0,1).toUpperCase()+A.substring(1);}),be="-",t="&ndash;",ay=".",p="",q=" ",l="_",aM="_propagateSet",Q="activeView",T="borderColor",aO="borderColorRGB",aI="borderStyle",bq="borderWidth",I="Change",a3="color",aW="colorBrightnessFactor",bd="colorSaturationFactor",aG="content",w="disabled",a0="duration",aP="endDate",aS="eventClass",aq="eventStack",bk="events",au="hidden",H="hsbColor",at="icon",aa="icons",a1="id",ai="inherit",aX="isoTime",bp="locale",aZ="never",n="node",h="overlay",aL="parentEvent",bv="recorder",aN="repeat",bi="repeated",P="repeatedEvents",bb="repeater",af="scheduler",av="scheduler-event",ax="scheduler-event-recorder",bm="startDate",a7="template",aV="title",e="titleDateFormat",ao="visible",d="%H:%M",a6="%I:%M",E=aK.getClassName,k=E(at),s=E(av),aQ=E(av,aG),C=E(av,au),bg=E(av,w),ap=E(av,bv),aB=E(av,bi),am=E(av,bb),D=E(av,aV),bo=E(av,aa),v=E(av,at,w),b=E(av,at,bi),bs=E(av,at,bb);var V=aK.Component.create({NAME:av,ATTRS:{allDay:{setter:aK.DataType.Boolean.parse,value:false},borderStyle:{value:"solid",validator:bj},borderWidth:{value:"1px",validator:bj},colorBrightnessFactor:{value:0.75,validator:ac},colorSaturationFactor:{value:1.5,validator:ac},content:{value:"(no title)",validator:bj},color:{lazyAdd:false,setter:"_setColor",value:"#D96666",validator:bj},titleDateFormat:{getter:"_getTitleDateFormat",validator:bj},endDate:{setter:"_setDate",valueFn:function(){var A=j.clone(this.get(bm));A.setHours(A.getHours()+1);return A;}},eventClass:{valueFn:function(){return aK.SchedulerEvent;}},disabled:{value:false,validator:bc},node:{valueFn:function(){return aK.NodeList.create(aK.Node.create(this.EVENT_NODE_TEMPLATE).setData(av,this));}},parentEvent:{},repeat:{value:p,setter:"_setRepeat"},scheduler:{lazyAdd:false,setter:"_setScheduler"},startDate:{setter:"_setDate",valueFn:function(){return new Date();}},visible:{value:true,validator:bc}},EXTENDS:aK.Base,PROPAGATE_ATTRS:[bm,aP,aG,a3,aW,bd,aI,bq,e,ao,w],prototype:{EVENT_NODE_TEMPLATE:'<div class="'+s+'">'+'<div class="'+D+'"></div>'+'<div class="'+aQ+'"></div>'+'<div class="'+bo+'">'+'<span class="'+[k,b].join(q)+'"></span>'+'<span class="'+[k,bs].join(q)+'"></span>'+'<span class="'+[k,v].join(q)+'"></span>'+"</div>"+"</div>",eventStack:null,initializer:function(){var A=this;var L=A.get(n);A[aq]={};aK.Array.each(A.get(aS).PROPAGATE_ATTRS,function(X){A.after(X+I,A._propagateAttrChange);});A._bindUIAttrs();A.syncNodeUI(true);},destroy:function(){var A=this;A.eachRepeatedEvent(function(L,X){L.destroy();});A[aq]={};A.get(n).remove(true);},addPaddingNode:function(){var A=this;A.get(n).push(aK.Node.create(A.EVENT_NODE_TEMPLATE).setData(av,A));A.syncNodeUI();},copyDates:function(L){var A=this;A.set(aP,j.clone(L.get(aP)));A.set(bm,j.clone(L.get(bm)));},copyPropagateAttrValues:function(L,X){var A=this;A.copyDates(L);aK.Array.each(A.get(aS).PROPAGATE_ATTRS,function(Y){if(!((X||{}).hasOwnProperty(Y))){var bA=L.get(Y);
if(!G(bA)){A.set(Y,bA);}}});},getBorderColor:function(){var A=this;return A[aO].hex;},getDaysDuration:function(){var A=this;return j.getDayOffset(A.get(aP),A.get(bm));},getHoursDuration:function(){var A=this;return j.getHoursOffset(A.get(aP),A.get(bm));},getMinutesDuration:function(){var A=this;return j.getMinutesOffset(A.get(aP),A.get(bm));},getSecondsDuration:function(){var A=this;return j.getSecondsOffset(A.get(aP),A.get(bm));},sameEndDate:function(L){var A=this;return j.compare(A.get(aP),L.get(aP));},sameStartDate:function(L){var A=this;return j.compare(A.get(bm),L.get(bm));},isAfter:function(Y){var X=this;var L=X.get(bm);var A=Y.get(bm);return j.after(L,A);},isBefore:function(Y){var X=this;var L=X.get(bm);var A=Y.get(bm);return j.before(L,A);},repeatByDate:function(X){var L=this;var Y=L.uidByDate(X);if(!L[aq][Y]){var A=j.clone(X);var bB=j.clone(X);j.copyHours(A,L.get(bm));j.copyHours(bB,L.get(aP));var bA=new L.get(aS)({endDate:bB,parentEvent:L,scheduler:L.get(af),startDate:A});bA.copyPropagateAttrValues(L);L[aq][Y]=bA;}return L[aq][Y];},intersects:function(Y){var X=this;var bA=X.get(aP);var L=X.get(bm);var A=Y.get(bm);return(X.sameStartDate(Y)||j.between(A,L,bA));},intersectHours:function(X){var L=this;var bA=L.get(aP);var A=L.get(bm);var Y=j.clone(A);j.copyHours(Y,X.get(bm));return(j.compare(A,Y)||j.between(Y,A,bA));},isDayBoundaryEvent:function(){var A=this;return j.isDayBoundary(A.get(bm),A.get(aP));},isDayOverlapEvent:function(){var A=this;return j.isDayOverlap(A.get(bm),A.get(aP));},isRepeatableDate:function(L){var A=this;var X=A.get(aN);return(X&&X.validate(A,L));},getClearEndDate:function(){var A=this;return j.safeClearTime(A.get(aP));},getClearStartDate:function(){var A=this;return j.safeClearTime(A.get(bm));},move:function(L){var A=this;var X=A.getMinutesDuration();A.set(bm,L);A.set(aP,j.add(j.clone(L),j.MINUTES,X));},uidByDate:function(L){var A=this;L=f(L)?j.safeClearTime(L):A.getClearStartDate();return[av,L.getTime()].join(l);},setContent:function(X,L){var A=this;A.get(n).each(function(bA){var Y=bA.one(g+aQ);Y.setContent(X);});if(L){A.eachRepeatedEvent(function(Y,bA){Y.setContent(X);});}},setTitle:function(X,L){var A=this;A.get(n).each(function(Y){var bA=Y.one(g+D);bA.setContent(X);});if(L){A.eachRepeatedEvent(function(Y,bA){Y.setTitle(X);});}},syncNodeUI:function(L){var A=this;A._syncUIAttrs();A.syncNodeColorUI(L);A.syncNodeTitleUI(L);A.syncNodeContentUI(L);},syncNodeColorUI:function(L){var A=this;var Y=A.get(n);var bA=A.getBorderColor();if(Y){var X={borderWidth:A.get(bq),borderColor:bA,backgroundColor:A.get(a3),borderStyle:A.get(aI),color:ai};Y.setStyles(X);}if(L){A.eachRepeatedEvent(function(bB,bC){bB.syncNodeColorUI();});}},syncNodeContentUI:function(L){var A=this;A.setContent(A.get(aG),L);},syncNodeTitleUI:function(L){var A=this;var Y=A._formatDate(A.get(bm));var X=A._formatDate(A.get(aP));A.setTitle([Y,X].join(q+t+q),L);},split:function(){var A=this,X=j.clone(A.get(bm)),Y=j.clone(A.get(aP));if(A.isDayOverlapEvent()&&!A.isDayBoundaryEvent()){var L=j.clone(X);L.setHours(24,0,0,0);return[[X,j.toMidnight(j.clone(X))],[L,j.clone(Y)]];}return[[X,Y]];},eachRepeatedEvent:function(L){var A=this;aK.each(A[aq],L,A);},unlink:function(){var A=this;if(A.get(aL)){A.set(aL,null);}else{A.eachRepeatedEvent(function(L,X){L.unlink();});}A[aq]={};A.syncNodeUI();},_afterDisabledChange:function(L){var A=this;A._uiSetDisabled(L.newVal);},_afterVisibleChange:function(L){var A=this;A._uiSetVisible(L.newVal);},_afterRepeatChange:function(L){var A=this;A._uiSetRepeat(L.newVal);},_afterParentEventChange:function(L){var A=this;A._uiSetParentEvent(L.newVal);},_bindUIAttrs:function(){var A=this;A.after({disabledChange:A._afterDisabledChange,visibleChange:A._afterVisibleChange,parentEventChange:A._afterParentEventChange,repeatChange:A._afterRepeatChange});A._syncUIAttrs();},_propagateAttrChange:function(Y){var A=this;var X=Y.attrName;var L=Y.newVal;A.eachRepeatedEvent(function(bA,bB){var bC=bA[aM+a5(X)];if(bC){bC.apply(A,[bA,X,L]);}else{bA.set(X,Y.newVal);}bA.syncNodeUI();});A.syncNodeUI();},_propagateSetEndDate:function(A,L,Y){var X=j.clone(A.get(aP));j.copyHours(X,Y);A.set(aP,X);},_propagateSetStartDate:function(L,X,Y){var A=j.clone(L.get(bm));j.copyHours(A,Y);L.set(bm,A);},_setColor:function(L){var A=this;A[H]=aY.rgb2hsb(aY.getRGB(L));A[T]=aK.clone(A[H]);A[T].b*=A.get(aW);A[T].s*=A.get(bd);A[aO]=aY.hsb2rgb(A[T]);return L;},_setDate:function(L){var A=this;if(ac(L)){L=new Date(L);}return L;},_setRepeat:function(L){var A=this;if(bj(L)){L=aK.SchedulerEventRepeat[L];}return G(L)?L:null;},_setScheduler:function(X){var A=this;var L=A.get(af);if(L){A.removeTarget(L);}A.addTarget(X);return X;},_syncUIAttrs:function(){var A=this;A._uiSetDisabled(A.get(w));A._uiSetVisible(A.get(ao));A._uiSetParentEvent(A.get(aL));A._uiSetRepeat(A.get(aN));},_formatDate:function(X,Y){var L=this;var A=L.get(bp);Y=Y||L.get(e);return aK.DataType.Date.format(X,{format:Y,locale:A});},_getTitleDateFormat:function(X){var A=this;if(!bj(X)){var L=A.get(af);X=(L&&L.get(Q).get(aX))?d:a6;}return X;},_uiSetDisabled:function(L){var A=this;A.get(n).toggleClass(bg,!!L);},_uiSetParentEvent:function(L){var A=this;A.get(n).toggleClass(aB,!!L);},_uiSetRepeat:function(X){var A=this;var L=!!X&&X!==aK.SchedulerEventRepeat[aZ];A.get(n).toggleClass(am,L);},_uiSetVisible:function(L){var A=this;A.get(n).toggleClass(C,!L);}}});aK.SchedulerEvent=V;aK.SchedulerEventRepeat={never:{description:"Never repeat",validate:function(A,L){return false;},value:"never"},daily:{description:"Every day",validate:function(A,L){return true;},value:"daily"},monthly:{description:"Every month",validate:function(L,X){var Y=L.get(aP);var A=L.get(bm);return(A.getDate()===X.getDate());},value:"monthly"},monWedFri:{description:"Every Monday, Wednesday and Friday",validate:function(A,L){return j.isMonWedOrFri(L);},value:"monWedFri"},tuesThurs:{description:"Every Tuesday and Thursday",validate:function(A,L){return j.isTueOrThu(L);},value:"tuesThurs"},weekDays:{description:"Every week days",validate:function(A,L){return j.isWeekDay(L);
},value:"weekDays"},weekly:{description:"Every week",validate:function(L,X){var Y=L.get(aP);var A=L.get(bm);return(A.getDay()===X.getDay());},value:"weekly"},yearly:{description:"Every year",validate:function(L,X){var Y=L.get(aP);var A=L.get(bm);return((A.getMonth()===X.getMonth())&&(A.getDay()===X.getDay()));},value:"yearly"}};var aw=aK.Lang,a=aw.isArray,G=aw.isObject,Q="activeView",J="allDay",c="arrow",aU="body",aA="bodyContent",o="boundingBox",az="cancel",a2="click",aG="content",aT="date",aH="dateFormat",aj="delete",ba="description",R="edit",bu="event",aS="eventClass",B="footerContent",aE="form",z="header",u="hide",aX="isoTime",aF="link",n="node",O="offsetHeight",bh="offsetWidth",h="overlay",S="overlayOffset",bv="recorder",br="rendered",aN="repeat",a4="save",af="scheduler",m="schedulerChange",av="scheduler-event",ax="scheduler-event-recorder",aD="shadow",aC="show",F="startDateChange",N="strings",a7="template",aV="title",bt="tl",ab="toolbar",bl="submit",bn="value",aR="visibleChange",Z="when",al="x",ak="y",ae="cancel",M="delete",y="edit",aJ="save",bw="-",g=".",ad="",i="#",r=aK.IO.prototype._serialize,E=aK.getClassName,s=E(af,bu),ap=E(af,bu,bv),bx=E(af,bu,bv,h),x=E(af,bu,bv,h,c),bf=E(af,bu,bv,h,c,aD),ah=E(af,bu,bv,h,aU),a8=E(af,bu,bv,h,aG),ag=E(af,bu,bv,h,aT),U=E(af,bu,bv,h,aE),bz=E(af,bu,bv,h,z),ar=E(af,bu,bv,h,aN),D=E(af,bu,aV),K=new aK.Template('<div class="',bf," ",x,'"></div>','<div class="',x,'"></div>','<input type="hidden" name="startDate" value="{startDate}" />','<input type="hidden" name="endDate" value="{endDate}" />','<div class="',bz,'">','<input class="',a8,'" name="content" value="{content}" />',"</div>",'<div class="',ah,'">','<label class="',ag,'">{date}</label>','<select class="',ar,'" name="repeat">','<tpl for="eventRepeat">','<option {[ (parent.repeat && parent.repeat.value) == parent.eventRepeat[$i].value ? \'selected="selected"\' : "" ]} value="{value}">{description}</option>',"</tpl>","</select>","</div>"),by='<form class="'+U+'" id="schedulerEventRecorderForm"></form>';var W=aK.Component.create({NAME:ax,ATTRS:{allDay:{value:false},content:{value:ad},duration:{value:60},dateFormat:{validator:bj,value:"%a, %B %d,"},event:{},eventClass:{valueFn:function(){return aK.SchedulerEvent;}},strings:{value:{},setter:function(A){return aK.merge({"delete":"Delete","description-hint":"e.g., Dinner at Brian's","no-repeat":"No repeat",cancel:"Cancel",description:"Description",edit:"Edit",repeat:"Repeat",save:"Save",when:"When"},A||{});},validator:G},overlay:{validator:G,value:{align:{points:[bt,bt]},visible:false,width:300,zIndex:500}},overlayOffset:{value:[15,-38],validator:a},template:{value:K},toolbar:{setter:function(X){var L=this;var A=L.get(N);return aK.merge({children:[{handler:aK.bind(L._handleSaveEvent,L),label:A[a4]},{handler:aK.bind(L._handleCancelEvent,L),label:A[az]},{handler:aK.bind(L._handleDeleteEvent,L),label:A[aj]}]},X||{});},validator:G,value:{}}},EXTENDS:aK.SchedulerEvent,prototype:{initializer:function(){var A=this;A.get(n).addClass(ap);A.publish(ae,{defaultFn:A._defCancelEventFn});A.publish(M,{defaultFn:A._defDeleteEventFn});A.publish(y,{defaultFn:A._defEditEventFn});A.publish(aJ,{defaultFn:A._defSaveEventFn});A.after(m,A._afterSchedulerChange);A[h]=new aK.Overlay(A.get(h));A[ab]=new aK.Toolbar(A.get(ab));},_afterSchedulerChange:function(Y){var A=this;var X=Y.newVal;var L=X.get(o);L.delegate(a2,aK.bind(A._onClickSchedulerEvent,A),g+s);},_defCancelEventFn:function(L){var A=this;A.get(n).remove();A.hideOverlay();},_defDeleteEventFn:function(X){var A=this;var L=A.get(af);L.removeEvent(A.get(bu));A.hideOverlay();L.syncEventsUI();},_defEditEventFn:function(X){var A=this;var L=A.get(af);A.hideOverlay();L.syncEventsUI();},_defSaveEventFn:function(X){var A=this;var L=A.get(af);L.addEvent(X.newSchedulerEvent);A.hideOverlay();L.syncEventsUI();},_handleCancelEvent:function(L){var A=this;A.fire(ae);L.preventDefault();},_handleDeleteEvent:function(L){var A=this;A.fire(M,{schedulerEvent:A.get(bu)});L.preventDefault();},_handleSaveEvent:function(L){var A=this;A.fire(A.get(bu)?y:aJ,{newSchedulerEvent:A.getEventCopy()});L.preventDefault();},_onClickSchedulerEvent:function(X){var A=this;var L=X.currentTarget.getData(av);if(L){A.set(bu,L);A.showOverlay([X.pageX,X.pageY]);A.get(n).remove();}},_onOverlayVisibleChange:function(Y){var L=this;if(Y.newVal){L.populateForm();if(!L.get(bu)){var X=L[h].get(o);var A=X.one(g+a8);setTimeout(function(){A.selectText();},0);}}else{L.set(bu,null);L.get(n).remove();}},_onSubmitForm:function(L){var A=this;A._handleSaveEvent(L);},_renderOverlay:function(){var L=this;var A=L.get(N);L[h].render();L[ab].render();var X=L[h].get(o);X.addClass(bx);L[h].set(B,L[ab].get(o));L[h].on(aR,aK.bind(L._onOverlayVisibleChange,L));L.formNode=aK.Node.create(by);L[h].set(aA,L.formNode);L.formNode.on(bl,aK.bind(L._onSubmitForm,L));},getEventCopy:function(){var A=this;var X=A.get(bu);if(!X){X=new (A.get(aS))({allDay:A.get(J),endDate:A.get(aP),scheduler:A.get(af),startDate:A.get(bm)});X.copyPropagateAttrValues(A,{content:true});}var L=A.serializeForm();X.set(aG,L[aG]);X.set(aN,L[aN]);return X;},getFormattedDate:function(){var X=this;var L=X.get(aH);var bA=(X.get(bu)||X);var bC=bA.get(aP);var bB=bA.get(af);var A=bA.get(bm);var Y=(bB.get(Q).get(aX)?j.toIsoTimeString:j.toUsTimeString);return[bA._formatDate(A,L),Y(A),be,Y(bC)].join(q);},getTemplateData:function(){var L=this;var A=L.get(N);var X=(L.get(bu)||L);return{content:X.get(aG)||A["description-hint"],date:L.getFormattedDate(),endDate:X.get(aP).getTime(),eventRepeat:L.eventRepeatArray,repeat:X.get(aN),startDate:X.get(bm).getTime()};},hideOverlay:function(){var A=this;A[h].hide();},populateForm:function(){var A=this;if(!A.eventRepeatArray){A.eventRepeatArray=[];aK.each(aK.SchedulerEventRepeat,function(L){A.eventRepeatArray.push({description:L[ba],value:L[bn]});});}A.formNode.setContent(A.get(a7).parse(A.getTemplateData()));},serializeForm:function(){var A=this;return aK.QueryString.parse(r(A.formNode.getDOM()));},showOverlay:function(Y,bB){var A=this;
var X=A.get(S);if(!A[h].get(br)){A._renderOverlay();}A[h].show();if(!Y){var L=(A.get(bu)||A).get(n);var bA=L.one(g+D);bB=[X[0]+bA.get(bh),X[1]+bA.get(O)/2];Y=bA.getXY();}bB=bB||X;Y[0]+=bB[0];Y[1]+=bB[1];A[h].set("xy",Y);}}});aK.SchedulerEventRecorder=W;},"@VERSION@",{skinnable:true,requires:["aui-base","aui-color-util","aui-datatype","aui-template","aui-toolbar","io-form","querystring","overlay"]});AUI.add("aui-scheduler-calendar",function(d){var i=d.Lang,j=i.isArray,c=i.isBoolean,b=i.isString,g=function(o){return(o instanceof d.SchedulerEvent);},a="color",k="disabled",m="events",h="pallete",n="scheduler",e="scheduler-calendar",l="visible";var f=d.Component.create({NAME:e,ATTRS:{color:{valueFn:function(){var p=this;var q=p.get(h);var o=Math.ceil(Math.random()*q.length)-1;return q[o];},validator:b},disabled:{value:false,validator:c},name:{value:"(no name)",validator:b},pallete:{value:["#d96666","#e67399","#b373b3","#8c66d9","#668cb3","#668cd9","#59bfb3","#65ad89","#4cb052","#8cbf40","#bfbf4d","#e0c240","#f2a640","#e6804d","#be9494","#a992a9","#8997a5","#94a2be","#85aaa5","#a7a77d","#c4a883","#c7561e","#b5515d","#c244ab","#603f99","#536ca6","#3640ad","#3c995b","#5ca632","#7ec225","#a7b828","#cf9911","#d47f1e","#b56414","#914d14","#ab2671","#9643a5","#4585a3","#737373","#41a587","#d1bc36","#ad2d2d"],validator:j},scheduler:{lazyAdd:false,setter:"_setScheduler"},visible:{value:true,validator:c}},EXTENDS:d.Base,AUGMENTS:d.SchedulerEventSupport,prototype:{initializer:function(){var o=this;o.after("colorChange",o._afterColorChange);o.after("disabledChange",o._afterDisabledChange);o.after("eventsChange",o._afterEventsChange);o.after("visibleChange",o._afterVisibleChange);o._uiSetColor(o.get(a));o._uiSetDisabled(o.get(k));o._uiSetEvents(o.get(m));o._uiSetVisible(o.get(l));},_afterColorChange:function(p){var o=this;o._uiSetColor(p.newVal);},_afterDisabledChange:function(p){var o=this;o._uiSetDisabled(p.newVal);},_afterEventsChange:function(p){var o=this;o._uiSetEvents(p.newVal);},_afterVisibleChange:function(p){var o=this;o._uiSetVisible(p.newVal);},_propagateAttr:function(p,q){var o=this;o.eachEvent(function(r){r.set(p,q);});},_setScheduler:function(q){var o=this;var p=o.get(n);if(p){o.removeTarget(p);}o.addTarget(q);return q;},_uiSetColor:function(p){var o=this;o._propagateAttr(a,o.get(a));},_uiSetDisabled:function(p){var o=this;o._propagateAttr(k,p);},_uiSetEvents:function(q){var o=this;var p=o.get(n);o._propagateAttr(a,o.get(a));o._propagateAttr(k,o.get(k));o._propagateAttr(l,o.get(l));if(p){p.removeEvents(o);p.addEvents(q);p.syncEventsUI();}},_uiSetVisible:function(p){var o=this;o._propagateAttr(l,p);}}});d.SchedulerCalendar=f;},"@VERSION@",{requires:["aui-scheduler-event"],skinnable:false});AUI.add("aui-scheduler",function(a){},"@VERSION@",{skinnable:true,use:["aui-scheduler-base","aui-scheduler-view","aui-scheduler-event","aui-scheduler-calendar"]});