AUI.add("aui-scheduler-view-agenda",function(ad){var T=ad.Lang,ap=T.isFunction,aF=ad.Array,l=ad.DataType.DateMath,h=".",L="",aE=" ",K="activeView",ao="agenda",d="biggie",Z="bodyContent",r="boundingBox",av="clearfix",am="click",az="clientId",an="color",a="container",ab="content",ak="date",aq="day",w="disabled",aD="event",P="eventRecorder",ax="events",b="extra",z="first",C="header",c="headerContent",ar="headerDayDateFormatter",y="headerExtraDateFormatter",q="helper",ag="info",m="infoDayDateFormatter",aj="infoLabelBigDateFormatter",J="infoLabelSmallDateFormatter",ah="label",e="last",aB="locale",ai="metal",aA="no",N="noFutureEvents",p="past",M="scheduler",X="schedulerEvent",Y="small",ay="startDate",I="strings",g="today",Q="viewDate",V="visible",ae="scheduler-view-agenda",W=function(A){return function(aJ){var aI=this;var aK=aI.get(M);return ad.DataType.Date.format(aJ,{format:A,locale:aK.get(aB)});};},B=function(A){return aF.map(A,function(aI){return +aI;}).sort(aF.numericSort);},F=ad.getClassName,ac=F(ae,a),o=F(ae,aD),af=F(ae,aD,an),v=F(ae,aD,ab),k=F(ae,aD,z),al=F(ae,ag),u=F(ae,ag,d),au=F(ae,ag,a),t=F(ae,ag,ah),R=F(ae,ag,ah,d),E=F(ae,ag,ah,Y),i=F(ae,aD,e),aa=F(ae,aA,ax),x=F(ae,aD,p),aG=F(ae,ax),H=F(ae,C),j=F(ae,C,aq),aC=F(ae,C,b),s=F(ae,C,z),G=F(ae,C,e),f=F(q,av),at=F(ae,ai),n='<div class="'+ac+'">{content}</div>',S='<div class="'+[H,at,f].join(aE)+' {firstClassName} {lastClassName}">'+'<div class="'+j+'">{day}</div>'+'<a href="javascript:;" class="'+aC+'" data-timestamp="{timestamp}">{extra}</a>'+"</div>",aw='<div class="'+aG+'">{content}</div>',aH='<div class="'+o+' {firstClassName} {lastClassName} {eventClassName}" data-clientId="{clientId}">'+'<div class="'+af+'" style="background-color: {color};"></div>'+'<div class="'+v+'">{content}</div>'+"</div>",O='<div class="'+aa+'">{content}</div>',U='<div class="'+au+'">'+'<div class="'+[al,f].join(aE)+'">'+'<div class="'+[u,at].join(aE)+'">{day}</div>'+'<div class="'+t+'">'+'<div class="'+R+'">{labelBig}</div>'+'<div class="'+E+'">{labelSmall}</div>'+"</div>"+"</div>"+"</div>";var D=ad.Component.create({NAME:ae,ATTRS:{bodyContent:{value:L},headerDayDateFormatter:{value:function(aJ){var A=this,aI,aK;if(l.isToday(aJ)){aI=g;}else{aI="%A";}aK=W.call(A,aI);return aK.call(A,aJ);},validator:ap},headerExtraDateFormatter:{validator:ap,value:W("%e %B")},infoDayDateFormatter:{validator:ap,value:W("%e")},infoLabelBigDateFormatter:{validator:ap,value:W("%A")},infoLabelSmallDateFormatter:{validator:ap,value:W("%B %d, %Y")},name:{value:ao},strings:{value:{noFutureEvents:"No future events."}}},EXTENDS:ad.SchedulerView,prototype:{bindUI:function(){var A=this,aI=A.get(r);aI.delegate(am,A._onSchedulerEventClick,h+o,A);aI.delegate(am,A._onEventsHeaderClick,h+aC,A);},getNextDate:function(){var A=this,aI=A.get(M).get(ak);return l.add(aI,l.DAY,1);},getPrevDate:function(){var A=this,aI=A.get(M).get(ak);return l.subtract(aI,l.DAY,1);},plotEvents:function(){var aP=this,aQ=aP.get(I),aL=aP.get(M),aU=aL.get(Q),aM=aP.get(ar),aJ=aP.get(y),aK=aP.get(m),aO=aP.get(aj),aI=aP.get(J),aT=[],A=aP._getDayEventsMap(),aS=ad.Object.keys(A),aR=aS.length;aP.set(c,ad.Lang.sub(U,{day:aK.call(aP,aU),labelBig:aO.call(aP,aU),labelSmall:aI.call(aP,aU)}));if(!ad.Object.isEmpty(A)){aF.each(B(aS),function(aY,aW){var aV=new Date(ad.Lang.toInt(aY)),aZ=A[aY],aX=aZ.length;aT.push(ad.Lang.sub(S,{day:aM.call(aP,aV),extra:aJ.call(aP,aV),firstClassName:(aW===0)?s:L,lastClassName:(aW===aR-1)?G:L,timestamp:aY}));aF.each(aZ,function(a3,a2){var a1=l.toMidnight(new Date()),a0=a3.get(ay);aT.push(ad.Lang.sub(aH,{clientId:a3.get(az),color:a3.get(an),content:a3.get(ab),eventClassName:(a0.getTime()<a1.getTime())?x:L,firstClassName:(a2===0)?k:L,lastClassName:(a2===aX-1)?i:L}));});});}else{aT.push(ad.Lang.sub(O,{content:aQ[N]}));}var aN=ad.Lang.sub(n,{content:ad.Lang.sub(aw,{content:aT.join(L)})});aP.set(Z,aN);},_getDayEventsMap:function(){var A=this,aJ=A.get(M),aK=l.toMidnight(aJ.get(Q)),aI={};aJ.eachEvent(function(aM){var aL=aM.get(ay),aO=aM.get(V),aN;if(!aO||(aL.getTime()<aK.getTime())){return;}aN=l.safeClearTime(aL).getTime();if(!aI[aN]){aI[aN]=[];}aI[aN].push(aM);});return aI;},_onEventsHeaderClick:function(aK){var A=this,aJ=A.get(M),aM=aK.currentTarget,aL=ad.Lang.toInt(aM.getData("timestamp"))||Date.now(),aI=new Date(aL),aN=aJ.getViewByName(aq);if(aN){aJ.set(ak,aI);aJ.set(K,aN);}},_onSchedulerEventClick:function(aL){var A=this,aM=aL.currentTarget,aJ=A.get(M),aI=aJ.get(P),aK=aM.getData(X);if(!aK){aK=aJ.getEventByClientId(aM.getData(az));aM.setData(X,aK);}if(aK&&aI&&!aJ.get(w)){aI.set(aD,aK,{silent:true});aI.showOverlay([aL.pageX,aL.pageY]);}}}});ad.SchedulerAgendaView=D;},"@VERSION@",{skinnable:true,requires:["aui-scheduler-base"]});