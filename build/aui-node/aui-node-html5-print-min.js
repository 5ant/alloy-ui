AUI.add("aui-node-html5-print",function(s){var E=s.config,a=E.doc,g=E.win,i=s.UA.ie,D=function(){return g.AUI_HTML5_IE===false;};if(!i||i>=9||D()){return;}var r=[],f="aui-printfix",F="aui-printfix-",l=YUI.AUI,z=a.documentElement,d=l.HTML5_ELEMENTS,j=d.length,B=d.join("|"),b=new RegExp("<(/?):("+B+")","gi"),c=new RegExp("("+B+")","gi"),C=new RegExp("\\b("+B+")\\b","i"),e=/print|all/,w=new RegExp("(^|[^\\n{}]*?\\s)("+B+").*?{([^}]*)}","gim"),q=new RegExp("<(/*)("+B+")","gi"),k="."+F+"$1",y="all",p=" ",t="",u="{",o="}",n="<$1$2",h="<$1font";var x=l.html5shiv,v=function(A){return A&&(A+t!==undefined);};x(a);var m=function(){var H=function(){if(D()){G();}else{m.onAfterPrint();}};var A=function(){if(D()){G();}else{m.onBeforePrint();}};var G=function(){g.detachEvent("onafterprint",H);g.detachEvent("onbeforeprint",A);};var I=function(){g.attachEvent("onafterprint",H);g.attachEvent("onbeforeprint",A);};I();m.destroy=G;m.init=I;};s.mix(m,{onAfterPrint:function(){var A=this;A.restoreHTML();var G=A._getStyleSheet();G.styleSheet.cssText=t;},onBeforePrint:function(){var A=this;var H=A._getStyleSheet();var G=A._getAllCSSText();H.styleSheet.cssText=A.parseCSS(G);A.writeHTML();},parseCSS:function(H){var A=this;var G=t;var I;var J=H.match(w);if(J){G=J.join("\n").replace(c,k);}return G;},restoreHTML:function(){var A=this;var H=A._getBodyClone();var G=A._getBodyEl();H.innerHTML=t;z.removeChild(H);z.appendChild(G);},writeHTML:function(){var O=this;var L=-1;var K;var Q=O._getBodyEl();var M;var R;var I;var N;var G;var J=[];while(++L<j){M=d[L];I=a.getElementsByTagName(M);N=I.length;K=-1;while(++K<N){G=I[K];R=G.className;if(R.indexOf(F)==-1){J[0]=F+M;J[1]=R;G.className=J.join(p);}}}var P=O._getDocFrag();var H=O._getBodyClone();P.appendChild(Q);z.appendChild(H);H.className=Q.className;H.id=Q.id;var A=Q.cloneNode(true).innerHTML;A=A.replace(b,n).replace(q,h);H.innerHTML=A;},_getAllCSSText:function(){var M=this;var I=[];var L=M._getAllStyleSheets(a.styleSheets,y);var K;var G;for(var J=0;styleSheet=L[J];J++){var N=styleSheet.rules;if(N&&N.length){for(var H=0,A=N.length;H<A;H++){K=N[H];if(!K.href){G=M._getCSSTextFromRule(K);I.push(G);}}}}return I.join(p);},_getCSSTextFromRule:function(L){var A=this;var H=t;var K=L.style;var J;var I;var G;if(K&&(I=K.cssText)&&(G=L.selectorText)&&C.test(G)){r.length=0;r.push(G,u,I,o);H=r.join(p);}return H;},_getAllStyleSheets:function(L,O,G,I){var M=this;G=G||1;I=I||[];if(v(L)){var A=L.imports;O=L.mediaType||O;if(e.test(O)){var H;if(G<=3&&v(A)&&A.length){for(var J=0,H=A.length;J<H;J++){M._getAllStyleSheets(A[J],O,G+1,I);}}else{if(L.length){for(var J=0,H=L.length;J<H;J++){M._getAllStyleSheets(L[J],O,G,I);}}else{var N=L.rules;var K;if(N&&N.length){for(var J=0,H=N.length;J<H;J++){K=N[J].styleSheet;if(K){M._getAllStyleSheets(K,O,G,I);}}}}}if(!L.disabled&&L.rules){I.push(L);}}}O=y;return I;},_getBodyEl:function(){var A=this;var G=A._bodyEl;if(!G){G=a.body;A._bodyEl=G;}return G;},_getBodyClone:function(){var A=this;var G=A._bodyClone;if(!G){G=a.createElement("body");A._bodyClone=G;}return G;},_getDocFrag:function(){var A=this;var G=A._docFrag;if(!G){G=a.createDocumentFragment();x(G);A._docFrag=G;}return G;},_getStyleSheet:function(){var A=this;var H=A._styleSheet;if(!H){H=a.createElement("style");var G=a.documentElement.firstChild;G.insertBefore(H,G.firstChild);H.media="print";H.className=f;A._styleSheet=H;}return H;}});s.namespace("HTML5").PrintFix=m;m();},"@VERSION@",{requires:["aui-node-html5"]});