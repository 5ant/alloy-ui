AUI.add("aui-video",function(D){var I=D.Lang,J=D.UA,E=D.ClassNameManager.getClassName,M="video",C=E(M),K=E(M,"node"),G=D.config.base+"aui-video/assets/player.swf",F='<source type="video/mp4;" />',H="<source type='video/ogg; codecs=\"theora, vorbis\"' />",B='<video id="{0}" width="100%" height="100%" controls="controls" class="'+K+'"></video>';TPL_VIDEO_FALLBACK='<div class="'+K+'"></div>';var L=D.Component.create({NAME:M,ATTRS:{url:{value:""},ogvUrl:{value:""},swfUrl:{value:G},poster:{value:""},fixedAttributes:{value:{}},flashVars:{value:{}},render:{value:true}},BIND_UI_ATTRS:["url","poster","ogvUrl","swfUrl","fixedAttributes","flashVars"],SYNC_UI_ATTRS:["url","poster","ogvUrl"],prototype:{renderUI:function(){var A=this;A._renderVideoTask=new D.DelayedTask(function(){A._renderVideo();});A._renderSwfTask=new D.DelayedTask(function(){A._renderSwf();});A._renderVideo(!A.get("ogvUrl"));},bindUI:function(){var A=this;A.publish("videoReady",{fireOnce:true});},_renderSwf:function(){var T=this;var P=T.get("swfUrl");if(P){var S=T.get("url");var U=T.get("poster");var Q=T.get("flashVars");D.mix(Q,{controls:true,src:S,poster:U});var A=D.QueryString.stringify(Q);if(T._swfId){T._video.removeChild(D.one("#"+T._swfId));}else{T._swfId=D.guid();}var N='<object id="'+T._swfId+'" ';if(J.ie){N+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ';}else{N+='type="application/x-shockwave-flash" data="'+P+'" ';}N+='height="100%" width="100%">';if(J.ie){N+='<param name="movie" value="'+P+'"/>';}var R=T.get("fixedAttributes");for(var O in R){N+='<param name="'+O+'" value="'+R[O]+'" />';}if(A){N+='<param name="flashVars" value="'+A+'" />';}if(U!=""){N+='<img src="'+U+'" alt="" />';}N+="</object>";T._video.append(N);}},_renderVideo:function(Q){var A=this;var N=B;if(J.gecko&&Q){N=TPL_VIDEO_FALLBACK;}var P=I.sub(N,[D.guid()]);var O=D.Node.create(P);A.get("contentBox").append(O);A._video=O;},_uiSetFixedAttributes:function(N){var A=this;A._renderSwfTask.delay(1);},_uiSetFlashVars:function(N){var A=this;A._renderSwfTask.delay(1);},_uiSetOgvUrl:function(Q){var A=this;if(J.gecko){var O=A._video;var N=O.get("nodeName").toLowerCase()=="video";if((!Q&&N)||(Q&&!N)){A._video.remove(true);A._renderVideoTask(1,null,null,[!Q]);}if(!Q){A._renderSwfTask.delay(1);}else{var P=A._sourceOgv;if(!P){P=D.Node.create(H);A._video.append(P);A._sourceOgv=P;}P.attr("src",Q);}}},_uiSetPoster:function(N){var A=this;A._video.setAttribute("poster",N);A._renderSwfTask.delay(1);},_uiSetSwfUrl:function(N){var A=this;A._renderSwfTask.delay(1);},_uiSetUrl:function(P){var O=this;var N=O.get("ogvUrl");if(O._video||!N){var A=O._sourceMp4;if(!A){A=D.Node.create(F);O._video.append(A);O._sourceMp4=A;}A.attr("src",P);}O._renderSwfTask.delay(1);}}});D.Video=L;},"@VERSION@",{skinnable:true,requires:["aui-base","querystring-stringify-simple"]});