/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.2.0PR1
build: nightly
*/
YUI.add("event-move",function(C){var G=("ontouchstart" in C.config.win&&!C.UA.chrome)?{start:"touchstart",move:"touchmove",end:"touchend"}:{start:"mousedown",move:"mousemove",end:"mouseup"},Q="start",T="move",F="end",S="_msh",I="_mh",P="_meh",L="_dmsh",J="_dmh",A="_dmeh",E="_ms",M="_m",R="minTime",N="minDistance",O="ownerDocument",K="nodeType",H=function(V,W){var U=(W)?4:3;return(V[U]!==undefined)?C.merge(V.splice(U,1)[0]):{};},D=function(V,U){return U._extra.root||(V.get(K)===9)?V:V.get(O);},B=C.Event.define;B("gesturemovestart",{on:function(V,U,W){U[S]=V.on(G[Q],this._onStart,this,V,U,W);},delegate:function(W,V,Y,U){var X=this;V[L]=W.delegate(G[Q],function(Z){X._onStart(Z,W,V,Y,true);},U);},detachDelegate:function(W,V,Y,U){var X=V[L];if(X){X.detach();V[L]=null;}},detach:function(V,U,X){var W=U[S];if(W){W.detach();U[S]=null;}},processArgs:function(U,V){var W=H(U,V);if(!(R in W)){W[R]=this.MIN_TIME;}if(!(N in W)){W[N]=this.MIN_DISTANCE;}return W;},_onStart:function(a,W,h,V,d){if(d){W=a.currentTarget;}var b=a,X=h._extra,U=true,Y=X.minTime,g=X.minDistance,Z=X.button,f=D(W,h),c;if(a.touches){U=(a.touches.length===1);a=a.touches[0];a.target=a.target||b.target;a.currentTarget=a.currentTarget||b.currentTarget;}else{U=(Z===undefined)||(Z=a.button);}if(U){if(a!==b){a._orig=b;}if(Y===0||g===0){this._start(a,W,V,X);}else{c=[a.pageX,a.pageY];if(Y>0){X._ht=C.later(Y,this,this._start,[a,W,V,X]);X._hme=f.on(G[F],C.bind(function(){this._cancel(X);},this));}if(g>0){X._hm=f.on(G[T],C.bind(function(e){if(Math.abs(e.pageX-c[0])>g||Math.abs(e.pageY-c[1])>g){this._start(a,W,V,X);}},this));}}}},_cancel:function(U){if(U._ht){U._ht.cancel();U._ht=null;}if(U._hme){U._hme.detach();U._hme=null;}if(U._hm){U._hm.detach();U._hm=null;}},_start:function(W,U,V,X){if(X){this._cancel(X);}W.type="gesturemovestart";U.setData(E,W);V.fire(W);},MIN_TIME:0,MIN_DISTANCE:0});B("gesturemove",{on:function(W,V,Y){var U=D(W,V),X=U.on(G[T],this._onMove,this,W,V,Y);V[I]=X;},delegate:function(W,V,Y,U){var X=this;V[J]=W.delegate(G[T],function(Z){X._onMove(Z,W,V,Y,true);},U);},detach:function(V,U,X){var W=U[I];if(W){W.detach();U[I]=null;}},detachDelegate:function(W,V,Y,U){var X=V[J];if(X){X.detach();V[J]=null;}},processArgs:H,_onMove:function(a,X,W,Z,V){if(V){X=a.currentTarget;}var U=W._extra.standAlone||X.getData(E),Y=a;if(U){if(a.touches){U=(a.touches.length===1);a=a.touches[0];a.target=a.target||Y.target;a.currentTarget=a.currentTarget||Y.currentTarget;}if(U){if(a!==Y){a._orig=Y;}a.type="gesturemove";Z.fire(a);}}}});B("gesturemoveend",{on:function(X,W,Y){var V=D(X,W),U=V.on(G[F],this._onEnd,this,X,W,Y);W[P]=U;},delegate:function(W,V,Y,U){var X=this;V[A]=W.delegate(G[F],function(Z){X._onEnd(Z,W,V,Y,true);},U);},detachDelegate:function(W,V,Y,U){var X=V[A];if(X){X.detach();V[A]=null;}},detach:function(W,V,X){var U=V[P];if(U){U.detach();V[P]=null;}},processArgs:H,_onEnd:function(a,W,V,Z,U){if(U){W=a.currentTarget;}var Y=V._extra.standAlone||W.getData(M)||W.getData(E),X=a;if(Y){if(a.changedTouches){if(a.changedTouches.length===1){a=a.changedTouches[0];a.target=a.target||X.target;a.currentTarget=a.currentTarget||X.currentTarget;}else{Y=false;}}if(Y){if(a!==X){a._orig=X;}a.type="gesturemoveend";Z.fire(a);W.clearData(E);W.clearData(M);}}}});},"3.2.0PR1",{requires:["node-base","event-touch","event-synthetic"]});