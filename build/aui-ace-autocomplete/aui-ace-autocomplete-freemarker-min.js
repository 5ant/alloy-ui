AUI.add("aui-ace-autocomplete-freemarker",function(k){var d=k.Lang,q=k.Array,o=k.Object,h=["flush","recover","fallback","local","break","lt","case","global","if","compress","escape","assign","elseif","noescape","setting","list","else","switch","include","recurse","rt","ftl","macro","stop","nt","visit","attempt","nested","import","default","return","t","function"],a=0,e=1,r=/<#[\w.]*>?$/,j=/\$\{[\w., ()"]*\}?$/,b=-1,p=0,c="all",m=".",l="",f="responseData",i="variables",g="aui-ace-autocomplete-freemarker";var n=k.Component.create({NAME:g,NS:g,ATTRS:{host:{validator:d.isObject},variables:{validator:d.isObject}},EXTENDS:k.Base,prototype:{initializer:function(t){var s=this;s._tstree=new k.TernarySearchTree();},getMatch:function(v){var t=this;var u;var s;if((s=v.lastIndexOf("<"))>=0){v=v.substring(s);if(r.test(v)){u={content:v.substring(2),start:s,type:a};}}else{if((s=v.lastIndexOf("$"))>=0){v=v.substring(s);if(j.test(v)){u={content:v.substring(2),start:s,type:e};}}}return u;},getResults:function(t,z,y){var A=this;var u=A._tstree;var x=t.type;if(x===a){var w=h;var v=t.content;if(v.length){if(A._lastTSTLoad!==a){A._addDirectives();}w=u.prefixSearch(v);}z(w);}else{if(x===e){var s=A._getVariableMatches(t.content);z(s);}}},getSuggestion:function(v,w){var t=this;var s=w||l;if(w){var x=v.type;if(x===a){if(v.content&&w.indexOf(v.content)===0){s=w.substring(v.content.length);}}else{if(x===e){var y=v.content.split(m);var u=y[y.length-1];if(u&&w.indexOf(u)===0){s=w.substring(u.length);}}}}return s;},_addData:function(u){var s=this;var t=s._tstree;t.empty();q.each(u,function(w,v){t.add(w);});},_addDirectives:function(){var s=this;s._addData(h);s._lastTSTLoad=a;},_getVariableMatches:function(x){var z=this;var A=x.split(m);var s=z.get(i);var y=A[A.length-1];A.length-=1;var t;if(A.length>0){for(var u=0;u<A.length;u++){t=A[u];if(d.isObject(s)){s=s[t];}}}var v=[];if(d.isObject(s)){q.each(o.keys(s),function(C,B){v.push(C);});if(y){var w=z._tstree;w.empty();q.each(v,function(C,B){w.add(C);});v=w.prefixSearch(y);z._lastTSTLoad=e;}}return v;}}});n.DIRECTIVES=h;k.AceEditor.AutoCompleteFreemarker=n;},"@VERSION@",{requires:["aui-ace-autocomplete-base","aui-search-ternary-search-tree"]});