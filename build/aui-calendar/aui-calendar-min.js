AUI.add("aui-calendar-base",function(AG){var v=AG.Lang,AW=v.isString,D=v.isArray,AS=v.isBoolean,o=v.isUndefined,j=v.isNumber,z=AG.WidgetStdMod,S="active",n="blank",y="bodyContent",R="boundingBox",k="calendar",K="circle",AV="clearfix",m="currentDay",g="currentMonth",H="currentNode",I="currentYear",w="dates",AD="dateFormat",AQ="day",AF="default",W="disabled",u=".",e="firstDayOfWeek",a="hd",C="headerContent",O="helper",t="hidden",T="hover",s="icon",AZ="locale",AX="maxDate",Aa="minDate",J="month",p="monthdays",P="next",AT="prev",l="selectMultipleDates",AR="setValue",r="state",AL="title",AN="triangle",q="week",AM="weekdays",c=AG.ClassNameManager.getClassName,AE=c(k),b=c(k,W),AK=c(k,AQ),Q=c(k,AQ,n),h=c(k,AQ,t),d=c(k,a),AI=c(O,AV),M=c(s),AH=c(s,K,AN,"l"),AB=c(s,K,AN,"r"),B=c(k,p),AJ=c(k,P),i=c(k,AT),AY=c(r,S),N=c(r,AF),F=c(r,T),AU=c(k,AL),G=c(k,q),Ab=c(k,AM),AP=function(A){A.halt();},AO=7,x=31,V='<div class="'+[d,N,AI].join(" ")+'">'+'<a href="" class="'+[M,AH,i].join(" ")+'">Back</a>'+'<a href="" class="'+[M,AB,AJ].join(" ")+'">Prev</a>'+"</div>",X='<div class="'+[Q,h].join(" ")+'"></div>',Z='<a href="#" class="'+[AK,N].join(" ")+'"></a>',AC='<div class="'+AU+'"></div>',E='<div class="'+[B,AI].join(" ")+'"></div>',AA='<div class="'+[Ab,AI].join(" ")+'"></div>',U=['<div class="'+G+'">',0,"</div>"],f=['<a href="#" class="'+[AK,N].join(" ")+'">',0,"</a>"];var Y=AG.Component.create({NAME:k,ATTRS:{currentDay:{value:(new Date()).getDate()},currentMonth:{value:(new Date()).getMonth()},currentYear:{value:(new Date()).getFullYear()},dates:{value:[new Date()],validator:D,setter:function(A){return this._setDates(A);}},dateFormat:{value:"%m/%d/%Y",validator:AW},firstDayOfWeek:{value:0,validator:j},minDate:{value:null,setter:function(A){return this._setMinMaxDate(A);}},maxDate:{value:null,setter:function(A){return this._setMinMaxDate(A);}},showOn:{value:"mousedown"},hideOn:{value:"mousedown"},selectMultipleDates:{value:false},setValue:{value:true,validator:AS},stack:{lazyAdd:false,value:true,setter:function(A){return this._setStack(A);},validator:AS}},EXTENDS:AG.OverlayContext,prototype:{initializer:function(){var A=this;A.selectedDates=[];},renderUI:function(){var A=this;Y.superclass.renderUI.apply(this,arguments);A._renderCalendar();A._renderWeekDays();A._renderBlankDays();A._renderMonthDays();},bindUI:function(){var A=this;Y.superclass.bindUI.apply(this,arguments);A._bindDOMEvents();A._bindDelegateMonthDays();A.after("datesChange",AG.bind(A._afterSetDates,A));A.after("currentMonthChange",AG.bind(A._syncView,A));A.after("currentYearChange",AG.bind(A._syncView,A));},syncUI:function(){var A=this;Y.superclass.syncUI.apply(this,arguments);A._syncView();},_syncView:function(){var A=this;var Ad=A.get(m);var Ac=A.get(g);var L=A.get(I);A._syncDays();A._syncHeader();A._syncSelectedDays();},_syncHeader:function(){var A=this;var Ac=A.get(g);var L=A.get(I);var Ad=[A._getMonthName(Ac),L].join(" ");A.headerTitleNode.html(Ad);},_syncDays:function(){var A=this;var Ac=A.getDaysInMonth();var Ad=A.getFirstDayOfWeek();var L=A.getCurrentDate();A.monthDays.each(function(Af,Ae){if(Ae>=Ac){Af.addClass(h);}else{Af.removeClass(h);}L.setDate(Ae+1);A._restrictDate(L,Af);});A.blankDays.each(function(Af,Ae){var Ag=(Ad-A.get(e)+AO)%AO;if(Ae<Ag){Af.removeClass(h);}else{Af.addClass(h);}});},_syncSelectedDays:function(Ad){var A=this;var Ac=A.get(g);var L=A.get(I);A.monthDays.replaceClass(AY,N);A.monthDays.replaceClass(F,N);A._eachSelectedDate(function(Ag,Af){var Ah=(Ac==Ag.getMonth())&&(L==Ag.getFullYear());if(Ah){var Ae=A.monthDays.item(Ag.getDate()-1);Ae.addClass(AY);try{Ae.focus();}catch(Ai){}}},Ad);},_renderCalendar:function(){var A=this;var L=A.get(R);A.weekDaysNode=AG.Node.create(AA);A.monthDaysNode=AG.Node.create(E);A.headerTitleNode=AG.Node.create(AC);A.headerContentNode=AG.Node.create(V).append(A.headerTitleNode);var Ac=AG.Node.create("<div></div>");Ac.append(this.weekDaysNode);Ac.append(this.monthDaysNode);A.setStdModContent(z.HEADER,A.headerContentNode);A.setStdModContent(z.BODY,Ac);L.addClass(AE);},_renderWeekDays:function(){var L=this;var Ad=0;var Af=L.get(e);var Ac=[];while(Ad<AO){var Ae=(Ad+Af)%AO;var A=L._getDayNameMin(Ae);U[1]=A;Ac[Ad]=U.join("");Ad++;}L.weekDaysNode.append(Ac.join(""));},_renderBlankDays:function(){var A=this;var L=AO;var Ad=[];while(L--){Ad.push(X);}var Ac=AG.DOM.create(Ad.join(""));A.blankDays=AG.all(Ac.childNodes);A.monthDaysNode.append(Ac);},_renderMonthDays:function(){var Ac=0;var A=this;var L=[];while(Ac++<31){f[1]=Ac;L.push(f.join(""));}var Ad=AG.DOM.create(L.join(""));A.monthDays=AG.all(Ad.childNodes);A.monthDaysNode.append(Ad);},_bindDOMEvents:function(){var A=this;var Ac=A.headerContentNode;var L=A.get(R);L.on("click",AP);L.on("mousedown",AP);Ac.delegate("mousedown",A._selectNextMonth,u+AB,A);Ac.delegate("mousedown",A._selectPrevMonth,u+AH,A);},_bindDelegateMonthDays:function(){var A=this;var L=A.get(R);L.delegate("click",AG.bind(A._onClickDays,A),u+AK);L.delegate("mouseenter",AG.bind(A._onMouseEnterDays,A),u+AK);L.delegate("mouseleave",AG.bind(A._onMouseLeaveDays,A),u+AK);},alreadySelected:function(Ac){var L=this;var A=false;L._eachSelectedDate(function(Ae,Ad){if(L._compareDates(Ae,Ac)){A=true;}});return A;},getSelectedDates:function(){var A=this;return A.get(w);},getFormattedSelectedDates:function(){var A=this;var L=[];A._eachSelectedDate(function(Ac){L.push(A.formatDate(Ac,A.get(AD)));});return L;},getDetailedSelectedDates:function(){var A=this;var L=[];A._eachSelectedDate(function(Ac){L.push({year:Ac.getFullYear(),month:Ac.getMonth(),day:Ac.getDate()});});return L;},_getLocaleMap:function(){var A=this;return AG.DataType.Date.Locale[A.get(AZ)];},_restrictDate:function(L,Ag){var A=this;var Af=A.get(AX);var Ae=A.get(Aa);var Ad=Ae&&(L<Ae);var Ac=Af&&(L>Af);if(Ad||Ac){Ag.addClass(b);}else{Ag.removeClass(b);}},_selectDate:function(){var A=this;var Ac=A.get(w);var L=A.getCurrentDate();if(!A.get(l)){Ac=[];}if(!A.alreadySelected(L)){Ac.push(L);A.set(w,Ac);}},_removeDate:function(L){var A=this;var Ac=A.get(w);
A._eachSelectedDate(function(Ae,Ad){if(A._compareDates(Ae,L)){AG.Array.remove(Ac,Ad);}});A.set(w,Ac);},_eachSelectedDate:function(L,Ac){var A=this;if(!Ac){Ac=A.get(w);}AG.Array.each(Ac,L,A);},_compareDates:function(L,A){return(L.getTime()==A.getTime());},_selectNextMonth:function(L){var A=this;A._navigateMonth(+1);L.preventDefault();},_selectPrevMonth:function(L){var A=this;A._navigateMonth(-1);L.preventDefault();},_navigateMonth:function(Ae){var A=this;var Ad=A.get(g);var Ac=A.get(I);var L=new Date(Ac,Ad+Ae);A.set(g,L.getMonth());A.set(I,L.getFullYear());},_afterSetDates:function(Ad){var L=this;var Af=L.getSelectedDates();var Ae=L.getFormattedSelectedDates();var Ac=L.getDetailedSelectedDates();var A=Ad.newVal.length;L._syncSelectedDays();if(A){L.fire("select",{date:{detailed:Ac,formatted:Ae,normal:Af}});if(!L.get(l)){L.hide();}}if(L.get(AR)){L.get(H).val(Ae.join(","));}},_onClickDays:function(Af){var L=this;var Ag=Af.currentTarget||Af.target;var Ad=L.monthDays.indexOf(Ag)+1;var Ae=Ag.test(u+b);if(!Ae){L.set(m,Ad);var Ac=L.getCurrentDate();var A=L.alreadySelected(Ac);if(A){L._removeDate(Ac);}else{L._selectDate();}}Af.preventDefault();},_onMouseEnterDays:function(L){var A=this;var Ac=L.currentTarget||L.target;Ac.replaceClass(N,F);},_onMouseLeaveDays:function(L){var A=this;var Ac=L.currentTarget||L.target;Ac.replaceClass(F,N);},_setDates:function(Ac){var A=this;AG.Array.each(Ac,function(Ae,Ad){if(AW(Ae)){Ac[Ad]=A.parseDate(Ae);}});var L=Ac[Ac.length-1];if(L){A.set(m,L.getDate());A.set(g,L.getMonth());A.set(I,L.getFullYear());A._syncSelectedDays(Ac);}return Ac;},_setMinMaxDate:function(L){var A=this;if(AW(L)){L=A.parseDate(L);}return L;},_setStack:function(L){var A=this;if(L){AG.CalendarManager.register(A);}else{AG.CalendarManager.remove(A);}return L;},getCurrentDate:function(){var A=this;var L=A._normalizeYearMonth();return(new Date(L.year,L.month,L.day));},getDaysInMonth:function(Ac,Ad){var A=this;var L=A._normalizeYearMonth(Ac,Ad);return(32-new Date(L.year,L.month,32).getDate());},getFirstDate:function(Ac,Ad){var A=this;var L=A._normalizeYearMonth(Ac,Ad);return(new Date(L.year,L.month,1));},getLastDate:function(Ad,Ae){var A=this;var Ac=A._normalizeYearMonth(Ad,Ae);var L=A.getDaysInMonth(Ac.month);return(new Date(Ac.year,Ac.month,L));},getFirstDayOfWeek:function(L,Ac){var A=this;return A.getFirstDate(L,Ac).getDay();},_normalizeYearMonth:function(Ad,Ag,L){var A=this;var Af=A.get(m);var Ae=A.get(g);var Ac=A.get(I);if(o(L)){L=Af;}if(o(Ag)){Ag=Ae;}if(o(Ad)){Ad=Ac;}return{year:Ad,month:Ag,day:L};},_getDayName:function(Ac){var L=this;var A=L._getLocaleMap();return A.A[Ac];},_getDayNameShort:function(Ac){var L=this;var A=L._getLocaleMap();return A.a[Ac];},_getDayNameMin:function(Ac){var A=this;var L=A._getDayNameShort(Ac);return L.slice(0,L.length-1);},_getMonthName:function(Ac){var L=this;var A=L._getLocaleMap();return A.B[Ac];},_getMonthNameShort:function(Ac){var L=this;var A=L._getLocaleMap();return A.b[Ac];},parseDate:function(L){var A=this;return(L?new Date(L):new Date);},formatDate:function(Ad,Ac){var L=this;var A=L.get(AZ);return AG.DataType.Date.format(Ad,{format:Ac,locale:A});}}});AG.Calendar=Y;AG.CalendarManager=new AG.OverlayManager({zIndexBase:1000});},"@VERSION@",{requires:["aui-overlay-context","datatype-date","widget-locale"],skinnable:true});AUI.add("aui-calendar",function(B){},"@VERSION@",{skinnable:true,use:["aui-calendar-base"]});