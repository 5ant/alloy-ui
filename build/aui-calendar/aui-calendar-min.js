AUI.add("aui-calendar",function(AK){var AA=AK.Lang,Ac=AA.isString,C=AA.isArray,AX=AA.isBoolean,s=AA.isUndefined,n=AA.isNumber,AD=AK.WidgetStdMod,U="",V=" ",S="active",AR="a",r="blank",w="blankDays",R="boundingBox",o="calendar",F="children",J="circle",Ab="clearfix",q="currentDay",k="currentMonth",I="currentYear",AC="dates",AH="dateFormat",AW="day",AJ="default",Z="disabled",z=".",g="firstDayOfWeek",b="hd",Af="headerContentNode",h="headerTitleNode",O="helper",y="hidden",T="hover",x="icon",M="iconNextNode",AV="iconPrevNode",Ag="locale",Ad="maxDate",Ah="minDate",t="monthdays",i="monthDays",AZ="monthDaysNode",P="next",AY="prev",p="selectMultipleDates",v="state",AP="title",AU="triangle",u="week",AS="weekdays",e="weekDays",Ak="weekDaysNode",Aj="calendar:select",d=AK.ClassNameManager.getClassName,AI=d(o),c=d(o,Z),AO=d(o,AW),Q=d(o,AW,r),l=d(o,AW,y),f=d(o,b),AM=d(O,Ab),K=d(x),AL=d(x,J,AU,"l"),AF=d(x,J,AU,"r"),B=d(o,t),AN=d(o,P),m=d(o,AY),Ae=d(v,S),N=d(v,AJ),G=d(v,T),Aa=d(o,AP),H=d(o,u),Ai=d(o,AS),AT=7,AB=31,X='<div class="'+[f,N,AM].join(V)+'"></div>',AQ='<a href="" class="'+[K,AL,m].join(V)+'">Back</a>',D='<a href="" class="'+[K,AF,AN].join(V)+'">Prev</a>',Y='<div class="'+[Q,l].join(V)+'"></div>',AG='<div class="'+Aa+'"></div>',E='<div class="'+[B,AM].join(V)+'"></div>',AE='<div class="'+[Ai,AM].join(V)+'"></div>',W=['<div class="'+H+'">',0,"</div>"],j=['<a href="#" class="'+[AO,N].join(V)+'">',0,"</a>"];var a=AK.Component.create({NAME:o,ATTRS:{blankDays:{valueFn:"_valueBlankDays"},currentDay:{value:(new Date()).getDate()},currentMonth:{value:(new Date()).getMonth()},currentYear:{value:(new Date()).getFullYear()},dates:{value:[new Date()],validator:C,setter:"_setDates"},dateFormat:{value:"%m/%d/%Y",validator:Ac},firstDayOfWeek:{value:0,validator:n},headerContentNode:{valueFn:function(){return AK.Node.create(X);}},headerTitleNode:{valueFn:function(){return AK.Node.create(AG);}},iconNextNode:{valueFn:function(){return AK.Node.create(D);}},iconPrevNode:{valueFn:function(){return AK.Node.create(AQ);}},maxDate:{value:null,setter:"_setMinMaxDate"},minDate:{value:null,setter:"_setMinMaxDate"},monthDays:{valueFn:"_valueMonthDays"},monthDaysNode:{valueFn:function(){return AK.Node.create(E);}},selectMultipleDates:{value:false},setValue:{value:true,validator:AX},weekDays:{valueFn:"_valueWeekDays"},weekDaysNode:{valueFn:function(){return AK.Node.create(AE);}}},HTML_PARSER:{blankDays:function(L){var A=L.all(z+Q);return A.size()?A:null;},monthDays:function(L){var A=L.all(z+AO);return A.size()?A:null;},weekDays:function(L){var A=L.all(z+H);return A.size()?A:null;},headerTitleNode:z+Aa,monthDaysNode:z+B,weekDaysNode:z+Ai,headerContentNode:z+f,iconNextNode:z+AN,iconPrevNode:z+m},UI_ATTRS:[AC],BIND_UI_ATTRS:[k,I],prototype:{initializer:function(){var A=this;A.selectedDates=[];},renderUI:function(){var A=this;A.blankDays=A.get(w);A.headerContentNode=A.get(Af);A.headerTitleNode=A.get(h);A.iconNextNode=A.get(M);A.iconPrevNode=A.get(AV);A.monthDays=A.get(i);A.monthDaysNode=A.get(AZ);A.weekDays=A.get(e);A.weekDaysNode=A.get(Ak);A._renderWeekDays();A._renderBlankDays();A._renderMonthDays();A._renderIconControls();A._renderTitleNode();A._renderStdContent();A.get(R).addClass(AI);},bindUI:function(){var A=this;A._createEvents();A._bindDelegate();},eachSelectedDate:function(L,Al){var A=this;AK.Array.each(Al||A.get(AC),L,A);},formatDate:function(Am,Al){var L=this;var A=L.get(Ag);return AK.DataType.Date.format(Am,{format:Al,locale:A});},getCurrentDate:function(){var A=this;var L=A._normalizeYearMonth();return(new Date(L.year,L.month,L.day));},getDaysInMonth:function(Al,Am){var A=this;var L=A._normalizeYearMonth(Al,Am);return(32-new Date(L.year,L.month,32).getDate());},getDetailedSelectedDates:function(){var A=this;var L=[];A.eachSelectedDate(function(Al){L.push({year:Al.getFullYear(),month:Al.getMonth(),day:Al.getDate()});});return L;},getFirstDate:function(Al,Am){var A=this;var L=A._normalizeYearMonth(Al,Am);return(new Date(L.year,L.month,1));},getFirstDayOfWeek:function(L,Al){var A=this;return A.getFirstDate(L,Al).getDay();},getFormattedSelectedDates:function(){var A=this;var L=[];A.eachSelectedDate(function(Al){L.push(A.formatDate(Al,A.get(AH)));});return L;},getLastDate:function(Am,An){var A=this;var Al=A._normalizeYearMonth(Am,An);var L=A.getDaysInMonth(Al.month);return(new Date(Al.year,Al.month,L));},getSelectedDates:function(){var A=this;return A.get(AC);},isAlreadySelected:function(L){var A=this;var Al=false;A.eachSelectedDate(function(An,Am){if(A._compareDates(An,L)){Al=true;}});return Al;},navigateMonth:function(An){var A=this;var Am=A.get(k);var Al=A.get(I);var L=new Date(Al,Am+An);A.set(k,L.getMonth());A.set(I,L.getFullYear());},parseDate:function(L){var A=this;return(L?new Date(L):new Date());},removeDate:function(L){var A=this;var Al=[];A.eachSelectedDate(function(An,Am){if(!A._compareDates(An,L)){Al.push(An);}});A.set(AC,Al);},selectNextMonth:function(){var A=this;A.navigateMonth(+1);},selectPrevMonth:function(){var A=this;A.navigateMonth(-1);},_bindDelegate:function(){var A=this;var L=A.get(R);var Al=A.headerContentNode;Al.delegate("click",A.selectNextMonth,z+AF,A);Al.delegate("click",A.selectPrevMonth,z+AL,A);L.delegate("click",A._preventDefaultFn,AR);L.delegate("click",AK.bind(A._onClickDays,A),z+AO);L.delegate("mouseenter",AK.bind(A._onMouseEnterDays,A),z+AO);L.delegate("mouseleave",AK.bind(A._onMouseLeaveDays,A),z+AO);},_createEvents:function(){var A=this;var L=function(Al,Am){A.publish(Al,{defaultFn:Am,queuable:false,emitFacade:true,bubbles:true,prefix:o});};L(Aj,A._defSelectFn);},_compareDates:function(L,A){return(L.getTime()==A.getTime());},_defSelectFn:function(Am){var A=this;var Al=Am.date.normal;var L=Al[Al.length-1];if(L){A.set(q,L.getDate());A.set(k,L.getMonth());A.set(I,L.getFullYear());}A._syncView();},_getLocaleMap:function(){var A=this;return AK.DataType.Date.Locale[A.get(Ag)];},_getDayName:function(Al){var L=this;var A=L._getLocaleMap();return A.A[Al];},_getDayNameShort:function(Al){var L=this;
var A=L._getLocaleMap();return A.a[Al];},_getDayNameMin:function(Al){var A=this;var L=A._getDayNameShort(Al);return L.slice(0,L.length-1);},_getMonthName:function(Al){var L=this;var A=L._getLocaleMap();return A.B[Al];},_getMonthNameShort:function(Al){var L=this;var A=L._getLocaleMap();return A.b[Al];},_handleSelectEvent:function(){var A=this;var Am=A.getSelectedDates();var Al=A.getFormattedSelectedDates();var L=A.getDetailedSelectedDates();A.fire(Aj,{date:{detailed:L,formatted:Al,normal:Am}});},_normalizeYearMonth:function(Am,Ap,L){var A=this;var Ao=A.get(q);var An=A.get(k);var Al=A.get(I);if(s(L)){L=Ao;}if(s(Ap)){Ap=An;}if(s(Am)){Am=Al;}return{year:Am,month:Ap,day:L};},_onClickDays:function(An){var A=this;var Ao=An.currentTarget||An.target;var Al=A.monthDays.indexOf(Ao)+1;var Am=Ao.test(z+c);if(!Am){A.set(q,Al);var L=A.getCurrentDate();if(A.isAlreadySelected(L)){A.removeDate(L);}else{A._selectDate();}}},_onMouseEnterDays:function(L){var A=this;var Al=L.currentTarget||L.target;Al.replaceClass(N,G);},_onMouseLeaveDays:function(L){var A=this;var Al=L.currentTarget||L.target;Al.replaceClass(G,N);},_preventDefaultFn:function(A){A.preventDefault();},_renderBlankDays:function(){var A=this;A.blankDays.appendTo(A.monthDaysNode);},_renderStdContent:function(){var A=this;var L=AK.Node.create("<div></div>");L.append(A.weekDaysNode);L.append(A.monthDaysNode);A.setStdModContent(AD.HEADER,A.headerContentNode.getDOM());A.setStdModContent(AD.BODY,L);},_renderTitleNode:function(){var A=this;A.headerContentNode.append(A.headerTitleNode);},_renderIconControls:function(){var A=this;A.headerContentNode.append(A.iconNextNode);A.headerContentNode.append(A.iconPrevNode);},_renderMonthDays:function(){var A=this;A.monthDays.appendTo(A.monthDaysNode);},_renderWeekDays:function(){var A=this;A.weekDays.appendTo(A.weekDaysNode);},_restrictDate:function(L,Ap){var A=this;var Ao=A.get(Ad);var An=A.get(Ah);var Am=An&&(L<An);var Al=Ao&&(L>Ao);if(Am||Al){Ap.addClass(c);}else{Ap.removeClass(c);}},_selectDate:function(){var A=this;var L=A.getCurrentDate();if(!A.isAlreadySelected(L)){var Al=A.get(AC);if(!A.get(p)){Al=[];}Al.push(L);A.set(AC,Al);}},_setDates:function(L){var A=this;AK.Array.each(L,function(Am,Al){if(Ac(Am)){L[Al]=A.parseDate(Am);}});return L;},_setMinMaxDate:function(L){var A=this;if(Ac(L)){L=A.parseDate(L);}return L;},_syncDays:function(){var A=this;var Al=A.getDaysInMonth();var Am=A.getFirstDayOfWeek();var L=A.getCurrentDate();A.monthDays.each(function(Ao,An){if(An>=Al){Ao.addClass(l);}else{Ao.removeClass(l);}L.setDate(An+1);A._restrictDate(L,Ao);});A.blankDays.each(function(Ao,An){var Ap=(Am-A.get(g)+AT)%AT;if(An<Ap){Ao.removeClass(l);}else{Ao.addClass(l);}});},_syncHeader:function(){var A=this;var Al=A.get(k);var L=A.get(I);var Am=[A._getMonthName(Al),L].join(V);A.headerTitleNode.html(Am);},_syncSelectedDays:function(Am){var A=this;var Al=A.get(k);var L=A.get(I);A.monthDays.replaceClass(Ae,N);A.monthDays.replaceClass(G,N);A.eachSelectedDate(function(Ap,Ao){var Aq=(Al==Ap.getMonth())&&(L==Ap.getFullYear());if(Aq){var An=A.monthDays.item(Ap.getDate()-1);An.addClass(Ae);try{An.focus();}catch(Ar){}}},Am);},_syncView:function(){var A=this;A._syncDays();A._syncHeader();A._syncSelectedDays();},_uiSetCurrentMonth:function(L){var A=this;A._syncView();},_uiSetCurrentYear:function(L){var A=this;A._syncView();},_uiSetDates:function(L){var A=this;A._handleSelectEvent();},_valueBlankDays:function(){var A=[];var L=AT;while(L--){A.push(Y);}var Al=AK.one(AK.DOM.create(A.join(U)));return Al.get(F);},_valueMonthDays:function(){var A=this;var Al=0;var L=[];while(Al++<AB){j[1]=Al;L.push(j.join(U));}var Am=AK.one(AK.DOM.create(L.join(U)));return Am.get(F);},_valueWeekDays:function(){var A=this;var Al=0;var L=[];var An=A.get(g);while(Al<AT){var Am=(Al+An)%AT;W[1]=A._getDayNameMin(Am);L.push(W.join(U));Al++;}var Ao=AK.one(AK.DOM.create(L.join(U)));return Ao.get(F);}}});AK.Calendar=AK.augment(a,AK.WidgetStdMod);},"@VERSION@",{skinnable:true,requires:["aui-base","widget-stdmod","datatype-date","widget-locale"]});