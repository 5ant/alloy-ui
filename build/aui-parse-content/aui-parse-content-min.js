AUI.add("aui-parse-content",function(e){var m=e.Lang,d=m.isString,o="append",b="documentElement",q="firstChild",j="head",p="host",g="innerHTML",a="<div>_</div>",h="ParseContent",f="queue",l="script",n=";",i="src",k={"":1,"text/javascript":1};var c=e.Component.create({NAME:h,NS:h,ATTRS:{queue:{value:null}},EXTENDS:e.Plugin.Base,prototype:{initializer:function(){var r=this;c.superclass.initializer.apply(this,arguments);r.set(f,new e.AsyncQueue());r._bindAOP();},globalEval:function(t){var u=e.getDoc();var s=u.one(j)||u.get(b);var r=document.createElement(l);r.type="text/javascript";if(t){r.text=m.trim(t);}s.appendChild(r).remove();},parseContent:function(t){var r=this;var s=r._clean(t);r._dispatch(s);return s;},_addInlineScript:function(s){var r=this;r.get(f).add({args:s,context:r,fn:r.globalEval,timeout:0});},_bindAOP:function(){var s=this;var r=function(w){var v=Array.prototype.slice.call(arguments);var u=s.parseContent(w);v.splice(0,1,u.fragment);return new e.Do.AlterArgs(null,v);};this.doBefore("insert",r);this.doBefore("replaceChild",r);var t=function(v){var u=s.parseContent(v);return new e.Do.AlterArgs(null,[u.fragment]);};this.doBefore("replace",t);this.doBefore("setContent",t);},_clean:function(t){var r={};var s=e.Node.create("<div></div>");if(d(t)){t=a+t;e.DOM.addHTML(s,t,o);}else{s.append(a);s.append(t);}r.js=s.all(l).filter(function(u){return k[u.getAttribute("type").toLowerCase()];});r.js.each(function(v,u){v.remove();});s.get(q).remove();r.fragment=s.get("childNodes").toFrag();return r;},_dispatch:function(u){var s=this;var r=s.get(f);var t=[];u.js.each(function(w,v){var y=w.get(i);if(y){if(t.length){s._addInlineScript(t.join(n));t.length=0;}r.add({autoContinue:false,fn:function(){e.Get.script(y,{onEnd:function(z){z.purge();r.run();}});},timeout:0});}else{var x=w._node;t.push(x.text||x.textContent||x.innerHTML||"");}});if(t.length){s._addInlineScript(t.join(n));}r.run();}}});e.namespace("Plugin").ParseContent=c;},"@VERSION@",{skinnable:false,requires:["async-queue","aui-base","plugin"]});