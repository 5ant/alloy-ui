AUI.add("aui-editor-tools-plugin",function(C){var H=C.Lang,I="justify",G={div:true,h1:true,h2:true,h3:true,h4:true,h5:true,h6:true,p:true},E={br:true},B={li:true},D='<div style="text-align: {0};">{1}</div>';var F={};C.mix(C.Plugin.ExecCommand.COMMANDS,{justify:function(L,K){var P=this;var Q=P.get("host");var J=Q.getInstance();var O=new J.Selection();var N=O.getSelected();var M=false;if(O.isCollapsed||!N.size()){var A=O.anchorTextNode;N=[A];M=true;}N.each(function(U,R,W){var S=U.get("tagName");var T=U.ancestor();var X=null;if(S){S=S.toLowerCase();}if(E[S]){return;}if(S=="font"){var V=U.get("parentNode");if(!V.test("body")){U=V;S=U.get("tagName").toLowerCase();}}var T=U.get("parentNode");var X=null;if(!U.test("body")&&U.getComputedStyle("textAlign")==K){return;}if(G[S]||U.getComputedStyle("display")=="block"){X=U;}else{if(!T.get("childNodes").item(1)||B[S]){S=T.get("tagName").toLowerCase();if(G[S]||T.getComputedStyle("display")=="block"){X=T;}}else{if(M){Q.execCommand("inserthtml",H.sub(D,[K,J.Selection.CURSOR]));O.focusCursor(true,true);return;}else{X=C.Node.create(H.sub(D,[K,""]));T.insert(X,U);X.append(U);}}}if(X){X.setStyle("textAlign",K);}});},justifycenter:function(){var A=this;return A.get("host").execCommand(I,"center");},justifyleft:function(){var A=this;return A.get("host").execCommand(I,"left");},justifyright:function(){var A=this;return A.get("host").execCommand(I,"right");},subscript:function(){var A=this;return A.get("host").execCommand("wrap","sub");},superscript:function(){var A=this;return A.get("host").execCommand("wrap","sup");},wraphtml:function(M,O){var A=this;var L=A.get("host");var N=L.getInstance();var K=new N.Selection();var J=K.getSelected();if(!K.isCollapsed&&J.size()){J.each(function(R,P,S){var Q=R.ancestor();var T=C.Node.create(O);if(T.html()!=""){if(T.html()=="{0}"){T.html("");}else{A._findInsert(T);}}Q.insert(T,R);T.append(R);});}else{L.execCommand("inserthtml",H.sub(O,[N.Selection.CURSOR]));if(O.indexOf("{0}")!=-1){K.focusCursor(true,true);}}},_findInsert:function(J){var A=this;var K=null;var L=J.get("childNodes");L.some(function(N,M,O){if(N.get("innerHTML")=="{0}"){K.html("");K=N;return true;}return A._findInsert(N);});if(K){wrapper=K;return true;}return false;}});C.Plugin.EditorTools=F;},"@VERSION@",{requires:["aui-base","editor-base"]});AUI.add("aui-editor-menu-plugin",function(E){var L=E.Lang,B=L.isString,G=E.ClassNameManager.getClassName,Q="editormenu",D="editormenuplugin",N="menu",R="content",C=G(Q,R,"list"),I=G(Q,R,"text"),K=G(Q,R,"item"),O="<{1}{2}>{0}</{1}>",M='<li class="'+K+'">'+O+"</li>",F='<ul class="'+C+'"></ul>',J='<li class="'+I+'"><span>{0}</span></li>';var H=E.Component.create({NAME:Q,EXTENDS:E.OverlayContext,ATTRS:{headerContent:{value:"",setter:function(S){var A=this;A._headerContent=S;return"";}},host:{value:false},items:{value:null}},prototype:{renderUI:function(){var A=this;H.superclass.renderUI.apply(A,arguments);var X=A.get("host");var T=A.get("contentBox");var V=A._headerContent;var U=A.get("items");var W=E.Node.create(F);E.each(U,function(c,a,d){var Z="";if(B(c)){Z+=L.sub(J,[c]);}else{var Y=A._generateTagAttr(c);Z+=L.sub(M,[c.label,c.tag,Y]);}var b=E.Node.create(Z);b.setData(Q,c);W.append(b);});var S=new E.Panel({collapsible:false,headerContent:V,icons:[{icon:"close",handler:{fn:A.hide,context:A}}]}).render(T);S.bodyNode.append(W);A._menuList=W;},bindUI:function(){var A=this;H.superclass.bindUI.apply(A,arguments);A._menuList.delegate("click",A._onMenuListItemClick,"."+K,A);},_generateTagAttr:function(X){var A=this;var S=[];var U="";var T=X.attributes;var W=X.styles;if(T){for(var V in T){S.push(" "+V+'="'+T[V]+'"');}}if(W){S=[' style="'];for(var V in W){S.push(V+": "+W[V]+";");}S.push('"');}return S.join("");},_onMenuListItemClick:function(X){var S=this;var W=X.currentTarget;var U=W.getData(Q);var A=S._generateTagAttr(U);var T=L.sub(O,["{0}",U.tag,A]);var V=S.get("host");V.execCommand("wraphtml",T);V.focus();S.hide();},_uiSetHeight:function(U){var A=this;var S=A.get("boundingBox");var T=A._menuList;S.setStyle("height","auto");T.setStyle("height",U);},_uiSetWidth:function(U){var A=this;var S=A.get("boundingBox");var T=A._menuList;S.setStyle("width","auto");T.setStyle("width",U);}}});var P=E.Component.create({EXTENDS:E.Plugin.Base,NAME:D,NS:N,prototype:{add:function(S){var A=this;var T=A.get("host");return new H(E.mix({host:T},S)).render();}}});E.namespace("Plugin").EditorMenu=P;},"@VERSION@",{requires:["aui-base","editor-base","aui-overlay-context","aui-panel","aui-editor-tools-plugin"]});AUI.add("aui-editor-toolbar-plugin",function(P){var v=P.Lang,Q=v.isFunction,r=P.ClassNameManager.getClassName,b="editortoolbar",u="toolbar",S="alignment",d="color",g="content",M="font",p="indent",J="input",h="insert",Z="insertimage",i="list",q="mouseout",T="select",C="source",K="styles",m="subscript",l="text",n={backcolor:true,forecolor:true,format:true,insertimage:true,source:true,styles:true},V=["b","big","font","em","i","small","s","strike","strong","sub","sup","u"],N=r("button","holder"),O=r("field",J),U=r("field",J,"text"),G=r("field","label"),a=r("field","numeric"),W=r(b,Z),B=r(b,T,"fontname"),o=r(b,T,"fontsize"),E=r(b,"size","separator"),H=r(b,C,"textarea"),D=r("state","active"),I=r(b),X=r(b,g),L="<a></a>",Y="<img />",F='<textarea class="'+H+'"></textarea>',t='<div class="'+I+'"><div class="'+X+'"></div></div>',j='<div class="'+N+'"></div>',s='<select class="'+B+'">{0}</select>',R='<option selected="selected"></option>'+"<option>Arial</option>"+"<option>Arial Black</option>"+"<option>Comic Sans MS</option>"+"<option>Courier New</option>"+"<option>Lucida Console</option>"+"<option>Tahoma</option>"+"<option>Times New Roman</option>"+"<option>Trebuchet MS</option>"+"<option>Verdana</option>",k='<select class="'+o+'">{0}</select>',f='<option selected="selected"></option>'+'<option value="1">10</option>'+'<option value="2">13</option>'+'<option value="3">16</option>'+'<option value="4">18</option>'+'<option value="5">24</option>'+'<option value="6">32</option>'+'<option value="7">48</option>',e='<span class="'+E+'">x</span>';
var c=P.Component.create({NAME:b,NS:u,EXTENDS:P.Plugin.Base,ATTRS:{groups:{value:[{type:l},{type:S},{type:p},{type:i}]}},prototype:{initializer:function(){var AJ=this;var AL=AJ.get("host");var A=AL.frame.get("container");var y=AJ.get("groups");var AA=P.Node.create(t);var AD=AA.one("."+X);A.placeBefore(AA);var AI={boundingBox:AA,contentBox:AD};var AK=[];AJ.on("buttonitem:click",function(AO){var AN=this;var AM=AO.target.get("icon").split("-");if(!n[AM[0]]){AN.execCommand(AM[0],(AM[1]?AM[1]:""));AN.focus();}},AL);for(var AB=0;AB<y.length;AB++){var AH=y[AB];var AC=GROUPS[AH.type];var AG;var w=[];for(var z=0;z<AC.children.length;z++){if(!AC.children[z].select){w.push(AC.children[z]);}}if(w.length>0){AG=new P.Toolbar(P.merge(AC.config,AH.toolbar,{children:w})).render(AD);AG.addTarget(AJ);AK.push(AG);}var AF=AC.generate;if(AF&&Q(AF.init)){AF.init.call(AJ,AL,AI);}for(var z=0;z<AC.children.length;z++){var AE=AC.children[z].icon;if(AF&&Q(AF[AE])){var x=(AH.config?AH.config[AE]:null);AI.button=(AF[AE].select?null:AG.item(z));AF[AE].call(AJ,AL,AI,x);}}}AI.toolbars=AK;},_updateToolbar:function(A,AB){var AC=this;if(A.changedNode){var x=A.commands;var AD=AB.toolbars;var AF=function(AH,AG,AJ){var AI=!!(x[AH.get("icon")]);AH.StateInteraction.set("active",AI);};if(AD){for(var z=0;z<AD.length;z++){AD[z].each(AF);}}var w=A.fontFamily;var AA=AB._fontNameOptions;var AE=A.fontSize;var y=AB._fontSizeOptions;if(AA){AA.item(0).set("selected",true);AA.each(function(AH,AG,AJ){var AI=AH.get("value").toLowerCase();if(AI===w.toLowerCase()){AH.set("selected",true);}});}if(y){AE=AE.replace("px","");y.item(0).set("selected",true);y.each(function(AI,AH,AK){var AJ=AI.get("value").toLowerCase();var AG=AI.get("text");if(AG===AE){AI.set("selected",true);}});}}}}});c.generateOverlay=function(x,w){var A=new P.OverlayContext(P.merge({align:{node:x,points:["tl","bl"]},hideOn:"click",showOn:"click",trigger:x},w)).render();return A;};c.generateColorPicker=function(AB,y,x,AC){var AA=y.button;var w=AA.get("boundingBox");var A=new P.ColorPicker(P.merge({align:{node:w,points:["tl","bl"]},trigger:w},x));if(x&&x.plugins){for(var z=0;z<x.plugins.length;z++){A.plug(x.plugins[z],x);}}A.render(P.getBody());A.on("colorChange",function(AF){var AD=this;var AE=A.get("rgb");AB.execCommand(AC,AE.hex);AB.focus();});};c.STRINGS={ALIGN:"Align",ALIGN_BLOCK:"Block",ALIGN_LEFT:"Left",ALIGN_INLINE:"Inline",ALIGN_RIGHT:"Right",BACKCOLOR:"Background Color",BOLD:"Bold",BORDER:"Border",CREATE_LINK:"Create Link",DESCRIPTION:"Description",FORECOLOR:"Foreground Color",IMAGE_URL:"Image URL",INDENT:"Indent",INSERT:"Insert",INSERT_IMAGE:"Insert Image",INSERT_ORDERED_LIST:"Insert Numbered List",INSERT_UNORDERED_LIST:"Insert Bulleted List",ITALIC:"Italic",JUSTIFY_LEFT:"Justify Left",JUSTIFY_CENTER:"Justify Center",JUSTIFY_RIGHT:"Justify Right",LINK_URL:"Link URL",OPEN_IN_NEW_WINDOW:"Open in new window",OUTDENT:"Outdent",PADDING:"Padding",REMOVE_FORMAT:"Format Source",SIZE:"Size",SOURCE:"Source",SUBSCRIPT:"Subscript",SUPERSCRIPT:"Superscript",LINE_THROUGH:"Line Through",UNDERLINE:"Underline"};GROUPS={};GROUPS[S]={children:[{icon:"justifyleft",title:c.STRINGS.JUSTIFY_LEFT},{icon:"justifycenter",title:c.STRINGS.JUSTIFY_CENTER},{icon:"justifyright",title:c.STRINGS.JUSTIFY_RIGHT}]};GROUPS[d]={children:[{icon:"forecolor",title:c.STRINGS.FORECOLOR},{icon:"backcolor",title:c.STRINGS.BACKCOLOR}],generate:{forecolor:function(y,x,w){var A=this;c.generateColorPicker(y,x,w,"forecolor");},backcolor:function(y,x,w){var A=this;c.generateColorPicker(y,x,w,"backcolor");}}};GROUPS[M]={children:[{icon:"fontname",select:true},{icon:"fontsize",select:true}],generate:{init:function(y,x){var A=this;var w=x.contentBox;P.delegate("change",function(AB){var z=this;var AD=AB.currentTarget;var AA=AD.get("className");var AC=AA.substring(AA.lastIndexOf("-")+1);var AE=AD.get("value");y.execCommand(AC,AE);y.focus();},w,"select");y.after("nodeChange",function(AA){var z=this;switch(AA.changedType){case"keyup":case"mousedown":z._updateToolbar(AA,x);break;}},A);},fontname:function(AB,AA,z){var A=this;var w=AA.contentBox;var y;var AC=[R];if(z&&z.optionHtml){AC[0]=z.optionHtml;}y=v.sub(s,AC);w.append(y);var x=w.all("."+B+" option");AA._fontNameOptions=x;},fontsize:function(AB,AA,z){var A=this;var w=AA.contentBox;var y;var AC=[f];if(z&&z.optionHtml){AC[0]=z.optionHtml;}y=v.sub(k,AC);w.append(y);var x=w.all("."+o+" option");AA._fontSizeOptions=x;}}};GROUPS[p]={children:[{icon:"indent",title:c.STRINGS.INDENT},{icon:"outdent",title:c.STRINGS.OUTDENT}]};GROUPS[h]={children:[{icon:"insertimage",title:c.STRINGS.INSERT_IMAGE},{icon:"createlink",title:c.STRINGS.CREATE_LINK}],generate:{insertimage:function(y,AI,AQ){var AO=this;var A=AI.button;var AA=A.get("boundingBox");var AN=c.generateOverlay(AA,AQ);var AK=AN.get("contentBox");var AE=new P.Panel({collapsible:false,headerContent:c.STRINGS.INSERT_IMAGE,icons:[{icon:"close",handler:{fn:AN.hide,context:AN}}]}).render(AK);AK=AE.bodyNode;if(AQ&&AQ.dataBrowser){AQ.dataBrowser.render(AK);}else{var AG=y.getInstance();var AB=y.frame._iframe;var AR=null;var AP=new P.Form({cssClass:W,labelAlign:"left"}).render(AK);var AD=[{labelText:"none",value:""}];for(var AL=1;AL<6;AL++){AD.push({labelText:AL+"px",value:AL+"px solid"});}AP.add([{id:"imageURL",labelText:c.STRINGS.IMAGE_URL},{id:"size",labelText:c.STRINGS.SIZE,type:"hidden"},{id:"width",labelText:false,cssClass:a},{id:"height",labelText:false,cssClass:a},{id:"padding",labelText:c.STRINGS.PADDING},new P.Select({id:"border",labelText:c.STRINGS.BORDER,options:AD}),{id:"align",labelText:c.STRINGS.ALIGN,type:"hidden"},{id:"description",labelText:c.STRINGS.DESCRIPTION},{id:"linkURL",labelText:c.STRINGS.LINK_URL},{id:"openInNewWindow",labelText:c.STRINGS.OPEN_IN_NEW_WINDOW,type:"checkbox"}],true);AP.getField("width").get("boundingBox").placeAfter(e);var z=AP.get("contentBox");var AM=P.Node.create(j);var AH=AP.getField("openInNewWindow");var AF=new P.ButtonItem({icon:"circle-check",label:c.STRINGS.INSERT}).render(AM);var AC=P.Node.create(Y);
var w=AP.getField("height");var x=AP.getField("width");AC.on("load",function(AT){var AS=AT.currentTarget;if(!w.get("value")||!x.get("value")){AP.set("values",{height:AS.get("height"),width:AS.get("width")});}});AP.getField("imageURL").get("node").on("blur",function(AS){AC.set("src",this.val());});AF.on("click",function(AU){var Ac=this;var AX=P.Node.create(Y);var AW=AP.get("fieldValues");var Ab=AW.description;var AY={src:AW.imageURL,title:Ab,alt:Ab};var Aa={border:AW.border};var Ad=parseInt(AW.height,10);var AV=parseInt(AW.width,10);if(!isNaN(Ad)){AY.height=Ad;}if(!isNaN(AV)){AY.width=AV;}var AZ=parseInt(AW.padding,10);if(!isNaN(AZ)){Aa.padding=AZ;}AJ.some(function(Ag,Af,Ai){var Ae=this;var Ah=Ag.StateInteraction.get("active");if(Ah){Aa.display="";switch(Af){case 0:AY.align="left";break;case 1:AY.align="";break;case 2:AY.align="center";Aa.display="block";break;case 3:AY.align="right";break;}return true;}});AX.attr(AY);AX.setStyles(Aa);var AT=AW.linkURL;if(AT){var AS=P.Node.create(L);AS.attr("href",AT);if(AH.get("node").get("checked")){AS.attr("target","_blank");}AS.append(AX);AX=AS;}if(AR&&AR.anchorNode){AR.anchorNode.append(AX);}AN.hide();});z.append(AM);var AJ=new P.Toolbar({activeState:true,children:[{icon:"align-left",title:c.STRINGS.ALIGN_LEFT},{icon:"align-inline",title:c.STRINGS.ALIGN_INLINE},{icon:"align-block",title:c.STRINGS.ALIGN_BLOCK},{icon:"align-right",title:c.STRINGS.ALIGN_RIGHT}]});AJ.after("buttonitem:click",function(AT){var AS=AT.target;AJ.each(function(AV,AU,AW){if(AV!=AS){AV.StateInteraction.set("active",false);}});});AJ.render(AP.getField("align").get("contentBox"));AN.after("hide",function(AS){AP.resetValues();AJ.each(function(AU,AT,AV){AU.StateInteraction.set("active",false);});AH.get("node").set("checked",false);});AB.on(q,function(AS){var AT=y.getInstance();AR=new AT.Selection();});}},createlink:function(y,x,w){var A=this;y.plug(P.Plugin.CreateLinkBase);}}};GROUPS[i]={children:[{icon:"insertunorderedlist",title:c.STRINGS.INSERT_UNORDERED_LIST},{icon:"insertorderedlist",title:c.STRINGS.INSERT_ORDERED_LIST}],generate:{init:function(w){var A=this;w.plug(P.Plugin.EditorLists);}}};GROUPS[C]={children:[{icon:"format",title:c.STRINGS.REMOVE_FORMAT},{icon:"source",title:c.STRINGS.SOURCE}],generate:{format:function(z,x,w){var A=this;var AA=z.frame;var y=x.button;y.on("click",function(AE){var AB=this;var AF=AB.getInstance();var AD=new AF.Selection();var AC=AD.getSelected();if(!AD.isCollapsed&&AC.size()){AC.each(function(AM,AI,AN){var AG=this;AM.removeAttribute("style");var AK=AM.get("innerHTML");AK=AK.replace(/<([a-zA-Z0-9]*)\b[^>]*>/g,"<$1>");for(var AJ=0;AJ<V.length;AJ++){var AH=new RegExp("(<"+V[AJ]+">|<\\/"+V[AJ]+">)","ig");AK=AK.replace(AH,"");}AM.set("innerHTML",AK);var AL=AM.get("parentNode");if(!AL.test("body")){AL.removeAttribute("style");}});}},z);},source:function(z,AC,x){var AD=this;var w=z.frame;var A=w.get("container");var AA=AC.contentBox;var y=AC.button;var AB=P.Node.create(F);AB.hide();A.append(AB);y._visible=false;y.on("click",function(AH){var AF=y._visible;if(AF){z.set("content",AB.val());AB.hide();AB.val("");w.show();}else{var AG=w._iframe;AB.val(z.getContent());var AE=AG.get("offsetHeight")-AB.getPadding("tb");AB.setStyle("height",AE);w.hide();AB.show();}AF=!AF;y._visible=AF;AA.all("select").attr("disabled",AF);AA.all("button").attr("disabled",AF);y.get("contentBox").attr("disabled",false);});}}};GROUPS[K]={children:[{icon:"styles"}],generate:{styles:function(AA,y,x){var A=this;var z=y.button;var w=z.get("boundingBox");AA.plug(P.Plugin.EditorMenu);AA.menu.add(P.merge({align:{node:w,points:["tl","bl"]},hideOn:"click",showOn:"click",trigger:w},x));}}};GROUPS[m]={children:[{icon:"subscript",title:c.STRINGS.SUBSCRIPT},{icon:"superscript",title:c.STRINGS.SUPERSCRIPT}]};GROUPS[l]={children:[{icon:"bold",title:c.STRINGS.BOLD},{icon:"italic",title:c.STRINGS.ITALIC},{icon:"underline",title:c.STRINGS.UNDERLINE},{icon:"strikethrough",title:c.STRINGS.LINE_THROUGH}]};P.namespace("Plugin").EditorToolbar=c;},"@VERSION@",{requires:["aui-base","aui-button-item","aui-color-picker","aui-editor-menu-plugin","aui-editor-tools-plugin","aui-form-select","aui-overlay-context","aui-panel","aui-toolbar","createlink-base","editor-lists","editor-base","plugin"]});AUI.add("aui-editor-bbcode-plugin",function(Q){var E=Q.Lang,M=E.isArray,N=E.isString,J=Q.ClassNameManager.getClassName,I="bbcodeplugin",P="bbcode",L="quote",U=J(L),O=J(L,"content"),W=J(L,"title"),C="<{0}(>|\\b[^>]*>)([\\s\\S]*?)</{0}>",F="<(([a-z0-9]+)\\b[^>]*?style=(\"|').*?{0}\\s*:\\s*([^;\"']+);?[^>]*)>([\\s\\S]*?)<(/\\2)>",H="(<[a-z0-9]+[^>]*>|</[a-z0-9]+>)",K='<div class="'+U+'"><div class="'+O+'">',D='<div class="'+W+'">$1</div>'+K,G="</div></div>",R="\\[(({0})=([^\\]]*))\\]([\\s\\S]*?)\\[\\/{0}\\]",S="\\[({0})\\]([\\s\\S]*?)\\[\\/{0}\\]",T=[{convert:[["br"]],regExp:"<{0}[^>]*>",output:"\n"},{convert:[{tags:["font-family"],source:["font"]},{tags:["font-size"],source:["size"]},{tags:["[^a-z-]*color"],source:["color"]}],regExp:F,output:"<$1>[{0}=$4]$5[/{0}]<$6>"},{convert:[{tags:["font-style"],source:["i"]},{tags:["font-weight"],source:["b"]}],regExp:F,output:"<$1>[{0}]$5[/{0}]<$6>"},{convert:[["text-decoration"]],regExp:F,output:function(){var X="";var A=arguments[4].toLowerCase();if(A.indexOf("underline")!=-1){X+="[u]";}else{if(A.indexOf("line-through")!=-1){X+="[s]";}}if(X!=""){return"<"+arguments[1]+">"+X+arguments[5]+X.replace("[","[/")+"<"+arguments[6]+">";}return arguments[0];}},{convert:[["margin-left"]],regExp:F,output:function(){var X="";var Y=parseInt(arguments[3]);if(!isNaN(Y)){var Z=Math.floor(Y/40);for(var A=0;A<Z;A++){X+="[indent]";}}X=X+arguments[5]+X.replace(/\[/g,"[/");return"<"+arguments[1]+">"+X+"<"+arguments[6]+">";}},{convert:[{tags:["font","size"],source:["size"]},{tags:["font","face"],source:["font"]}],regExp:"(<{0}\\b[^>]*{1}=(\"|')([^\"']+)(\"|')[^>]*>)([\\s\\S]*?)(</{0}>)",output:"$1[{0}=$3]$5[/{0}]$6"},{convert:[["text-align"]],regExp:F,output:"<$1>[$4]$5[/$4]<$6>"},{convert:[["span"]],regExp:C,output:"$2"},{convert:[["blockquote"]],regExp:C,output:"[indent]$2[/indent]"},{convert:[["b"],["strong"]],regExp:C,output:"[b]$2[/b]"},{convert:[["i"],["em"]],regExp:C,output:"[i]$2[/i]"},{convert:[["u"]],regExp:C,output:"[u]$2[/u]"},{convert:[["s"],["strike"]],regExp:C,output:"[s]$2[/s]"},{convert:[["img"]],regExp:"(<a[^>]*>)?<{0}\\b[^>]*src=(\"|')([^\"']+)(\"|')[^>]*>(</a>)?",output:"[img]$3[/img]"},{convert:[["a"]],regExp:"<{0}\\b[^>]*href=(\"|')mailto:([^\"']+)(\"|')[^>]*>([\\s\\S]*?)</{0}>",output:"[email=$2]$4[/email]"},{convert:[["a"]],regExp:"<{0}\\b[^>]*href=(\"|')([^\"']+)(\"|')[^>]*>([\\s\\S]*?)</{0}>",output:"[url=$2]$4[/url]"},{convert:[["center"]],regExp:C,output:"[center]$2[/center]"},{convert:[["ul"]],regExp:C,output:"[list]$2[/list]"},{convert:[["ol"]],regExp:C,output:"[list=1]$2[/list]"},{convert:[["li"]],regExp:C,output:"[*]$2"},{convert:[["code"]],regExp:C,output:"[code]$2[/code]"},{convert:[["quote"]],regExp:"<div\\b[^>]*class=(\"|')_"+U+"s*[^\"']*(\"|')[^>]*>([\\s\\S]*?)</div>",output:"$3"},{convert:[["div"]],regExp:C,output:"$2\n"},{convert:[["h1"],["h2"],["h3"],["h4"],["h5"],["h6"]],regExp:C,output:"[b]$2[/b]\n"},{convert:[["p"]],regExp:C,output:"$2\n\n"},{convert:[{tags:["list","left|center|right"],source:["list"]}],regExp:"(\\[{0}[^\\]]*\\])\\s*\\[({1})\\]([\\s\\S]*?)\\[/\\2\\]\\s*\\[/{0}\\]",output:"[$2]$1$3[/{0}][/$2]"}],B=[{convert:[{tags:["b"],source:["b"]},{tags:["i"],source:["i"]},{tags:["u"],source:["u"]},{tags:["s"],source:["s"]},{tags:["code"],source:["code"]}],regExp:S,output:"<{0}>$2</{0}>"},{convert:[{tags:["color"],source:["color"]}],regExp:R,output:'<span style="{0}: $3;">$4</span>'},{convert:[{tags:["font"],source:["face"]},{tags:["size"],source:["size"]}],regExp:R,output:'<font {0}="$3">$4</font>'},{convert:[["img"]],regExp:S,output:'<img src="$2" alt="" />'},{convert:[{tags:["email"],source:["mailto:"]},{tags:["url"],source:[""]}],regExp:R,output:'<a href="{0}$3">$4</a>'},{convert:[["list"]],regExp:"\\[({0}(=1)?)]([\\s\\S]*?)\\[\\/{0}\\]",output:function(){var Y="";
if(arguments[1]=="list=1"){Y+="<ol>";}else{Y+="<ul>";}var A=E.trim(arguments[3]).split("[*]");for(var X=1;X<A.length;X++){Y+="<li>"+A[X]+"</li>";}if(arguments[1]=="list=1"){Y+="</ol>";}else{Y+="</ul>";}return Y;}},{convert:[{tags:["indent"],source:["blockquote"]}],regExp:S,output:"<{0}>$2</{0}>"},{convert:[["left"],["center"],["right"]],regExp:S+"\n?",output:'<div style="text-align: $1;">$2</div>'},{convert:[["\n"]],regExp:"{0}",output:"<br />"}];var V=Q.Component.create({NAME:I,NS:P,EXTENDS:Q.Plugin.Base,ATTRS:{host:{value:false}},prototype:{initializer:function(){var A=this;var X=A.get("host");A.afterHostMethod("getContent",A.getBBCode,A);X.on("contentChange",A._contentChange,A);},getBBCode:function(){var A=this;var Z=A.get("host");var Y="";Y=Z.constructor.prototype.getContent.apply(Z,arguments);var a=Q.Node.create("<div>"+Y+"</div>");var X=null;while(X=a.all("div."+U)){if(!X.size()){break;}X.each(function(g){var b=this;var f=null;var c=g;do{if(c){f=c;}c=c.one("div."+O);}while(c);var e=f.get("parentNode");var i=e.previous();var d="["+L;if(i&&i.hasClass(W)){var h=i.html();h=h.replace(new RegExp(H,"ig"),"");d+="="+(h.charAt(h.length-1)==":"?h.substring(0,h.length-1):i.html());i.remove(true);}d+="]"+f.html()+"[/"+L+"]";e.html(d);e.removeClass(L);e.addClass("_"+L);},A);}Y=a.html();Y=A._parseTagExpressions(T,Y);Y=Y.replace(new RegExp(H,"ig"),"");return new Q.Do.AlterReturn(null,Y);},getContentAsHtml:function(){var A=this;var Y=A.get("host");var X="";X=Y.constructor.prototype.getContent.apply(Y,arguments);return X;},_contentChange:function(Z){var A=this;var Y=A.get("host");var X=Z.newVal;X=X.replace(/\[quote=([^\]]*)\]/ig,K);X=X.replace(/\[quote\]/ig,D);X=X.replace(/\[\/quote\]/ig,G);X=A._parseTagExpressions(B,X);Z.newVal=X;Z.stopImmediatePropagation();},_parseTagExpressions:function(b,d){var A=this;for(var c=0;c<b.length;c++){for(var a=0;a<b[c].convert.length;a++){var Z=null;var X=b[c].output;if(M(b[c].convert[a])){Z=b[c].convert[a];}else{Z=b[c].convert[a].tags;if(N(b[c].output)){X=E.sub(b[c].output,b[c].convert[a].source);}}var Y=E.sub(b[c].regExp,Z);d=d.replace(new RegExp(Y,"ig"),X);}}return d;}}});Q.namespace("Plugin").BBCodePlugin=V;},"@VERSION@",{requires:["aui-base","editor-base"]});AUI.add("aui-editor",function(B){},"@VERSION@",{skinnable:true,use:["aui-editor-tools-plugin","aui-editor-menu-plugin","aui-editor-toolbar-plugin","aui-editor-bbcode-plugin"]});