AUI.add("aui-editor-tools-plugin",function(B){var F=B.Lang,G="justify",E={div:true,h1:true,h2:true,h3:true,h4:true,h5:true,h6:true,p:true},C='<div style="text-align: {0};">{1}</div>';var D={};B.namespace("Plugin");B.mix(B.Plugin.ExecCommand.COMMANDS,{justify:function(J,I){var N=this;var O=N.get("host");var H=O.getInstance();var M=new H.Selection();var L=M.getSelected();var K=false;if(M.isCollapsed||!L.size()){var A=M.anchorTextNode;L=[A];K=true;}B.each(L,function(R){var P=R.get("tagName");var Q=R.ancestor();var S=null;if(P){P=P.toLowerCase();}if(!R.test("body")&&R.getComputedStyle("textAlign")==I){return;}if(E[P]||R.getComputedStyle("display")=="block"){S=R;}else{if(!Q.get("childNodes").item(1)){P=Q.get("tagName").toLowerCase();if(E[P]||Q.getComputedStyle("display")=="block"){S=Q;}}else{if(K){O.execCommand("inserthtml",F.sub(C,[I,H.Selection.CURSOR]));M.focusCursor(true,true);return;}else{S=B.Node.create(F.sub(C,[I,""]));Q.insert(S,R);S.append(R);}}}S.setStyle("textAlign",I);});},justifycenter:function(){var A=this;var H=A.get("host");return H.execCommand(G,"center");},justifyleft:function(){var A=this;var H=A.get("host");return H.execCommand(G,"left");},justifyright:function(){var A=this;var H=A.get("host");return H.execCommand(G,"right");},subscript:function(){var A=this;var H=A.get("host");return H.execCommand("wrap","sub");},superscript:function(){var A=this;var H=A.get("host");return H.execCommand("wrap","sup");},wraphtml:function(K,M){var A=this;var J=A.get("host");var L=J.getInstance();var I=new L.Selection();var H=I.getSelected();if(!I.isCollapsed&&H.size()){H.each(function(P){var O=P.ancestor();var Q=B.Node.create(M);if(Q.html()!=""){if(Q.html()=="{0}"){Q.html("");}else{function N(R){var S=null;var T=R.get("childNodes");T.some(function(U){if(U.get("innerHTML")=="{0}"){S.html("");S=U;return true;}return N(U);});if(S){Q=S;return true;}return false;}N(Q);}}O.insert(Q,P);Q.append(P);});}else{J.execCommand("inserthtml",F.sub(M,[L.Selection.CURSOR]));if(M.indexOf("{0}")!=-1){I.focusCursor(true,true);}}}});B.Plugin.EditorTools=D;},"@VERSION@",{requires:["aui-base","editor-base"]});AUI.add("aui-editor-menu-plugin",function(M){var D=M.Lang,K=D.isString,G=M.ClassNameManager.getClassName,F="editormenu",I="editormenuplugin",R="menu",E="content",B=G(F,E,"list"),N=G(F,E,"text"),C=G(F,E,"item"),H="<{1}{2}>{0}</{1}>",P='<ul class="'+B+'"></ul>',J='<li class="'+N+'"><span>{0}</span></li>',Q='<li class="'+C+'">'+H+"</li>";function O(T){var A="";if(T.attributes){for(var U in T.attributes){A+=" "+U+'="'+T.attributes[U]+'"';}}if(T.styles){A=' style="';for(var U in T.styles){A+=U+": "+T.styles[U]+";";}A+='"';}return A;}var L=M.Component.create({NAME:F,EXTENDS:M.OverlayContext,ATTRS:{headerContent:{value:"",setter:function(T){var A=this;A._headerContent=T;return"";}},host:{value:false},items:{value:null}},prototype:{renderUI:function(){var A=this;L.superclass.renderUI.apply(A,arguments);var Y=A.get("host");var U=A.get("contentBox");var W=A._headerContent;var V=A.get("items");var X=M.Node.create(P);M.each(V,function(b){var a="";if(K(b)){a+=D.sub(J,[b]);}else{var Z=O(b);a+=D.sub(Q,[b.label,b.tag,Z]);}var c=M.Node.create(a);c.setData(F,b);X.append(c);});var T=new M.Panel({collapsible:false,headerContent:W,icons:[{icon:"close",handler:{fn:A.hide,context:A}}]}).render(U);T.bodyNode.append(X);A._menuList=X;},bindUI:function(){var A=this;L.superclass.bindUI.apply(A,arguments);var U=A.get("host");var T=A._menuList;T.delegate("click",function(a){var W=this;var Z=a.currentTarget,Y=Z.getData(F);var V=O(Y),X=D.sub(H,["{0}",Y.tag,V]);U.execCommand("wraphtml",X);U.focus();W.hide();},"."+C,A);},_uiSetHeight:function(V){var A=this;var T=A.get("boundingBox");var U=A._menuList;T.setStyle("height","auto");U.setStyle("height",V);},_uiSetWidth:function(V){var A=this;var T=A.get("boundingBox");var U=A._menuList;T.setStyle("width","auto");U.setStyle("width",V);}}});var S=M.Component.create({NAME:I,NS:R,EXTENDS:M.Plugin.Base,ATTRS:{host:{value:false}},prototype:{add:function(T){var A=this;var U=A.get("host");return new L(M.mix({host:U},T)).render();}}});M.namespace("Plugin").EditorMenuPlugin=S;},"@VERSION@",{requires:["aui-base","editor-base","aui-overlay-context","aui-panel","aui-editor-tools-plugin"]});AUI.add("aui-editor-toolbar-plugin",function(S){var AB=S.Lang,U=AB.isFunction,w=S.ClassNameManager.getClassName,g="editortoolbar",z="toolbar",W="alignment",h="color",j="content",O="font",u="indent",J="input",l="insert",f="insertimage",m="list",v="mouseout",X="select",C="source",L="styles",r="subscript",q="text",s={backcolor:true,forecolor:true,format:true,insertimage:true,source:true,styles:true},Z=["b","big","font","em","i","small","s","strike","strong","sub","sup","u"],Q=w("button","holder"),F=w("field","label"),T=w("field","label","secondary"),R=w("field",J),Y=w("field",J,"text"),AA=w("field",J,"numeric"),B=w(g,X,"fontname"),t=w(g,X,"fontsize"),G=w(g,C,"textarea"),D=w("state","active"),I=w(g),a=w(g,j),n=w(g,f,j),K=w(g,f,j,"target"),p=w(g,f,j,"align"),H="<select>"+'<option value="">none</option>'+'<option value="1px solid">1px</option>'+'<option value="2px solid">2px</option>'+'<option value="3px solid">3px</option>'+'<option value="4px solid">4px</option>'+'<option value="5px solid">5px</option>'+"</select>",N="<a></a>",e="<img />",b='<input type="text" class="'+R+" "+Y+" "+AA+'" />',E='<textarea class="'+G+'"></textarea>',y='<div class="'+I+'"><div class="'+a+'"></div></div>',x='<select class="'+B+'">{0}</select>',V='<option selected="selected"></option>'+"<option>Arial</option>"+"<option>Arial Black</option>"+"<option>Comic Sans MS</option>"+"<option>Courier New</option>"+"<option>Lucida Console</option>"+"<option>Tahoma</option>"+"<option>Times New Roman</option>"+"<option>Trebuchet MS</option>"+"<option>Verdana</option>",o='<select class="'+t+'">{0}</select>',i='<option selected="selected"></option>'+'<option value="1">10</option>'+'<option value="2">13</option>'+'<option value="3">16</option>'+'<option value="4">18</option>'+'<option value="5">24</option>'+'<option value="6">32</option>'+'<option value="7">48</option>';
function AC(A){return k(A)+'<input type="text" class="'+R+" "+Y+'" />';}function k(AD,A){return'<label class="'+F+(A?" "+A:"")+'">'+AD+"</label>";}function P(A){var AD='<div class="'+n+'">'+"<ul>"+"<li>"+AC(c.STRINGS.IMAGE_URL)+"</li>"+"<li>"+k(c.STRINGS.SIZE)+b+"<span>x</span>"+b+"</li>"+"<li>"+k(c.STRINGS.PADDING)+b+k(c.STRINGS.BORDER,T)+H+"</li>";if(!A.hideAlign){AD+="<li>"+k(c.STRINGS.ALIGN)+'<div class="'+p+'"></div>'+"</li>";}AD+="<li>"+AC(c.STRINGS.DESCRIPTION)+"</li>"+"<li>"+AC(c.STRINGS.LINK_URL)+"</li>"+"</ul>"+'<span class="'+K+'"><input type="checkbox" /><label>'+c.STRINGS.OPEN_IN_NEW_WINDOW+"</label></span>"+'<div class="'+Q+'"></div>'+"</div>";return AD;}function M(AE,AD){var A=new S.OverlayContext(S.merge({trigger:AE,showOn:"click",hideOn:"click",align:{node:AE,points:["tl","bl"]}},AD)).render();return A;}function d(AI,AF,AE,AJ){var AH=AF.button;var AD=AH.get("boundingBox");var A=new S.ColorPicker(S.merge({trigger:AD,align:{node:AD,points:["tl","bl"]}},AE));if(AE&&AE.plugins){for(var AG=0;AG<AE.plugins.length;AG++){A.plug(AE.plugins[AG],AE);}}A.render(S.getBody());A.on("colorChange",function(AM){var AK=this;var AL=A.get("rgb");AI.execCommand(AJ,AL.hex);AI.focus();});}var c=S.Component.create({NAME:g,NS:z,EXTENDS:S.Plugin.Base,ATTRS:{groups:{value:[{type:q},{type:W},{type:u},{type:m}]}},prototype:{initializer:function(){var AQ=this;var AS=AQ.get("host");var A=AS.frame.get("container");var AF=AQ.get("groups");var AH=S.Node.create(y);var AK=AH.one("."+a);A.placeBefore(AH);var AP={boundingBox:AH,contentBox:AK};var AR=[];for(var AI=0;AI<AF.length;AI++){var AO=AF[AI];var AJ=GROUPS[AO.type];var AD=[];for(var AG=0;AG<AJ.children.length;AG++){if(!AJ.children[AG].select){AD.push(AJ.children[AG]);}}if(AD.length>0){var AN=new S.Toolbar(S.merge(AJ.config,AO.toolbar,{children:AD})).render(AK);AN.on("buttonitem:click",function(AV){var AU=this;var AT=AV.target.get("icon").split("-");if(!s[AT[0]]){AU.execCommand(AT[0],(AT[1]?AT[1]:""));AU.focus();}},AS);AR.push(AN);}var AM=AJ.generate;if(AM&&U(AM.init)){AM.init.call(AQ,AS,AP);}for(var AG=0;AG<AJ.children.length;AG++){var AL=AJ.children[AG].icon;if(AM&&U(AM[AL])){var AE=(AO.config?AO.config[AL]:null);AP.button=(AM[AL].select?null:AN.item(AG));AM[AL].call(AQ,AS,AP,AE);}}}AP.toolbars=AR;},_updateToolbar:function(A,AH){var AJ=this;if(A.changedNode){var AE=A.commands;var AK=AH.toolbars;if(AK){for(var AG=0;AG<AK.length;AG++){AK[AG].each(function(AM){var AN=false;if(AE[AM.get("icon")]){AN=true;}AM.StateInteraction.set("active",AN);});}}var AD=A.fontFamily;var AI=AH._fontNameOptions;var AL=A.fontSize;var AF=AH._fontSizeOptions;if(AI){AI.item(0).set("selected",true);AI.each(function(AM){var AN=AM.get("value").toLowerCase();if(AN===AD.toLowerCase()){AM.set("selected",true);}});}if(AF){AL=AL.replace("px","");AF.item(0).set("selected",true);AF.each(function(AN){var AO=AN.get("value").toLowerCase();var AM=AN.get("text");if(AM===AL){AN.set("selected",true);}});}}}}});c.STRINGS={ALIGN:"Align",ALIGN_BLOCK:"Block",ALIGN_LEFT:"Left",ALIGN_INLINE:"Inline",ALIGN_RIGHT:"Right",BACKCOLOR:"Background Color",BOLD:"Bold",BORDER:"Border",CREATE_LINK:"Create Link",DESCRIPTION:"Description",FORECOLOR:"Foreground Color",IMAGE_URL:"Image URL",INDENT:"Indent",INSERT:"Insert",INSERT_IMAGE:"Insert Image",INSERT_ORDERED_LIST:"Insert Numbered List",INSERT_UNORDERED_LIST:"Insert Bulleted List",ITALIC:"Italic",JUSTIFY_LEFT:"Justify Left",JUSTIFY_CENTER:"Justify Center",JUSTIFY_RIGHT:"Justify Right",LINK_URL:"Link URL",OPEN_IN_NEW_WINDOW:"Open in new window",OUTDENT:"Outdent",PADDING:"Padding",REMOVE_FORMAT:"Format Source",SIZE:"Size",SOURCE:"Source",SUBSCRIPT:"Subscript",SUPERSCRIPT:"Superscript",LINE_THROUGH:"Line Through",UNDERLINE:"Underline"};GROUPS=[];GROUPS[W]={children:[{icon:"justifyleft",title:c.STRINGS.JUSTIFY_LEFT},{icon:"justifycenter",title:c.STRINGS.JUSTIFY_CENTER},{icon:"justifyright",title:c.STRINGS.JUSTIFY_RIGHT}]};GROUPS[h]={children:[{icon:"forecolor",title:c.STRINGS.FORECOLOR},{icon:"backcolor",title:c.STRINGS.BACKCOLOR}],generate:{forecolor:function(AF,AE,AD){var A=this;d(AF,AE,AD,"forecolor");},backcolor:function(AF,AE,AD){var A=this;d(AF,AE,AD,"backcolor");}}},GROUPS[O]={children:[{icon:"fontname",select:true},{icon:"fontsize",select:true}],generate:{init:function(AF,AE){var A=this;var AD=AE.contentBox;S.delegate("change",function(AI){var AG=this;var AK=AI.currentTarget;var AH=AK.get("className");var AJ=AH.substring(AH.lastIndexOf("-")+1);var AL=AK.get("value");AF.execCommand(AJ,AL);AF.focus();},AD,"select");AF.after("nodeChange",function(AH){var AG=this;switch(AH.changedType){case"keyup":case"mousedown":AG._updateToolbar(AH,AE);break;}},A);},fontname:function(AI,AH,AG){var A=this;var AD=AH.contentBox;var AF=null;if(AG&&AG.optionHtml){AF=AB.sub(x,[AG.optionHtml]);}else{AF=AB.sub(x,[V]);}AD.append(AF);var AE=AD.all("."+B+" option");AH._fontNameOptions=AE;},fontsize:function(AI,AH,AG){var A=this;var AD=AH.contentBox;var AF=null;if(AG&&AG.optionHtml){AF=AB.sub(o,[AG.optionHtml]);}else{AF=AB.sub(o,[i]);}AD.append(AF);var AE=AD.all("."+t+" option");AH._fontSizeOptions=AE;}}};GROUPS[u]={children:[{icon:"indent",title:c.STRINGS.INDENT},{icon:"outdent",title:c.STRINGS.OUTDENT}]};GROUPS[l]={children:[{icon:"insertimage",title:c.STRINGS.INSERT_IMAGE},{icon:"createlink",title:c.STRINGS.CREATE_LINK}],generate:{insertimage:function(AL,AQ,AE){var AR=this;var AK=AQ.button;var AG=AK.get("boundingBox");var AH=M(AG,AE);var AO=AH.get("contentBox");var A=new S.Panel({collapsible:false,headerContent:c.STRINGS.INSERT_IMAGE,icons:[{icon:"close",handler:{fn:AH.hide,context:AH}}]}).render(AO);AO=A.bodyNode;if(AE&&AE.dataBrowser){AE.dataBrowser.render(AO);}else{var AD=AL.getInstance();var AF=AL.frame._iframe;var AP=null;var AJ=P(AE);var AM=S.Node.create(AJ);AO.append(AM);var AS=AM.one("."+K+" input");var AN=new S.Toolbar({children:[{icon:"circle-check",label:c.STRINGS.INSERT}]});AN.item(0).on("click",function(AX){var AT=this;var AV=S.Node.create(N);var AU=S.Node.create(e);var AW=null;
AM.all("input").each(function(Ab,AZ){switch(AZ){case 0:AU.attr("src",Ab.val());break;case 1:var Aa=parseInt(Ab.val());if(!isNaN(Aa)){AU.attr("width",Aa);}break;case 2:var AY=parseInt(Ab.val());if(!isNaN(AY)){AU.attr("height",AY);}break;case 3:var Ac=parseInt(Ab.val());if(!isNaN(Ac)){AU.setStyle("padding",Ac+"px");}break;case 4:AU.attr("title",Ab.val());AU.attr("alt",Ab.val());break;case 5:AW=Ab.val();break;}});AM.all("select").each(function(AZ,AY){switch(AY){case 0:AU.setStyle("border",AZ.val());break;}});if(AI!=null){AI.some(function(Aa,AZ){var AY=this;var Ab=Aa.StateInteraction.get("active");if(Ab){AU.setStyle("display","");switch(AZ){case 0:AU.attr("align","left");break;case 1:AU.attr("align","");break;case 2:AU.attr("align","center");AU.setStyle("display","block");break;case 3:AU.attr("align","right");break;}return true;}});}if(AW!=null){AV.attr("href",AW);if(AS.attr("checked")){AV.attr("target","_blank");}AV.append(AU);AU=AV;}if(AP&&AP.anchorNode){AP.anchorNode.append(AU);}AH.hide();},AR);AN.render(AM.one("."+Q));var AI=null;if(!AE.hideAlign){AI=new S.Toolbar({activeState:true,children:[{icon:"align-left",title:c.STRINGS.ALIGN_LEFT},{icon:"align-inline",title:c.STRINGS.ALIGN_INLINE},{icon:"align-block",title:c.STRINGS.ALIGN_BLOCK},{icon:"align-right",title:c.STRINGS.ALIGN_RIGHT}]});AI.on("buttonitem:click",function(AV){var AT=this;var AU=AV.target;AT.each(function(AX){var AW=this;if(AX!=AU){AX.StateInteraction.set("active",false);}});});AI.render(AM.one("."+p));}AH.on("hide",function(AU){var AT=this;AT.all("input").each(function(AW){var AV=this;AW.val("");});AT.all("select").each(function(AW){var AV=this;AW.attr("selectedIndex",0);});if(AI!=null){AI.each(function(AW){var AV=this;AW.StateInteraction.set("active",false);});}AS.attr("checked",false);},AM);AF.on(v,function(AU){var AT=this;var AV=AT.getInstance();AP=new AV.Selection();},AL);}},createlink:function(AF,AE,AD){var A=this;AF.plug(S.Plugin.CreateLinkBase);}}};GROUPS[m]={children:[{icon:"insertunorderedlist",title:c.STRINGS.INSERT_UNORDERED_LIST},{icon:"insertorderedlist",title:c.STRINGS.INSERT_ORDERED_LIST}],generate:{init:function(AD){var A=this;AD.plug(S.Plugin.EditorLists);}}};GROUPS[C]={children:[{icon:"format",title:c.STRINGS.REMOVE_FORMAT},{icon:"source",title:c.STRINGS.SOURCE}],generate:{format:function(AG,AE,AD){var A=this;var AH=AG.frame;var AF=AE.button;AF.on("click",function(AL){var AI=this;var AM=AI.getInstance();var AK=new AM.Selection();var AJ=AK.getSelected();if(!AK.isCollapsed&&AJ.size()){AJ.each(function(AS){var AN=this;AS.removeAttribute("style");var AQ=AS.get("innerHTML");AQ=AQ.replace(/<([a-zA-Z0-9]*)\b[^>]*>/g,"<$1>");for(var AP=0;AP<Z.length;AP++){var AO=new RegExp("(<"+Z[AP]+">|<\\/"+Z[AP]+">)","ig");AQ=AQ.replace(AO,"");}AS.set("innerHTML",AQ);var AR=AS.get("parentNode");if(AR&&!AR.test("body")){AR.removeAttribute("style");}});}},AG);},source:function(AG,AJ,AE){var AK=this;var AD=AG.frame;var A=AD.get("container");var AH=AJ.contentBox;var AF=AJ.button;var AI=S.Node.create(E);AI.hide();A.append(AI);AF._visible=false;AF.on("click",function(AO){var AL=this;if(AF._visible){AG.set("content",AI.val());AI.hide();AI.val("");AD.show();}else{var AN=AD._iframe;AI.val(AG.getContent());var AM=(AN.get("offsetHeight")-parseInt(AI.getComputedStyle("paddingTop"))-parseInt(AI.getComputedStyle("paddingBottom")));AI.setStyle("height",AM+"px");AD.hide();AI.show();}AF._visible=!AF._visible;AH.all("select").attr("disabled",AF._visible);AH.all("button").attr("disabled",AF._visible);AF.get("contentBox").attr("disabled",false);},AG);}}};GROUPS[L]={children:[{icon:"styles"}],generate:{styles:function(AH,AF,AE){var A=this;var AG=AF.button;var AD=AG.get("boundingBox");AH.plug(S.Plugin.EditorMenuPlugin);AH.menu.add(S.merge({trigger:AD,showOn:"click",hideOn:"click",align:{node:AD,points:["tl","bl"]}},AE));}}};GROUPS[r]={children:[{icon:"subscript",title:c.STRINGS.SUBSCRIPT},{icon:"superscript",title:c.STRINGS.SUPERSCRIPT}]};GROUPS[q]={children:[{icon:"bold",title:c.STRINGS.BOLD},{icon:"italic",title:c.STRINGS.ITALIC},{icon:"underline",title:c.STRINGS.UNDERLINE},{icon:"strikethrough",title:c.STRINGS.LINE_THROUGH}]};S.namespace("Plugin").EditorToolbarPlugin=c;},"@VERSION@",{requires:["aui-base","editor-base","aui-toolbar","aui-overlay-context","aui-panel","aui-color-picker","aui-editor-menu-plugin","aui-editor-tools-plugin","aui-button-item","createlink-base","editor-lists","plugin"]});AUI.add("aui-editor-bbcode-plugin",function(S){var D=S.Lang,N=D.isArray,O=D.isString,J=S.ClassNameManager.getClassName,H="bbcodeplugin",R="bbcode",M="quote",T=J(M),Q=J(M,"content"),V=J(M,"title"),B="<{0}[^>]*>([\\s\\S]*?)</{0}>",E="<(([a-z0-9]+)\\b[^>]*?style=(\"|')[^:]*{0}\\s*:\\s*([^;\"']+);?[^>]*)>([\\s\\S]*?)<(/\\2)>",G="(<[a-z0-9]+[^>]*>|</[a-z0-9]+>)",K='<div class="'+T+'"><div class="'+Q+'">',C='<div class="'+V+'">$1</div>'+K,F="</div></div>",I="\\[(({0})=([^\\]]*))\\]([\\s\\S]*?)\\[\\/\\2\\]",P="\\[({0}[^\\[]*)\\]([\\s\\S]*?)\\[\\/\\1\\]",L=[{convert:[["br"]],regExp:"<{0}[^>]*>",output:"\n"},{convert:[{tags:["font-family"],source:["font"]},{tags:["font-size"],source:["size"]},{tags:["[^a-z-]*color"],source:["color"]}],regExp:E,output:"<$1>[{0}=$4]$5[/{0}]<$6>"},{convert:[{tags:["font-style"],source:["i"]},{tags:["font-weight"],source:["b"]}],regExp:E,output:"<$1>[{0}]$5[/{0}]<$6>"},{convert:[["text-align"]],regExp:E,output:"<$1>[$4]$5[/$4]<$6>"},{convert:[["text-decoration"]],regExp:E,output:function(){var X="";var A=arguments[4].toLowerCase();if(A.indexOf("underline")!=-1){X+="[u]";}else{if(A.indexOf("line-through")!=-1){X+="[s]";}}if(X!=""){return"<"+arguments[1]+">"+X+arguments[5]+X.replace("[","[/")+"<"+arguments[6]+">";}return arguments[0];}},{convert:[["margin-left"]],regExp:E,output:function(){var X="";var Y=parseInt(arguments[3]);if(!isNaN(Y)){var Z=Math.floor(Y/40);for(var A=0;A<Z;A++){X+="[indent]";}}X=X+arguments[5]+X.replace(/\[/g,"[/");return"<"+arguments[1]+">"+X+"<"+arguments[6]+">";}},{convert:[{tags:["font","size"],source:["size"]},{tags:["font","face"],source:["font"]}],regExp:"(<{0}\\b[^>]*{1}=(\"|')([^\"']+)(\"|')[^>]*>)([\\s\\S]*?)(</{0}>)",output:"$1[{0}=$3]$5[/{0}]$6"},{convert:[["blockquote"]],regExp:B,output:"[indent]$1[/indent]"},{convert:[["b"],["strong"]],regExp:B,output:"[b]$1[/b]"},{convert:[["i"],["em"]],regExp:B,output:"[i]$1[/i]"},{convert:[["u"]],regExp:B,output:"[u]$1[/u]"},{convert:[["s"],["strike"]],regExp:B,output:"[s]$1[/s]"},{convert:[["img"]],regExp:"(<a[^>]*>)?<{0}\\b[^>]*src=(\"|')([^\"']+)(\"|')[^>]*>(</a>)?",output:"[img]$3[/img]"},{convert:[["a"]],regExp:"<{0}\\b[^>]*href=(\"|')mailto:([^\"']+)(\"|')[^>]*>([\\s\\S]*?)</{0}>",output:"[email=$2]$4[/email]"},{convert:[["a"]],regExp:"<{0}\\b[^>]*href=(\"|')([^\"']+)(\"|')[^>]*>([\\s\\S]*?)</{0}>",output:"[url=$2]$4[/url]"},{convert:[["center"]],regExp:B,output:"[center]$1[/center]"},{convert:[["ul"]],regExp:B,output:"[list]$1[/list]"},{convert:[["ol"]],regExp:B,output:"[list=1]$1[/list]"},{convert:[["li"]],regExp:B,output:"[*]$1"},{convert:[["code"]],regExp:B,output:"[code]$1[/code]"},{convert:[["quote"]],regExp:"<div\\b[^>]*class=(\"|')_"+T+"s*[^\"']*(\"|')[^>]*>([\\s\\S]*?)</div>",output:"$3"},{convert:[["div"]],regExp:B,output:"$1\n"},{convert:[["h1"],["h2"],["h3"],["h4"],["h5"],["h6"]],regExp:B,output:"[b]$1[/b]\n"},{convert:[["p"]],regExp:B,output:"$1\n\n"}],W=[{convert:[{tags:["b"],source:["b"]},{tags:["i"],source:["i"]},{tags:["u"],source:["u"]},{tags:["s"],source:["s"]},{tags:["indent"],source:["blockquote"]},{tags:["code"],source:["code"]}],regExp:P,output:"<{0}>$2</{0}>"},{convert:[["list"]],regExp:P,output:function(){var Y="";
if(arguments[1]=="list=1"){Y+="<ol>";}else{Y+="<ul>";}var A=D.trim(arguments[2]).split("[*]");for(var X=1;X<A.length;X++){Y+="<li>"+A[X]+"</li>";}if(arguments[1]=="list=1"){Y+="</ol>";}else{Y+="</ul>";}return Y;}},{convert:[{tags:["font"],source:["face"]},{tags:["size"],source:["size"]}],regExp:I,output:'<font {0}="$3">$4</font>'},{convert:[{tags:["color"],source:["color"]}],regExp:I,output:'<span style="{0}: $3;">$4</span>'},{convert:[["img"]],regExp:P,output:'<img src="$2" alt="" />'},{convert:[{tags:["email"],source:["mailto:"]},{tags:["url"],source:[""]}],regExp:I,output:'<a href="{0}$3">$4</a>'},{convert:[["left"],["center"],["right"]],regExp:P+"\n?",output:'<div style="text-align: $1;">$2</div>'},{convert:[["\n"]],regExp:"{0}",output:"<br />"}];var U=S.Component.create({NAME:H,NS:R,EXTENDS:S.Plugin.Base,ATTRS:{host:{value:false}},prototype:{initializer:function(){var A=this;var X=A.get("host");A.afterHostMethod("getContent",A.getBBCode,A);X.on("contentChange",A._contentChange,A);},getBBCode:function(){var A=this;var Z=A.get("host");var Y="";Y=Z.constructor.prototype.getContent.apply(Z,arguments);var a=S.Node.create("<div>"+Y+"</div>");var X=null;while(X=a.all("div."+T)){if(!X.size()){break;}X.each(function(g){var b=this;var f=null;var c=g;do{if(c){f=c;}c=c.one("div."+Q);}while(c!=null);var e=f.get("parentNode");var i=e.previous();var d="["+M;if(i&&i.hasClass(V)){var h=i.html();h=h.replace(new RegExp(G,"ig"),"");d+="="+(h.charAt(h.length-1)==":"?h.substring(0,h.length-1):i.html());i.remove(true);}d+="]"+f.html()+"[/"+M+"]";e.html(d);e.removeClass(M);e.addClass("_"+M);},A);}Y=a.html();Y=A._parseTagExpressions(L,Y);Y=Y.replace(new RegExp(G,"ig"),"");return new S.Do.AlterReturn(null,Y);},getContentAsHtml:function(){var A=this;var Y=A.get("host");var X="";X=Y.constructor.prototype.getContent.apply(Y,arguments);return X;},_contentChange:function(Z){var A=this;var Y=A.get("host");var X=Z.newVal;X=X.replace(/\[quote=([^\]]*)\]/ig,K);X=X.replace(/\[quote\]/ig,C);X=X.replace(/\[\/quote\]/ig,F);X=A._parseTagExpressions(W,X);Z.newVal=X;Z.stopImmediatePropagation();},_parseTagExpressions:function(b,d){var A=this;for(var c=0;c<b.length;c++){for(var a=0;a<b[c].convert.length;a++){var Z=null;var X=b[c].output;if(N(b[c].convert[a])){Z=b[c].convert[a];}else{Z=b[c].convert[a].tags;if(O(b[c].output)){X=D.sub(b[c].output,b[c].convert[a].source);}}var Y=D.sub(b[c].regExp,Z);d=d.replace(new RegExp(Y,"ig"),X);}}return d;}}});S.namespace("Plugin").BBCodePlugin=U;},"@VERSION@",{requires:["aui-base","editor-base"]});AUI.add("aui-editor",function(B){},"@VERSION@",{skinnable:true,use:["aui-editor-tools-plugin","aui-editor-menu-plugin","aui-editor-toolbar-plugin","aui-editor-bbcode-plugin"]});