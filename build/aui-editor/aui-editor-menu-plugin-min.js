AUI.add("aui-editor-menu-plugin",function(M){var D=M.Lang,K=D.isString,G=M.ClassNameManager.getClassName,F="editormenu",I="editormenuplugin",R="menu",E="content",B=G(F,E,"list"),N=G(F,E,"text"),C=G(F,E,"item"),H="<{1}{2}>{0}</{1}>",P='<ul class="'+B+'"></ul>',J='<li class="'+N+'"><span>{0}</span></li>',Q='<li class="'+C+'">'+H+"</li>";function O(T){var A="";if(T.attributes){for(var U in T.attributes){A+=" "+U+'="'+T.attributes[U]+'"';}}if(T.styles){A=' style="';for(var U in T.styles){A+=U+": "+T.styles[U]+";";}A+='"';}return A;}var L=M.Component.create({NAME:F,EXTENDS:M.OverlayContext,ATTRS:{headerContent:{value:"",setter:function(T){var A=this;A._headerContent=T;return"";}},host:{value:false},items:{value:null}},prototype:{renderUI:function(){var A=this;L.superclass.renderUI.apply(A,arguments);var Y=A.get("host");var U=A.get("contentBox");var W=A._headerContent;var V=A.get("items");var X=M.Node.create(P);M.each(V,function(b){var a="";if(K(b)){a+=D.sub(J,[b]);}else{var Z=O(b);a+=D.sub(Q,[b.label,b.tag,Z]);}var c=M.Node.create(a);c.setData(F,b);X.append(c);});var T=new M.Panel({collapsible:false,headerContent:W,icons:[{icon:"close",handler:{fn:A.hide,context:A}}]}).render(U);T.bodyNode.append(X);A._menuList=X;},bindUI:function(){var A=this;L.superclass.bindUI.apply(A,arguments);var U=A.get("host");var T=A._menuList;T.delegate("click",function(a){var W=this;var Z=a.currentTarget,Y=Z.getData(F);var V=O(Y),X=D.sub(H,["{0}",Y.tag,V]);U.execCommand("wraphtml",X);U.focus();W.hide();},"."+C,A);},_uiSetHeight:function(V){var A=this;var T=A.get("boundingBox");var U=A._menuList;T.setStyle("height","auto");U.setStyle("height",V);},_uiSetWidth:function(V){var A=this;var T=A.get("boundingBox");var U=A._menuList;T.setStyle("width","auto");U.setStyle("width",V);}}});var S=M.Component.create({NAME:I,NS:R,EXTENDS:M.Plugin.Base,ATTRS:{host:{value:false}},prototype:{add:function(T){var A=this;var U=A.get("host");return new L(M.mix({host:U},T)).render();}}});M.namespace("Plugin").EditorMenuPlugin=S;},"@VERSION@",{requires:["aui-base","editor-base","aui-overlay-context","aui-panel","aui-editor-tools-plugin"]});