AUI.add("aui-editor-creole-plugin",function(e){var i=e.Lang,j=i.isArray,b=i.isString,f=e.ClassNameManager.getClassName,m="creoleplugin",a="creole",d="(<[a-z][a-z0-9]*[^>]*>|</[a-z][a-z0-9]*>)",c=new RegExp(d,"gi"),h=/<(\/?)strong>/gi,l=/<(\/?)em>/gi,g="</span>";if(!YUI.AUI.defaults.EditorToolbar){YUI.AUI.defaults.EditorToolbar={STRINGS:{}};}var k=e.Component.create({NAME:m,NS:a,EXTENDS:e.Plugin.Base,ATTRS:{interwiki:{value:{WikiCreole:"http://www.wikicreole.org/wiki/",Wikipedia:"http://en.wikipedia.org/wiki/"}},host:{value:false},linkFormat:{value:""},strict:{value:false}},prototype:{html2creole:null,initializer:function(){var n=this;this._creole=new e.CreoleParser({forIE:e.UA.os==="windows",interwiki:this.get("interwiki"),linkFormat:this.get("linkFormat"),strict:this.get("strict")});var o=n.get("host");n.afterHostMethod("getContent",n.getCreoleCode,n);o.on("contentChange",n._contentChange,n);},_convertHTML2Creole:function(o){var n=this;if(!n.html2creole){n.html2creole=new e.HTML2CreoleConvertor({data:o});}else{n.html2creole.set("data",o);}return n.html2creole.convert();},getCreoleCode:function(){var n=this;var o=e.Do.originalRetVal;o=n._convertHTML2Creole(o);o=o.replace(c,"");return new e.Do.AlterReturn(null,o);},getContentAsHtml:function(){var n=this;var o=n.get("host");return o.constructor.prototype.getContent.apply(o,arguments);},setContentAsCreoleCode:function(o){var n=this;var p=n.get("host");p.set("content",o);},_contentChange:function(o){var n=this;o.newVal=n._parseCreoleCode(o.newVal);o.stopImmediatePropagation();},_normalizeParsedData:function(o){var n=this;if(e.UA.gecko){o=n._normalizeParsedDataGecko(o);}else{if(e.UA.webkit){o=n._normalizeParsedDataWebKit(o);}}return o;},_normalizeParsedDataGecko:function(n){n=n.replace(h,function(r,q,p,o){if(!q){return'<span style="font-weight:bold;">';}else{return g;}});n=n.replace(l,function(r,q,p,o){if(!q){return'<span style="font-style:italic;">';}else{return g;}});return n;},_normalizeParsedDataWebKit:function(n){n=n.replace(h,"<$1b>");n=n.replace(l,"<$1b>");return n;},_parseCreoleCode:function(o){var n=this;var q=e.config.doc.createElement("div");n._creole.parse(q,o);var p=q.innerHTML;p=n._normalizeParsedData(p);return p;}}});e.namespace("Plugin").EditorCreoleCode=k;},"@VERSION@",{requires:["aui-base","editor-base","aui-editor-html-creole","aui-editor-creole-parser"]});