AUI.add("aui-editor-creole-plugin",function(e){var g=e.Lang,h=g.isArray,b=g.isString,f=e.ClassNameManager.getClassName,j="creoleplugin",a="creole",d="(<[a-z][a-z0-9]*[^>]*>|</[a-z][a-z0-9]*>)",c=new RegExp(d,"gi");if(!YUI.AUI.defaults.EditorToolbar){YUI.AUI.defaults.EditorToolbar={STRINGS:{}};}var i=e.Component.create({NAME:j,NS:a,EXTENDS:e.Plugin.Base,ATTRS:{interwiki:{value:{WikiCreole:"http://www.wikicreole.org/wiki/",Wikipedia:"http://en.wikipedia.org/wiki/"}},host:{value:false},linkFormat:{value:""},strict:{value:false}},prototype:{html2creole:null,initializer:function(){var k=this;this._creole=new e.CreoleParser({forIE:e.UA.os==="windows",interwiki:this.get("interwiki"),linkFormat:this.get("linkFormat"),strict:this.get("strict")});var l=k.get("host");k.afterHostMethod("getContent",k.getCreoleCode,k);l.on("contentChange",k._contentChange,k);},_convertHTML2Creole:function(l){var k=this;if(!k.html2creole){k.html2creole=new e.HTML2CreoleConvertor({data:l});}else{k.html2creole.set("data",l);}return k.html2creole.convert();},getCreoleCode:function(){var k=this;var l=e.Do.originalRetVal;l=k._convertHTML2Creole(l);l=l.replace(c,"");return new e.Do.AlterReturn(null,l);},getContentAsHtml:function(){var k=this;var l=k.get("host");return l.constructor.prototype.getContent.apply(l,arguments);},setContentAsCreoleCode:function(l){var k=this;var m=k.get("host");m.set("content",l);},_contentChange:function(l){var k=this;l.newVal=k._parseCreoleCode(l.newVal);l.stopImmediatePropagation();},_parseCreoleCode:function(l){var k=this;var n=e.config.doc.createElement("div");k._creole.parse(n,l);var m=n.innerHTML;return m;}}});e.namespace("Plugin").EditorCreoleCode=i;},"@VERSION@",{requires:["aui-base","editor-base","aui-editor-html-creole","aui-editor-creole-parser"]});