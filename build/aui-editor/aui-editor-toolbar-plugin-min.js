AUI.add("aui-editor-toolbar-plugin",function(S){var AB=S.Lang,U=AB.isFunction,w=S.ClassNameManager.getClassName,g="editortoolbar",z="toolbar",W="alignment",h="color",j="content",O="font",u="indent",J="input",l="insert",f="insertimage",m="list",v="mouseout",X="select",C="source",L="styles",r="subscript",q="text",s={backcolor:true,forecolor:true,format:true,insertimage:true,source:true,styles:true},Z=["b","big","font","em","i","small","s","strike","strong","sub","sup","u"],Q=w("button","holder"),F=w("field","label"),T=w("field","label","secondary"),R=w("field",J),Y=w("field",J,"text"),AA=w("field",J,"numeric"),B=w(g,X,"fontname"),t=w(g,X,"fontsize"),G=w(g,C,"textarea"),D=w("state","active"),I=w(g),a=w(g,j),n=w(g,f,j),K=w(g,f,j,"target"),p=w(g,f,j,"align"),H="<select>"+'<option value="">none</option>'+'<option value="1px solid">1px</option>'+'<option value="2px solid">2px</option>'+'<option value="3px solid">3px</option>'+'<option value="4px solid">4px</option>'+'<option value="5px solid">5px</option>'+"</select>",N="<a></a>",e="<img />",b='<input type="text" class="'+R+" "+Y+" "+AA+'" />',E='<textarea class="'+G+'"></textarea>',y='<div class="'+I+'"><div class="'+a+'"></div></div>',x='<select class="'+B+'">{0}</select>',V='<option selected="selected"></option>'+"<option>Arial</option>"+"<option>Arial Black</option>"+"<option>Comic Sans MS</option>"+"<option>Courier New</option>"+"<option>Lucida Console</option>"+"<option>Tahoma</option>"+"<option>Times New Roman</option>"+"<option>Trebuchet MS</option>"+"<option>Verdana</option>",o='<select class="'+t+'">{0}</select>',i='<option selected="selected"></option>'+'<option value="1">10</option>'+'<option value="2">13</option>'+'<option value="3">16</option>'+'<option value="4">18</option>'+'<option value="5">24</option>'+'<option value="6">32</option>'+'<option value="7">48</option>';function AC(A){return k(A)+'<input type="text" class="'+R+" "+Y+'" />';}function k(AD,A){return'<label class="'+F+(A?" "+A:"")+'">'+AD+"</label>";}function P(A){var AD='<div class="'+n+'">'+"<ul>"+"<li>"+AC(c.STRINGS.IMAGE_URL)+"</li>"+"<li>"+k(c.STRINGS.SIZE)+b+"<span>x</span>"+b+"</li>"+"<li>"+k(c.STRINGS.PADDING)+b+k(c.STRINGS.BORDER,T)+H+"</li>";if(!A.hideAlign){AD+="<li>"+k(c.STRINGS.ALIGN)+'<div class="'+p+'"></div>'+"</li>";}AD+="<li>"+AC(c.STRINGS.DESCRIPTION)+"</li>"+"<li>"+AC(c.STRINGS.LINK_URL)+"</li>"+"</ul>"+'<span class="'+K+'"><input type="checkbox" /><label>'+c.STRINGS.OPEN_IN_NEW_WINDOW+"</label></span>"+'<div class="'+Q+'"></div>'+"</div>";return AD;}function M(AE,AD){var A=new S.OverlayContext(S.merge({trigger:AE,showOn:"click",hideOn:"click",align:{node:AE,points:["tl","bl"]}},AD)).render();return A;}function d(AI,AF,AE,AJ){var AH=AF.button;var AD=AH.get("boundingBox");var A=new S.ColorPicker(S.merge({trigger:AD,align:{node:AD,points:["tl","bl"]}},AE));if(AE&&AE.plugins){for(var AG=0;AG<AE.plugins.length;AG++){A.plug(AE.plugins[AG],AE);}}A.render(S.getBody());A.on("colorChange",function(AM){var AK=this;var AL=A.get("rgb");AI.execCommand(AJ,AL.hex);AI.focus();});}var c=S.Component.create({NAME:g,NS:z,EXTENDS:S.Plugin.Base,ATTRS:{groups:{value:[{type:q},{type:W},{type:u},{type:m}]}},prototype:{initializer:function(){var AQ=this;var AS=AQ.get("host");var A=AS.frame.get("container");var AF=AQ.get("groups");var AH=S.Node.create(y);var AK=AH.one("."+a);A.placeBefore(AH);var AP={boundingBox:AH,contentBox:AK};var AR=[];for(var AI=0;AI<AF.length;AI++){var AO=AF[AI];var AJ=GROUPS[AO.type];var AD=[];for(var AG=0;AG<AJ.children.length;AG++){if(!AJ.children[AG].select){AD.push(AJ.children[AG]);}}if(AD.length>0){var AN=new S.Toolbar(S.merge(AJ.config,AO.toolbar,{children:AD})).render(AK);AN.on("buttonitem:click",function(AV){var AU=this;var AT=AV.target.get("icon").split("-");if(!s[AT[0]]){AU.execCommand(AT[0],(AT[1]?AT[1]:""));AU.focus();}},AS);AR.push(AN);}var AM=AJ.generate;if(AM&&U(AM.init)){AM.init.call(AQ,AS,AP);}for(var AG=0;AG<AJ.children.length;AG++){var AL=AJ.children[AG].icon;if(AM&&U(AM[AL])){var AE=(AO.config?AO.config[AL]:null);AP.button=(AM[AL].select?null:AN.item(AG));AM[AL].call(AQ,AS,AP,AE);}}}AP.toolbars=AR;},_updateToolbar:function(A,AH){var AJ=this;if(A.changedNode){var AE=A.commands;var AK=AH.toolbars;if(AK){for(var AG=0;AG<AK.length;AG++){AK[AG].each(function(AM){var AN=false;if(AE[AM.get("icon")]){AN=true;}AM.StateInteraction.set("active",AN);});}}var AD=A.fontFamily;var AI=AH._fontNameOptions;var AL=A.fontSize;var AF=AH._fontSizeOptions;if(AI){AI.item(0).set("selected",true);AI.each(function(AM){var AN=AM.get("value").toLowerCase();if(AN===AD.toLowerCase()){AM.set("selected",true);}});}if(AF){AL=AL.replace("px","");AF.item(0).set("selected",true);AF.each(function(AN){var AO=AN.get("value").toLowerCase();var AM=AN.get("text");if(AM===AL){AN.set("selected",true);}});}}}}});c.STRINGS={ALIGN:"Align",ALIGN_BLOCK:"Block",ALIGN_LEFT:"Left",ALIGN_INLINE:"Inline",ALIGN_RIGHT:"Right",BACKCOLOR:"Background Color",BOLD:"Bold",BORDER:"Border",CREATE_LINK:"Create Link",DESCRIPTION:"Description",FORECOLOR:"Foreground Color",IMAGE_URL:"Image URL",INDENT:"Indent",INSERT:"Insert",INSERT_IMAGE:"Insert Image",INSERT_ORDERED_LIST:"Insert Numbered List",INSERT_UNORDERED_LIST:"Insert Bulleted List",ITALIC:"Italic",JUSTIFY_LEFT:"Justify Left",JUSTIFY_CENTER:"Justify Center",JUSTIFY_RIGHT:"Justify Right",LINK_URL:"Link URL",OPEN_IN_NEW_WINDOW:"Open in new window",OUTDENT:"Outdent",PADDING:"Padding",REMOVE_FORMAT:"Format Source",SIZE:"Size",SOURCE:"Source",SUBSCRIPT:"Subscript",SUPERSCRIPT:"Superscript",LINE_THROUGH:"Line Through",UNDERLINE:"Underline"};GROUPS=[];GROUPS[W]={children:[{icon:"justifyleft",title:c.STRINGS.JUSTIFY_LEFT},{icon:"justifycenter",title:c.STRINGS.JUSTIFY_CENTER},{icon:"justifyright",title:c.STRINGS.JUSTIFY_RIGHT}]};GROUPS[h]={children:[{icon:"forecolor",title:c.STRINGS.FORECOLOR},{icon:"backcolor",title:c.STRINGS.BACKCOLOR}],generate:{forecolor:function(AF,AE,AD){var A=this;d(AF,AE,AD,"forecolor");},backcolor:function(AF,AE,AD){var A=this;
d(AF,AE,AD,"backcolor");}}},GROUPS[O]={children:[{icon:"fontname",select:true},{icon:"fontsize",select:true}],generate:{init:function(AF,AE){var A=this;var AD=AE.contentBox;S.delegate("change",function(AI){var AG=this;var AK=AI.currentTarget;var AH=AK.get("className");var AJ=AH.substring(AH.lastIndexOf("-")+1);var AL=AK.get("value");AF.execCommand(AJ,AL);AF.focus();},AD,"select");AF.after("nodeChange",function(AH){var AG=this;switch(AH.changedType){case"keyup":case"mousedown":AG._updateToolbar(AH,AE);break;}},A);},fontname:function(AI,AH,AG){var A=this;var AD=AH.contentBox;var AF=null;if(AG&&AG.optionHtml){AF=AB.sub(x,[AG.optionHtml]);}else{AF=AB.sub(x,[V]);}AD.append(AF);var AE=AD.all("."+B+" option");AH._fontNameOptions=AE;},fontsize:function(AI,AH,AG){var A=this;var AD=AH.contentBox;var AF=null;if(AG&&AG.optionHtml){AF=AB.sub(o,[AG.optionHtml]);}else{AF=AB.sub(o,[i]);}AD.append(AF);var AE=AD.all("."+t+" option");AH._fontSizeOptions=AE;}}};GROUPS[u]={children:[{icon:"indent",title:c.STRINGS.INDENT},{icon:"outdent",title:c.STRINGS.OUTDENT}]};GROUPS[l]={children:[{icon:"insertimage",title:c.STRINGS.INSERT_IMAGE},{icon:"createlink",title:c.STRINGS.CREATE_LINK}],generate:{insertimage:function(AL,AQ,AE){var AR=this;var AK=AQ.button;var AG=AK.get("boundingBox");var AH=M(AG,AE);var AO=AH.get("contentBox");var A=new S.Panel({collapsible:false,headerContent:c.STRINGS.INSERT_IMAGE,icons:[{icon:"close",handler:{fn:AH.hide,context:AH}}]}).render(AO);AO=A.bodyNode;if(AE&&AE.dataBrowser){AE.dataBrowser.render(AO);}else{var AD=AL.getInstance();var AF=AL.frame._iframe;var AP=null;var AJ=P(AE);var AM=S.Node.create(AJ);AO.append(AM);var AS=AM.one("."+K+" input");var AN=new S.Toolbar({children:[{icon:"circle-check",label:c.STRINGS.INSERT}]});AN.item(0).on("click",function(AX){var AT=this;var AV=S.Node.create(N);var AU=S.Node.create(e);var AW=null;AM.all("input").each(function(Ab,AZ){switch(AZ){case 0:AU.attr("src",Ab.val());break;case 1:var Aa=parseInt(Ab.val());if(!isNaN(Aa)){AU.attr("width",Aa);}break;case 2:var AY=parseInt(Ab.val());if(!isNaN(AY)){AU.attr("height",AY);}break;case 3:var Ac=parseInt(Ab.val());if(!isNaN(Ac)){AU.setStyle("padding",Ac+"px");}break;case 4:AU.attr("title",Ab.val());AU.attr("alt",Ab.val());break;case 5:AW=Ab.val();break;}});AM.all("select").each(function(AZ,AY){switch(AY){case 0:AU.setStyle("border",AZ.val());break;}});if(AI){AI.some(function(Aa,AZ){var AY=this;var Ab=Aa.StateInteraction.get("active");if(Ab){AU.setStyle("display","");switch(AZ){case 0:AU.attr("align","left");break;case 1:AU.attr("align","");break;case 2:AU.attr("align","center");AU.setStyle("display","block");break;case 3:AU.attr("align","right");break;}return true;}});}if(AW!=null){AV.attr("href",AW);if(AS.attr("checked")){AV.attr("target","_blank");}AV.append(AU);AU=AV;}if(AP&&AP.anchorNode){AP.anchorNode.append(AU);}AH.hide();},AR);AN.render(AM.one("."+Q));var AI=null;if(!AE.hideAlign){AI=new S.Toolbar({activeState:true,children:[{icon:"align-left",title:c.STRINGS.ALIGN_LEFT},{icon:"align-inline",title:c.STRINGS.ALIGN_INLINE},{icon:"align-block",title:c.STRINGS.ALIGN_BLOCK},{icon:"align-right",title:c.STRINGS.ALIGN_RIGHT}]});AI.on("buttonitem:click",function(AV){var AT=this;var AU=AV.target;AT.each(function(AX){var AW=this;if(AX!=AU){AX.StateInteraction.set("active",false);}});});AI.render(AM.one("."+p));}AH.on("hide",function(AU){var AT=this;AT.all("input").each(function(AW){var AV=this;AW.val("");});AT.all("select").each(function(AW){var AV=this;AW.attr("selectedIndex",0);});if(AI){AI.each(function(AW){var AV=this;AW.StateInteraction.set("active",false);});}AS.attr("checked",false);},AM);AF.on(v,function(AU){var AT=this;var AV=AT.getInstance();AP=new AV.Selection();},AL);}},createlink:function(AF,AE,AD){var A=this;AF.plug(S.Plugin.CreateLinkBase);}}};GROUPS[m]={children:[{icon:"insertunorderedlist",title:c.STRINGS.INSERT_UNORDERED_LIST},{icon:"insertorderedlist",title:c.STRINGS.INSERT_ORDERED_LIST}],generate:{init:function(AD){var A=this;AD.plug(S.Plugin.EditorLists);}}};GROUPS[C]={children:[{icon:"format",title:c.STRINGS.REMOVE_FORMAT},{icon:"source",title:c.STRINGS.SOURCE}],generate:{format:function(AG,AE,AD){var A=this;var AH=AG.frame;var AF=AE.button;AF.on("click",function(AL){var AI=this;var AM=AI.getInstance();var AK=new AM.Selection();var AJ=AK.getSelected();if(!AK.isCollapsed&&AJ.size()){AJ.each(function(AS){var AN=this;AS.removeAttribute("style");var AQ=AS.get("innerHTML");AQ=AQ.replace(/<([a-zA-Z0-9]*)\b[^>]*>/g,"<$1>");for(var AP=0;AP<Z.length;AP++){var AO=new RegExp("(<"+Z[AP]+">|<\\/"+Z[AP]+">)","ig");AQ=AQ.replace(AO,"");}AS.set("innerHTML",AQ);var AR=AS.get("parentNode");if(AR&&!AR.test("body")){AR.removeAttribute("style");}});}},AG);},source:function(AG,AJ,AE){var AK=this;var AD=AG.frame;var A=AD.get("container");var AH=AJ.contentBox;var AF=AJ.button;var AI=S.Node.create(E);AI.hide();A.append(AI);AF._visible=false;AF.on("click",function(AO){var AL=this;if(AF._visible){AG.set("content",AI.val());AI.hide();AI.val("");AD.show();}else{var AN=AD._iframe;AI.val(AG.getContent());var AM=(AN.get("offsetHeight")-parseInt(AI.getComputedStyle("paddingTop"))-parseInt(AI.getComputedStyle("paddingBottom")));AI.setStyle("height",AM+"px");AD.hide();AI.show();}AF._visible=!AF._visible;AH.all("select").attr("disabled",AF._visible);AH.all("button").attr("disabled",AF._visible);AF.get("contentBox").attr("disabled",false);},AG);}}};GROUPS[L]={children:[{icon:"styles"}],generate:{styles:function(AH,AF,AE){var A=this;var AG=AF.button;var AD=AG.get("boundingBox");AH.plug(S.Plugin.EditorMenuPlugin);AH.menu.add(S.merge({trigger:AD,showOn:"click",hideOn:"click",align:{node:AD,points:["tl","bl"]}},AE));}}};GROUPS[r]={children:[{icon:"subscript",title:c.STRINGS.SUBSCRIPT},{icon:"superscript",title:c.STRINGS.SUPERSCRIPT}]};GROUPS[q]={children:[{icon:"bold",title:c.STRINGS.BOLD},{icon:"italic",title:c.STRINGS.ITALIC},{icon:"underline",title:c.STRINGS.UNDERLINE},{icon:"strikethrough",title:c.STRINGS.LINE_THROUGH}]};S.namespace("Plugin").EditorToolbarPlugin=c;
},"@VERSION@",{requires:["aui-base","editor-base","aui-toolbar","aui-overlay-context","aui-panel","aui-color-picker","aui-editor-menu-plugin","aui-editor-tools-plugin","aui-button-item","createlink-base","editor-lists","plugin"]});