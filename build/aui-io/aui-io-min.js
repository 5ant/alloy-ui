AUI.add("aui-io-request",function(O){var G=O.Lang,d=G.isBoolean,Q=G.isFunction,H=G.isString,f=YUI.AUI.namespace("defaults.io"),h=function(A){return function(){return f[A];};},W="active",C="arguments",X="autoLoad",T="cache",g="cfg",S="complete",m="content-type",Y="context",N="data",F="dataType",J="",l="end",b="failure",B="form",U="get",K="headers",k="IORequest",E="json",Z="method",V="responseData",a="start",M="success",c="sync",R="timeout",P="transaction",e="uri",j="xdr",n="xml",i="Parser error: IO dataType is not correctly parsing",D={all:"*/*",html:"text/html",json:"application/json, text/javascript",text:"text/plain",xml:"application/xml, text/xml"};var I=O.Component.create({NAME:k,ATTRS:{autoLoad:{value:true,validator:d},cache:{value:true,validator:d},dataType:{setter:function(A){return(A||J).toLowerCase();},value:null,validator:H},responseData:{setter:function(A){return this._setResponseData(A);},value:null},uri:{setter:function(A){return this._parseURL(A);},value:null,validator:H},active:{value:false,validator:d},cfg:{getter:function(){var A=this;return{arguments:A.get(C),context:A.get(Y),data:A.get(N),form:A.get(B),headers:A.get(K),method:A.get(Z),on:{complete:O.bind(A.fire,A,S),end:O.bind(A._end,A),failure:O.bind(A.fire,A,b),start:O.bind(A.fire,A,a),success:O.bind(A._success,A)},sync:A.get(c),timeout:A.get(R),xdr:A.get(j)};},readOnly:true},transaction:{value:null},arguments:{valueFn:h(C)},context:{valueFn:h(Y)},data:{valueFn:h(N),setter:"_setIOData"},form:{valueFn:h(B)},headers:{getter:function(o){var p=[];var A=this;var L=A.get(F);if(L){p.push(D[L]);}p.push(D.all);return O.merge(o,{Accept:p.join(", ")});},valueFn:h(K)},method:{valueFn:h(Z)},selector:{value:null},sync:{valueFn:h(c)},timeout:{valueFn:h(R)},xdr:{valueFn:h(j)}},EXTENDS:O.Plugin.Base,prototype:{init:function(L){var A=this;I.superclass.init.apply(this,arguments);A._autoStart();},destructor:function(){var A=this;A.stop();A.set(P,null);},start:function(){var A=this;A.destructor();A.set(W,true);var L=O.io(A.get(e),A.get(g));A.set(P,L);},stop:function(){var A=this;var L=A.get(P);if(L){L.abort();}},_autoStart:function(){var A=this;if(A.get(X)){A.start();}},_parseURL:function(p){var A=this;var L=A.get(T);var s=A.get(Z);if((L===false)&&(s==U)){var r=+new Date;var o=p.replace(/(\?|&)_=.*?(&|$)/,"$1_="+r+"$2");p=o+((o==p)?(p.match(/\?/)?"&":"?")+"_="+r:"");}var q=f.uriFormatter;if(Q(q)){p=q.apply(A,[p]);}return p;},_end:function(L){var A=this;A.set(W,false);A.set(P,null);A.fire(l,L);},_success:function(o,L){var A=this;A.set(V,L);A.fire(M,o,L);},_setIOData:function(o){var A=this;var L=f.dataFormatter;if(Q(L)){o=L.call(A,o);}return o;},_setResponseData:function(s){var q=null;var L=this;if(s){var p=L.get(F);var t=s.getResponseHeader(m);if((p==n)||(!p&&t.indexOf(n)>=0)){q=s.responseXML;if(q.documentElement.tagName=="parsererror"){throw i;}}else{q=s.responseText;}if(q===J){q=null;}if(p==E){try{q=O.JSON.parse(q);}catch(r){}}else{var A=L.get("selector");if(q&&A){var o;if(q.documentElement){o=O.one(q);}else{o=O.Node.create(q);}q=o.all(A);}}}return q;}}});O.IORequest=I;O.io.request=function(L,A){return new O.IORequest(O.merge(A,{uri:L}));};},"@VERSION@",{requires:["aui-base","io-base","json","plugin","querystring-stringify"]});AUI.add("aui-io-plugin",function(U){var P=U.Lang,Q=P.isBoolean,R=P.isString,V=function(A){return(A instanceof U.Node);},W=U.WidgetStdMod,D="Node",N="Widget",f="",E="failure",H="failureMessage",Y="host",I="icon",J="io",F="IOPlugin",X="loading",G="loadingMask",e="node",T="outer",b="parseContent",M="queue",C="rendered",O="section",d="showLoading",a="success",S="type",B="where",Z=U.ClassNameManager.getClassName,K=Z(I,X);var c=U.Component.create({NAME:F,NS:J,ATTRS:{node:{value:null,getter:function(h){var A=this;if(!h){var g=A.get(Y);var L=A.get(S);if(L==D){h=g;}else{if(L==N){var i=A.get(O);if(!g.getStdModNode(i)){g.setStdModContent(i,f);}h=g.getStdModNode(i);}}}return U.one(h);},validator:V},failureMessage:{value:"Failed to retrieve content",validator:R},loadingMask:{value:{}},parseContent:{value:true,validator:Q},showLoading:{value:true,validator:Q},section:{value:W.BODY,validator:function(A){return(!A||A==W.BODY||A==W.HEADER||A==W.FOOTER);}},type:{readOnly:true,valueFn:function(){var A=this;var L=D;if(A.get(Y) instanceof U.Widget){L=N;}return L;},validator:R},where:{value:W.REPLACE,validator:function(A){return(!A||A==W.AFTER||A==W.BEFORE||A==W.REPLACE||A==T);}}},EXTENDS:U.IORequest,prototype:{bindUI:function(){var A=this;A.on("activeChange",A._onActiveChange);A.on(a,A._successHandler);A.on(E,A._failureHandler);if((A.get(S)==N)&&A.get(d)){var L=A.get(Y);L.after("heightChange",A._syncLoadingMaskUI,A);L.after("widthChange",A._syncLoadingMaskUI,A);}},_autoStart:function(){var A=this;A.bindUI();c.superclass._autoStart.apply(this,arguments);},_bindParseContent:function(){var A=this;var L=A.get(e);if(L&&!L.ParseContent&&A.get(b)){L.plug(U.Plugin.ParseContent);}},hideLoading:function(){var A=this;var L=A.get(e);if(L.loadingmask){L.loadingmask.hide();}},setContent:function(L){var A=this;A._bindParseContent();A._getContentSetterByType().apply(A,[L]);if(A.overlayMaskBoundingBox){A.overlayMaskBoundingBox.remove();}},showLoading:function(){var A=this;var L=A.get(e);if(L.loadingmask){if(A.overlayMaskBoundingBox){L.append(A.overlayMaskBoundingBox);}}else{L.plug(U.LoadingMask,A.get(G));A.overlayMaskBoundingBox=L.loadingmask.overlayMask.get("boundingBox");}L.loadingmask.show();},start:function(){var A=this;var L=A.get(Y);if(!L.get(C)){L.after("render",function(){A._setLoadingUI(true);});}c.superclass.start.apply(A,arguments);},_getContentSetterByType:function(){var A=this;var L={Node:function(j){var g=this;var i=g.get(e);if(j instanceof U.NodeList){j=j.toFrag();}if(j instanceof U.Node){j=j._node;}var h=g.get(B);if(h==T){i.replace(j);}else{U.DOM.addHTML(i._node,j,h);}},Widget:function(i){var g=this;var h=g.get(Y);h.setStdModContent.apply(h,[g.get(O),i,g.get(B)]);}};return L[this.get(S)];},_setLoadingUI:function(L){var A=this;if(A.get(d)){if(L){A.showLoading();
}else{A.hideLoading();}}},_syncLoadingMaskUI:function(){var A=this;A.get(e).loadingmask.refreshMask();},_successHandler:function(L,h,g){var A=this;A.setContent(this.get("responseData"));},_failureHandler:function(L,h,g){var A=this;A.setContent(A.get(H));},_onActiveChange:function(g){var A=this;var L=A.get(Y);var h=A.get(S)==N;if(!h||(h&&L&&L.get(C))){A._setLoadingUI(g.newVal);}}}});U.Node.prototype.load=function(j,i,k){var L=this;var h=j.indexOf(" ");var A;if(h>0){A=j.slice(h,j.length);j=j.slice(0,h);}if(P.isFunction(i)){k=i;i=null;}i=i||{};if(k){i.after=i.after||{};i.after.success=k;}var g=i.where;i.uri=j;i.where=g;if(A){i.selector=A;i.where=g||"replace";}L.plug(U.Plugin.IO,i);return L;};U.namespace("Plugin").IO=c;},"@VERSION@",{requires:["aui-overlay-base","aui-parse-content","aui-io-request","aui-loading-mask"]});AUI.add("aui-io",function(B){},"@VERSION@",{skinnable:false,use:["aui-io-request","aui-io-plugin"]});