AUI.add("aui-dialog-iframe",function(c){var i=c.Lang,d=c.getClassName,h="iframe",k=d("dialog",h,"bd"),l=d("dialog",h,"node"),e=d("dialog",h,"root","node"),g=[l],b='<iframe class="{cssClass}" frameborder="0" id="{id}" name="{id}" src="{uri}"></iframe>',f=c.Widget.UI_SRC,j={src:f};var a=c.Component.create({ATTRS:{closeOnEscape:{value:true},iframeCssClass:{value:"",setter:"_setIframeCssClass"},iframeId:{valueFn:function(){var m=this;return m.get("id")||c.guid();}},uri:{}},EXTENDS:c.Plugin.Base,NAME:h,NS:h,prototype:{initializer:function(n){var m=this;m._host=m.get("host");m.publish("load",{defaultFn:m._defaultLoadIframeFn});m.afterHostMethod("renderUI",m.renderUI);m.afterHostMethod("bindUI",m.bindUI);m.afterHostMethod("render",m._afterRender);},renderUI:function(){var m=this;m._previousBodyContent=m._host.get("bodyContent");var n=i.sub(b,{cssClass:m.get("iframeCssClass"),id:m.get("iframeId"),uri:m.get("uri")});var p=c.Node.create(n);m._host.set("bodyContent",p);var o=m._host.bodyNode;o.addClass(k);m._bodyNode=o;m.node=p;},bindUI:function(){var m=this;m.afterHostEvent("heightChange",m._updateIframeSize,m);m.afterHostEvent("widthChange",m._updateIframeSize,m);m.after("uriChange",m._afterUriChange);m.node.on("load",c.bind(m.fire,m,"load"));},destructor:function(){var m=this;m._host.set("bodyContent",m._previousBodyContent);m.node.remove(true);},_adjustSize:c.cached(function(m){return((parseInt(m,10)||0)-5);}),_afterRender:function(){var m=this;m._bodyNode.plug(c.LoadingMask).loadingmask.show();},_afterUriChange:function(n){var m=this;if(n.src!=f){m._uiSetUri(n.newVal);}},_defaultLoadIframeFn:function(p){var m=this;var o=m.node;try{var r=o.get("contentWindow.document");r.get("documentElement").addClass(e);var n=r.get("body");o.set("height",n.get("scrollHeight")+10);m.set("uri",r.get("location.href"),j);if(m.get("closeOnEscape")){c.on("key",function(s){m._host.close();},[r],"down:27");}}catch(q){}m._bodyNode.loadingmask.hide();},_setIframeCssClass:function(m){g[1]=m;return g.join(" ");},_uiSetUri:function(n){var m=this;if(m._bodyNode.loadingmask){m._bodyNode.loadingmask.show();}m.node.attr("src",n);},_updateIframeSize:function(q){var m=this;var o=m._adjustSize;var n=m._bodyNode;var p=m.node;var r=m._updateIframeSizeUI;if(!r){r=function(){var s=n.getStyle("height");p.setStyle("height",o(s));n.loadingmask.refreshMask();};m._updateIframeSizeUI=r;}setTimeout(r,50);}}});c.Plugin.DialogIframe=a;},"@VERSION@",{requires:["aui-base","aui-loading-mask","plugin"],skinnable:true});