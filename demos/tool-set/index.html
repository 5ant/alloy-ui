<!DOCTYPE html>

<html>
<head>
	<script src="../../build/yui/yui.js" type="text/javascript"></script>
	<script src="../../build/aui-base/aui-base.js" type="text/javascript"></script>

	<link rel="stylesheet" href="../../build/aui-skins/core/css/main.css" type="text/css" media="screen" title="no title" charset="utf-8" />
	<link rel="stylesheet" href="../../build/aui-skins/core/css/tool-set.css" type="text/css" media="screen" title="no title" charset="utf-8" />

	<style type="text/css" media="screen">
		body {
			font-size: 12px;
		}

		#wrapper {
			padding: 10px;
		}

		#demo {
			overflow: hidden;
		}

		#demo h2 {
			clear: both;
		}

	</style>
</head>

<body>

<div id="wrapper">
	<h1>Alloy - tool-set Demo</h1>


	<div id="demo">
		<div class="aui-helper-clearfix" id="withContextPanel">
			<h2>With context panel</h2>
		</div>

		<div class="aui-helper-clearfix" id="withState">
			<h2>
				With State
				<button id="addMore1">Add more</button>
				<button id="remove1">Remove last</button>
			</h2>
		</div>

	</div>
</div>

<script type="text/javascript" charset="utf-8">
AUI().ready(
	'aui-tool-set',
	'aui-context-panel',
	function(A) {
		toolSet = new A.ToolSet(
			{
				activeState: true,
				tools: [
					{
						id: 'options',
						icon: 'gear',
						handler: function(event) {
							var instance = this;

							if (!instance._optionsMenu) {
								instance._optionsMenu = new A.ContextPanel(
									{
										align: {
											node: instance.get('contentBox'),
											points: ['tl', 'bl']
										},
										bodyContent: 'This is the options panel',
										trigger: instance.get('contentBox'),
										visible: true,
										on: {
											visibleChange: function(event) {
												instance.StateInteraction.set('active', event.newVal);
											}
										}
									}
								).render();
							}
						}
					},
					{
						id: 'add',
						icon: 'plus',
						handler: function(event) {
							var instance = this;

							if (!instance._addMenu) {
								instance._addMenu = new A.ContextPanel(
									{
										align: {
											node: instance.get('contentBox'),
											points: ['bl', 'tr']
										},
										bodyContent: 'This is the where you can add some content',
										trigger: instance.get('contentBox'),
										visible: true,
										on: {
											visibleChange: function(event) {
												instance.StateInteraction.set('active', event.newVal);
											}
										}
									}
								).render();
							}
						}
					}
				]
			}
		).render('#withContextPanel');

		toolSet1 = new A.ToolSet(
			{
				activeState: true,
				tools: [
					{
						id: 'collapse',
						icon: 'minus'
					},
					{
						id: 'close',
						icon: 'close'
					},
					{
						id: 'expand',
						icon: 'plus'
					}
				]
			}
		).render('#withState');

		// Extras
		var index = 0;
		var icons = [ 'alert', 'info', 'signal', 'bookmark', 'unlocked' ];

		A.on('click', function() {
			if (index < icons.length) {
				var icon = icons[index++];

				toolSet1.add({ id: icon, icon: icon });
			}
		}, '#addMore1');

		A.on('click', function() {
			if (index > 0) {
				var icon = icons[--index];

				toolSet1.remove(icon);
			}
		}, '#remove1');

		// remove by index
		// toolSet1.remove(0);
	}
);

</script>

</body>
</html>