<!DOCTYPE html>

<html>
<head>
	<script src="../../lib/yui/build/yui/yui.js" type="text/javascript" charset="utf-8"></script>
	<script src="../../src/javascript/defaults.js" type="text/javascript" charset="utf-8"></script>
	<script src="../../src/javascript/core.js" type="text/javascript" charset="utf-8"></script>

	<link rel="stylesheet" href="../../themes/base/css/main.css" type="text/css" media="screen" title="no title" charset="utf-8" />
</head>

<style type="text/css" media="screen">

	.aui-tree-view {
		margin: 30px;
		font-size: 12px;
	}

	#treeFromNodes {
		margin: 30px;
	}

</style>

<body>
<h1>Alloy - TreeView</h1>

<button id="expandAll-1">Expand All</button>
<button id="collapseAll-1">Collapse All</button>
<button id="createNodeROOT-1">Append node to ROOT</button>
<button id="insertBeforeROOT-1">Insert node before ROOT</button>

<h1>A.TreeView Folder Style</h1>
<div id="tree1"></div>

<br/><br/><br/>

<button id="expandAll-2">Expand All</button>
<button id="collapseAll-2">Collapse All</button>
<button id="createNodeROOT-2">Append node to ROOT</button>

<h1>A.TreeView Simple Style</h1>
<div id="tree2"></div>

<script type="text/javascript" charset="utf-8">

AUI().ready('tree-view', function(A) {

	var defCallback = function(event) {
		if (window.console && window.console.log) {
			console.log(event.type, event);
		}
	};

	// creating from constructor A.TreeNode
	var fileRoot1 = new A.TreeNode({ label: 'File ROOT 1', id: 'fileRoot1' });

	// or from json
	var children = [
		{
			label: 'ROOT',
			id: 'root1',
			expanded: true,
			children: [
				{
					type: 'io',
					label: 'CachedTreeNodeIO',
					cache: true,
					io: 'assets/content.html'
				},
				{
					type: A.TreeNodeIO,
					label: 'TreeNodeIO',
					cache: false,
					io: {
						url: 'assets/content.html',
						cfg: {
							data: 'foo=bar&bar=foo',
							on: {
								success: function(id, o) {
									// console.log('User success handler', arguments);
								}
							}
						}
					}
				},
				{
					label: 'Folder1',
					id: 'folder1',
					expanded: true,
					children: [
						{
							label: 'Folder1-1',
							id: 'folder1-1',
							leaf: false,
							expanded: false,
							children: [
								fileRoot1,
								{ label: 'File1' },
								{ label: 'File2' },
								{ label: 'From JSON', id: 'fromJSON' }
							]
						},
						{ label: 'File1 - with id', id: 'file1' },
						{ label: 'File2' },
						{ label: 'File3' },
						{ label: 'File4' },
						{ label: 'File5' }
					]
				},
				{
					label: 'Folder2',
					id: 'folder2',
					expanded: true,
					children: [
						{
							label: 'Folder2-1',
							// leaf: false,
							expanded: false,
							children: [
								fileRoot1,
								{ label: 'File1' },
								{ label: 'File2' }
							]
						},
						{ label: 'File1' },
						{ label: 'File2' },
						{ label: 'File3' },
						{ label: 'File4' },
						{ label: 'File5' }
					]
				}
			]
		}
	];

	// display the nodes using the A.TreeView
	var tree1 = new A.TreeView({
		type: 'file',
		width: 200,
		// height: 400,
		boundingBox: '#tree1',
		on: {
			append: defCallback,
			// collapse: defCallback,
			collapseAll: defCallback,
			// expand: defCallback,
			expandAll: defCallback,
			move: defCallback,
			remove: defCallback
		},
		after: {
			append: defCallback,
			// collapse: defCallback,
			collapseAll: defCallback,
			// expand: defCallback,
			expandAll: defCallback,
			move: defCallback,
			remove: defCallback
		},
		children: children
	})
	.render();


	var tree2 = new A.TreeView({
		width: 200,
		type: 'normal',
		boundingBox: '#tree2',
		children: [
			{ label: 'Folder 1', children: [ { label: 'file' }, { label: 'file' }, { label: 'file' } ] },
			{ label: 'Folder 2', expanded: true, children: [ { label: 'file' }, { label: 'file' } ] },
			{ label: 'Folder 3', children: [ { label: 'file' } ] },
			{ label: 'Folder 4', expanded: true, children: [ { label: 'Folder 4-1', expanded: true, children: [ { label: 'file' } ] } ] }
		]
	})
	.render();


	// Extras tree1

	A.on('click', function() {
		var ROOT = tree1.getNodeById('root1');

		var tempNode = ROOT.createNode({
			label: 'Temp folder',
			children: [
				{ label: 'Temp file' }
			]
		});

		ROOT.appendChild(tempNode);
	},
	'#createNodeROOT-1');

	A.on('click', function() {
		var ROOT = tree1.getNodeById('root1');

		var tempNode = ROOT.createNode({
			label: 'Temp folder',
			children: [
				{ label: 'Temp file' }
			]
		});

		ROOT.insertBefore(tempNode);
	},
	'#insertBeforeROOT-1');

	A.on('click', function() { tree1.expandAll(); }, '#expandAll-1');
	A.on('click', function() { tree1.collapseAll(); }, '#collapseAll-1');

	// Extras tree2

	A.on('click', function() {
		var tempNode = tree2.createNode({
			label: 'Temp folder',
			children: [
				{ label: 'Temp file' }
			]
		});

		tree2.appendChild(tempNode);
	},
	'#createNodeROOT-2');


	A.on('click', function() { tree2.expandAll(); }, '#expandAll-2');
	A.on('click', function() { tree2.collapseAll(); }, '#collapseAll-2');
});

</script>

</body>
</html>