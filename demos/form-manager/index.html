<!DOCTYPE html>

<html>
<head>
	<script src="../../build/yui/yui.js" type="text/javascript"></script>
	<script src="../../build/aui-base/aui-base.js" type="text/javascript"></script>

	<link rel="stylesheet" href="../../build/aui-skins/core/css/main.css" type="text/css" media="screen" />
	<link rel="stylesheet" href="../../build/aui-skins/classic/css/custom.css" type="text/css" media="screen" title="no title" charset="utf-8" />
	<link rel="stylesheet" href="../../build/aui-skins/core/css/form.css" type="text/css" media="screen" title="no title" charset="utf-8" />

	<style type="text/css" media="screen">
		body {
			font-size: 12px;
		}

		#wrapper {
			margin: 20px auto;
			width: 960px;
		}

		/* ---------- Custom form css ---------- */
		.aui-field-content {
			display: block;
			clear: both;
			border-bottom: 1px solid #dfdfdf;
			padding: 7px 0;
		}

		.aui-field-last .aui-field-content {
			display: block;
			clear: both;
			border-bottom-width: 0;
			padding: 7px 0;
		}

		.aui-field-choice .aui-field-content {
			padding: 0 0 10px;
			border-bottom-width: 0;
		}


		.aui-fieldset-legend {
			padding-bottom: 1em;
		}

		.aui-button-row {
			clear: both;
			padding: 5px;
			background: #eee;
			border-top: 1px solid #ccc;
		}

		.aui-button-input {
			background-color: #f5f5f5;
			border: 1px solid #dedede;
			border-top-color: #eee;
			border-left-color: #eee;
			color: #565656;
		}

		.aui-button-input:hover {
			border: 1px solid #c2e1ef;
			background-color: #dff4ff;
			color: #369;
		}

		.aui-button-input:active {
			border: 1px solid #6299c5;
			background-color: #6299c5;
			color: #fff;
		}

		.aui-state-positive .aui-button-input {
			color: #529214;
		}

		.aui-state-positive .aui-button-input:hover {
			background-color: #e6efc2;
			border-color: #c6d880;
		}

		.aui-state-positive .aui-button-input:active {
			background-color: #529214;
			border-color: #529214;
			color: #fff;
		}

		.aui-state-negative .aui-button-input {
			color: #d12f19;
		}

		.aui-state-negative .aui-button-input:hover {
			background-color: #fbe3e4;
			border-color: #fbc2c4;
			color: #d12f19;
		}

		.aui-state-negative .aui-button-input:active {
			background-color: #d12f19;
			border-color: #d12f19;
			color: #fff;
		}
	</style>
</head>

<body>
<div id="wrapper">
	<h1>Alloy - form validation Demo</h1>

	<div id="demo">
		<p id="aui-form-status"></p>
		<form class="aui-form" id="myForm">
			<fieldset>
				<span class="aui-field aui-field-text aui-field-first">
					<span class="aui-field-content">
						<label class="aui-field-label" for="textField">Text <span class="aui-label-required">(Required)</span> </label>
						<span class="aui-message-holder"></span>
						<input class="aui-required aui-field-input aui-field-input-text" id="textField" name="textField" type="text" />
						<span class="aui-field-hint">
							<span>.aui-required</span>
						</span>
					</span>
				</span>

				<span class="aui-field aui-field-text">
					<span class="aui-field-content">
						<label class="aui-field-label" for="textField">Text <span class="aui-label-required">(Not required, 6-10 characters)</span> </label>
						<span class="aui-message-holder"></span>
						<input class="aui-length:[6,10] aui-field-input aui-field-input-text" id="fixedField" name="textField" type="text" />
						<span class="aui-field-hint">
							<span>.aui-length:[6,10]</span>
						</span>
					</span>
				</span>

				<span class="aui-field aui-field-text">
					<span class="aui-field-content">
						<label class="aui-field-label" for="textField">Text <span class="aui-label-required">(Required, max. 10 characters)</span> </label>
						<span class="aui-message-holder"></span>
						<input class="aui-required aui-length:[,10] aui-field-input aui-field-input-text" id="maxTextField" name="textField" type="text" />
						<span class="aui-field-hint">
							<span>.aui-required, .aui-length:[,10]</span>
						</span>
					</span>
				</span>

				<span class="aui-field aui-field-text">
					<span class="aui-field-content">
						<label class="aui-field-label" for="textField">Integer</label>
						<span class="aui-message-holder"></span>
						<input class="aui-integer aui-field-input aui-field-input-text" id="integerField" name="textField" type="text" />
						<span class="aui-field-hint">
							<span>.aui-integer</span>
						</span>
					</span>
				</span>

				<span class="aui-field aui-field-text">
					<span class="aui-field-content">
						<label class="aui-field-label" for="textField">Integer <span class="aui-label-required">(Required, min. 10)</span></label>
						<span class="aui-message-holder"></span>
						<input class="aui-required aui-integer:[10,] aui-field-input aui-field-input-text" id="integer10" name="textField" type="text" />
						<span class="aui-field-hint">
							<span>.aui-required, .aui-integer:[10,]</span>
						</span>
					</span>
				</span>

				<span class="aui-field aui-field-text">
					<span class="aui-field-content">
						<label class="aui-field-label" for="textField">Decimal <span class="aui-label-required">(Required, max. 3,14)</span></label>
						<span class="aui-message-holder"></span>
						<input class="aui-required aui-integer:[10,] aui-field-input aui-field-input-text" id="decimal" name="textField" type="text" />
						<span class="aui-field-hint">
							<span>.aui-decimal:[,3.14]</span>
						</span>
					</span>
				</span>

				<span class="aui-field aui-field-text aui-field-first">
					<span class="aui-field-content">
						<label class="aui-field-label" for="textField">Email <span class="aui-label-required">(Required)</span> </label>
						<span class="aui-message-holder"></span>
						<input class="aui-required aui-email aui-field-input aui-field-input-text" id="emailField" name="emailField" type="text" />
						<span class="aui-field-hint">
							<span>.aui-required, .aui-mail</span>
						</span>
					</span>
				</span>

				<span class="aui-field aui-field-text">
					<span class="aui-field-content">
						<label class="aui-field-label" for="textField">Zip Code (USA) <span class="aui-label-required">(Required)</span> </label>
						<span class="aui-message-holder"></span>
						<input class="aui-required aui-zip aui-field-input aui-field-input-text" id="zipField" name="zipField" type="text" />
						<span class="aui-field-hint">
							<span>.aui-zip (Regular expresion validation: /^[0-9]{5}(?:-[0-9]{4})?$)/</span>
						</span>
					</span>
				</span>

				<span class="aui-field aui-field-text aui-field-password">
					<span class="aui-field-content">
						<label class="aui-field-label" for="passwordField">Password</label>
						<span class="aui-message-holder"></span>
						<input class="aui-field-input aui-field-input-text aui-field-input-password" id="passwordField" name="passwordField" type="password" />
						<span class="aui-field-hint">
							<span>This field and the next one must match</span>
						</span>
					</span>
				</span>

				<span class="aui-field aui-field-text aui-field-password">
					<span class="aui-field-content">
						<label class="aui-field-label" for="passwordField">Repeat Password</label>
						<span class="aui-message-holder"></span>
						<input class="aui-field-input aui-field-input-text aui-field-input-password" id="passwordField2" name="passwordField2" type="password" />
					</span>
				</span>

				<span class="aui-field aui-field-menu aui-field-select">
					<span class="aui-field-content">
						<label class="aui-field-label" for="menuField">Select (Menu)</label>
						<span class="aui-message-holder"></span>
						<select class="aui-field-input aui-field-input-select aui-required" id="menuField" name="menuField">
							<option selected="selected" value="">Select a value</option>
							<option value="1">Menu Selection 1</option>
							<option value="2">Menu Selection 2</option>
							<option value="3">Menu Selection 3</option>
						</select>
						<span class="aui-field-hint">
							<span>.aui-required</span>
						</span>
					</span>
				</span>

				<span class="aui-field aui-field-menu aui-field-select aui-field-select-multiple">
					<span class="aui-field-content">
						<label class="aui-field-label" for="multipleMenuField">Select Multiple (Menu)</label>
						<span class="aui-message-holder"></span>
						<select class="aui-field-input aui-field-input-select aui-field-input-select-multiple aui-required" id="multipleMenuField" name="multipleMenuField" multiple="true">
							<option selected="selected" value="">Select a value</option>
							<option value="1">Menu Selection 1</option>
							<option value="2">Menu Selection 2</option>
							<option value="3">Menu Selection 3</option>
						</select>
						<span class="aui-field-hint">
							<span>.aui-required</span>
						</span>
					</span>
				</span>

				<span class="aui-field aui-field-nested aui-field-last" id="checkboxes">
					<span class="aui-field-content">
						<span class="aui-field-label">
							Checkboxes (Select at least two options)
						</span>

						<span class="aui-field-group">
							<span class="aui-field-group-content">
								<span class="aui-field aui-field-choice aui-field-checkbox aui-field-checked">
									<span class="aui-field-content">
										<span class="aui-message-holder"></span>

										<input checked="true" class="aui-field-input aui-field-input-choice aui-field-input-checkbox" id="checkbox1" name="checkbox1" type="checkbox" value="1" />

										<label class="aui-choice-label" for="checkbox1">
											Checkbox 1 (.aui-field, .aui-field-choice, .aui-field-checkbox)
										</label>
									</span>
								</span>

								<span class="aui-field aui-field-choice aui-field-checkbox">
									<span class="aui-field-content">
										<input class="aui-field-input aui-field-input-choice aui-field-input-checkbox" id="checkbox2" name="checkbox2" type="checkbox" value="1" />
										<label class="aui-choice-label" for="checkbox2">
											Checkbox 2 (.aui-field, .aui-field-choice, .aui-field-checkbox)
										</label>
									</span>
								</span>

								<span class="aui-field aui-field-choice aui-field-checkbox">
									<span class="aui-field-content">
										<input class="aui-field-input aui-field-input-choice aui-field-input-checkbox" id="checkbox3" name="checkbox3" type="checkbox" value="1" />
										<label class="aui-choice-label" for="checkbox3">
											Checkbox 3 (.aui-field, .aui-field-choice, .aui-field-checkbox)
										</label>
									</span>
								</span>
							</span>
						</span>
					</span>
				</span>

				<span class="aui-field aui-field-nested aui-field-last" id="radioButtons">
					<span class="aui-field-content">
						<span class="aui-field-label">
							Radio buttons (Required)
						</span>

						<span class="aui-field-group">
							<span class="aui-field-group-content">
								<span class="aui-field aui-field-choice aui-field-radio">
									<span class="aui-field-content">
										<span class="aui-message-holder"></span>

										<input class="aui-field-input aui-field-input-choice aui-field-input-radio aui-required" id="radio1" name="radio1" type="radio" value="1" />

										<label class="aui-choice-label"  for="radio1">
											Radio 1 (.aui-field, .aui-field-choice, .aui-field-radio)
										</label>
									</span>
								</span>

								<span class="aui-field aui-field-choice aui-field-radio">
									<span class="aui-field-content">
										<input class="aui-field-input aui-field-input-choice aui-field-input-radio aui-required" id="radio2" name="radio1" type="radio" value="2" />

										<label class="aui-choice-label" for="radio2">
											Radio 2 (.aui-field, .aui-field-choice, .aui-field-radio)
										</label>
									</span>
								</span>

								<span class="aui-field aui-field-choice aui-field-radio">
									<span class="aui-field-content">
										<input class="aui-field-input aui-field-input-choice aui-field-input-radio aui-required" id="radio3" name="radio1" type="radio" value="3" />

										<label class="aui-choice-label" for="radio3">
											Radio 3 (.aui-field, .aui-field-choice, .aui-field-radio)
										</label>
									</span>
								</span>
							</span>
						</span>

						<span class="aui-field-hint">
							.aui-field-nested, .aui-field-group
						</span>
					</span>
				</span>
			</fieldset>

			<span class="aui-button-row aui-helper-clearfix">
				<span class="aui-button aui-button-submit aui-state-positive aui-priority-primary">
					<span class="aui-button-content">
						<input class="aui-button-input aui-button-input-submit" id="submit" type="submit" value="Submit" />
					</span>
				</span>

				<span class="aui-button aui-button-reset aui-priority-secondary">
					<span class="aui-button-content">
						<input class="aui-button-input aui-button-input-reset" type="reset" value="Reset" />
					</span>
				</span>

				<span class="aui-button aui-button-cancel aui-state-negative">
					<span class="aui-button-content">
						<input class="aui-button-input aui-button-input-cancel" type="button" value="Cancel" />
					</span>
				</span>
			</span>
		</form>

<script type="text/javascript" charset="utf-8">
AUI().ready(
	'aui-form', 'aui-form-manager',
	function(A) {

		var form = new A.Form(
			{
				contentBox: '#myForm'
			}
		);

		form.render();

		var formManager = new A.FormManager('myForm',
		{
			status_node: '#aui-form-status'
		});

		formManager.prepareForm();
		formManager.initFocus();		// only do this for one form on a page

		// validations

		//Email validation
		var emailField = A.one('.aui-email');

		formManager.setErrorMessages(emailField,
		{
			required: 'Please enter an email address.',
			regex:    'Please enter a valid email address.'
		});

		formManager.setRegex(emailField, /@.+\..+/);

		//USA Zip code validation
		var zipField = A.one('.aui-zip');

		formManager.setErrorMessages(zipField,
		{
			regex: 'Please enter a valid US ZIP Code.'

		});

		formManager.setRegex(zipField, /^[0-9]{5}(?:-[0-9]{4})?$/);

		//Password match validation
		formManager.setFunction('passwordField', function(form)
		{
			if (A.one('#passwordField').get('value') != A.one('#passwordField2').get('value'))
			{
				formManager.displayMessage(A.one('#passwordField'), 'Your password entries did not match.', 'error');
				formManager.displayMessage(A.one('#passwordField2'), '', 'error');
				return false;
			}

			return true;
		});

		//Checkbox validation
		formManager.setFunction('checkbox1', function(form)
			{
			var count = 0;
			A.each([A.one('#checkbox1'), A.one('#checkbox2'), A.one('#checkbox3')], function(b)
			{
				if (b.get('checked')) {
					count++;
				}
			});

			if (count < 2)
			{
				formManager.displayMessage(A.one('#checkbox1'), 'Please select at least two checkboxes.', 'error');
				A.one('#checkboxes').addClass(A.FormManager.row_status_prefix + 'error' );
				return false;
			}
			else {
				A.one('#checkboxes').removeClass(A.FormManager.row_status_prefix + 'error' );
				return true;
			}

			});

		//Radio validation
		formManager.setFunction('radio1', function(form)
			{
				var count = 0;
				A.each(A.all('input[name="radio1"]'), function(b)
				{
					if (b.get('checked')) {
						count++;
					}
				});

				if (count < 1) {
					formManager.displayMessage(A.one('#radio1'), 'Please select an option.', 'error');
					A.one('#radioButtons').addClass(A.FormManager.row_status_prefix + 'error' );
					return false;
				}
				else {
					A.one('#radioButtons').removeClass(A.FormManager.row_status_prefix + 'error' );
					return true;
				}
			});


		A.on('click', function()
		{
			formManager.validateForm();
		},
		'#submit');
		});

</script>

</body>
</html>